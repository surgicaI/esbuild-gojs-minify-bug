var ux={exports:{}};(function(Gn){(function(q){var B,ke={};if(!q.document||q.document.createElement("canvas").getContext===void 0)throw q.console&&q.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function i(){return o.apply(t,r.concat(e.call(arguments)))}function n(){}var e=Array.prototype.slice,r=e.call(arguments,1),o=this;return n.prototype=this.prototype,i.prototype=new n,i}),function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!q.requestAnimationFrame;++n)q.requestAnimationFrame=q[i[n]+"RequestAnimationFrame"],q.cancelAnimationFrame=q[i[n]+"CancelAnimationFrame"]||q[i[n]+"CancelRequestAnimationFrame"];q.requestAnimationFrame||(q.requestAnimationFrame=function(e){var r=new Date().getTime(),o=Math.max(8,16-(r-t)),h=q.setTimeout(function(){e(r+o)},o);return t=r+o,h}),q.cancelAnimationFrame||(q.cancelAnimationFrame=function(e){q.clearTimeout(e)})}(),ke.Debug=null;var s={od:1,Uc:2,ed:4,dd:8,Jn:q.navigator!==void 0&&0<q.navigator.userAgent.indexOf("534.30")&&0<q.navigator.userAgent.indexOf("Android"),xu:q.navigator!==void 0&&0<q.navigator.userAgent.indexOf("MSIE 9.0"),hq:q.navigator!==void 0&&0<q.navigator.userAgent.indexOf("MSIE 10.0"),iq:q.navigator!==void 0&&0<q.navigator.userAgent.indexOf("Trident/7"),VA:q.navigator!==void 0&&0<q.navigator.userAgent.indexOf("Edge/"),zh:q.navigator!==void 0&&q.navigator.platform!==void 0&&0<=q.navigator.platform.toUpperCase().indexOf("MAC"),EF:q.navigator!==void 0&&q.navigator.platform!==void 0&&q.navigator.platform.match(/(iPhone|iPod|iPad)/i)!==null,QE:function(t,i,n){var e=-1;return function(){var r=this,o=arguments;e!==-1&&s.clearTimeout(e),e=s.setTimeout(function(){e=-1,n||t.apply(r,o)},i),n&&!e&&t.apply(r,o)}},setTimeout:function(t,i){return q.setTimeout(t,i)},clearTimeout:function(t){q.clearTimeout(t)},createElement:function(t){return q.document.createElement(t)},k:function(t){throw Error(t)},ma:function(t,i){var n="The object is frozen, so its properties cannot be set: "+t.toString();i!==void 0&&(n+="  to value: "+i),s.k(n)},G:function(t,i,n,e){t instanceof i||(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,i,n))},j:function(t,i,n,e){typeof t!==i&&(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,i,n))},Ad:function(t,i,n){typeof t=="number"&&isFinite(t)||(i=s.getTypeName(i),n!==void 0&&(i+="."+n),s.k(i+" must be a real number type, and not NaN or Infinity: "+t))},ob:function(t,i,n,e){t instanceof Je&&t.Je===i||(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,"a constant of class "+s.pf(i),n))},HK:function(t,i){typeof t=="string"?jg(t)||s.k('Color "'+t+'" is not a valid color string for '+i):t instanceof yt||s.k("Value for "+i+" must be a color string or a Brush, not "+t)},Fd:function(t,i,n,e){i=s.getTypeName(i),n=s.getTypeName(n),e!==void 0&&(n+="."+e),typeof t=="string"?s.k(n+" value is not an instance of "+i+': "'+t+'"'):s.k(n+" value is not an instance of "+i+": "+t)},Fa:function(t,i,n,e){n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.k(n+" is not in the range "+i+": "+t)},nd:function(t){s.k(s.pf(t)+" constructor cannot take any arguments.")},Na:function(t){s.k("Collection was modified during iteration: "+t.toString()+`
  Perhaps you should iterate over a copy of the collection,
  or you could collect items to be removed from the collection after the iteration.`)},Lj:function(t,i){s.k("No property to set for this enum value: "+i+" on "+t.toString())},trace:function(t){q.console&&q.console.log(t)},vx:{},Yt:function(t,i){s.vx[t]!==!0&&(s.vx[t]=!0,q.console&&q.console.log(t+" is deprecated in "+i+", see the GoJS change log for more information."))},Pa:function(t){return typeof t=="object"&&t!==null},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},BI:function(t){return Array.isArray(t)},mA:function(t,i,n){s.isArray(t)||s.Fd(t,"Array or NodeList or HTMLCollection",i,n)},cb:function(t){return t.length},Xl:function(t){return Array.prototype.slice.call(t)},Ba:function(t,i){return t[i]},GE:function(t,i,n){Array.isArray(t)?t[i]=n:s.k("Cannot replace an object in an HTMLCollection or NodeList at "+i)},Ul:function(t,i){if(Array.isArray(t))return t.indexOf(i);for(var n=t.length,e=0;e<n;e++)if(t[e]===i)return e;return-1},sh:function(t,i,n){Array.isArray(t)?i>=t.length?t.push(n):t.splice(i,0,n):s.k("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+i)},Jg:function(t,i){Array.isArray(t)?i>=t.length?t.pop():t.splice(i,1):s.k("Cannot remove an object from an HTMLCollection or NodeList at "+i)},Ny:[],K:function(){var t=s.Ny.pop();return t===void 0?new F:t},wb:function(t,i){var n=s.Ny.pop();return n===void 0?new F(t,i):(n.x=t,n.y=i,n)},v:function(t){s.Ny.push(t)},fC:[],vm:function(){var t=s.fC.pop();return t===void 0?new lt:t},Lk:function(t){s.fC.push(t)},Oy:[],vf:function(){var t=s.Oy.pop();return t===void 0?new O:t},lg:function(t,i,n,e){var r=s.Oy.pop();return r===void 0?new O(t,i,n,e):(r.x=t,r.y=i,r.width=n,r.height=e,r)},Bb:function(t){s.Oy.push(t)},gC:[],Wg:function(){var t=s.gC.pop();return t===void 0?new Qt:t},cf:function(t){s.gC.push(t)},Py:null,s:function(){var t=s.Py;return t!==null?(s.Py=null,t):new u1},q:function(t){t.reset(),s.Py=t},My:[],Za:function(){var t=s.My.pop();return t===void 0?[]:t},ra:function(t){t.length=0,s.My.push(t)},no:Object.freeze([]),Yk:1,oc:function(t){t.__gohashid=s.Yk++},cq:function(t){var i=t.__gohashid;return i===void 0&&(i=s.Yk++,t.__gohashid=i),i},Pd:function(t){return t.__gohashid},ga:function(t,i){i.Zy=t,ke[t]=i},La:function(t,i){function n(){}n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t},oi:function(t){t.fH=!0},defineProperty:function(t,i,n,e,r){s.j(t,"function","Util.defineProperty:classfunc"),s.j(i,"object","Util.defineProperty:propobj"),s.j(n,"function","Util.defineProperty:getter"),s.j(e,"function","Util.defineProperty:setter");for(var o in i){if(i=i[o],n={get:n,set:e,enumerable:!0},r!==void 0)for(var h in r)n[h]=r[h];Object.defineProperty(t.prototype,o,n),r=Object.getOwnPropertyDescriptor(t.prototype,o),i&&r&&Object.defineProperty(t.prototype,i,r);break}},eK:!1,u:function(t,i,n,e){s.j(t,"function","Util.defineReadOnlyProperty:classfunc"),s.j(i,"object","Util.defineReadOnlyProperty:propobj"),s.j(n,"function","Util.defineReadOnlyProperty:getter");for(var r in i){var o=i[r];if(i={get:n,set:function(l){s.k('The property "'+o+'" is read-only and cannot be set to '+l)},enumerable:!0},e!==void 0)for(var h in e)i[h]=e[h];Object.defineProperty(t.prototype,r,i),e=Object.getOwnPropertyDescriptor(t.prototype,r),o&&e&&Object.defineProperty(t.prototype,o,e);break}},be:function(t,i){for(var n in i)i[n]=!0;t.prototype.bH=i},getTypeName:function(t){return t===void 0?"":typeof t=="string"?t:typeof t=="function"?s.pf(t):t===null?"*":""},pf:function(t){if(typeof t=="function"){if(t.Zy)return t.Zy;if(t.name)return t.name;var n=t.toString(),i=n.indexOf("("),n=n.substring(9,i).trim();if(n!=="")return t.Zy=n}else if(s.Pa(t)&&t.constructor)return s.pf(t.constructor);return typeof t},p:function(t,i,n){s.j(t,"function","Util.defineEnumValue:classfunc"),s.j(i,"string","Util.defineEnumValue:name"),s.j(n,"number","Util.defineEnumValue:num"),n=new Je(t,i,n),Object.freeze(n),t[i]=n;var e=t.jv;return e instanceof tt||(e=new tt("string",Je),t.jv=e),e.add(i,n),n},vb:function(t,i){if(!t||!i)return null;var n=void 0;try{typeof i=="function"?n=i(t):typeof t.getAttribute=="function"?(n=t.getAttribute(i),n===null&&(n=void 0)):n=t[i]}catch{}return n},Ma:function(t,i,n){if(t&&i)try{typeof i=="function"?i(t,n):typeof t.setAttribute=="function"?t.setAttribute(i,n):t[i]=n}catch{}},$u:function(t,i){s.j(t,"object","Setting properties requires Objects as arguments"),s.j(i,"object","Setting properties requires Objects as arguments");var n=t instanceof A,e=t instanceof x,r;for(r in i){r===""&&s.k("Setting properties requires non-empty property names");var o=t,h=r;if(n||e){var l=r.indexOf(".");if(0<l){var u=r.substring(0,l);n?o=t.Cd(u):(o=t[u],o==null&&(o=t.Va[u])),s.Pa(o)?h=r.substr(l+1):s.k("Unable to find object named: "+u+" in "+t.toString()+" when trying to set property: "+r)}}if(h[0]!=="_"&&!s.uF(o,h))if(e&&h==="ModelChanged"){t.pH(i[h]);continue}else if(e&&h==="Changed"){t.nn(i[h]);continue}else if(e&&s.uF(t.Va,h))o=t.Va;else if(e&&wg(t,h)){t.ax(h,i[h]);continue}else if(t instanceof V&&h==="Changed"){t.nn(i[h]);continue}else s.k('Trying to set undefined property "'+h+'" on object: '+o.toString());o[h]=i[r],h[0]==="_"&&o instanceof N&&o.mH(h)}},uF:function(t,i){if(t.hasOwnProperty(i))return!0;for(var n=Object.getPrototypeOf(t);n&&n!==Function;){if(n.hasOwnProperty(i))return!0;var e=n.bH;if(e&&e[i])return!0;n=Object.getPrototypeOf(n)}return!1},oJ:function(t){for(var i=[],n=0;256>n;n++)i[n]=n;for(var e=0,r=0,n=0;256>n;n++)e=(e+i[n]+119)%256,r=i[n],i[n]=i[e],i[e]=r;for(var e=n=0,o="",h=0;h<t.length;h++)n=(n+1)%256,e=(e+i[n])%256,r=i[n],i[n]=i[e],i[e]=r,o+=String.fromCharCode(t.charCodeAt(h)^i[(i[n]+i[e])%256]);return o},pI:function(t){for(var i={},n=0;256>n;n++)i["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(n&15)]=String.fromCharCode(n);t.length%2&&(t="0"+t);for(var e=[],r=0,n=0;n<t.length;n+=2)e[r++]=i[t.substr(n,2)];return t=e.join(""),t===""?"0":t},Kg:function(t){return s.oJ(s.pI(t))},xm:null,adym:"7da71ca0ad381e90",vfo:"2be64efdb06e",JK:"@COLOR1",KK:"@COLOR2",RE:!1,Vt:null,Wt:null};s.xm=function(){var t=q.document.createElement("canvas"),i=t.getContext("2d");i[s.Kg("7ca11abfd022028846")]=s.Kg("398c3597c01238");for(var n=["5da73c80a36755dc038e4972187c3cae51fd22","32ab5ff3b26f42dc0ed90f224c2913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],e=1;5>e;e++)i[s.Kg("7ca11abfd7330390")](s.Kg(n[e-1]),10,15*e+0);for(i[s.Kg("7ca11abfd022028846")]=s.Kg("39f046ebb36e4b"),e=1;5>e;e++)i[s.Kg("7ca11abfd7330390")](s.Kg(n[e-1]),10,15*e+0);return(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(s.p=function(r,o){var h=new Je(r,o,2);Object.freeze(h),r[o]=h;var l=r.jv;return l instanceof tt||(l=new tt("string",Je),r.jv=l),l.add(o,h),h}),t}();function Je(t,i,n){s.oc(this),this.uC=t,this.Sb=i,this.jH=n}s.ga("EnumValue",Je),Je.prototype.toString=function(){return s.pf(this.uC)+"."+this.Sb},s.u(Je,{Je:"classType"},function(){return this.uC}),s.u(Je,{name:"name"},function(){return this.Sb}),s.u(Je,{value:"value"},function(){return this.jH});var fo;Je.findName=fo=function(t,i){if(i==null||i==="")return null;s.j(t,"function","findName:classfunc"),s.j(i,"string","EnumValue.findName:name");var n=t.jv;return n instanceof tt?n.ka(i):null};function Ju(){this.sC=[]}Ju.prototype.toString=function(){return this.sC.join("")},Ju.prototype.add=function(t){t!==""&&this.sC.push(t)};function Pi(){}function Zs(t){t===void 0&&(t=42),this.seed=t,this.Iy=48271,this.iv=2147483647,this.eC=this.iv/this.Iy,this.RG=this.iv%this.Iy,this.QG=1/this.iv,this.random()}Zs.prototype.random=function(){var t=this.seed%this.eC*this.Iy-this.seed/this.eC*this.RG;return this.seed=0<t?t:t+this.iv,this.seed*this.QG};function _n(){}s.u(_n,{i:"iterator"},function(){return this}),_n.prototype.reset=_n.prototype.reset=function(){},_n.prototype.next=_n.prototype.next=function(){return!1},_n.prototype.hasNext=function(){return!1},_n.prototype.first=_n.prototype.first=function(){return null},_n.prototype.any=function(){return!1},_n.prototype.all=function(){return!0},_n.prototype.each=function(){return this},_n.prototype.map=function(){return this},_n.prototype.filter=function(){return this},_n.prototype.concat=function(t){return t.i},s.u(_n,{count:"count"},function(){return 0}),_n.prototype.Nf=function(){},_n.prototype.toString=function(){return"EmptyIterator"};var fr=new _n;function Yi(t){this.key=-1,this.value=t}s.be(Yi,{key:!0,value:!0}),s.u(Yi,{i:"iterator"},function(){return this}),Yi.prototype.reset=Yi.prototype.reset=function(){this.key=-1},Yi.prototype.next=Yi.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},Yi.prototype.hasNext=function(){return this.next()},Yi.prototype.first=Yi.prototype.first=function(){return this.key=0,this.value},Yi.prototype.any=function(t){return this.key=-1,t(this.value)},Yi.prototype.all=function(t){return this.key=-1,t(this.value)},Yi.prototype.each=function(t){return this.key=-1,t(this.value),this},Yi.prototype.map=function(t){return new Yi(t(this.value))},Yi.prototype.filter=function(t){return t(this.value)?new Yi(this.value):fr},Yi.prototype.concat=function(t){return new Ti(this,t.i)},s.u(Yi,{count:"count"},function(){return 1}),Yi.prototype.Nf=function(){this.value=null},Yi.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ti(t,i){this.zl=t,this.Al=i,this.kv=!1}s.be(Ti,{key:!0,value:!0}),s.u(Ti,{i:"iterator"},function(){return this}),Ti.prototype.reset=Ti.prototype.reset=function(){this.zl.reset(),this.Al.reset(),this.kv=!1},Ti.prototype.next=Ti.prototype.next=function(){if(!this.kv){var t=this.zl;if(t.next())return this.key=t.key,this.value=t.value,!0;this.kv=!0}return this.kv&&(t=this.Al,t.next())?(this.key=t.key,this.value=t.value,!0):!1},Ti.prototype.hasNext=function(){return this.next()},Ti.prototype.first=Ti.prototype.first=function(){return this.reset(),this.next()?this.value:null},Ti.prototype.any=function(t){return!!(this.zl.any(t)||this.Al.any(t))},Ti.prototype.all=function(t){return!!(this.zl.all(t)&&this.Al.all(t))},Ti.prototype.each=function(t){return this.zl.each(t),this.Al.each(t),this},Ti.prototype.map=function(t){return new Ti(this.zl.map(t),this.Al.map(t))},Ti.prototype.filter=function(t){return new Ti(this.zl.filter(t),this.Al.filter(t))},Ti.prototype.concat=function(t){return new Ti(this,t.i)},s.u(Ti,{count:"count"},function(){return this.zl.count+this.Al.count}),Ti.prototype.Nf=function(){this.value=this.key=null},Ti.prototype.toString=function(){return"ConcatIterator()"};function Di(t){this.Cc=t,this.ai=null,t.Eb=null,this.Ta=t.F,this.Bc=-1}s.be(Di,{key:!0,value:!0}),s.u(Di,{i:"iterator"},function(){return this}),s.defineProperty(Di,{wq:"predicate"},function(){return this.ai},function(t){this.ai=t}),Di.prototype.reset=Di.prototype.reset=function(){var t=this.Cc;t.Eb=null,this.Ta=t.F,this.Bc=-1},Di.prototype.next=Di.prototype.next=function(){var t=this.Cc;if(t.F!==this.Ta){if(0>this.key)return!1;s.Na(t)}var t=t.n,i=t.length,n=++this.Bc,e=this.ai;if(e!==null)for(;n<i;){var r=t[n];if(e(r))return this.key=this.Bc=n,this.value=r,!0;n++}else{if(n<i)return this.key=n,this.value=t[n],!0;this.Nf()}return!1},Di.prototype.hasNext=function(){return this.next()},Di.prototype.first=Di.prototype.first=function(){var t=this.Cc;this.Ta=t.F,this.Bc=0;var t=t.n,i=t.length,n=this.ai;if(n!==null){for(var e=0;e<i;){var r=t[e];if(n(r))return this.key=this.Bc=e,this.value=r;e++}return null}return 0<i?(r=t[0],this.key=0,this.value=r):null},Di.prototype.any=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,r=e.length,o=this.ai,h=0;h<r;h++){var l=e[h];if(o===null||o(l)){if(t(l))return!0;i.F!==n&&s.Na(i)}}return!1},Di.prototype.all=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,r=e.length,o=this.ai,h=0;h<r;h++){var l=e[h];if(o===null||o(l)){if(!t(l))return!1;i.F!==n&&s.Na(i)}}return!0},Di.prototype.each=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,r=e.length,o=this.ai,h=0;h<r;h++){var l=e[h];(o===null||o(l))&&(t(l),i.F!==n&&s.Na(i))}return this},Di.prototype.map=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=[],r=i.n,o=r.length,h=this.ai,l=0;l<o;l++){var u=r[l];(h===null||h(u))&&(e.push(t(u)),i.F!==n&&s.Na(i))}return t=new z,t.n=e,t.Mc(),t.i},Di.prototype.filter=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=[],r=i.n,o=r.length,h=this.ai,l=0;l<o;l++){var u=r[l];(h===null||h(u))&&(t(u)&&e.push(u),i.F!==n&&s.Na(i))}return t=new z(i.na),t.n=e,t.Mc(),t.i},Di.prototype.concat=function(t){return this.Cc.Eb=null,new Ti(this,t.i)},s.u(Di,{count:"count"},function(){var t=this.ai;if(t!==null){for(var i=0,n=this.Cc.n,e=n.length,r=0;r<e;r++)t(n[r])&&i++;return i}return this.Cc.n.length}),Di.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.ai=null,this.Cc.Eb=this},Di.prototype.toString=function(){return"ListIterator@"+this.Bc+"/"+this.Cc.count};function On(t){this.Cc=t,t.Ti=null,this.Ta=t.F,this.Bc=t.n.length}s.be(On,{key:!0,value:!0}),s.u(On,{i:"iterator"},function(){return this}),On.prototype.reset=On.prototype.reset=function(){var t=this.Cc;t.Ti=null,this.Ta=t.F,this.Bc=t.n.length},On.prototype.next=On.prototype.next=function(){var t=this.Cc;if(t.F!==this.Ta){if(0>this.key)return!1;s.Na(t)}var i=--this.Bc;return 0<=i?(this.key=i,this.value=t.n[i],!0):(this.Nf(),!1)},On.prototype.hasNext=function(){return this.next()},On.prototype.first=On.prototype.first=function(){var t=this.Cc;this.Ta=t.F;var i=t.n;return this.Bc=t=i.length-1,0<=t?(i=i[t],this.key=t,this.value=i):null},On.prototype.any=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,r=e.length;for(this.Bc=r,r-=1;0<=r;r--){if(t(e[r]))return!0;i.F!==n&&s.Na(i)}return!1},On.prototype.all=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,r=e.length;for(this.Bc=r,r-=1;0<=r;r--){if(!t(e[r]))return!1;i.F!==n&&s.Na(i)}return!0},On.prototype.each=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,r=e.length;for(this.Bc=r,r-=1;0<=r;r--)t(e[r]),i.F!==n&&s.Na(i);return this},On.prototype.map=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=[],r=i.n,o=r.length;for(this.Bc=o,o-=1;0<=o;o--)e.push(t(r[o])),i.F!==n&&s.Na(i);return t=new z,t.n=e,t.Mc(),t.i},On.prototype.filter=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=[],r=i.n,o=r.length;for(this.Bc=o,o-=1;0<=o;o--){var h=r[o];t(h)&&e.push(h),i.F!==n&&s.Na(i)}return t=new z(i.na),t.n=e,t.Mc(),t.i},On.prototype.concat=function(t){return this.Cc.Ti=null,new Ti(this,t.i)},s.u(On,{count:"count"},function(){return this.Cc.n.length}),On.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.Cc.Ti=this},On.prototype.toString=function(){return"ListIteratorBackwards("+this.Bc+"/"+this.Cc.count+")"};function z(t){s.oc(this),this.P=!1,this.n=[],this.F=0,this.Ti=this.Eb=null,t==null?this.na=null:typeof t=="string"?t==="object"||t==="string"||t==="number"||t==="boolean"||t==="function"?this.na=t:s.Fa(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):typeof t=="function"?this.na=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:s.Fa(t,"null, a primitive type name, or a class type","List constructor: type")}s.ga("List",z),z.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},z.prototype.freeze=z.prototype.freeze=function(){return this.P=!0,this},z.prototype.thaw=z.prototype.Qa=function(){return this.P=!1,this},z.prototype.toString=function(){return"List("+s.getTypeName(this.na)+")#"+s.Pd(this)},z.prototype.add=z.prototype.add=function(t){t!==null&&(this.P&&s.ma(this,t),this.n.push(t),this.Mc())},z.prototype.push=z.prototype.push=function(t){this.add(t)},z.prototype.addAll=z.prototype.Pc=function(t){if(t===null)return this;this.P&&s.ma(this);var i=this.n;if(s.isArray(t))for(var n=s.cb(t),e=0;e<n;e++){var r=s.Ba(t,e);i.push(r)}else for(t=t.i;t.next();)r=t.value,i.push(r);return this.Mc(),this},z.prototype.clear=z.prototype.clear=function(){this.P&&s.ma(this),this.n.length=0,this.Mc()},z.prototype.contains=z.prototype.contains=function(t){return t===null?!1:this.n.indexOf(t)!==-1},z.prototype.has=z.prototype.has=function(t){return this.contains(t)},z.prototype.indexOf=z.prototype.indexOf=function(t){return t===null?-1:this.n.indexOf(t)},z.prototype.elt=z.prototype.fa=function(t){var i=this.n;return(0>t||t>=i.length)&&s.Fa(t,"0 <= i < length",z,"elt:i"),i[t]},z.prototype.get=z.prototype.get=function(t){return this.fa(t)},z.prototype.setElt=z.prototype.kg=function(t,i){var n=this.n;(0>t||t>=n.length)&&s.Fa(t,"0 <= i < length",z,"setElt:i"),this.P&&s.ma(this,t),n[t]=i},z.prototype.set=z.prototype.set=function(t,i){this.kg(t,i)},z.prototype.first=z.prototype.first=function(){var t=this.n;return t.length===0?null:t[0]},z.prototype.last=z.prototype.ie=function(){var t=this.n,i=t.length;return 0<i?t[i-1]:null},z.prototype.pop=z.prototype.pop=function(){this.P&&s.ma(this);var t=this.n;return 0<t.length?t.pop():null},z.prototype.any=function(t){for(var i=this.n,n=this.F,e=i.length,r=0;r<e;r++){if(t(i[r]))return!0;this.F!==n&&s.Na(this)}return!1},z.prototype.all=function(t){for(var i=this.n,n=this.F,e=i.length,r=0;r<e;r++){if(!t(i[r]))return!1;this.F!==n&&s.Na(this)}return!0},z.prototype.each=function(t){for(var i=this.n,n=this.F,e=i.length,r=0;r<e;r++)t(i[r]),this.F!==n&&s.Na(this);return this},z.prototype.map=function(t){for(var i=new z,n=[],e=this.n,r=this.F,o=e.length,h=0;h<o;h++)n.push(t(e[h])),this.F!==r&&s.Na(this);return i.n=n,i.Mc(),i},z.prototype.filter=function(t){for(var i=new z(this.na),n=[],e=this.n,r=this.F,o=e.length,h=0;h<o;h++){var l=e[h];t(l)&&n.push(l),this.F!==r&&s.Na(this)}return i.n=n,i.Mc(),i},z.prototype.concat=function(t){return this.copy().Pc(t)},z.prototype.insertAt=z.prototype.Rd=function(t,i){0>t&&s.Fa(t,">= 0",z,"insertAt:i"),this.P&&s.ma(this,t);var n=this.n;return t>=n.length?n.push(i):n.splice(t,0,i),this.Mc(),!0},z.prototype.remove=z.prototype.delete=z.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=this.n;return t=i.indexOf(t),t===-1?!1:(t===i.length-1?i.pop():i.splice(t,1),this.Mc(),!0)},z.prototype.removeAt=z.prototype.cd=function(t){var i=this.n;(0>t||t>=i.length)&&s.Fa(t,"0 <= i < length",z,"removeAt:i"),this.P&&s.ma(this,t),t===i.length-1?i.pop():i.splice(t,1),this.Mc()},z.prototype.removeRange=z.prototype.removeRange=function(t,i){var n=this.n,e=n.length;if(0>t)t=0;else if(t>=e)return this;if(0>i)return this;if(i>=e&&(i=e-1),t>i)return this;this.P&&s.ma(this);for(var r=t,o=i+1;o<e;)n[r++]=n[o++];return n.length=e-(i-t+1),this.Mc(),this},z.prototype.copy=function(){var t=new z(this.na),i=this.n;return 0<i.length&&(t.n=Array.prototype.slice.call(i)),t},z.prototype.toArray=z.prototype.yc=function(){for(var t=this.n,i=this.count,n=Array(i),e=0;e<i;e++)n[e]=t[e];return n},z.prototype.toSet=z.prototype.GG=function(){for(var t=new R(this.na),i=this.n,n=this.count,e=0;e<n;e++)t.add(i[e]);return t},z.prototype.sort=z.prototype.sort=function(t){return this.P&&s.ma(this),this.n.sort(t),this.Mc(),this},z.prototype.sortRange=z.prototype.Jq=function(t,i,n){var e=this.n,r=e.length;i===void 0&&(i=0),n===void 0&&(n=r),this.P&&s.ma(this);var o=n-i;if(1>=o)return this;if((0>i||i>=r-1)&&s.Fa(i,"0 <= from < length",z,"sortRange:from"),o===2)return n=e[i],r=e[i+1],0<t(n,r)&&(e[i]=r,e[i+1]=n,this.Mc()),this;if(i===0)if(n>=r)e.sort(t);else for(o=e.slice(0,n),o.sort(t),t=0;t<n;t++)e[t]=o[t];else if(n>=r)for(o=e.slice(i),o.sort(t),t=i;t<r;t++)e[t]=o[t-i];else for(o=e.slice(i,n),o.sort(t),t=i;t<n;t++)e[t]=o[t-i];return this.Mc(),this},z.prototype.reverse=z.prototype.reverse=function(){return this.P&&s.ma(this),this.n.reverse(),this.Mc(),this},s.u(z,{count:"count"},function(){return this.n.length}),s.u(z,{size:"size"},function(){return this.n.length}),s.u(z,{length:"length"},function(){return this.n.length}),s.u(z,{i:"iterator"},function(){if(0>=this.n.length)return fr;var t=this.Eb;return t!==null?(t.reset(),t):new Di(this)}),s.u(z,{Mn:"iteratorBackwards"},function(){if(0>=this.n.length)return fr;var t=this.Ti;return t!==null?(t.reset(),t):new On(this)});function Vn(t){this.ci=t,t.Eb=null,this.Ta=t.F,this.Wa=null}s.be(Vn,{key:!0,value:!0}),s.u(Vn,{i:"iterator"},function(){return this}),Vn.prototype.reset=Vn.prototype.reset=function(){var t=this.ci;t.Eb=null,this.Ta=t.F,this.Wa=null},Vn.prototype.next=Vn.prototype.next=function(){var t=this.ci;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=i.value,this.key=i.key,!0):(this.Nf(),!1)},Vn.prototype.hasNext=function(){return this.next()},Vn.prototype.first=Vn.prototype.first=function(){var t=this.ci;if(this.Ta=t.F,t=t.Ea,t!==null){this.Wa=t;var i=t.value;return this.key=t.key,this.value=i}return null},Vn.prototype.any=function(t){var i=this.ci;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.value))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Vn.prototype.all=function(t){var i=this.ci;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.value))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Vn.prototype.each=function(t){var i=this.ci;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.value),i.F!==n&&s.Na(i),e=e.$a;return this},Vn.prototype.map=function(t){var i=this.ci;i.Eb=null;for(var n=new z,e=i.F,r=i.Ea;r!==null;)n.add(t(r.value)),i.F!==e&&s.Na(i),r=r.$a;return n.i},Vn.prototype.filter=function(t){var i=this.ci;i.Eb=null;for(var n=new z(i.na),e=i.F,r=i.Ea;r!==null;){var o=r.value;t(o)&&n.add(o),i.F!==e&&s.Na(i),r=r.$a}return n.i},Vn.prototype.concat=function(t){return this.ci.Eb=null,new Ti(this,t.i)},s.u(Vn,{count:"count"},function(){return this.ci.rd}),Vn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.ci.Eb=this},Vn.prototype.toString=function(){return this.Wa!==null?"SetIterator@"+this.Wa.value:"SetIterator"};function R(t){s.oc(this),this.P=!1,t==null?this.na=null:typeof t=="string"?t==="object"||t==="string"||t==="number"?this.na=t:s.Fa(t,"the string 'object', 'number' or 'string'","Set constructor: type"):typeof t=="function"?this.na=t===Object?"object":t===String?"string":t===Number?"number":t:s.Fa(t,"null, a primitive type name, or a class type","Set constructor: type"),this.sd={},this.rd=0,this.Eb=null,this.F=0,this.Vh=this.Ea=null}s.ga("Set",R),R.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},R.prototype.freeze=R.prototype.freeze=function(){return this.P=!0,this},R.prototype.thaw=R.prototype.Qa=function(){return this.P=!1,this},R.prototype.toString=function(){return"Set("+s.getTypeName(this.na)+")#"+s.Pd(this)},R.prototype.add=R.prototype.add=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;return s.Pa(t)&&(i=s.cq(t)),this.sd[i]===void 0?(this.rd++,t=new Fl(t,t),this.sd[i]=t,i=this.Vh,i===null?this.Ea=t:(t.mp=i,i.$a=t),this.Vh=t,this.Mc(),!0):!1},R.prototype.addAll=R.prototype.Pc=function(t){if(t===null)return this;if(this.P&&s.ma(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.add(s.Ba(t,n));else for(t=t.i;t.next();)this.add(t.value);return this},R.prototype.contains=R.prototype.contains=function(t){if(t===null)return!1;var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?!1:this.sd[i]!==void 0},R.prototype.has=R.prototype.has=function(t){return this.contains(t)},R.prototype.containsAll=function(t){if(t===null)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},R.prototype.containsAny=function(t){if(t===null)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},R.prototype.first=R.prototype.first=function(){var t=this.Ea;return t===null?null:t.value},R.prototype.any=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(t(n.value))return!0;this.F!==i&&s.Na(this),n=n.$a}return!1},R.prototype.all=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(!t(n.value))return!1;this.F!==i&&s.Na(this),n=n.$a}return!0},R.prototype.each=function(t){for(var i=this.F,n=this.Ea;n!==null;)t(n.value),this.F!==i&&s.Na(this),n=n.$a;return this},R.prototype.map=function(t){for(var i=new R,n=this.F,e=this.Ea;e!==null;)i.add(t(e.value)),this.F!==n&&s.Na(this),e=e.$a;return i},R.prototype.filter=function(t){for(var i=new R(this.na),n=this.F,e=this.Ea;e!==null;){var r=e.value;t(r)&&i.add(r),this.F!==n&&s.Na(this),e=e.$a}return i},R.prototype.concat=function(t){return this.copy().Pc(t)},R.prototype.remove=R.prototype.delete=R.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;if(s.Pa(t)&&(i=s.Pd(t),i===void 0)||(t=this.sd[i],t===void 0))return!1;var n=t.$a,e=t.mp;return n!==null&&(n.mp=e),e!==null&&(e.$a=n),this.Ea===t&&(this.Ea=n),this.Vh===t&&(this.Vh=e),delete this.sd[i],this.rd--,this.Mc(),!0},R.prototype.removeAll=R.prototype.oy=function(t){if(t===null)return this;if(this.P&&s.ma(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.remove(s.Ba(t,n));else for(t=t.i;t.next();)this.remove(t.value);return this},R.prototype.retainAll=function(t){if(t===null||this.count===0)return this;this.P&&s.ma(this);var i=new R(this.na);i.Pc(t),t=[];for(var n=this.i;n.next();){var e=n.value;i.contains(e)||t.push(e)}return this.oy(t),this},R.prototype.clear=R.prototype.clear=function(){this.P&&s.ma(this),this.sd={},this.rd=0,this.Eb!==null&&this.Eb.reset(),this.Vh=this.Ea=null,this.Mc()},R.prototype.copy=function(){var t=new R(this.na),i=this.sd,n;for(n in i)t.add(i[n].value);return t},R.prototype.toArray=R.prototype.yc=function(){var t=Array(this.rd),i=this.sd,n=0,e;for(e in i)t[n]=i[e].value,n++;return t},R.prototype.toList=function(){var t=new z(this.na),i=this.sd,n;for(n in i)t.add(i[n].value);return t},s.u(R,{count:"count"},function(){return this.rd}),s.u(R,{size:"size"},function(){return this.rd}),s.u(R,{i:"iterator"},function(){if(0>=this.rd)return fr;var t=this.Eb;return t!==null?(t.reset(),t):new Vn(this)});function Fn(t){this.Ga=t,this.Ta=t.F,this.Wa=null}s.be(Fn,{key:!0,value:!0}),s.u(Fn,{i:"iterator"},function(){return this}),Fn.prototype.reset=Fn.prototype.reset=function(){this.Ta=this.Ga.F,this.Wa=null},Fn.prototype.next=Fn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=this.key=t=i.key,!0):(this.Nf(),!1)},Fn.prototype.hasNext=function(){return this.next()},Fn.prototype.first=Fn.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,t=t.Ea,t!==null?(this.Wa=t,this.value=this.key=t=t.key):null},Fn.prototype.any=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.key))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Fn.prototype.all=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.key))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Fn.prototype.each=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.key),i.F!==n&&s.Na(i),e=e.$a;return this},Fn.prototype.map=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=new z,r=i.Ea;r!==null;)e.add(t(r.key)),i.F!==n&&s.Na(i),r=r.$a;return e.i},Fn.prototype.filter=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=new z(i.Uh),r=i.Ea;r!==null;){var o=r.key;t(o)&&e.add(o),i.F!==n&&s.Na(i),r=r.$a}return e.i},Fn.prototype.concat=function(t){return new Ti(this,t.i)},s.u(Fn,{count:"count"},function(){return this.Ga.rd}),Fn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1},Fn.prototype.toString=function(){return this.Wa!==null?"MapKeySetIterator@"+this.Wa.value:"MapKeySetIterator"};function $t(t){s.oc(this),this.P=!0,this.Ga=t}s.La($t,R),$t.prototype.freeze=function(){return this},$t.prototype.Qa=function(){return this},$t.prototype.toString=function(){return"MapKeySet("+this.Ga.toString()+")"},$t.prototype.add=$t.prototype.add=function(){return s.k("This Set is read-only: "+this.toString()),!1},$t.prototype.set=$t.prototype.set=function(){return s.k("This Set is read-only: "+this.toString()),!1},$t.prototype.contains=$t.prototype.contains=function(t){return this.Ga.contains(t)},$t.prototype.has=$t.prototype.has=function(t){return this.contains(t)},$t.prototype.remove=$t.prototype.delete=$t.prototype.remove=function(){return s.k("This Set is read-only: "+this.toString()),!1},$t.prototype.clear=$t.prototype.clear=function(){s.k("This Set is read-only: "+this.toString())},$t.prototype.first=$t.prototype.first=function(){var t=this.Ga.Ea;return t!==null?t.key:null},$t.prototype.any=function(t){for(var i=this.Ga.Ea;i!==null;){if(t(i.key))return!0;i=i.$a}return!1},$t.prototype.all=function(t){for(var i=this.Ga.Ea;i!==null;){if(!t(i.key))return!1;i=i.$a}return!0},$t.prototype.each=function(t){for(var i=this.Ga.Ea;i!==null;)t(i.key),i=i.$a;return this},$t.prototype.map=function(t){for(var i=new R,n=this.Ga.Ea;n!==null;)i.add(t(n.key)),n=n.$a;return i},$t.prototype.filter=function(t){for(var i=new R(this.Ga.Uh),n=this.Ga.Ea;n!==null;){var e=n.key;t(e)&&i.add(e),n=n.$a}return i},$t.prototype.concat=function(t){return this.GG().Pc(t)},$t.prototype.copy=function(){return new $t(this.Ga)},$t.prototype.toSet=$t.prototype.GG=function(){var t=new R(this.Ga.Uh),i=this.Ga.sd,n;for(n in i)t.add(i[n].key);return t},$t.prototype.toArray=$t.prototype.yc=function(){var t=this.Ga.sd,i=Array(this.Ga.rd),n=0,e;for(e in t)i[n]=t[e].key,n++;return i},$t.prototype.toList=function(){var t=new z(this.Ga.Uh),i=this.Ga.sd,n;for(n in i)t.add(i[n].key);return t},s.u($t,{count:"count"},function(){return this.Ga.rd}),s.u($t,{size:"size"},function(){return this.Ga.rd}),s.u($t,{i:"iterator"},function(){return 0>=this.Ga.rd?fr:new Fn(this.Ga)});function Hn(t){this.Ga=t,t.hh=null,this.Ta=t.F,this.Wa=null}s.be(Hn,{key:!0,value:!0}),s.u(Hn,{i:"iterator"},function(){return this}),Hn.prototype.reset=Hn.prototype.reset=function(){var t=this.Ga;t.hh=null,this.Ta=t.F,this.Wa=null},Hn.prototype.next=Hn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=i.value,this.key=i.key,!0):(this.Nf(),!1)},Hn.prototype.hasNext=function(){return this.next()},Hn.prototype.first=Hn.prototype.first=function(){var t=this.Ga;if(this.Ta=t.F,t=t.Ea,t!==null){this.Wa=t;var i=t.value;return this.key=t.key,this.value=i}return null},Hn.prototype.any=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.value))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Hn.prototype.all=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.value))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Hn.prototype.each=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.value),i.F!==n&&s.Na(i),e=e.$a;return this},Hn.prototype.map=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=new z,r=i.Ea;r!==null;)e.add(t(r.value)),i.F!==n&&s.Na(i),r=r.$a;return e.i},Hn.prototype.filter=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=new z(i.Uh),r=i.Ea;r!==null;){var o=r.value;t(o)&&e.add(o),i.F!==n&&s.Na(i),r=r.$a}return e.i},Hn.prototype.concat=function(t){return this.Ga.hh=null,new Ti(this,t.i)},s.u(Hn,{count:"count"},function(){return this.Ga.rd}),Hn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.hh=this},Hn.prototype.toString=function(){return this.Wa!==null?"MapValueSetIterator@"+this.Wa.value:"MapValueSetIterator"};function Fl(t,i){this.key=t,this.value=i,this.mp=this.$a=null}s.be(Fl,{key:!0,value:!0}),Fl.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Kn(t){this.Ga=t,t.Eb=null,this.Ta=t.F,this.Wa=null}s.be(Kn,{key:!0,value:!0}),s.u(Kn,{i:"iterator"},function(){return this}),Kn.prototype.reset=Kn.prototype.reset=function(){var t=this.Ga;t.Eb=null,this.Ta=t.F,this.Wa=null},Kn.prototype.next=Kn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.key=i.key,this.value=i.value,!0):(this.Nf(),!1)},Kn.prototype.hasNext=function(){return this.next()},Kn.prototype.first=Kn.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,t=t.Ea,t!==null?(this.Wa=t,this.key=t.key,this.value=t.value,t):null},Kn.prototype.any=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Kn.prototype.all=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Kn.prototype.each=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e),i.F!==n&&s.Na(i),e=e.$a;return this},Kn.prototype.map=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=new z,r=i.Ea;r!==null;)e.add(t(r)),i.F!==n&&s.Na(i),r=r.$a;return e.i},Kn.prototype.filter=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=new z,r=i.Ea;r!==null;)t(r)&&e.add(r),i.F!==n&&s.Na(i),r=r.$a;return e.i},Kn.prototype.concat=function(t){return this.Ga.Eb=null,new Ti(this,t.i)},s.u(Kn,{count:"count"},function(){return this.Ga.rd}),Kn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.Eb=this},Kn.prototype.toString=function(){return this.Wa!==null?"MapIterator@"+this.Wa:"MapIterator"};function tt(t,i){s.oc(this),this.P=!1,t==null?this.Uh=null:typeof t=="string"?t==="object"||t==="string"||t==="number"?this.Uh=t:s.Fa(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):typeof t=="function"?this.Uh=t===Object?"object":t===String?"string":t===Number?"number":t:s.Fa(t,"null, a primitive type name, or a class type","Map constructor: keytype"),i==null?this.Jt=null:typeof i=="string"?i==="object"||i==="string"||i==="boolean"||i==="number"||i==="function"?this.Jt=i:s.Fa(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):typeof i=="function"?this.Jt=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:s.Fa(i,"null, a primitive type name, or a class type","Map constructor: valtype"),this.sd={},this.rd=0,this.hh=this.Eb=null,this.F=0,this.Vh=this.Ea=null}s.ga("Map",tt),tt.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},tt.prototype.freeze=tt.prototype.freeze=function(){return this.P=!0,this},tt.prototype.thaw=tt.prototype.Qa=function(){return this.P=!1,this},tt.prototype.toString=function(){return"Map("+s.getTypeName(this.Uh)+","+s.getTypeName(this.Jt)+")#"+s.Pd(this)},tt.prototype.add=tt.prototype.add=function(t,i){this.P&&s.ma(this,t);var n=t;s.Pa(t)&&(n=s.cq(t));var e=this.sd[n];return e===void 0?(this.rd++,e=new Fl(t,i),this.sd[n]=e,n=this.Vh,n===null?this.Ea=e:(e.mp=n,n.$a=e),this.Vh=e,this.Mc(),!0):(e.value=i,!1)},tt.prototype.set=tt.prototype.set=function(t,i){return this.add(t,i)},tt.prototype.addAll=tt.prototype.Pc=function(t){if(t===null)return this;if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);this.add(e.key,e.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},tt.prototype.first=tt.prototype.first=function(){return this.Ea},tt.prototype.any=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(t(n))return!0;this.F!==i&&s.Na(this),n=n.$a}return!1},tt.prototype.all=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(!t(n))return!1;this.F!==i&&s.Na(this),n=n.$a}return!0},tt.prototype.each=function(t){for(var i=this.F,n=this.Ea;n!==null;)t(n),this.F!==i&&s.Na(this),n=n.$a;return this},tt.prototype.map=function(t){for(var i=new tt(this.Uh),n=this.F,e=this.Ea;e!==null;)i.add(e.key,t(e)),this.F!==n&&s.Na(this),e=e.$a;return i},tt.prototype.filter=function(t){for(var i=new tt(this.Uh,this.Jt),n=this.F,e=this.Ea;e!==null;)t(e)&&i.add(e.key,e.value),this.F!==n&&s.Na(this),e=e.$a;return i},tt.prototype.concat=function(t){return this.copy().Pc(t)},tt.prototype.contains=tt.prototype.contains=function(t){var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?!1:this.sd[i]!==void 0},tt.prototype.has=tt.prototype.has=function(t){return this.contains(t)},tt.prototype.getValue=tt.prototype.ka=function(t){var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?null:(t=this.sd[i],t===void 0?null:t.value)},tt.prototype.get=tt.prototype.get=function(t){return this.ka(t)},tt.prototype.remove=tt.prototype.delete=tt.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;if(s.Pa(t)&&(i=s.Pd(t),i===void 0)||(t=this.sd[i],t===void 0))return!1;var n=t.$a,e=t.mp;return n!==null&&(n.mp=e),e!==null&&(e.$a=n),this.Ea===t&&(this.Ea=n),this.Vh===t&&(this.Vh=e),delete this.sd[i],this.rd--,this.Mc(),!0},tt.prototype.clear=tt.prototype.clear=function(){this.P&&s.ma(this),this.sd={},this.rd=0,this.Eb!==null&&this.Eb.reset(),this.hh!==null&&this.hh.reset(),this.Vh=this.Ea=null,this.Mc()},tt.prototype.copy=function(){var t=new tt(this.Uh,this.Jt),i=this.sd,n;for(n in i){var e=i[n];t.add(e.key,e.value)}return t},tt.prototype.toArray=tt.prototype.yc=function(){var t=this.sd,i=Array(this.rd),n=0,e;for(e in t){var r=t[e];i[n]=new Fl(r.key,r.value),n++}return i},tt.prototype.toKeySet=tt.prototype.Mj=function(){return new $t(this)},s.u(tt,{count:"count"},function(){return this.rd}),s.u(tt,{size:"size"},function(){return this.rd}),s.u(tt,{i:"iterator"},function(){if(0>=this.count)return fr;var t=this.Eb;return t!==null?(t.reset(),t):new Kn(this)}),s.u(tt,{LF:"iteratorKeys"},function(){return 0>=this.count?fr:new Fn(this)}),s.u(tt,{MF:"iteratorValues"},function(){if(0>=this.count)return fr;var t=this.hh;return t!==null?(t.reset(),t):new Hn(this)});function F(t,i){t===void 0?this.y=this.x=0:(this.x=t,this.y=i)}s.ga("Point",F),s.oi(F),s.be(F,{x:!0,y:!0}),F.prototype.assign=function(t){this.x=t.x,this.y=t.y},F.prototype.setTo=F.prototype.m=function(t,i){return this.x=t,this.y=i,this},F.prototype.set=F.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},F.prototype.copy=function(){var t=new F;return t.x=this.x,t.y=this.y,t},F.prototype.Ha=function(){return Object.freeze(this),this},F.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},F.prototype.freeze=function(){return this},F.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},F.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var r=0;t[i]==="";)i++;return(e=t[i++])&&(r=parseFloat(e)),new F(n,r)}return new F},F.stringify=function(t){return t.x.toString()+" "+t.y.toString()},F.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},F.prototype.equals=F.prototype.L=function(t){return t instanceof F?this.x===t.x&&this.y===t.y:!1},F.prototype.equalTo=F.prototype.Bx=function(t,i){return this.x===t&&this.y===i},F.prototype.equalsApprox=F.prototype.Qc=function(t){return $(this.x,t.x)&&$(this.y,t.y)},F.prototype.add=F.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},F.prototype.subtract=F.prototype.ui=function(t){return this.x-=t.x,this.y-=t.y,this},F.prototype.offset=F.prototype.offset=function(t,i){return this.x+=t,this.y+=i,this},F.prototype.rotate=F.prototype.rotate=function(t){if(t===0)return this;var i=this.x,n=this.y;if(i===0&&n===0)return this;var e=0,r=0;return 360<=t?t-=360:0>t&&(t+=360),t===90?(e=0,r=1):t===180?(e=-1,r=0):t===270?(e=0,r=-1):(t=t*Math.PI/180,e=Math.cos(t),r=Math.sin(t)),this.x=e*i-r*n,this.y=r*i+e*n,this},F.prototype.scale=F.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},F.prototype.distanceSquaredPoint=F.prototype.Cf=function(t){var i=t.x-this.x;return t=t.y-this.y,i*i+t*t},F.prototype.distanceSquared=F.prototype.Xf=function(t,i){var n=t-this.x,e=i-this.y;return n*n+e*e},F.prototype.normalize=F.prototype.normalize=function(){var t=this.x,i=this.y,n=Math.sqrt(t*t+i*i);return 0<n&&(this.x=t/n,this.y=i/n),this},F.prototype.directionPoint=F.prototype.Qb=function(t){return Lv(t.x-this.x,t.y-this.y)},F.prototype.direction=F.prototype.direction=function(t,i){return Lv(t-this.x,i-this.y)};function Lv(t,i){if(t===0)return 0<i?90:0>i?270:0;if(i===0)return 0<t?0:180;if(isNaN(t)||isNaN(i))return 0;var n=180*Math.atan(Math.abs(i/t))/Math.PI;return 0>t?n=0>i?n+180:180-n:0>i&&(n=360-n),n}F.prototype.projectOntoLineSegment=function(t,i,n,e){return Ws(t,i,n,e,this.x,this.y,this),this},F.prototype.projectOntoLineSegmentPoint=function(t,i){return Ws(t.x,t.y,i.x,i.y,this.x,this.y,this),this},F.prototype.snapToGrid=function(t,i,n,e){return ef(this.x,this.y,t,i,n,e,this),this},F.prototype.snapToGridPoint=function(t,i){return ef(this.x,this.y,t.x,t.y,i.width,i.height,this),this},F.prototype.setRectSpot=F.prototype.bo=function(t,i){return this.x=t.x+i.x*t.width+i.offsetX,this.y=t.y+i.y*t.height+i.offsetY,this},F.prototype.setSpot=F.prototype.bv=function(t,i,n,e,r){return this.x=t+r.x*n+r.offsetX,this.y=i+r.y*e+r.offsetY,this},F.prototype.transform=function(t){return t.nb(this),this};function pn(t,i){return i.xh(t),t}var Tn;F.distanceLineSegmentSquared=Tn=function(t,i,n,e,r,o){var h=r-n,l=o-e,u=h*h+l*l;n-=t,e-=i;var f=-n*h-e*l;return 0>=f||f>=u?(h=r-t,l=o-i,Math.min(n*n+e*e,h*h+l*l)):(t=h*e-l*n,t*t/u)};var Ho;F.distanceSquared=Ho=function(t,i,n,e){return t=n-t,i=e-i,t*t+i*i};var Av;F.direction=Av=function(t,i,n,e){return t=n-t,i=e-i,t===0?0<i?90:0>i?270:0:i===0?0<t?0:180:isNaN(t)||isNaN(i)?0:(e=180*Math.atan(Math.abs(i/t))/Math.PI,0>t?e=0>i?e+180:180-e:0>i&&(e=360-e),e)},F.prototype.isReal=F.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)};function lt(t,i){t===void 0?this.height=this.width=0:(this.width=t,this.height=i)}s.ga("Size",lt),s.oi(lt),s.be(lt,{width:!0,height:!0}),lt.prototype.assign=function(t){this.width=t.width,this.height=t.height},lt.prototype.setTo=lt.prototype.m=function(t,i){return this.width=t,this.height=i,this},lt.prototype.set=lt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},lt.prototype.copy=function(){var t=new lt;return t.width=this.width,t.height=this.height,t},lt.prototype.Ha=function(){return Object.freeze(this),this},lt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},lt.prototype.freeze=function(){return this},lt.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},lt.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var r=0;t[i]==="";)i++;return(e=t[i++])&&(r=parseFloat(e)),new lt(n,r)}return new lt},lt.stringify=function(t){return t.width.toString()+" "+t.height.toString()},lt.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},lt.prototype.equals=lt.prototype.L=function(t){return t instanceof lt?this.width===t.width&&this.height===t.height:!1},lt.prototype.equalTo=lt.prototype.Bx=function(t,i){return this.width===t&&this.height===i},lt.prototype.equalsApprox=lt.prototype.Qc=function(t){return $(this.width,t.width)&&$(this.height,t.height)},lt.prototype.isReal=lt.prototype.H=function(){return isFinite(this.width)&&isFinite(this.height)};function O(t,i,n,e){t===void 0?this.height=this.width=this.y=this.x=0:t instanceof F?i instanceof F?(this.x=Math.min(t.x,i.x),this.y=Math.min(t.y,i.y),this.width=Math.abs(t.x-i.x),this.height=Math.abs(t.y-i.y)):i instanceof lt?(this.x=t.x,this.y=t.y,this.width=i.width,this.height=i.height):s.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=i,this.width=n,this.height=e)}s.ga("Rect",O),s.oi(O),s.be(O,{x:!0,y:!0,width:!0,height:!0}),O.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height};function Ko(t,i,n){t.width=i,t.height=n}O.prototype.setTo=O.prototype.m=function(t,i,n,e){return this.x=t,this.y=i,this.width=n,this.height=e,this},O.prototype.set=O.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},O.prototype.setPoint=O.prototype.Vg=function(t){return this.x=t.x,this.y=t.y,this},O.prototype.setSize=function(t){return this.width=t.width,this.height=t.height,this},O.prototype.copy=function(){var t=new O;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},O.prototype.Ha=function(){return Object.freeze(this),this},O.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},O.prototype.freeze=function(){return this},O.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},O.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var r=0;t[i]==="";)i++;(e=t[i++])&&(r=parseFloat(e));for(var o=0;t[i]==="";)i++;(e=t[i++])&&(o=parseFloat(e));for(var h=0;t[i]==="";)i++;return(e=t[i++])&&(h=parseFloat(e)),new O(n,r,o,h)}return new O},O.stringify=function(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()},O.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},O.prototype.equals=O.prototype.L=function(t){return t instanceof O?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},O.prototype.equalTo=O.prototype.Bx=function(t,i,n,e){return this.x===t&&this.y===i&&this.width===n&&this.height===e},O.prototype.equalsApprox=O.prototype.Qc=function(t){return $(this.x,t.x)&&$(this.y,t.y)&&$(this.width,t.width)&&$(this.height,t.height)};function g0(t,i){return St(t.x,i.x)&&St(t.y,i.y)&&St(t.width,i.width)&&St(t.height,i.height)}O.prototype.containsPoint=O.prototype.Ia=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},O.prototype.containsRect=O.prototype.Fk=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},O.prototype.contains=O.prototype.contains=function(t,i,n,e){return n===void 0&&(n=0),e===void 0&&(e=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=i&&i+e<=this.y+this.height},O.prototype.reset=function(){this.height=this.width=this.y=this.x=0},O.prototype.offset=O.prototype.offset=function(t,i){return this.x+=t,this.y+=i,this},O.prototype.inflate=O.prototype.Zf=function(t,i){return ua(this,i,t,i,t)},O.prototype.addMargin=O.prototype.bx=function(t){return ua(this,t.top,t.right,t.bottom,t.left)},O.prototype.subtractMargin=O.prototype.BG=function(t){return ua(this,-t.top,-t.right,-t.bottom,-t.left)},O.prototype.grow=function(t,i,n,e){return ua(this,t,i,n,e)};function ua(t,i,n,e,r){var o=t.width;return n+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=n+r),n=t.height,i+e<=-n?(t.y+=n/2,t.height=0):(t.y-=i,t.height+=i+e),t}O.prototype.intersectRect=function(t){return Iv(this,t.x,t.y,t.width,t.height)},O.prototype.intersect=O.prototype.wF=function(t,i,n,e){return Iv(this,t,i,n,e)};function Iv(t,i,n,e,r){var o=Math.max(t.x,i),h=Math.max(t.y,n);return i=Math.min(t.x+t.width,i+e),n=Math.min(t.y+t.height,n+r),t.x=o,t.y=h,t.width=Math.max(0,i-o),t.height=Math.max(0,n-h),t}O.prototype.intersectsRect=O.prototype.$f=function(t){return this.xF(t.x,t.y,t.width,t.height)},O.prototype.intersects=O.prototype.xF=function(t,i,n,e){var r=this.width,o=this.x;return r!==1/0&&n!==1/0&&(r+=o,n+=t,isNaN(n)||isNaN(r)||o>n||t>r)?!1:(t=this.height,n=this.y,!(t!==1/0&&e!==1/0&&(t+=n,e+=i,isNaN(e)||isNaN(t)||n>e||i>t)))};function Bv(t,i){var n=t.width,e=i.width+10+10,r=t.x,o=i.x-10;return r>e+o||o>n+r?!1:(n=t.height,e=i.height+10+10,r=t.y,o=i.y-10,!(r>e+o||o>n+r))}O.prototype.unionPoint=O.prototype.yi=function(t){return yn(this,t.x,t.y,0,0)},O.prototype.unionRect=O.prototype.Zg=function(t){return yn(this,t.x,t.y,t.width,t.height)},O.prototype.union=O.prototype.KG=function(t,i,n,e){return n===void 0&&(n=0),e===void 0&&(e=0),yn(this,t,i,n,e)};function yn(t,i,n,e,r){var o=Math.min(t.x,i),h=Math.min(t.y,n);return i=Math.max(t.x+t.width,i+e),n=Math.max(t.y+t.height,n+r),t.x=o,t.y=h,t.width=i-o,t.height=n-h,t}O.prototype.setSpot=O.prototype.bv=function(t,i,n){return this.x=t-n.offsetX-n.x*this.width,this.y=i-n.offsetY-n.y*this.height,this};var ao;O.contains=ao=function(t,i,n,e,r,o,h,l){return h===void 0&&(h=0),l===void 0&&(l=0),t<=r&&r+h<=t+n&&i<=o&&o+l<=i+e},O.intersects=function(t,i,n,e,r,o,h,l){return n+=t,h+=r,t>h||r>n?!1:(t=e+i,l+=o,!(i>l||o>t))},s.defineProperty(O,{left:"left"},function(){return this.x},function(t){this.x=t}),s.defineProperty(O,{top:"top"},function(){return this.y},function(t){this.y=t}),s.defineProperty(O,{right:"right"},function(){return this.x+this.width},function(t){this.x+=t-(this.x+this.width)}),s.defineProperty(O,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.y+=t-(this.y+this.height)}),s.defineProperty(O,{position:"position"},function(){return new F(this.x,this.y)},function(t){this.x=t.x,this.y=t.y}),s.defineProperty(O,{size:"size"},function(){return new lt(this.width,this.height)},function(t){this.width=t.width,this.height=t.height}),s.defineProperty(O,{Wl:"center"},function(){return new F(this.x+this.width/2,this.y+this.height/2)},function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}),s.defineProperty(O,{la:"centerX"},function(){return this.x+this.width/2},function(t){this.x=t-this.width/2}),s.defineProperty(O,{sa:"centerY"},function(){return this.y+this.height/2},function(t){this.y=t-this.height/2}),O.prototype.isReal=O.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},O.prototype.isEmpty=function(){return this.width===0&&this.height===0};function xt(t,i,n,e){t===void 0?this.left=this.bottom=this.right=this.top=0:i===void 0?this.left=this.bottom=this.right=this.top=t:n===void 0?(e=i,this.top=t,this.right=i,this.bottom=t,this.left=e):e!==void 0?(this.top=t,this.right=i,this.bottom=n,this.left=e):s.k("Invalid arguments to Margin constructor")}s.ga("Margin",xt),s.oi(xt),s.be(xt,{top:!0,right:!0,bottom:!0,left:!0}),xt.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},xt.prototype.setTo=xt.prototype.m=function(t,i,n,e){return this.top=t,this.right=i,this.bottom=n,this.left=e,this},xt.prototype.set=xt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},xt.prototype.copy=function(){var t=new xt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},xt.prototype.Ha=function(){return Object.freeze(this),this},xt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},xt.prototype.freeze=function(){return this},xt.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},xt.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=NaN;t[i]==="";)i++;var e=t[i++];if(e&&(n=parseFloat(e)),isNaN(n))return new xt;for(var r=NaN;t[i]==="";)i++;if((e=t[i++])&&(r=parseFloat(e)),isNaN(r))return new xt(n);for(var o=NaN;t[i]==="";)i++;if((e=t[i++])&&(o=parseFloat(e)),isNaN(o))return new xt(n,r);for(var h=NaN;t[i]==="";)i++;return(e=t[i++])&&(h=parseFloat(e)),isNaN(h)?new xt(n,r):new xt(n,r,o,h)}return new xt},xt.stringify=function(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()},xt.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},xt.prototype.equals=xt.prototype.L=function(t){return t instanceof xt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},xt.prototype.equalTo=xt.prototype.Bx=function(t,i,n,e){return this.top===t&&this.right===i&&this.bottom===n&&this.left===e},xt.prototype.equalsApprox=xt.prototype.Qc=function(t){return $(this.top,t.top)&&$(this.right,t.right)&&$(this.bottom,t.bottom)&&$(this.left,t.left)},xt.prototype.isReal=xt.prototype.H=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Qt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}s.oi(Qt),s.be(Qt,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),Qt.prototype.set=Qt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Qt.prototype.copy=function(){var t=new Qt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Qt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Qt.prototype.equals=Qt.prototype.L=function(t){return t instanceof Qt?this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy:!1},Qt.prototype.isIdentity=Qt.prototype.yu=function(){return this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1&&this.dx===0&&this.dy===0},Qt.prototype.reset=Qt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Qt.prototype.multiply=Qt.prototype.multiply=function(t){var i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,e=this.m12*t.m21+this.m22*t.m22,r=this.m11*t.dx+this.m21*t.dy+this.dx,o=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=i,this.m21=n,this.m22=e,this.dx=r,this.dy=o,this},Qt.prototype.multiplyInverted=Qt.prototype.UF=function(t){var i=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*i,e=-t.m12*i,r=-t.m21*i,o=t.m11*i,h=i*(t.m21*t.dy-t.m22*t.dx),l=i*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*n+this.m22*e,i=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,o=this.m11*h+this.m21*l+this.dx,h=this.m12*h+this.m22*l+this.dy,this.m11=this.m11*n+this.m21*e,this.m12=t,this.m21=i,this.m22=r,this.dx=o,this.dy=h,this},Qt.prototype.invert=Qt.prototype.TA=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*t,n=-this.m21*t,e=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=i,this.m21=n,this.m22=e,this.dx=r,this.dy=o,this},Qt.prototype.rotate=Qt.prototype.rotate=function(t,i,n){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;this.translate(i,n);var e=0,r=0;t===90?(e=0,r=1):t===180?(e=-1,r=0):t===270?(e=0,r=-1):(r=t*Math.PI/180,e=Math.cos(r),r=Math.sin(r)),t=this.m12*e+this.m22*r;var o=this.m11*-r+this.m21*e,h=this.m12*-r+this.m22*e;return this.m11=this.m11*e+this.m21*r,this.m12=t,this.m21=o,this.m22=h,this.translate(-i,-n),this},Qt.prototype.translate=Qt.prototype.translate=function(t,i){return this.dx+=this.m11*t+this.m21*i,this.dy+=this.m12*t+this.m22*i,this},Qt.prototype.scale=Qt.prototype.scale=function(t,i){return i===void 0&&(i=t),this.m11*=t,this.m12*=t,this.m21*=i,this.m22*=i,this},Qt.prototype.transformPoint=Qt.prototype.nb=function(t){var i=t.x,n=t.y;return t.x=i*this.m11+n*this.m21+this.dx,t.y=i*this.m12+n*this.m22+this.dy,t},Qt.prototype.invertedTransformPoint=Qt.prototype.xh=function(t){var i=1/(this.m11*this.m22-this.m12*this.m21),n=-this.m12*i,e=this.m11*i,r=i*(this.m12*this.dx-this.m11*this.dy),o=t.x,h=t.y;return t.x=o*this.m22*i+h*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),t.y=o*n+h*e+r,t},Qt.prototype.transformRect=Qt.prototype.JG=function(t){var u=t.x,h=t.y,a=u+t.width,y=h+t.height,f=this.m11,c=this.m12,i=this.m21,n=this.m22,e=this.dx,r=this.dy,p=u*f+h*i+e,v=u*c+h*n+r,o=a*f+h*i+e,h=a*c+h*n+r,l=u*f+y*i+e,u=u*c+y*n+r,f=a*f+y*i+e,a=a*c+y*n+r,y=p,c=v,p=Math.min(p,o),y=Math.max(y,o),c=Math.min(c,h),v=Math.max(v,h),p=Math.min(p,l),y=Math.max(y,l),c=Math.min(c,u),v=Math.max(v,u),p=Math.min(p,f),y=Math.max(y,f),c=Math.min(c,a),v=Math.max(v,a);return t.x=p,t.y=c,t.width=y-p,t.height=v-c,t};function P(t,i,n,e){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(i===void 0&&(i=0),n===void 0&&(n=0),e===void 0&&(e=0),this.x=t,this.y=i,this.offsetX=n,this.offsetY=e)}s.ga("Spot",P),s.oi(P),s.be(P,{x:!0,y:!0,offsetX:!0,offsetY:!0}),P.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},P.prototype.setTo=P.prototype.m=function(t,i,n,e){return this.x=t,this.y=i,this.offsetX=n,this.offsetY=e,this},P.prototype.set=P.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},P.prototype.copy=function(){var t=new P;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},P.prototype.Ha=function(){return Object.freeze(this),this},P.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},P.prototype.freeze=function(){return this},P.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this};function he(t,i){return t.x=NaN,t.y=NaN,t.offsetX=i,t}var zv;P.parse=zv=function(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return ki;if(t==="TopLeft")return gi;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return po;if(t==="TopRight")return Dl;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Yu;if(t==="Center")return Tt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return qu;if(t==="BottomLeft")return Ll;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return Rh;if(t==="BottomRight")return _i;if(t==="TopSide")return Al;if(t==="LeftSide")return Il;if(t==="RightSide")return Bl;if(t==="BottomSide")return zl;if(t==="TopBottomSides")return x0;if(t==="LeftRightSides")return w0;if(t==="TopLeftSides")return M0;if(t==="TopRightSides")return P0;if(t==="BottomLeftSides")return T0;if(t==="BottomRightSides")return k0;if(t==="NotTopSide")return S0;if(t==="NotLeftSide")return N0;if(t==="NotRightSide")return C0;if(t==="NotBottomSide")return j0;if(t==="AllSides")return F0;if(t==="Default")return cn;t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e!==void 0&&0<e.length&&(n=parseFloat(e));for(var r=0;t[i]==="";)i++;e=t[i++],e!==void 0&&0<e.length&&(r=parseFloat(e));for(var o=0;t[i]==="";)i++;e=t[i++],e!==void 0&&0<e.length&&(o=parseFloat(e));for(var h=0;t[i]==="";)i++;return e=t[i++],e!==void 0&&0<e.length&&(h=parseFloat(e)),new P(n,r,o,h)}return new P},P.stringify=function(t){return t.Zc()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},P.prototype.toString=function(){return this.Zc()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(ki)?"None":this.L(gi)?"TopLeft":this.L(po)?"Top":this.L(Dl)?"TopRight":this.L(Yu)?"Left":this.L(Tt)?"Center":this.L(qu)?"Right":this.L(Ll)?"BottomLeft":this.L(Rh)?"Bottom":this.L(_i)?"BottomRight":this.L(Al)?"TopSide":this.L(Il)?"LeftSide":this.L(Bl)?"RightSide":this.L(zl)?"BottomSide":this.L(x0)?"TopBottomSides":this.L(w0)?"LeftRightSides":this.L(M0)?"TopLeftSides":this.L(P0)?"TopRightSides":this.L(T0)?"BottomLeftSides":this.L(k0)?"BottomRightSides":this.L(S0)?"NotTopSide":this.L(N0)?"NotLeftSide":this.L(C0)?"NotRightSide":this.L(j0)?"NotBottomSide":this.L(F0)?"AllSides":this.L(cn)?"Default":"None"},P.prototype.equals=P.prototype.L=function(t){return t instanceof P?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},P.prototype.opposite=P.prototype.YF=function(){return new P(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},P.prototype.includesSide=P.prototype.xj=function(t){if(!this.zj())return!1;if(!t.zj())if(t.L(Ev))t=Il;else if(t.L(Rv))t=Bl;else if(t.L(m0))t=Al;else if(t.L(Gv))t=zl;else return!1;return t=t.offsetY,(this.offsetY&t)===t},P.prototype.isSpot=P.prototype.Zc=function(){return!isNaN(this.x)&&!isNaN(this.y)},P.prototype.isNoSpot=P.prototype.Ud=function(){return isNaN(this.x)||isNaN(this.y)},P.prototype.isSide=P.prototype.zj=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},P.prototype.isNone=P.prototype.ZA=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},P.prototype.isDefault=P.prototype.ge=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0};var ki;P.None=ki=he(new P(0,0,0,0),0).Ha();var cn;P.Default=cn=he(new P(0,0,-1,0),-1).Ha();var gi;P.TopLeft=gi=new P(0,0,0,0).Ha();var po;P.TopCenter=po=new P(.5,0,0,0).Ha();var Dl;P.TopRight=Dl=new P(1,0,0,0).Ha();var Yu;P.LeftCenter=Yu=new P(0,.5,0,0).Ha();var Tt;P.Center=Tt=new P(.5,.5,0,0).Ha();var qu;P.RightCenter=qu=new P(1,.5,0,0).Ha();var Ll;P.BottomLeft=Ll=new P(0,1,0,0).Ha();var Rh;P.BottomCenter=Rh=new P(.5,1,0,0).Ha();var _i;P.BottomRight=_i=new P(1,1,0,0).Ha();var Se;P.MiddleTop=Se=po;var Ne;P.MiddleLeft=Ne=Yu;var Un;P.MiddleRight=Un=qu;var Ce;P.MiddleBottom=Ce=Rh;var m0;P.Top=m0=po;var Ev;P.Left=Ev=Yu;var Rv;P.Right=Rv=qu;var Gv;P.Bottom=Gv=Rh;var Al;P.TopSide=Al=he(new P(0,0,1,s.od),1).Ha();var Il;P.LeftSide=Il=he(new P(0,0,1,s.Uc),1).Ha();var Bl;P.RightSide=Bl=he(new P(0,0,1,s.ed),1).Ha();var zl;P.BottomSide=zl=he(new P(0,0,1,s.dd),1).Ha();var x0;P.TopBottomSides=x0=he(new P(0,0,1,s.od|s.dd),1).Ha();var w0;P.LeftRightSides=w0=he(new P(0,0,1,s.Uc|s.ed),1).Ha();var M0;P.TopLeftSides=M0=he(new P(0,0,1,s.od|s.Uc),1).Ha();var P0;P.TopRightSides=P0=he(new P(0,0,1,s.od|s.ed),1).Ha();var T0;P.BottomLeftSides=T0=he(new P(0,0,1,s.dd|s.Uc),1).Ha();var k0;P.BottomRightSides=k0=he(new P(0,0,1,s.dd|s.ed),1).Ha();var S0;P.NotTopSide=S0=he(new P(0,0,1,s.Uc|s.ed|s.dd),1).Ha();var N0;P.NotLeftSide=N0=he(new P(0,0,1,s.od|s.ed|s.dd),1).Ha();var C0;P.NotRightSide=C0=he(new P(0,0,1,s.od|s.Uc|s.dd),1).Ha();var j0;P.NotBottomSide=j0=he(new P(0,0,1,s.od|s.Uc|s.ed),1).Ha();var F0;P.AllSides=F0=he(new P(0,0,1,s.od|s.Uc|s.ed|s.dd),1).Ha();function Gh(){this.Vb=[1,0,0,1,0,0]}Gh.prototype.copy=function(){var t=new Gh;return t.Vb[0]=this.Vb[0],t.Vb[1]=this.Vb[1],t.Vb[2]=this.Vb[2],t.Vb[3]=this.Vb[3],t.Vb[4]=this.Vb[4],t.Vb[5]=this.Vb[5],t},Gh.prototype.translate=function(t,i){this.Vb[4]+=this.Vb[0]*t+this.Vb[2]*i,this.Vb[5]+=this.Vb[1]*t+this.Vb[3]*i},Gh.prototype.scale=function(t,i){this.Vb[0]*=t,this.Vb[1]*=t,this.Vb[2]*=i,this.Vb[3]*=i};function Zu(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.KE=[],this.pattern=null}Zu.prototype.addColorStop=function(t,i){this.KE.push({offset:t,color:i})};function Qu(t,i,n){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Nn=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.Qp=!1,this.Eg=this.st=this.rt=0,this.document=i||document,this.XE=n,this.Rx=null,this.path=[],this.vh=new Gh,this.stack=[],this.qf=[],this.yx=t,this.iJ="http://www.w3.org/2000/svg",this.width=this.yx.width,this.height=this.yx.height,this.Xk=vn(this,"svg",{width:this.width+"px",height:this.height+"px",viewBox:"0 0 "+this.yx.width+" "+this.yx.height}),this.Xk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Xk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),ps(this,1,0,0,1,0,0),t=s.Yk++,i=vn(this,"clipPath",{id:"mainClip"+t}),i.appendChild(vn(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.Xk.appendChild(i),this.qf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")"),this.lJ={}}B=Qu.prototype,B.arc=function(t,i,n,e,r,o,h,l){var u=2*Math.PI,f=u-1e-6,a=n*Math.cos(e),p=n*Math.sin(e),y=t+a,c=i+p,v=o?0:1;e=o?e-r:r-e,(1e-6<Math.abs(h-y)||1e-6<Math.abs(l-c))&&this.path.push(["L",y,+c]),0>e&&(e=e%u+u),e>f?(this.path.push(["A",n,n,0,1,v,t-a,i-p]),this.path.push(["A",n,n,0,1,v,y,c])):1e-6<e&&this.path.push(["A",n,n,0,+(e>=Math.PI),v,t+n*Math.cos(r),i+n*Math.sin(r)])},B.beginPath=function(){this.path=[]},B.bezierCurveTo=function(t,i,n,e,r,o){this.path.push(["C",t,i,n,e,r,o])},B.clearRect=function(){},B.clip=function(){D0(this,"clipPath",this.path,new Gh)},B.closePath=function(){this.path.push(["z"])},B.createLinearGradient=function(t,i,n,e){var r=new Zu("linear");return r.x1=t,r.y1=i,r.x2=n,r.y2=e,r},B.createPattern=function(t){var i="";t instanceof HTMLCanvasElement&&(i=t.toDataURL()),t instanceof HTMLImageElement&&(i=t.src);var n=this.lJ;if(n[i])return"url(#"+n[i]+")";var e="PATTERN"+s.Yk++,r={x:0,y:0,width:t.width,height:t.height,href:i};return t=vn(this,"pattern",{width:t.width,height:t.height,id:e,patternUnits:"userSpaceOnUse"}),t.appendChild(vn(this,"image",r)),this.Xk.appendChild(t),n[i]=e,"url(#"+e+")"},B.createRadialGradient=function(t,i,n,e,r,o){var h=new Zu("radial");return h.x1=t,h.y1=i,h.r1=n,h.x2=e,h.y2=r,h.r2=o,h},B.drawImage=function(t,i,n,e,r,o,h,l,u){var f="";t instanceof HTMLCanvasElement&&(f=t.toDataURL()),t instanceof HTMLImageElement&&(f=t.src),e===void 0&&(o=i,h=n,l=e=t.naturalWidth,u=r=t.naturalHeight),e=e||0,r=r||0,o=o||0,h=h||0,l=l||0,u=u||0,f={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:f,preserveAspectRatio:"xMidYMid slice"},St(e,l)&&St(r,u)||(f.preserveAspectRatio="none");var a="";l/=e,u/=r,(o!==0||h!==0)&&(a+=" translate("+o+", "+h+")"),(l!==1||u!==1)&&(a+=" scale("+l+", "+u+")"),(i!==0||n!==0)&&(a+=" translate("+-i+", "+-n+")"),(i!==0||n!==0||e!==t.naturalWidth||r!==t.naturalHeight)&&(t="CLIP"+s.Yk++,o=vn(this,"clipPath",{id:t}),o.appendChild(vn(this,"rect",{x:i,y:n,width:e,height:r})),this.Xk.appendChild(o),f["clip-path"]="url(#"+t+")"),Xu(this,"image",f,this.vh,a),this.addElement("image",f)},B.fill=function(){D0(this,"fill",this.path,this.vh)},B.Lg=function(){this.Qp?this.clip():this.fill()},B.fillRect=function(t,i,n,e){Vv(this,"fill",[t,i,n,e],this.vh)},B.fillText=function(t,i,n){t=[t,i,n],i=this.textAlign,i==="left"?i="start":i==="right"?i="end":i==="center"&&(i="middle"),i={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i},Xu(this,"fill",i,this.vh),this.addElement("text",i,t[0])},B.lineTo=function(t,i){this.path.push(["L",t,i])},B.moveTo=function(t,i){this.path.push(["M",t,i])},B.quadraticCurveTo=function(t,i,n,e){this.path.push(["Q",t,i,n,e])},B.rect=function(t,i,n,e){this.path.push(["M",t,i],["L",t+n,i],["L",t+n,i+e],["L",t,i+e],["z"])},B.restore=function(){this.vh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.Nn=t.Nn,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},B.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Nn:this.Nn,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],i=0;i<this.path.length;i++)t.push(this.path[i]);this.stack.push(t),this.stack.push(this.vh.copy())},B.setTransform=function(t,i,n,e,r,o){t===1&&i===0&&n===0&&e===1&&r===0&&o===0||ps(this,t,i,n,e,r,o)},B.scale=function(t,i){this.vh.scale(t,i)},B.translate=function(t,i){this.vh.translate(t,i)},B.transform=function(){},B.stroke=function(){D0(this,"stroke",this.path,this.vh)},B.Kj=function(){this.Qp||this.stroke()},B.strokeRect=function(t,i,n,e){Vv(this,"stroke",[t,i,n,e],this.vh)};function vn(t,i,n,e){if(t=t.document.createElementNS(t.iJ,i),s.Pa(n))for(var r in n)t.setAttributeNS(r==="href"?"http://www.w3.org/1999/xlink":"",r,n[r]);return e!==void 0&&(t.textContent=e),t}B.addElement=function(t,i,n){return t=vn(this,t,i,n),0<this.qf.length?this.qf[this.qf.length-1].appendChild(t):this.Xk.appendChild(t),this.Rx=t};function Xu(t,i,n,e,r){t.globalAlpha!==1&&(n.opacity=t.globalAlpha),i==="fill"?(t.fillStyle instanceof Zu?n.fill=Ov(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+i[1]+","+i[2]+","+i[3]+")",n["fill-opacity"]=i[4]),n.fill=t.fillStyle),n.stroke="none"):i==="stroke"&&(n.fill="none",t.strokeStyle instanceof Zu?n.stroke=Ov(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",n["stroke-opacity"]=i[4]),n.stroke=t.strokeStyle),n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),t=e.Vb,t="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",r!==void 0&&(t+=r),n.transform=t}function Ov(t,i){var n="GRAD"+s.Yk++,e;if(i.type==="linear")e=vn(t,"linearGradient",{x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(i.type==="radial")e=vn(t,"radialGradient",{x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,r1:i.r1,r2:i.r2,id:n});else if(i.type==="pattern"){var r=i.pattern;e={width:r.width,height:r.height,id:n,patternUnits:"userSpaceOnUse"};var o="";r instanceof HTMLCanvasElement&&(o=r.toDataURL()),r instanceof HTMLImageElement&&(o=r.src),r={x:0,y:0,width:r.width,height:r.height,href:o},e=vn(t,"pattern",e),e.appendChild(vn(t,"image",r))}else throw Error("invalid gradient");for(var r=i.KE,o=r.length,h=[],l=0;l<o;l++){var f=r[l],u=f.color,f={offset:f.offset,"stop-color":u};/^rgba\(/.test(u)&&(u=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(u),f["stop-color"]="rgb("+u[1]+","+u[2]+","+u[3]+")",f["stop-opacity"]=u[4]),h.push(f)}for(h.sort(function(a,p){return a.offset>p.offset?1:-1}),l=0;l<o;l++)e.appendChild(vn(t,"stop",h[l]));return t.Xk.appendChild(e),"url(#"+n+")"}function Vv(t,i,n,e){n={x:n[0],y:n[1],width:n[2],height:n[3]},Xu(t,i,n,e),t.addElement("rect",n)}function D0(t,i,n,e){for(var r=[],o=0;o<n.length;o++){var h=s.Xl(n[o]),l=[h.shift()];if(l[0]==="A")l.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)l.push(h.shift()+","+h.shift());r.push(l.join(" "))}n={d:r.join(" ")},Xu(t,i,n,e),i==="clipPath"?(i="CLIP"+s.Yk++,e=vn(t,"clipPath",{id:i}),e.appendChild(vn(t,"path",n)),t.Xk.appendChild(e),0<t.qf.length&&t.qf[t.qf.length-1].setAttributeNS(null,"clip-path","url(#"+i+")")):t.addElement("path",n)}function ps(t,i,n,e,r,o,h){var l=new Gh;l.Vb=[i,n,e,r,o,h],i={},Xu(t,"g",i,l),l=t.addElement("g",i),t.qf.push(l)}B.fb=function(){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var t="SHADOW"+s.Yk++,i=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n,e,r,o,h;n=vn(this,"feGaussianBlur",{in:"SourceAlpha",result:"blur",TL:this.shadowBlur/2}),e=vn(this,"feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),r=vn(this,"feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),o=vn(this,"feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),h=vn(this,"feMerge",{}),h.appendChild(vn(this,"feMergeNode",{in:"offsetBlur"})),h.appendChild(vn(this,"feMergeNode",{in:"SourceGraphic"})),i.appendChild(n),i.appendChild(e),i.appendChild(r),i.appendChild(o),i.appendChild(h),0<this.qf.length&&this.qf[this.qf.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},B.KB=function(t,i,n){this.rt=t,this.st=i,this.Eg=n},B.rm=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},B.fo=function(){this.shadowOffsetX=this.rt,this.shadowOffsetY=this.st,this.shadowBlur=this.Eg},B.zx=function(){return!1},B.wx=function(){},B.Ke=function(){},B.yy=function(){},Qu.prototype.rotate=function(){};function Hr(t,i){this.ownerDocument=i===void 0?document:i;var n=this.ownerDocument.createElement("canvas");n.tabIndex=0,this.Od=n,this.Gk=new bi(n),n.aa=t,Object.seal(this)}B=Hr.prototype,B.toDataURL=function(t,i){return this.Od.toDataURL(t,i)},B.getBoundingClientRect=function(){return this.Od.getBoundingClientRect()},B.focus=function(){return this.Od.focus()},B.addEventListener=function(t,i,n){this.Od.addEventListener(t,i,n)},B.removeEventListener=function(t,i,n){this.Od.removeEventListener(t,i,n)},s.defineProperty(Hr,{width:"width"},function(){return this.Od.width},function(t){this.Od.width=t}),s.defineProperty(Hr,{height:"height"},function(){return this.Od.height},function(t){this.Od.height=t}),s.u(Hr,{style:"style"},function(){return this.Od.style});function bi(t){t.getContext&&t.getContext("2d")||s.k("Browser does not support HTML Canvas Element"),this.ua=t.getContext("2d"),this.Wy=this.Yy=this.Xy="",this.fr=!1,this.Eg=this.st=this.rt=0,Object.seal(this)}bi.prototype.yy=function(t){this.ua.PA=t},s.defineProperty(bi,{fillStyle:"fillStyle"},function(){return this.ua.fillStyle},function(t){this.Wy!==t&&(this.Wy=this.ua.fillStyle=t)}),s.defineProperty(bi,{font:"font"},function(){return this.ua.font},function(t){this.Xy!==t&&(this.Xy=this.ua.font=t)}),s.defineProperty(bi,{globalAlpha:"globalAlpha"},function(){return this.ua.globalAlpha},function(t){this.ua.globalAlpha=t}),s.defineProperty(bi,{lineCap:"lineCap"},function(){return this.ua.lineCap},function(t){this.ua.lineCap=t}),s.defineProperty(bi,{Nn:"lineDashOffset"},function(){return this.ua.Nn},function(t){this.ua.Nn=t}),s.defineProperty(bi,{lineJoin:"lineJoin"},function(){return this.ua.lineJoin},function(t){this.ua.lineJoin=t}),s.defineProperty(bi,{lineWidth:"lineWidth"},function(){return this.ua.lineWidth},function(t){this.ua.lineWidth=t}),s.defineProperty(bi,{miterLimit:"miterLimit"},function(){return this.ua.miterLimit},function(t){this.ua.miterLimit=t}),s.defineProperty(bi,{shadowBlur:"shadowBlur"},function(){return this.ua.shadowBlur},function(t){this.ua.shadowBlur=t}),s.defineProperty(bi,{shadowColor:"shadowColor"},function(){return this.ua.shadowColor},function(t){this.ua.shadowColor=t}),s.defineProperty(bi,{shadowOffsetX:"shadowOffsetX"},function(){return this.ua.shadowOffsetX},function(t){this.ua.shadowOffsetX=t}),s.defineProperty(bi,{shadowOffsetY:"shadowOffsetY"},function(){return this.ua.shadowOffsetY},function(t){this.ua.shadowOffsetY=t}),s.defineProperty(bi,{strokeStyle:"strokeStyle"},function(){return this.ua.strokeStyle},function(t){this.Yy!==t&&(this.Yy=this.ua.strokeStyle=t)}),s.defineProperty(bi,{textAlign:"textAlign"},function(){return this.ua.textAlign},function(t){this.ua.textAlign=t}),s.defineProperty(bi,{PA:"imageSmoothingEnabled"},function(){return this.ua.PA},function(t){this.ua.PA=t}),B=bi.prototype,B.arc=function(t,i,n,e,r,o){this.ua.arc(t,i,n,e,r,o)},B.beginPath=function(){this.ua.beginPath()},B.bezierCurveTo=function(t,i,n,e,r,o){this.ua.bezierCurveTo(t,i,n,e,r,o)},B.clearRect=function(t,i,n,e){this.ua.clearRect(t,i,n,e)},B.clip=function(){this.ua.clip()},B.closePath=function(){this.ua.closePath()},B.createLinearGradient=function(t,i,n,e){return this.ua.createLinearGradient(t,i,n,e)},B.createPattern=function(t,i){return this.ua.createPattern(t,i)},B.createRadialGradient=function(t,i,n,e,r,o){return this.ua.createRadialGradient(t,i,n,e,r,o)},B.drawImage=function(t,i,n,e,r,o,h,l,u){e===void 0?this.ua.drawImage(t,i,n):this.ua.drawImage(t,i,n,e,r,o,h,l,u)},B.fill=function(){this.ua.fill()},B.fillRect=function(t,i,n,e){this.ua.fillRect(t,i,n,e)},B.fillText=function(t,i,n){this.ua.fillText(t,i,n)},B.getImageData=function(t,i,n,e){return this.ua.getImageData(t,i,n,e)},B.lineTo=function(t,i){this.ua.lineTo(t,i)},B.measureText=function(t){return this.ua.measureText(t)},B.moveTo=function(t,i){this.ua.moveTo(t,i)},B.quadraticCurveTo=function(t,i,n,e){this.ua.quadraticCurveTo(t,i,n,e)},B.rect=function(t,i,n,e){this.ua.rect(t,i,n,e)},B.restore=function(){this.ua.restore()},bi.prototype.rotate=function(t){this.ua.rotate(t)},B=bi.prototype,B.save=function(){this.ua.save()},B.setTransform=function(t,i,n,e,r,o){this.ua.setTransform(t,i,n,e,r,o)},B.scale=function(t,i){this.ua.scale(t,i)},B.stroke=function(){this.ua.stroke()},B.transform=function(t,i,n,e,r,o){t===1&&i===0&&n===0&&e===1&&r===0&&o===0||this.ua.transform(t,i,n,e,r,o)},B.translate=function(t,i){this.ua.translate(t,i)},B.Lg=function(t){if(t instanceof yt&&t.type===fe){var i=t.wo;t=t.az,t>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.fr?this.clip():this.fill(),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.fr?this.clip():this.fill()},B.Kj=function(){this.fr||this.stroke()},s.defineProperty(bi,{Qp:"clipInsteadOfFill"},function(){return this.fr},function(t){this.fr=t}),B=bi.prototype,B.KB=function(t,i,n){this.rt=t,this.st=i,this.Eg=n},B.rm=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},B.fo=function(){this.shadowOffsetX=this.rt,this.shadowOffsetY=this.st,this.shadowBlur=this.Eg},B.zx=function(t,i){var n=this.ua;if(n.setLineDash!==void 0)n.setLineDash(t),n.lineDashOffset=i;else if(n.webkitLineDash!==void 0)n.webkitLineDash=t,n.webkitLineDashOffset=i;else return!1;return!0},B.wx=function(){var t=this.ua;t.setLineDash!==void 0?(t.setLineDash(s.no),t.lineDashOffset=0):t.webkitLineDash!==void 0&&(t.webkitLineDash=s.no,t.webkitLineDashOffset=0)},B.Ke=function(t){t&&(this.Xy=""),this.Wy=this.Yy=""};var ot=(Math.sqrt(2)-1)/3*4,Qs=new F(0,0).Ha(),L0=new O(0,0,0,0).Ha(),Wu=new xt(0,0,0,0).Ha(),fx=new xt(2,2,2,2).Ha(),ax=new F(6,6).Ha(),px=new F(-1/0,-1/0).Ha(),yx=new F(1/0,1/0).Ha(),$u=new lt(0,0).Ha(),A0=new lt(1,1).Ha(),_u=new lt(6,6).Ha(),I0=new lt(8,8).Ha(),cx=new lt(10,10).Ha(),vx=new lt(1/0,1/0).Ha(),dx=new F(NaN,NaN).Ha(),Hv=new lt(NaN,NaN).Ha(),gx=new O(NaN,NaN,NaN,NaN).Ha(),Kv=new P(.156,.156).Ha(),Uv=new P(.844,.844).Ha(),B0=new Pi,jr=new Pi,Jv=null;function Xs(t){if(0>=t)return 0;var i=Jv;if(i===null){for(var i=[],n=0;2e3>=n;n++)i[n]=Math.sqrt(n);Jv=i}return 1>t?(n=1/t,2e3>=n?1/i[n|0]:Math.sqrt(t)):2e3>=t?i[t|0]:Math.sqrt(t)}function $(t,i){var n=t-i;return .5>n&&-.5<n}function St(t,i){var n=t-i;return 5e-8>n&&-5e-8<n}function kn(t,i,n,e,r,o,h){0>=r&&(r=1e-6);var l=0,u=0,f=0,a=0;if(t<n?(u=t,l=n):(u=n,l=t),i<e?(a=i,f=e):(a=e,f=i),t===n)return a<=h&&h<=f&&t-r<=o&&o<=t+r;if(i===e)return u<=o&&o<=l&&i-r<=h&&h<=i+r;if(l+=r,u-=r,u<=o&&o<=l&&(f+=r,a-=r,a<=h&&h<=f))if(l-u>f-a)if(t-n>r||n-t>r){if(o=(e-i)/(n-t)*(o-t)+i,o-r<=h&&h<=o+r)return!0}else return!0;else if(i-e>r||e-i>r){if(h=(n-t)/(e-i)*(h-i)+t,h-r<=o&&o<=h+r)return!0}else return!0;return!1}function fa(t,i,n,e,r,o,h,l,u,f,a,p){if(kn(t,i,h,l,p,n,e)&&kn(t,i,h,l,p,r,o))return kn(t,i,h,l,p,f,a);var y=(t+n)/2,c=(i+e)/2,v=(n+r)/2,d=(e+o)/2;r=(r+h)/2,o=(o+l)/2,e=(y+v)/2,n=(c+d)/2;var v=(v+r)/2,d=(d+o)/2,g=(e+v)/2,m=(n+d)/2;return fa(t,i,y,c,e,n,g,m,u,f,a,p)||fa(g,m,v,d,r,o,h,l,u,f,a,p)}function El(t,i,n,e,r,o,h,l,u,f){if(kn(t,i,h,l,u,n,e)&&kn(t,i,h,l,u,r,o))yn(f,t,i,0,0),yn(f,h,l,0,0);else{var a=(t+n)/2,p=(i+e)/2,y=(n+r)/2,c=(e+o)/2;r=(r+h)/2,o=(o+l)/2,e=(a+y)/2,n=(p+c)/2;var y=(y+r)/2,c=(c+o)/2,v=(e+y)/2,d=(n+c)/2;El(t,i,a,p,e,n,v,d,u,f),El(v,d,y,c,r,o,h,l,u,f)}}function Jn(t,i,n,e,r,o,h,l,u,f){if(kn(t,i,h,l,u,n,e)&&kn(t,i,h,l,u,r,o))f.length===0&&(f.push(t),f.push(i)),f.push(h),f.push(l);else{var a=(t+n)/2,p=(i+e)/2,y=(n+r)/2,c=(e+o)/2;r=(r+h)/2,o=(o+l)/2,e=(a+y)/2,n=(p+c)/2;var y=(y+r)/2,c=(c+o)/2,v=(e+y)/2,d=(n+c)/2;Jn(t,i,a,p,e,n,v,d,u,f),Jn(v,d,y,c,r,o,h,l,u,f)}}function Uo(t,i,n,e,r,o,h,l,u,f,a,p,y,c){var v=1-u;t=t*v+n*u,i=i*v+e*u,n=n*v+r*u,e=e*v+o*u,r=r*v+h*u,o=o*v+l*u,l=t*v+n*u,h=i*v+e*u,n=n*v+r*u,e=e*v+o*u,f.x=t,f.y=i,a.x=l,a.y=h,p.x=l*v+n*u,p.y=h*v+e*u,y.x=n,y.y=e,c.x=r,c.y=o}function z0(t,i,n,e,r,o,h,l,u,f){if(kn(t,i,r,o,f,n,e))return kn(t,i,r,o,f,l,u);var a=(t+n)/2,p=(i+e)/2;n=(n+r)/2,e=(e+o)/2;var y=(a+n)/2,c=(p+e)/2;return z0(t,i,a,p,y,c,h,l,u,f)||z0(y,c,n,e,r,o,h,l,u,f)}function E0(t,i,n,e,r,o,h,l){if(kn(t,i,r,o,h,n,e))yn(l,t,i,0,0),yn(l,r,o,0,0);else{var u=(t+n)/2,f=(i+e)/2;n=(n+r)/2,e=(e+o)/2;var a=(u+n)/2,p=(f+e)/2;E0(t,i,u,f,a,p,h,l),E0(a,p,n,e,r,o,h,l)}}function Rl(t,i,n,e,r,o,h,l){if(kn(t,i,r,o,h,n,e))l.length===0&&(l.push(t),l.push(i)),l.push(r),l.push(o);else{var u=(t+n)/2,f=(i+e)/2;n=(n+r)/2,e=(e+o)/2;var a=(u+n)/2,p=(f+e)/2;Rl(t,i,u,f,a,p,h,l),Rl(a,p,n,e,r,o,h,l)}}function bu(t,i,n,e,r,o,h,l,u,f,a,p,y,c){if(0>=y&&(y=1e-6),kn(t,i,h,l,y,n,e)&&kn(t,i,h,l,y,r,o)){var v=(t-h)*(f-p)-(i-l)*(u-a);if(v===0)return!1;if(y=((t*l-i*h)*(u-a)-(t-h)*(u*p-f*a))/v,v=((t*l-i*h)*(f-p)-(i-l)*(u*p-f*a))/v,(u>a?u-a:a-u)<(f>p?f-p:p-f)){if(h=u=0,i<l?(u=i,h=l):(u=l,h=i),v<u||v>h)return!1}else if(t<h?u=t:(u=h,h=t),y<u||y>h)return!1;return c.x=y,c.y=v,!0}var v=(t+n)/2,d=(i+e)/2;n=(n+r)/2,e=(e+o)/2,r=(r+h)/2,o=(o+l)/2;var g=(v+n)/2,m=(d+e)/2;n=(n+r)/2,e=(e+o)/2;var w=(g+n)/2,M=(m+e)/2,k=(a-u)*(a-u)+(p-f)*(p-f),D=!1;return bu(t,i,v,d,g,m,w,M,u,f,a,p,y,c)&&(i=(c.x-u)*(c.x-u)+(c.y-f)*(c.y-f),i<k&&(k=i,D=!0)),t=c.x,v=c.y,bu(w,M,n,e,r,o,h,l,u,f,a,p,y,c)&&(i=(c.x-u)*(c.x-u)+(c.y-f)*(c.y-f),i<k?D=!0:(c.x=t,c.y=v)),D}function tf(t,i,n,e,r,o,h,l,u,f,a,p,y){var c=0;if(0>=y&&(y=1e-6),kn(t,i,h,l,y,n,e)&&kn(t,i,h,l,y,r,o)){if(y=(t-h)*(f-p)-(i-l)*(u-a),y===0)return c;var v=((t*l-i*h)*(u-a)-(t-h)*(u*p-f*a))/y,d=((t*l-i*h)*(f-p)-(i-l)*(u*p-f*a))/y;if(v>=a)return c;if((u>a?u-a:a-u)<(f>p?f-p:p-f)){if(t=u=0,i<l?(u=i,t=l):(u=l,t=i),d<u||d>t)return c}else if(t<h?(u=t,t=h):u=h,v<u||v>t)return c;0<y?c++:0>y&&c--}else{var v=(t+n)/2,d=(i+e)/2,g=(n+r)/2,m=(e+o)/2;r=(r+h)/2,o=(o+l)/2,e=(v+g)/2,n=(d+m)/2;var g=(g+r)/2,m=(m+o)/2,w=(e+g)/2,M=(n+m)/2,c=c+tf(t,i,v,d,e,n,w,M,u,f,a,p,y),c=c+tf(w,M,g,m,r,o,h,l,u,f,a,p,y)}return c}function Ws(t,i,n,e,r,o,h){if(St(t,n)){var l=0;return n=0,i<e?(l=i,n=e):(l=e,n=i),e=o,e<l?(h.x=t,h.y=l,!1):e>n?(h.x=t,h.y=n,!1):(h.x=t,h.y=e,!0)}return St(i,e)?(t<n?l=t:(l=n,n=t),e=r,e<l?(h.x=l,h.y=i,!1):e>n?(h.x=n,h.y=i,!1):(h.x=e,h.y=i,!0)):(l=((t-r)*(t-n)+(i-o)*(i-e))/((n-t)*(n-t)+(e-i)*(e-i)),-5e-6>l?(h.x=t,h.y=i,!1):1.000005<l?(h.x=n,h.y=e,!1):(h.x=t+l*(n-t),h.y=i+l*(e-i),!0))}function yo(t,i,n,e,r,o,h,l,u){return $(t,n)&&$(i,e)?(u.x=t,u.y=i,!1):St(r,h)?St(t,n)?(Ws(t,i,n,e,r,o,u),!1):(o=(e-i)/(n-t)*(r-t)+i,Ws(t,i,n,e,r,o,u)):(l=(l-o)/(h-r),St(t,n)?(o=l*(t-r)+o,n=h=0,i<e?(h=i,n=e):(h=e,n=i),o<h?(u.x=t,u.y=h,!1):o>n?(u.x=t,u.y=n,!1):(u.x=t,u.y=o,!0)):(h=(e-i)/(n-t),St(l,h)?(Ws(t,i,n,e,r,o,u),!1):(r=(h*t-l*r+o-i)/(h-l),St(h,0)?(t<n?h=t:(h=n,n=t),r<h?(u.x=h,u.y=i,!1):r>n?(u.x=n,u.y=i,!1):(u.x=r,u.y=i,!0)):(o=h*(r-t)+i,Ws(t,i,n,e,r,o,u)))))}function co(t,i,n,e,r,o,h,l,u){var f=1e21,a=t,p=i;if(yo(t,i,t,e,r,o,h,l,u)){var y=(u.x-r)*(u.x-r)+(u.y-o)*(u.y-o);y<f&&(f=y,a=u.x,p=u.y)}return yo(n,i,n,e,r,o,h,l,u)&&(y=(u.x-r)*(u.x-r)+(u.y-o)*(u.y-o),y<f&&(f=y,a=u.x,p=u.y)),yo(t,i,n,i,r,o,h,l,u)&&(y=(u.x-r)*(u.x-r)+(u.y-o)*(u.y-o),y<f&&(f=y,a=u.x,p=u.y)),yo(t,e,n,e,r,o,h,l,u)&&(y=(u.x-r)*(u.x-r)+(u.y-o)*(u.y-o),y<f&&(f=y,a=u.x,p=u.y)),u.x=a,u.y=p,1e21>f}function $s(t,i,n,e,r,o,h,l,u){n=t-n;var f=r-h,a=h=0;return n===0||f===0?n===0?(l=(o-l)/f,h=t,a=l*h+(o-l*r)):(e=(i-e)/n,h=r,a=e*h+(i-e*t)):(e=(i-e)/n,l=(o-l)/f,t=i-e*t,h=(o-l*r-t)/(e-l),a=e*h+t),u.m(h,a),u}function aa(t,i,n){var e=i.x,r=i.y,o=n.x,h=n.y,l=t.left,u=t.right,f=t.top,a=t.bottom;return e===o?(o=t=0,r<h?(t=r,o=h):(t=h,o=r),l<=e&&e<=u&&t<=a&&o>=f):r===h?(e<o?t=e:(t=o,o=e),f<=r&&r<=a&&t<=u&&o>=l):!!(t.Ia(i)||t.Ia(n)||pa(l,f,u,f,e,r,o,h)||pa(u,f,u,a,e,r,o,h)||pa(u,a,l,a,e,r,o,h)||pa(l,a,l,f,e,r,o,h))}function pa(t,i,n,e,r,o,h,l){return 0>=ya(t,i,n,e,r,o)*ya(t,i,n,e,h,l)&&0>=ya(r,o,h,l,t,i)*ya(r,o,h,l,n,e)}function ya(t,i,n,e,r,o){return n-=t,e-=i,t=r-t,i=o-i,o=t*e-i*n,o===0&&(o=t*n+i*e,0<o&&(o=(t-n)*n+(i-e)*e,0>o&&(o=0))),0>o?-1:0<o?1:0}function nf(t){return 0>t&&(t+=360),360<=t&&(t-=360),t}function Yv(t,i,n,e){var r=Math.PI;e||(i*=r/180,n*=r/180);var o=i>n?-1:1;e=[];var h=r/2,l=i;if(n=Math.min(2*r,Math.abs(n-i)),1e-5>n)return i=l+o*Math.min(n,h),o=0+t*Math.cos(l),l=0+t*Math.sin(l),h=0+t*Math.cos(i),t=0+t*Math.sin(i),i=(o+h)/2,n=(l+t)/2,e.push([o,l,i,n,i,n,h,t]),e;for(;1e-5<n;){i=l+o*Math.min(n,h);var r=(i-l)/2,a=t*Math.cos(r),f=t*Math.sin(r),p=-f,y=a*a+p*p,u=y+a*a+p*f,y=4/3*(Math.sqrt(2*y*u)-u)/(a*f-p*a),f=a-y*p,a=p+y*a,p=-a,y=r+l,r=Math.cos(y),y=Math.sin(y);e.push([0+t*Math.cos(l),0+t*Math.sin(l),0+f*r-a*y,0+f*y+a*r,0+f*r-p*y,0+f*y+p*r,0+t*Math.cos(i),0+t*Math.sin(i)]),n-=Math.abs(i-l),l=i}return e}function ef(t,i,n,e,r,o,h){n=Math.floor((t-n)/r)*r+n,e=Math.floor((i-e)/o)*o+e;var l=n;n+r-t<r/2&&(l=n+r),t=e,e+o-i<o/2&&(t=e+o),h.m(l,t)}function qv(t,i){var n=Math.max(t,i),e=Math.min(t,i),r=1,o=1;do r=n%e,n=o=e,e=r;while(0<r);return o}function mx(t,i,n,e){var r=0>n,o=0>e,h=0,l=h=0;t<i?(h=1,l=0):(h=0,l=1);var a=0,u=0,p=0,f=0,a=h===0?t:i,p=h===0?n:e;if((h===0?r:o)&&(p=-p),h=l,u=h===0?t:i,f=h===0?n:e,(h===0?r:o)&&(f=-f),t=t=0,0<f)if(0<p){for(i=a*a,t=u*u,a*=p,n=u*f,e=-t+n,r=-t+Math.sqrt(a*a+n*n),u=e,o=0;9999999999>o&&(u=.5*(e+r),!(u===e||u===r));++o)if(l=a/(u+i),h=n/(u+t),l=l*l+h*h-1,0<l)e=u;else if(0>l)r=u;else break;p=i*p/(u+i)-p,f=t*f/(u+t)-f,t=Math.sqrt(p*p+f*f)}else t=Math.abs(f-u);else f=a*a-u*u,t=a*p,t<f?(f=t/f,t=u*Math.sqrt(Math.abs(1-f*f)),p=a*f-p,t=Math.sqrt(p*p+t*t)):t=Math.abs(p-a);return t}function et(t){1<arguments.length&&s.k("Geometry constructor can take at most one optional argument, the Geometry type."),s.oc(this),this.P=!1,t===void 0&&(t=Ye),this.na=t,this.Hb=this.Ab=this.Oc=this.Ec=0,this.Vj=new z(wi),this.Ov=this.Vj.F,this.zv=new O().freeze(),this.hb=!0,this.Vq=this.qo=null,this.Wq=NaN,this.ii=gi,this.ji=_i,this.So=this.Uo=NaN,this.Ki=ii}s.ga("Geometry",et),s.oi(et),et.prototype.copy=function(){var t=new et;t.na=this.na,t.Ec=this.Ec,t.Oc=this.Oc,t.Ab=this.Ab,t.Hb=this.Hb;for(var i=this.Vj.n,n=i.length,e=t.Vj,r=0;r<n;r++){var o=i[r].copy();e.add(o)}return t.Ov=this.Ov,t.zv.assign(this.zv),t.hb=this.hb,t.qo=this.qo,t.Vq=this.Vq,t.Wq=this.Wq,t.ii=this.ii.S(),t.ji=this.ji.S(),t.Uo=this.Uo,t.So=this.So,t.Ki=this.Ki,t};var qi;et.Line=qi=s.p(et,"Line",0);var ar;et.Rectangle=ar=s.p(et,"Rectangle",1);var Kr;et.Ellipse=Kr=s.p(et,"Ellipse",2);var Ye;et.Path=Ye=s.p(et,"Path",3),et.prototype.Ha=function(){return this.freeze(),Object.freeze(this),this},et.prototype.freeze=function(){this.P=!0;var t=this.fc;t.freeze();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].freeze();return this},et.prototype.Qa=function(){Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this.P=!1;var t=this.fc;t.Qa();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].Qa();return this},et.prototype.equalsApprox=et.prototype.Qc=function(t){if(!(t instanceof et))return!1;if(this.type!==t.type)return this.type===qi&&t.type===Ye?Zv(this,t):t.type===qi&&this.type===Ye?Zv(t,this):!1;if(this.type===Ye){var i=this.fc.n;t=t.fc.n;var n=i.length;if(n!==t.length)return!1;for(var e=0;e<n;e++)if(!i[e].Qc(t[e]))return!1;return!0}return $(this.ha,t.ha)&&$(this.da,t.da)&&$(this.C,t.C)&&$(this.D,t.D)};function Zv(t,i){if(t.type!==qi||i.type!==Ye)return!1;if(i.fc.count===1){var n=i.fc.fa(0);if(n.yb.count===1&&$(t.ha,n.ha)&&$(t.da,n.da)&&(n=n.yb.fa(0),n.type===le&&$(t.C,n.C)&&$(t.D,n.D)))return!0}return!1}var Qv;et.stringify=Qv=function(t){return t.toString()},et.prototype.ic=function(t){t.Je===et?this.type=t:s.Lj(this,t)},et.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case qi:return 0>t?"M"+this.ha.toString()+" "+this.da.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ha.toFixed(t)+" "+this.da.toFixed(t)+"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);case ar:var i=new O(this.ha,this.da,0,0);return i.KG(this.C,this.D,0,0),0>t?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+i.x.toFixed(t)+" "+i.y.toFixed(t)+"H"+i.right.toFixed(t)+"V"+i.bottom.toFixed(t)+"H"+i.left.toFixed(t)+"z";case Kr:if(i=new O(this.ha,this.da,0,0),i.KG(this.C,this.D,0,0),0>t){var n=i.left.toString()+" "+(i.y+i.height/2).toString(),e=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+n+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+e+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+n}return n=i.left.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),e=i.right.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),"M"+n+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+e+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+n;case Ye:for(var i="",n=this.fc.n,e=n.length,r=0;r<e;r++){var o=n[r];0<r&&(i+=" x "),o.wu&&(i+="F "),i+=o.toString(t)}return i;default:return this.type.toString()}},et.fillPath=function(t){typeof t!="string"&&s.Fd(t,"string",et,"fillPath:str"),t=t.split(/[Xx]/);for(var i=t.length,r="",n=0;n<i;n++)var e=t[n],r=e.match(/[Ff]/)!==null?n===0?r+e:r+("X"+(e[0]===" "?"":" ")+e):r+((n===0?"":"X ")+"F"+(e[0]===" "?"":" ")+e);return r};var Gl;et.parse=Gl=function(t,i){function n(){return g>=D-1?!0:u[g+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)!==null}function e(){return g++,u[g]}function r(){var _=new F(parseFloat(e()),parseFloat(e()));return m===m.toLowerCase()&&(_.x=k.x+_.x,_.y=k.y+_.y),_}function o(){return k=r()}function h(){return M=r()}function l(){var _=w.toLowerCase();return _!=="c"&&_!=="s"&&_!=="q"&&_!=="t"?k:new F(2*k.x-M.x,2*k.y-M.y)}i===void 0&&(i=!1),typeof t!="string"&&s.Fd(t,"string",et,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");for(var u=t.split(" "),f=0;f<u.length;f++){var a=u[f];if(a.match(/(\.[0-9]*)(\.)/gm)!==null){for(var p=[],y="",c=!1,v=0;v<a.length;v++){var d=a[v];d!=="."||c?d==="."?(p.push(y),y="."):y+=d:(c=!0,y+=d)}for(p.push(y),u.splice(f,1),a=0;a<p.length;a++)u.splice(f+a,0,p[a]);f+=p.length-1}}for(var g=-1,m="",w="",a=new F(0,0),M=new F(0,0),k=new F(0,0),D=u.length,p=s.s(),c=y=!1,v=!0,f=null;!(g>=D-1);)if(w=m,m=e(),m!=="")switch(m.toUpperCase()){case"X":v=!0,c=y=!1;break;case"M":for(f=o(),p.Yb===null||v===!0?(j(p,f.x,f.y,y,!1,!c),v=!1):p.moveTo(f.x,f.y),a=k;!n();)f=o(),p.lineTo(f.x,f.y);break;case"L":for(;!n();)f=o(),p.lineTo(f.x,f.y);break;case"H":for(;!n();)k=f=new F((m===m.toLowerCase()?k.x:0)+parseFloat(e()),k.y),p.lineTo(k.x,k.y);break;case"V":for(;!n();)k=f=new F(k.x,(m===m.toLowerCase()?k.y:0)+parseFloat(e())),p.lineTo(k.x,k.y);break;case"C":for(;!n();){var d=r(),C=h(),f=o();T(p,d.x,d.y,C.x,C.y,f.x,f.y)}break;case"S":for(;!n();)d=l(),C=h(),f=o(),T(p,d.x,d.y,C.x,C.y,f.x,f.y);break;case"Q":for(;!n();)C=h(),f=o(),tp(p,C.x,C.y,f.x,f.y);break;case"T":for(;!n();)M=C=l(),f=o(),tp(p,C.x,C.y,f.x,f.y);break;case"B":for(;!n();){var f=parseFloat(e()),d=parseFloat(e()),C=parseFloat(e()),G=parseFloat(e()),H=parseFloat(e()),U=H,X=!1;n()||(U=parseFloat(e()),n()||(X=parseFloat(e())!==0)),m===m.toLowerCase()&&(C+=k.x,G+=k.y),p.arcTo(f,d,C,G,H,U,X)}break;case"A":for(;!n();)d=Math.abs(parseFloat(e())),C=Math.abs(parseFloat(e())),G=parseFloat(e()),H=!!parseFloat(e()),U=!!parseFloat(e()),f=o(),Rx(p,d,C,G,H,U,f.x,f.y);break;case"Z":f=p.o.fc.n[p.o.fc.length-1],W(p),k=a;break;case"F":for(d="",f=1;u[g+f];)if(u[g+f].match(/[Uu]/)!==null)f++;else if(u[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)===null)f++;else{d=u[g+f];break}d.match(/[Mm]/)?y=!0:Ex(p);break;case"U":for(d="",f=1;u[g+f];)if(u[g+f].match(/[Ff]/)!==null)f++;else if(u[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)===null)f++;else{d=u[g+f];break}d.match(/[Mm]/)?c=!0:p.fb(!1)}if(a=p.o,s.q(p),i)for(p=a.fc.i;p.next();)f=p.value,f.wu=!0;return a};function Xv(t,i){for(var n=t.length,e=s.K(),r=0;r<n;r++){var o=t[r];e.x=o[0],e.y=o[1],i.nb(e),o[0]=e.x,o[1]=e.y,e.x=o[2],e.y=o[3],i.nb(e),o[2]=e.x,o[3]=e.y,e.x=o[4],e.y=o[5],i.nb(e),o[4]=e.x,o[5]=e.y,e.x=o[6],e.y=o[7],i.nb(e),o[6]=e.x,o[7]=e.y}s.v(e)}et.prototype.YA=function(){if(this.hb||this.Ov!==this.fc.F)return!0;for(var t=this.fc.n,i=t.length,n=0;n<i;n++)if(t[n].YA())return!0;return!1},et.prototype.computeBounds=function(){this.hb=!1,this.Vq=this.qo=null,this.Wq=NaN,this.Ov=this.fc.F;for(var t=this.fc.n,i=t.length,n=0;n<i;n++){var e=t[n];e.hb=!1;var r=e.yb;e.Mw=r.F;for(var e=r.n,r=e.length,o=0;o<r;o++){var h=e[o];h.hb=!1,h.Lh=null}}t=this.zv,t.Qa(),isNaN(this.Uo)||isNaN(this.So)?t.m(0,0,0,0):t.m(0,0,this.Uo,this.So),Wv(this,t,!1),yn(t,0,0,0,0),t.freeze()},et.prototype.computeBoundsWithoutOrigin=et.prototype.DH=function(){var t=new O;return Wv(this,t,!0),t};function Wv(t,i,n){switch(t.type){case qi:case ar:case Kr:n?i.m(t.Ec,t.Oc,0,0):yn(i,t.Ec,t.Oc,0,0),yn(i,t.Ab,t.Hb,0,0);break;case Ye:var e=t.fc;t=e.n;for(var e=e.length,r=0;r<e;r++){var o=t[r];n&&r===0?i.m(o.ha,o.da,0,0):yn(i,o.ha,o.da,0,0);for(var h=o.yb.n,l=h.length,u=o.ha,f=o.da,a=0;a<l;a++){var p=h[a];switch(p.type){case le:case qe:u=p.C,f=p.D,yn(i,u,f,0,0);break;case pr:El(u,f,p.xc,p.Sc,p.Fh,p.Gh,p.C,p.D,.5,i),u=p.C,f=p.D;break;case yr:E0(u,f,p.xc,p.Sc,p.C,p.D,.5,i),u=p.C,f=p.D;break;case Zi:case Ze:var y=p.type===Zi?Ur(p,o):ys(p,o,u,f),c=y.length;if(c===0){u=p.la,f=p.sa,yn(i,u,f,0,0);break}for(var p=null,v=0;v<c;v++)p=y[v],El(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,i);p!==null&&(u=p[6],f=p[7]);break;default:s.k("Unknown Segment type: "+p.type)}}}break;default:s.k("Unknown Geometry type: "+t.type)}}et.prototype.normalize=et.prototype.normalize=function(){this.P&&s.ma(this);var t=this.DH();return this.offset(-t.x,-t.y),new F(-t.x,-t.y)},et.prototype.offset=et.prototype.offset=function(t,i){return this.P&&s.ma(this),this.transform(1,0,0,1,t,i),this},et.prototype.scale=et.prototype.scale=function(t,i){return this.P&&s.ma(this),this.transform(t,0,0,i,0,0),this},et.prototype.rotate=et.prototype.rotate=function(t,i,n){this.P&&s.ma(this),i===void 0&&(i=0),n===void 0&&(n=0);var e=s.Wg();return e.reset(),e.rotate(t,i,n),this.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),s.cf(e),this},et.prototype.transform=et.prototype.transform=function(t,i,n,e,r,o){var h=0,l=0;switch(this.type){case qi:case ar:case Kr:h=this.Ec,l=this.Oc,this.Ec=h*t+l*n+r,this.Oc=h*i+l*e+o,h=this.Ab,l=this.Hb,this.Ab=h*t+l*n+r,this.Hb=h*i+l*e+o;break;case Ye:for(var u=this.fc.n,f=u.length,a=0;a<f;a++){var p=u[a],h=p.ha,l=p.da;p.ha=h*t+l*n+r,p.da=h*i+l*e+o;for(var p=p.yb.n,y=p.length,c=0;c<y;c++){var v=p[c];switch(v.type){case le:case qe:h=v.C,l=v.D,v.C=h*t+l*n+r,v.D=h*i+l*e+o;break;case pr:h=v.xc,l=v.Sc,v.xc=h*t+l*n+r,v.Sc=h*i+l*e+o,h=v.Fh,l=v.Gh,v.Fh=h*t+l*n+r,v.Gh=h*i+l*e+o,h=v.C,l=v.D,v.C=h*t+l*n+r,v.D=h*i+l*e+o;break;case yr:h=v.xc,l=v.Sc,v.xc=h*t+l*n+r,v.Sc=h*i+l*e+o,h=v.C,l=v.D,v.C=h*t+l*n+r,v.D=h*i+l*e+o;break;case Zi:h=v.la,l=v.sa,v.la=h*t+l*n+r,v.sa=h*i+l*e+o,i!==0&&(h=180*Math.atan2(i,t)/Math.PI,0>h&&(h+=360),v.Ae+=h),0>t&&(v.Ae=180-v.Ae,v.uf=-v.uf),0>e&&(v.Ae=-v.Ae,v.uf=-v.uf),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(i*i+e*e));break;case Ze:h=v.C,l=v.D,v.C=h*t+l*n+r,v.D=h*i+l*e+o,i!==0&&(h=180*Math.atan2(i,t)/Math.PI,0>h&&(h+=360),v.Nj+=h),0>t&&(v.Nj=180-v.Nj,v.im=!v.im),0>e&&(v.Nj=-v.Nj,v.im=!v.im),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY*=Math.sqrt(i*i+e*e);break;default:s.k("Unknown Segment type: "+v.type)}}}}return this.hb=!0,this},et.prototype.Ia=function(t,i,n,e){var r=t.x,o=t.y,h=this.eb.x-20;t=t.y;for(var l=0,u=0,f=0,a=0,p=0,y=0,c=this.fc.n,v=c.length,d=0;d<v;d++){var g=c[d];if(g.wu){if(n&&g.Ia(r,o,i))return!0;for(var m=g.yb,u=g.ha,f=g.da,w=u,M=f,k=m.n,D=0;D<=m.length;D++){var C,G;switch(D!==m.length?(C=k[D],G=C.type,p=C.C,y=C.D):(G=le,p=w,y=M),G){case qe:if(a=ca(r,o,h,t,u,f,w,M),isNaN(a))return!0;l+=a,w=p,M=y;break;case le:if(a=ca(r,o,h,t,u,f,p,y),isNaN(a))return!0;l+=a;break;case pr:a=tf(u,f,C.xc,C.Sc,C.Fh,C.Gh,p,y,h,t,r,o,.5),l+=a;break;case yr:a=tf(u,f,(u+2*C.xc)/3,(f+2*C.Sc)/3,(2*C.xc+p)/3,(2*C.Sc+y)/3,p,y,h,t,r,o,.5),l+=a;break;case Zi:case Ze:G=C.type===Zi?Ur(C,g):ys(C,g,u,f);var H=G.length;if(H===0){if(a=ca(r,o,h,t,u,f,C.la,C.sa),isNaN(a))return!0;l+=a;break}for(var U=null,X=0;X<H;X++){if(U=G[X],X===0){if(a=ca(r,o,h,t,u,f,U[0],U[1]),isNaN(a))return!0;l+=a}a=tf(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],h,t,r,o,.5),l+=a}U!==null&&(p=U[6],y=U[7]);break;default:s.k("Unknown Segment type: "+C.type)}u=p,f=y}if(l!==0)return!0;l=0}else if(g.Ia(r,o,e?i:i+2))return!0}return l!==0};function ca(t,i,n,e,r,o,h,l){if(kn(r,o,h,l,.05,t,i))return NaN;var u=(t-n)*(o-l);if(u===0)return 0;var f=((t*e-i*n)*(r-h)-(t-n)*(r*l-o*h))/u;if(i=(t*e-i*n)*(o-l)/u,f>=t)return 0;if((r>h?r-h:h-r)<(o>l?o-l:l-o)){if(r=t=0,o<l?(t=o,r=l):(t=l,r=o),i<t||i>r)return 0}else if(r<h?(t=r,r=h):t=h,f<t||f>r)return 0;return 0<u?1:-1}function $v(t,i,n,e){t=t.fc.n;for(var r=t.length,o=0;o<r;o++)if(t[o].Ia(i,n,e))return!0;return!1}et.prototype.getPointAlongPath=et.prototype.hI=function(t,i){if(0>t?t=0:1<t&&(t=1),i===void 0&&(i=new F),this.type===qi)return i.m(this.ha+t*(this.C-this.ha),this.da+t*(this.D-this.da)),i;for(var n=this.Hx,e=this.gu,r=n.length,o=this.hu*t,h=0,l=0;l<r;l++)for(var u=e[l],f=u.length,a=0;a<f;a++){var p=u[a];if(h+p>=o)return e=(o-h)/p,n=n[l],l=n[2*a],r=n[2*a+1],i.m(l+(n[2*a+2]-l)*e,r+(n[2*a+3]-r)*e),i;h+=p}return i.m(NaN,NaN),i},et.prototype.getAngleAlongPath=et.prototype.jF=function(t){0>t?t=0:1<t&&(t=1);var i=0;if(this.type===qi)return i=180*Math.atan2(this.D-this.da,this.C-this.ha)/Math.PI;for(var i=this.Hx,n=this.gu,e=i.length,r=this.hu*t,o=0,h=0;h<e;h++){var l=n[h],u=l.length;for(t=0;t<u;t++){var f=l[t];if(o+f>=r)return i=i[h],i=180*Math.atan2(i[2*t+3]-i[2*t+1],i[2*t+2]-i[2*t])/Math.PI;o+=f}}return NaN},et.prototype.getFractionForPoint=et.prototype.dI=function(t){if(this.type===qi){var i=this.ha,n=this.da,e=this.C,r=this.D;if(i!==e||n!==r){var o=t.x;t=t.y;var h=0,l=0;return i===e?(n<r?(h=n,l=r):(h=r,l=n),t<=h?h===n?0:1:t>=l?l===n?0:1:Math.abs(t-n)/(l-h)):n===r?(i<e?(h=i,l=e):(h=e,l=i),o<=h?h===i?0:1:o>=l?l===i?0:1:Math.abs(o-i)/(l-h)):((o-i)*(o-i)+(t-n)*(t-n))/((e-i)*(e-i)+(r-n)*(r-n))}}else if(this.type===ar){if(i=this.ha,n=this.da,e=this.C,r=this.D,i!==e||n!==r){var h=e-i,l=r-n,u=2*h+2*l,o=t.x;t=t.y,o=Math.min(Math.max(o,i),e),t=Math.min(Math.max(t,n),r);var i=Math.abs(o-i),e=Math.abs(o-e),n=Math.abs(t-n),r=Math.abs(t-r),f=Math.min(i,e,n,r);if(f===n)return o/u;if(f===e)return(h+t)/u;if(f===r)return(2*h+l-o)/u;if(f===i)return(2*h+2*l-t)/u}}else{for(var r=this.Hx,h=this.gu,l=this.hu,u=s.K(),n=1/0,i=e=0,o=r.length,a=f=0,p=0;p<o;p++)for(var y=r[p],c=h[p],v=y.length,d=0;d<v;d+=2){var g=y[d],m=y[d+1];if(d!==0){Ws(f,a,g,m,t.x,t.y,u);var w=(u.x-t.x)*(u.x-t.x)+(u.y-t.y)*(u.y-t.y);w<n&&(n=w,e=i,e+=Math.sqrt((u.x-f)*(u.x-f)+(u.y-a)*(u.y-a))),i+=c[(d-2)/2]}f=g,a=m}return s.v(u),t=e/l,0>t?0:1<t?1:t}return 0},s.u(et,{Hx:"flattenedSegments"},function(){return _v(this),this.qo});function _v(t){if(t.qo===null){var i=t.qo=[],n=t.Vq=[],e=[],r=[];if(t.type===qi)e.push(t.ha),e.push(t.da),e.push(t.C),e.push(t.D),i.push(e),r.push(Math.sqrt((t.ha-t.C)*(t.ha-t.C)+(t.da-t.D)*(t.da-t.D))),n.push(r);else if(t.type===ar)e.push(t.ha),e.push(t.da),e.push(t.C),e.push(t.da),e.push(t.C),e.push(t.D),e.push(t.ha),e.push(t.D),e.push(t.ha),e.push(t.da),i.push(e),r.push(Math.abs(t.ha-t.C)),r.push(Math.abs(t.da-t.D)),r.push(Math.abs(t.ha-t.C)),r.push(Math.abs(t.da-t.D)),n.push(r);else if(t.type===Kr){var o=new wi;o.ha=t.C,o.da=(t.da+t.D)/2;var h=new mt(Zi);if(h.Ae=0,h.uf=360,h.la=(t.ha+t.C)/2,h.sa=(t.da+t.D)/2,h.radiusX=Math.abs(t.ha-t.C)/2,h.radiusY=Math.abs(t.da-t.D)/2,o.add(h),t=Ur(h,o),r=t.length,r===0)e.push(h.la),e.push(h.sa);else for(var h=o.ha,o=o.da,l=0;l<r;l++){var u=t[l];Jn(h,o,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],o=u[7]}i.push(e),n.push(R0(e))}else for(var f=t.fc.i;f.next();){var a=f.value,e=[];e.push(a.ha),e.push(a.da);for(var h=a.ha,o=a.da,p=h,y=o,c=a.yb.n,v=c.length,d=0;d<v;d++){var g=c[d];switch(g.na){case qe:4<=e.length&&(i.push(e),n.push(R0(e))),e=[],e.push(g.C),e.push(g.D),h=g.C,o=g.D,p=h,y=o;break;case le:e.push(g.C),e.push(g.D),h=g.C,o=g.D;break;case pr:Jn(h,o,g.Jd,g.Ze,g.oh,g.Dg,g.Ab,g.Hb,.5,e),h=g.C,o=g.D;break;case yr:Rl(h,o,g.Jd,g.Ze,g.Ab,g.Hb,.5,e),h=g.C,o=g.D;break;case Zi:if(t=Ur(g,a),r=t.length,r===0){e.push(g.la),e.push(g.sa),h=g.la,o=g.sa;break}for(l=0;l<r;l++)u=t[l],Jn(h,o,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],o=u[7];break;case Ze:if(t=ys(g,a,h,o),r=t.length,r===0){e.push(g.la),e.push(g.sa),h=g.la,o=g.sa;break}for(l=0;l<r;l++)u=t[l],Jn(h,o,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],o=u[7];break;default:s.k("Segment not of valid type: "+g.na)}g.Th&&(e.push(p),e.push(y))}4<=e.length&&(i.push(e),n.push(R0(e)))}}}s.u(et,{gu:"flattenedLengths"},function(){return _v(this),this.Vq}),s.u(et,{hu:"flattenedTotalLength"},function(){var t=this.Wq;if(isNaN(t)){if(this.type===qi)var t=Math.abs(this.C-this.ha),i=Math.abs(this.D-this.da),t=Math.sqrt(t*t+i*i);else if(this.type===ar)t=Math.abs(this.C-this.ha),i=Math.abs(this.D-this.da),t=2*t+2*i;else for(var i=this.gu,n=i.length,e=t=0;e<n;e++)for(var r=i[e],o=r.length,h=0;h<o;h++)t+=r[h];this.Wq=t}return t});function R0(t){for(var i=[],n=0,e=0,r=t.length,o=0;o<r;o+=2){var h=t[o],l=t[o+1];o!==0&&(n=Math.sqrt(Ho(n,e,h,l)),i.push(n)),n=h,e=l}return i}s.defineProperty(et,{type:"type"},function(){return this.na},function(t){this.na!==t&&(this.P&&s.ma(this,t),this.na=t,this.hb=!0)}),s.defineProperty(et,{ha:"startX"},function(){return this.Ec},function(t){this.Ec!==t&&(this.P&&s.ma(this,t),this.Ec=t,this.hb=!0)}),s.defineProperty(et,{da:"startY"},function(){return this.Oc},function(t){this.Oc!==t&&(this.P&&s.ma(this,t),this.Oc=t,this.hb=!0)}),s.defineProperty(et,{C:"endX"},function(){return this.Ab},function(t){this.Ab!==t&&(this.P&&s.ma(this,t),this.Ab=t,this.hb=!0)}),s.defineProperty(et,{D:"endY"},function(){return this.Hb},function(t){this.Hb!==t&&(this.P&&s.ma(this,t),this.Hb=t,this.hb=!0)}),s.defineProperty(et,{fc:"figures"},function(){return this.Vj},function(t){this.Vj!==t&&(this.P&&s.ma(this,t),this.Vj=t,this.hb=!0)}),et.prototype.add=et.prototype.add=function(t){return this.Vj.add(t),this},et.prototype.setSpots=function(t,i,n,e,r,o,h,l){return this.P&&s.ma(this),this.ii=new P(t,i,r,o).freeze(),this.ji=new P(n,e,h,l).freeze(),this},s.defineProperty(et,{A:"spot1"},function(){return this.ii},function(t){this.P&&s.ma(this,t),this.ii=t.S()}),s.defineProperty(et,{B:"spot2"},function(){return this.ji},function(t){this.P&&s.ma(this,t),this.ji=t.S()}),s.defineProperty(et,{ae:"defaultStretch"},function(){return this.Ki},function(t){this.P&&s.ma(this,t),this.Ki=t}),s.u(et,{eb:"bounds"},function(){return this.YA()&&this.computeBounds(),this.zv});function wi(t,i,n,e){s.oc(this),this.P=!1,n===void 0&&(n=!0),this.Lm=n,e===void 0&&(e=!0),this.Vo=e,this.Ec=t!==void 0?t:0,this.Oc=i!==void 0?i:0,this.qp=new z(mt),this.Mw=this.qp.F,this.hb=!0}s.ga("PathFigure",wi),s.oi(wi),wi.prototype.copy=function(){var t=new wi;t.Lm=this.Lm,t.Vo=this.Vo,t.Ec=this.Ec,t.Oc=this.Oc;for(var i=this.qp.n,n=i.length,e=t.qp,r=0;r<n;r++){var o=i[r].copy();e.add(o)}return t.Mw=this.Mw,t.hb=this.hb,t},wi.prototype.equalsApprox=wi.prototype.Qc=function(t){if(!(t instanceof wi&&$(this.ha,t.ha)&&$(this.da,t.da)))return!1;var i=this.yb.n;t=t.yb.n;var n=i.length;if(n!==t.length)return!1;for(var e=0;e<n;e++)if(!i[e].Qc(t[e]))return!1;return!0},wi.prototype.toString=function(t){t===void 0&&(t=-1);for(var i=0>t?"M"+this.ha.toString()+" "+this.da.toString():"M"+this.ha.toFixed(t)+" "+this.da.toFixed(t),n=this.yb.n,e=n.length,r=0;r<e;r++)i+=" "+n[r].toString(t);return i},wi.prototype.freeze=function(){this.P=!0;var t=this.yb;t.freeze();for(var i=t.n,t=t.length,n=0;n<t;n++)i[n].freeze();return this},wi.prototype.Qa=function(){this.P=!1;var t=this.yb;t.Qa();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].Qa();return this},wi.prototype.YA=function(){if(this.hb)return!0;var t=this.yb;if(this.Mw!==t.F)return!0;for(var t=t.n,i=t.length,n=0;n<i;n++)if(t[n].hb)return!0;return!1},s.defineProperty(wi,{wu:"isFilled"},function(){return this.Lm},function(t){this.P&&s.ma(this,t),this.Lm=t}),s.defineProperty(wi,{lm:"isShadowed"},function(){return this.Vo},function(t){this.P&&s.ma(this,t),this.Vo=t}),s.defineProperty(wi,{ha:"startX"},function(){return this.Ec},function(t){this.P&&s.ma(this,t),this.Ec=t,this.hb=!0}),s.defineProperty(wi,{da:"startY"},function(){return this.Oc},function(t){this.P&&s.ma(this,t),this.Oc=t,this.hb=!0}),s.defineProperty(wi,{yb:"segments"},function(){return this.qp},function(t){this.P&&s.ma(this,t),this.qp=t,this.hb=!0}),wi.prototype.add=wi.prototype.add=function(t){return this.qp.add(t),this},wi.prototype.Ia=function(t,i,n){for(var e=this.ha,r=this.da,o=e,h=r,l=this.yb.n,u=l.length,f=0;f<u;f++){var a=l[f];switch(a.type){case qe:o=a.C,h=a.D,e=a.C,r=a.D;break;case le:if(kn(e,r,a.C,a.D,n,t,i))return!0;e=a.C,r=a.D;break;case pr:if(fa(e,r,a.xc,a.Sc,a.Fh,a.Gh,a.C,a.D,.5,t,i,n))return!0;e=a.C,r=a.D;break;case yr:if(z0(e,r,a.xc,a.Sc,a.C,a.D,.5,t,i,n))return!0;e=a.C,r=a.D;break;case Zi:case Ze:var p=a.type===Zi?Ur(a,this):ys(a,this,e,r),y=p.length;if(y===0){if(kn(e,r,a.la,a.sa,n,t,i))return!0;e=a.la,r=a.sa;break}for(var c=null,v=0;v<y;v++)if(c=p[v],v===0&&kn(e,r,c[0],c[1],n,t,i)||fa(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,t,i,n))return!0;c!==null&&(e=c[6],r=c[7]);break;default:s.k("Unknown Segment type: "+a.type)}if(a.Lx&&(e!==o||r!==h)&&kn(e,r,o,h,n,t,i))return!0}return!1};function mt(t,i,n,e,r,o,h,l){s.oc(this),this.P=!1,t===void 0&&(t=le),this.na=t,this.Ab=i!==void 0?i:0,this.Hb=n!==void 0?n:0,e===void 0&&(e=0),r===void 0&&(r=0),o===void 0&&(o=0),h===void 0&&(h=0),t===Ze?(t=o%360,0>t&&(t+=360),this.Jd=t,this.Ze=0,this.oh=Math.max(e,0),this.Dg=Math.max(r,0),this.Zo=typeof h=="boolean"?!!h:!1,this.uo=!!l):(this.Jd=e,this.Ze=r,t===Zi&&(o=Math.max(o,0)),this.oh=o,typeof h=="number"?(t===Zi&&(h=Math.max(h,0)),this.Dg=h):this.Dg=0,this.uo=this.Zo=!1),this.Th=!1,this.hb=!0,this.Lh=null}s.ga("PathSegment",mt),s.oi(mt),mt.prototype.copy=function(){var t=new mt;return t.na=this.na,t.Ab=this.Ab,t.Hb=this.Hb,t.Jd=this.Jd,t.Ze=this.Ze,t.oh=this.oh,t.Dg=this.Dg,t.Zo=this.Zo,t.uo=this.uo,t.Th=this.Th,t.hb=this.hb,t},mt.prototype.equalsApprox=mt.prototype.Qc=function(t){if(!(t instanceof mt)||this.type!==t.type||this.Lx!==t.Lx)return!1;switch(this.type){case qe:case le:return $(this.C,t.C)&&$(this.D,t.D);case pr:return $(this.C,t.C)&&$(this.D,t.D)&&$(this.xc,t.xc)&&$(this.Sc,t.Sc)&&$(this.Fh,t.Fh)&&$(this.Gh,t.Gh);case yr:return $(this.C,t.C)&&$(this.D,t.D)&&$(this.xc,t.xc)&&$(this.Sc,t.Sc);case Zi:return $(this.Ae,t.Ae)&&$(this.uf,t.uf)&&$(this.la,t.la)&&$(this.sa,t.sa)&&$(this.radiusX,t.radiusX)&&$(this.radiusY,t.radiusY);case Ze:return this.im===t.im&&this.Nx===t.Nx&&$(this.Nj,t.Nj)&&$(this.C,t.C)&&$(this.D,t.D)&&$(this.radiusX,t.radiusX)&&$(this.radiusY,t.radiusY);default:return!1}},mt.prototype.ic=function(t){t.Je===mt?this.type=t:s.Lj(this,t)},mt.prototype.toString=function(t){t===void 0&&(t=-1);var i="";switch(this.type){case qe:i=0>t?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case le:i=0>t?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case pr:i=0>t?"C"+this.xc.toString()+" "+this.Sc.toString()+" "+this.Fh.toString()+" "+this.Gh.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.xc.toFixed(t)+" "+this.Sc.toFixed(t)+" "+this.Fh.toFixed(t)+" "+this.Gh.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case yr:i=0>t?"Q"+this.xc.toString()+" "+this.Sc.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.xc.toFixed(t)+" "+this.Sc.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case Zi:i=0>t?"B"+this.Ae.toString()+" "+this.uf.toString()+" "+this.la.toString()+" "+this.sa.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.Ae.toFixed(t)+" "+this.uf.toFixed(t)+" "+this.la.toFixed(t)+" "+this.sa.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Ze:i=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Nj.toString()+" "+(this.Nx?1:0)+" "+(this.im?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Nj.toFixed(t)+" "+(this.Nx?1:0)+" "+(this.im?1:0)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;default:i=this.type.toString()}return i+(this.Th?"z":"")};var qe;mt.Move=qe=s.p(mt,"Move",0);var le;mt.Line=le=s.p(mt,"Line",1);var pr;mt.Bezier=pr=s.p(mt,"Bezier",2);var yr;mt.QuadraticBezier=yr=s.p(mt,"QuadraticBezier",3);var Zi;mt.Arc=Zi=s.p(mt,"Arc",4);var Ze;mt.SvgArc=Ze=s.p(mt,"SvgArc",4),mt.prototype.freeze=function(){return this.P=!0,this},mt.prototype.Qa=function(){return this.P=!1,this},mt.prototype.close=mt.prototype.close=function(){return this.Th=!0,this};function Ur(t,i){if(t.Lh!==null&&i.hb===!1)return t.Lh;var n=t.radiusX,e=t.radiusY;if(e===void 0&&(e=n),n===0||e===0)return t.Lh=[],t.Lh;var r=t.Jd,o=t.Ze,h=Yv(n<e?n:e,t.Ae,t.Ae+t.uf,!1);if(n!==e){var l=s.Wg();l.reset(),n<e?l.scale(1,e/n):l.scale(n/e,1),Xv(h,l),s.cf(l)}for(n=h.length,e=0;e<n;e++)l=h[e],l[0]+=r,l[1]+=o,l[2]+=r,l[3]+=o,l[4]+=r,l[5]+=o,l[6]+=r,l[7]+=o;return t.Lh=h,t.Lh}function ys(t,i,n,e){function r(d,g,m,w){return(d*w<g*m?-1:1)*Math.acos((d*m+g*w)/(Math.sqrt(d*d+g*g)*Math.sqrt(m*m+w*w)))}if(t.Lh!==null&&i.hb===!1)return t.Lh;i=t.oh;var o=t.Dg;i===0&&(i=1e-4),o===0&&(o=1e-4);var c=Math.PI/180*t.Jd,h=t.Zo,l=t.uo,u=t.Ab,f=t.Hb,a=Math.cos(c),p=Math.sin(c),y=a*(n-u)/2+p*(e-f)/2,c=-p*(n-u)/2+a*(e-f)/2,v=y*y/(i*i)+c*c/(o*o);return 1<v&&(i*=Math.sqrt(v),o*=Math.sqrt(v)),v=(h===l?-1:1)*Math.sqrt((i*i*o*o-i*i*c*c-o*o*y*y)/(i*i*c*c+o*o*y*y)),isNaN(v)&&(v=0),h=v*i*c/o,v=v*-o*y/i,isNaN(h)&&(h=0),isNaN(v)&&(v=0),n=(n+u)/2+a*h-p*v,e=(e+f)/2+p*h+a*v,f=r(1,0,(y-h)/i,(c-v)/o),a=(y-h)/i,u=(c-v)/o,y=(-y-h)/i,h=(-c-v)/o,c=r(a,u,y,h),y=(a*y+u*h)/(Math.sqrt(a*a+u*u)*Math.sqrt(y*y+h*h)),-1>=y?c=Math.PI:1<=y&&(c=0),!l&&0<c&&(c-=2*Math.PI),l&&0>c&&(c+=2*Math.PI),l=i>o?1:i/o,y=i>o?o/i:1,i=Yv(i>o?i:o,f,f+c,!0),o=s.Wg(),o.reset(),o.translate(n,e),o.rotate(t.Jd,0,0),o.scale(l,y),Xv(i,o),s.cf(o),t.Lh=i,t.Lh}s.defineProperty(mt,{Lx:"isClosed"},function(){return this.Th},function(t){this.Th!==t&&(this.Th=t,this.hb=!0)}),s.defineProperty(mt,{type:"type"},function(){return this.na},function(t){this.P&&s.ma(this,t),this.na=t,this.hb=!0}),s.defineProperty(mt,{C:"endX"},function(){return this.Ab},function(t){this.P&&s.ma(this,t),this.Ab=t,this.hb=!0}),s.defineProperty(mt,{D:"endY"},function(){return this.Hb},function(t){this.P&&s.ma(this,t),this.Hb=t,this.hb=!0}),s.defineProperty(mt,{xc:"point1X"},function(){return this.Jd},function(t){this.P&&s.ma(this,t),this.Jd=t,this.hb=!0}),s.defineProperty(mt,{Sc:"point1Y"},function(){return this.Ze},function(t){this.P&&s.ma(this,t),this.Ze=t,this.hb=!0}),s.defineProperty(mt,{Fh:"point2X"},function(){return this.oh},function(t){this.P&&s.ma(this,t),this.oh=t,this.hb=!0}),s.defineProperty(mt,{Gh:"point2Y"},function(){return this.Dg},function(t){this.P&&s.ma(this,t),this.Dg=t,this.hb=!0}),s.defineProperty(mt,{la:"centerX"},function(){return this.Jd},function(t){this.P&&s.ma(this,t),this.Jd=t,this.hb=!0}),s.defineProperty(mt,{sa:"centerY"},function(){return this.Ze},function(t){this.P&&s.ma(this,t),this.Ze=t,this.hb=!0}),s.defineProperty(mt,{radiusX:"radiusX"},function(){return this.oh},function(t){0>t&&s.Fa(t,">= zero",mt,"radiusX"),this.P&&s.ma(this,t),this.oh=t,this.hb=!0}),s.defineProperty(mt,{radiusY:"radiusY"},function(){return this.Dg},function(t){0>t&&s.Fa(t,">= zero",mt,"radiusY"),this.P&&s.ma(this,t),this.Dg=t,this.hb=!0}),s.defineProperty(mt,{Ae:"startAngle"},function(){return this.Ab},function(t){this.Ab!==t&&(this.P&&s.ma(this,t),t%=360,0>t&&(t+=360),this.Ab=t,this.hb=!0)}),s.defineProperty(mt,{uf:"sweepAngle"},function(){return this.Hb},function(t){this.P&&s.ma(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Hb=t,this.hb=!0}),s.defineProperty(mt,{im:"isClockwiseArc"},function(){return this.uo},function(t){this.P&&s.ma(this,t),this.uo=t,this.hb=!0}),s.defineProperty(mt,{Nx:"isLargeArc"},function(){return this.Zo},function(t){this.P&&s.ma(this,t),this.Zo=t,this.hb=!0}),s.defineProperty(mt,{Nj:"xAxisRotation"},function(){return this.Jd},function(t){t%=360,0>t&&(t+=360),this.P&&s.ma(this,t),this.Jd=t,this.hb=!0});function Ht(){this.aa=null,this.dA=new F(0,0).freeze(),this.jz=new F(0,0).freeze(),this.wv=this.sw=0,this.xv=1,this.gw="",this.Ww=this.Kv=!1,this.Iv=this.yv=0,this.Qj=this.Tv=this.cw=!1,this.Ir=null,this.Uw=0,this.Gg=this.Tw=null}s.ga("InputEvent",Ht),Ht.prototype.copy=function(){var t=new Ht;return t.aa=this.aa,t.dA.assign(this.Ce),t.jz.assign(this.ea),t.sw=this.sw,t.wv=this.wv,t.xv=this.xv,t.gw=this.gw,t.Kv=this.Kv,t.Ww=this.Ww,t.yv=this.yv,t.Iv=this.Iv,t.cw=this.cw,t.Tv=this.Tv,t.Qj=this.Qj,t.Ir=this.Ir,t.Uw=this.Uw,t.Tw=this.Tw,t.Gg=this.Gg,t},Ht.prototype.toString=function(){var t="^";return this.md!==0&&(t+="M:"+this.md),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.te!==0&&(t+="C:"+this.te),this.pi!==0&&(t+="D:"+this.pi),this.vc&&(t+="h"),this.bubbles&&(t+="b"),this.ea!==null&&(t+="@"+this.ea.toString()),t},s.defineProperty(Ht,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(Ht,{Ce:"viewPoint"},function(){return this.dA},function(t){s.G(t,F,Ht,"viewPoint"),this.dA.assign(t)}),s.defineProperty(Ht,{ea:"documentPoint"},function(){return this.jz},function(t){s.G(t,F,Ht,"documentPoint"),this.jz.assign(t)}),Ht.prototype.getMultiTouchViewPoint=Ht.prototype.Ix=function(t,i){var n=this.g;return n===null||Xd(n,this.event,t,i),i},Ht.prototype.getMultiTouchDocumentPoint=function(t,i){var n=this.g;return n===null||(Xd(n,this.event,t,i),i.assign(n.UB(i))),i},s.defineProperty(Ht,{md:"modifiers"},function(){return this.sw},function(t){this.sw=t}),s.defineProperty(Ht,{button:"button"},function(){return this.wv},function(t){if(this.wv=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),s.defineProperty(Ht,{buttons:"buttons"},function(){return this.xv},function(t){this.xv=t}),s.defineProperty(Ht,{key:"key"},function(){return this.gw},function(t){this.gw=t}),s.defineProperty(Ht,{Hk:"down"},function(){return this.Kv},function(t){this.Kv=t}),s.defineProperty(Ht,{up:"up"},function(){return this.Ww},function(t){this.Ww=t}),s.defineProperty(Ht,{te:"clickCount"},function(){return this.yv},function(t){this.yv=t}),s.defineProperty(Ht,{pi:"delta"},function(){return this.Iv},function(t){this.Iv=t}),s.defineProperty(Ht,{zu:"isMultiTouch"},function(){return this.cw},function(t){this.cw=t}),s.defineProperty(Ht,{vc:"handled"},function(){return this.Tv},function(t){this.Tv=t}),s.defineProperty(Ht,{bubbles:"bubbles"},function(){return this.Qj},function(t){this.Qj=t}),s.defineProperty(Ht,{event:"event"},function(){return this.Ir},function(t){this.Ir=t}),s.u(Ht,{Aj:"isTouchEvent"},function(){var t=q.TouchEvent,i=this.event;return t&&i instanceof t?!0:(t=q.PointerEvent)&&i instanceof t&&(i.pointerType==="touch"||i.pointerType==="pen")}),s.u(Ht,{zh:"isMac"},function(){return s.zh}),s.defineProperty(Ht,{timestamp:"timestamp"},function(){return this.Uw},function(t){this.Uw=t}),s.defineProperty(Ht,{Jf:"targetDiagram"},function(){return this.Tw},function(t){this.Tw=t}),s.defineProperty(Ht,{Be:"targetObject"},function(){return this.Gg},function(t){this.Gg=t}),s.defineProperty(Ht,{control:"control"},function(){return(this.md&1)!==0},function(t){this.md=t?this.md|1:this.md&-2}),s.defineProperty(Ht,{shift:"shift"},function(){return(this.md&4)!==0},function(t){this.md=t?this.md|4:this.md&-5}),s.defineProperty(Ht,{alt:"alt"},function(){return(this.md&2)!==0},function(t){this.md=t?this.md|2:this.md&-3}),s.defineProperty(Ht,{Iu:"meta"},function(){return(this.md&8)!==0},function(t){this.md=t?this.md|8:this.md&-9}),s.defineProperty(Ht,{left:"left"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},function(t){this.buttons=t?this.buttons|1:this.buttons&-2}),s.defineProperty(Ht,{right:"right"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},function(t){this.buttons=t?this.buttons|2:this.buttons&-3}),s.defineProperty(Ht,{yL:"middle"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},function(t){this.buttons=t?this.buttons|4:this.buttons&-5});function vo(){this.aa=null,this.Sb="",this.Aw=this.Rw=null,this.cr=!1}s.ga("DiagramEvent",vo),vo.prototype.copy=function(){var t=new vo;return t.aa=this.aa,t.Sb=this.Sb,t.Rw=this.Rw,t.Aw=this.Aw,t.cr=this.cr,t},vo.prototype.toString=function(){var t="*"+this.name;return this.MB!==null&&(t+=":"+this.MB.toString()),this.pB!==null&&(t+="("+this.pB.toString()+")"),t},s.defineProperty(vo,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(vo,{name:"name"},function(){return this.Sb},function(t){this.Sb=t}),s.defineProperty(vo,{MB:"subject"},function(){return this.Rw},function(t){this.Rw=t}),s.defineProperty(vo,{pB:"parameter"},function(){return this.Aw},function(t){this.Aw=t}),s.defineProperty(vo,{cancel:"cancel"},function(){return this.cr},function(t){this.cr!==t&&s.Yt("DiagramEvent.cancel","2.0"),this.cr=t});function Et(){this.dr=Yt,this.an=this.rw="",this.Hs=this.Is=this.Ns=this.Os=this.Ls=this.aa=this.qe=null}s.ga("ChangedEvent",Et);var Fr;Et.Transaction=Fr=s.p(Et,"Transaction",-1);var Yt;Et.Property=Yt=s.p(Et,"Property",0);var Li;Et.Insert=Li=s.p(Et,"Insert",1);var Ai;Et.Remove=Ai=s.p(Et,"Remove",2),Et.prototype.clear=Et.prototype.clear=function(){this.Hs=this.Is=this.Ns=this.Os=this.Ls=this.aa=this.qe=null},Et.prototype.copy=function(){var t=new Et;t.dr=this.dr,t.rw=this.rw,t.an=this.an,t.qe=this.qe,t.aa=this.aa,t.Ls=this.Ls;var i=this.Os;return t.Os=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Ns,t.Ns=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Is,t.Is=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Hs,t.Hs=s.Pa(i)&&typeof i.S=="function"?i.S():i,t},Et.prototype.ic=function(t){t.Je===Et?this.Fc=t:s.Lj(this,t)},Et.prototype.toString=function(){var t="",t=this.Fc===Fr?t+"* ":this.Fc===Yt?t+(this.$!==null?"!m":"!d"):t+((this.$!==null?"!m":"!d")+this.Fc);return this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.tf&&this.tf!==this.propertyName&&(t+=" "+this.tf),t+=": ",this.Fc===Fr?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=We(this.object)),this.oldValue!==null&&(t+="  old: "+We(this.oldValue)),this.Gj!==null&&(t+=" "+this.Gj),this.newValue!==null&&(t+="  new: "+We(this.newValue)),this.Fj!==null&&(t+=" "+this.Fj)),t},Et.prototype.getValue=Et.prototype.ka=function(t){return t?this.oldValue:this.newValue},Et.prototype.getParam=function(t){return t?this.Gj:this.Fj},Et.prototype.canUndo=Et.prototype.canUndo=function(){return this.$!==null||this.g!==null},Et.prototype.undo=Et.prototype.undo=function(){this.canUndo()&&(this.$!==null?this.$.sn(this,!0):this.g!==null&&this.g.sn(this,!0))},Et.prototype.canRedo=Et.prototype.canRedo=function(){return this.$!==null||this.g!==null},Et.prototype.redo=Et.prototype.redo=function(){this.canRedo()&&(this.$!==null?this.$.sn(this,!1):this.g!==null&&this.g.sn(this,!1))},s.defineProperty(Et,{$:"model"},function(){return this.qe},function(t){this.qe=t}),s.defineProperty(Et,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(Et,{Fc:"change"},function(){return this.dr},function(t){this.dr=t}),s.defineProperty(Et,{tf:"modelChange"},function(){return this.rw},function(t){this.rw=t}),s.defineProperty(Et,{propertyName:"propertyName"},function(){return this.an},function(t){this.an=t}),s.u(Et,{KF:"isTransactionFinished"},function(){return this.dr===Fr&&(this.an==="CommittedTransaction"||this.an==="FinishedUndo"||this.an==="FinishedRedo")}),s.defineProperty(Et,{object:"object"},function(){return this.Ls},function(t){this.Ls=t}),s.defineProperty(Et,{oldValue:"oldValue"},function(){return this.Os},function(t){this.Os=t}),s.defineProperty(Et,{Gj:"oldParam"},function(){return this.Ns},function(t){this.Ns=t}),s.defineProperty(Et,{newValue:"newValue"},function(){return this.Is},function(t){this.Is=t}),s.defineProperty(Et,{Fj:"newParam"},function(){return this.Hs},function(t){this.Hs=t});function V(t){1<arguments.length&&s.k("Model constructor can only take one optional argument, the Array of node data."),s.oc(this),this.sr=this.Sb="",this.Si=!1,this.Hz={},this.He=[],this.Lc=new tt(null,Object),this.ok="key",this.yo=this.cp=null,this.jr=this.kr=!1,this.Uq=null,this.Wm="category",this.Li=new tt(null,R),this.kk=null,this.ij=!1,this.cA=null,this.ja=new Rt,t!==void 0&&(this.Pg=t)}s.ga("Model",V),V.prototype.cloneProtected=function(t){t.Sb=this.Sb,t.sr=this.sr,t.Si=this.Si,t.ok=this.ok,t.cp=this.cp,t.yo=this.yo,t.kr=this.kr,t.jr=this.jr,t.Uq=this.Uq,t.Wm=this.Wm},V.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},V.prototype.clear=V.prototype.clear=function(){this.He=[],this.Lc.clear(),this.Li.clear(),this.ja.clear()},B=V.prototype,B.toString=function(t){if(t===void 0&&(t=0),1<t)return this.PB();var i=(this.name!==""?this.name:"")+" Model";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0;e<n;e++)var r=s.Ba(t,e),i=i+(" "+this.qb(r)+":"+We(r))}return i},B.ko=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.$l!==""&&(t+=`,
  "dataFormat": `+this.quote(this.$l)),this.ib&&(t+=`,
  "isReadOnly": `+this.ib),this.mm!=="key"&&typeof this.mm=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.mm)),this.vA&&(t+=`,
  "copiesArrays": true`),this.uA&&(t+=`,
  "copiesArrayObjects": true`),this.Yn!=="category"&&typeof this.Yn=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.Yn)),t},B.Ru=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.$l=t.dataFormat),t.isReadOnly&&(this.ib=t.isReadOnly),t.nodeKeyProperty&&(this.mm=t.nodeKeyProperty),t.copiesArrays&&(this.vA=t.copiesArrays),t.copiesArrayObjects&&(this.uA=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Yn=t.nodeCategoryProperty)};function G0(t){return`,
  "modelData": `+td(t,t.Tk)}function bv(t,i){var n=i.modelData;s.Pa(n)&&(t.Uu(n),t.Tk=n)}B.aC=function(){var t=this.Tk,i=!1,n;for(n in t)if(!va(n,t[n])){i=!0;break}return t="",i&&(t=G0(this)),t+`,
  "nodeDataArray": `+Qe(this,this.Pg,!0)},B.sB=function(t){bv(this,t),t=t.nodeDataArray,s.isArray(t)&&(this.Uu(t),this.Pg=t)};function Ol(t,i,n,e){if(i===n)return!0;if(typeof i!=typeof n||typeof i=="function"||typeof n=="function")return!1;if(Array.isArray(i)&&Array.isArray(n)){if(e.ka(i)===n)return!0;if(e.add(i,n),i.length!==n.length)return!1;for(var r=0;r<i.length;r++)if(!Ol(t,i[r],n[r],e))return!1;return!0}if(s.Pa(i)&&s.Pa(n)){if(e.ka(i)===n)return!0;e.add(i,n);for(r in i){var o=i[r];if(!va(r,o)){var h=n[r];if(h===void 0||!Ol(t,o,h,e))return!1}}for(var l in n)if(h=n[l],!va(l,h)&&(o=i[l],o===void 0||!Ol(t,o,h,e)))return!1;return!0}return!1}function _s(t,i,n){t[n]!==i[n]&&s.k("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+i[n]+'"')}B.bC=function(t){_s(this,t,"nodeKeyProperty"),this instanceof Lt&&_s(this,t,"nodeParentKeyProperty");for(var i=new R,n=new R,e=new R().Pc(this.Lc.LF),r=new tt,o=t.Pg,h=0;h<o.length;h++){var l=o[h],u=t.qb(l);if(u!==void 0){e.remove(u);var f=this.we(u);f===null?(i.add(u),n.add(l)):Ol(this,f,l,r)||n.add(l)}else this.eB(l),u=this.qb(l),i.add(u),n.add(l)}return o="",Ol(this,this.Tk,t.Tk,r)||(o+=G0(this)),0<i.count&&(o+=this.Ry+Qe(this,i.yc(),!0)),0<n.count&&(o+=this.iC+Qe(this,n.yc(),!0)),0<e.count&&(o+=this.Ty+Qe(this,e.yc(),!0)),o},V.prototype.computeJsonDifference=V.prototype.computeJSONDifference=function(t,i){return s.G(t,V,V,"computeJsonDifference:newmodel"),i===void 0&&(i=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.ko()+this.bC(t)+"}"},B=V.prototype,B.Ry=`,
  "insertedNodeKeys": `,B.iC=`,
  "modifiedNodeData": `,B.Ty=`,
  "removedNodeKeys": `,B.$B=function(t,i){var n=this,e=!1,r=new R,o=new R,h=new R;t.Wf.each(function(a){a.$===n&&(a.tf==="nodeDataArray"?a.Fc===Li?r.add(a.newValue):a.Fc===Ai&&h.add(a.oldValue):n.Le(a.object)?o.add(a.object):n.Tk===a.object&&a.Fc===Yt&&(e=!0))});var l=new R;r.each(function(a){l.add(n.qb(a)),i||o.add(a)});var u=new R;h.each(function(a){u.add(n.qb(a)),i&&o.add(a)});var f="";return e&&(f+=G0(this)),0<l.count&&(f+=(i?this.Ty:this.Ry)+Qe(this,l.yc(),!0)),0<o.count&&(f+=this.iC+Qe(this,o.yc(),!0)),0<u.count&&(f+=(i?this.Ry:this.Ty)+Qe(this,u.yc(),!0)),f},B.rB=function(t){bv(this,t);var i=t.insertedNodeKeys,n=t.modifiedNodeData,e=new tt;if(s.isArray(n))for(var r=0;r<n.length;r++){var o=s.Ba(n,r),h=this.qb(o);h!=null&&e.set(h,o)}if(s.isArray(i))for(var r=s.cb(i),l=0;l<r;l++)o=s.Ba(i,l),h=this.we(o),h===null&&(h=(h=e.get(o))?h:this.copyNodeData({}),this.zy(h,o),this.Rl(h));if(s.isArray(n)){for(r=s.cb(n),l=0;l<r;l++)if(o=s.Ba(n,l),h=this.qb(o),h=this.we(h),h!==null)for(var u in o)u!=="__gohashid"&&u!==this.mm&&u!==this.rq&&this.setDataProperty(h,u,o[u])}if(t=t.removedNodeKeys,s.isArray(t))for(r=s.cb(t),l=0;l<r;l++)o=s.Ba(t,l),h=this.we(o),h!==null&&this.qy(h)},V.prototype.toIncrementalJson=V.prototype.toIncrementalJSON=function(t,i){s.G(t,Et,V,"toIncrementalJson:e"),t.Fc!==Fr&&s.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.KF&&n instanceof Dn?(i===void 0&&(i=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.ko()+this.$B(n,t.propertyName==="FinishedUndo")+"}"):'{ "incremental": 0 }'},V.prototype.toJson=V.prototype.toJSON=V.prototype.PB=function(t){return t===void 0&&(t=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(t)+this.ko()+this.aC()+"}"},V.prototype.applyIncrementalJson=V.prototype.applyIncrementalJSON=function(t){var i=null;if(typeof t=="string")if(q.JSON&&q.JSON.parse)try{i=q.JSON.parse(t)}catch{}else s.trace("WARNING: no JSON.parse available");else typeof t=="object"?i=t:s.k("Unable to modify a Model from: "+t);var n=i.incremental;typeof n!="number"&&s.k("Unable to apply non-incremental changes to Model: "+t),n!==0&&(this.Ib("applyIncrementalJson"),this.rB(i),this.Yc("applyIncrementalJson"))},V.fromJson=V.fromJSON=function(t,i){i===void 0&&(i=null),i!==null&&s.G(i,V,V,"fromJson:model");var n=null;if(typeof t=="string")if(q.JSON&&q.JSON.parse)try{n=q.JSON.parse(t)}catch{}else s.trace("WARNING: no JSON.parse available");else typeof t=="object"?n=t:s.k("Unable to construct a Model from: "+t);if(i===null){var e;e=null;var r=n.class;if(typeof r=="string")try{var o=null;r.indexOf("go.")===0?(r=r.substr(3),o=ke[r]):(o=ke[r],o===void 0&&(o=q[r])),typeof o=="function"&&(e=new o)}catch{}e===null||e instanceof V?i=e:s.k("Unable to construct a Model of declared class: "+n.class)}return i===null&&(i=new K),i.Ru(n),i.sB(n),i},V.prototype.replaceJsonObjects=V.prototype.Uu=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);s.Pa(e)&&s.GE(t,n,this.Uu(e))}else if(s.Pa(t)){for(n in t)if(e=t[n],s.Pa(e)&&(e=this.Uu(e),t[n]=e,n==="points"&&Array.isArray(e))){for(var r=e.length%2===0,o=0;o<e.length;o++)if(typeof e[o]!="number"){r=!1;break}if(r){for(r=new z(F),o=0;o<e.length/2;o++)r.add(new F(e[2*o],e[2*o+1]));r.freeze(),t[n]=r}}if(typeof t=="object"){if(n=t,e=t.class,e==="NaN")n=NaN;else if(e==="Date")n=new Date(t.value);else if(e==="go.Point")n=new F(gn(t.x),gn(t.y));else if(e==="go.Size")n=new lt(gn(t.width),gn(t.height));else if(e==="go.Rect")n=new O(gn(t.x),gn(t.y),gn(t.width),gn(t.height));else if(e==="go.Margin")n=new xt(gn(t.top),gn(t.right),gn(t.bottom),gn(t.left));else if(e==="go.Spot")n=typeof t.enum=="string"?zv(t.enum):new P(gn(t.x),gn(t.y),gn(t.offsetX),gn(t.offsetY));else if(e==="go.Brush"){if(n=new yt,n.type=fo(yt,t.type),typeof t.color=="string"&&(n.color=t.color),t.start instanceof P&&(n.start=t.start),t.end instanceof P&&(n.end=t.end),typeof t.startRadius=="number"&&(n.dv=gn(t.startRadius)),typeof t.endRadius=="number"&&(n.$t=gn(t.endRadius)),t=t.colorStops,s.Pa(t))for(i in t)n.addColorStop(parseFloat(i),t[i])}else e==="go.Geometry"?(i=null,i=typeof t.path=="string"?Gl(t.path):new et,i.type=fo(et,t.type),typeof t.startX=="number"&&(i.ha=gn(t.startX)),typeof t.startY=="number"&&(i.da=gn(t.startY)),typeof t.endX=="number"&&(i.C=gn(t.endX)),typeof t.endY=="number"&&(i.D=gn(t.endY)),t.spot1 instanceof P&&(i.A=t.spot1),t.spot2 instanceof P&&(i.B=t.spot2),n=i):e==="go.EnumValue"&&(i=t.classType,i.indexOf("go.")===0&&(i=i.substr(3)),n=fo(ke[i],t.name));t=n}}return t},V.prototype.quote=function(t){for(var i="",n=t.length,e=0;e<n;e++){var r=t[e];if(r==='"'||r==="\\")i+="\\"+r;else if(r==="\b")i+="\\b";else if(r==="\f")i+="\\f";else if(r===`
`)i+="\\n";else if(r==="\r")i+="\\r";else if(r==="	")i+="\\t";else var o=t.charCodeAt(e),i=16>o?i+("\\u000"+t.charCodeAt(e).toString(16)):32>o?i+("\\u00"+t.charCodeAt(e).toString(16)):o===8232?i+"\\u2028":o===8233?i+"\\u2029":i+r}return'"'+i+'"'},V.prototype.writeJsonValue=V.prototype.hv=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.hv(t.valueOf()):s.isArray(t)?Qe(this,t):s.Pa(t)?td(this,t):typeof t=="function"?"null":t.toString()};function Qe(t,i,n){n===void 0&&(n=!1);var e=s.cb(i);if(0>=e)return"[]";var r=new Ju;r.add("[ "),n&&1<e&&r.add(`
`);for(var o=0;o<e;o++){var h=s.Ba(i,o);h!==void 0&&(0<o&&(r.add(","),n&&r.add(`
`)),r.add(t.hv(h)))}return n&&1<e&&r.add(`
`),r.add(" ]"),r.toString()}function va(t,i){return i===void 0||t==="__gohashid"||t[0]==="_"||typeof i=="function"}function dn(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function td(t,i){var e=i;if(e instanceof F)i={class:"go.Point",x:dn(e.x),y:dn(e.y)};else if(e instanceof lt)i={class:"go.Size",width:dn(e.width),height:dn(e.height)};else if(e instanceof O)i={class:"go.Rect",x:dn(e.x),y:dn(e.y),width:dn(e.width),height:dn(e.height)};else if(e instanceof xt)i={class:"go.Margin",top:dn(e.top),right:dn(e.right),bottom:dn(e.bottom),left:dn(e.left)};else if(e instanceof P)i=e.Zc()?{class:"go.Spot",x:dn(e.x),y:dn(e.y),offsetX:dn(e.offsetX),offsetY:dn(e.offsetY)}:{class:"go.Spot",enum:e.toString()};else if(e instanceof yt){if(i={class:"go.Brush",type:e.type.name},e.type===gs?i.color=e.color:(e.type===qr||e.type===fe)&&(i.start=e.start,i.end=e.end,e.type===fe&&(e.dv!==0&&(i.startRadius=dn(e.dv)),isNaN(e.$t)||(i.endRadius=dn(e.$t)))),e.Dk!==null){for(var n={},e=e.Dk.i;e.next();)n[e.key]=e.value;i.colorStops=n}}else if(e instanceof et)i={class:"go.Geometry",type:e.type.name},e.ha!==0&&(i.startX=dn(e.ha)),e.da!==0&&(i.startY=dn(e.da)),e.C!==0&&(i.endX=dn(e.C)),e.D!==0&&(i.endY=dn(e.D)),e.A.L(gi)||(i.spot1=e.A),e.B.L(_i)||(i.spot2=e.B),e.type===Ye&&(i.path=Qv(e));else if(e instanceof Je)i={class:"go.EnumValue",classType:s.pf(e.Je),name:e.name};else if(e instanceof N||e instanceof x||e instanceof ct||e instanceof V||e instanceof ut||e instanceof it||e instanceof wt||e instanceof At||e instanceof Rt||e instanceof Dn)return s.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+e.toString()),"{}";var n="{",e=!0,r;for(r in i){var o=s.vb(i,r);if(!va(r,o))if(e?e=!1:n+=", ",n+='"'+r+'":',r==="points"&&o instanceof z&&o.na===F){for(var h="[",o=o.i;o.next();){var l=o.value;1<h.length&&(h+=","),h+=t.hv(l.x),h+=",",h+=t.hv(l.y)}h+="]",n+=h}else n+=t.hv(o)}return n+"}"}function gn(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}s.defineProperty(V,{name:"name"},function(){return this.Sb},function(t){var i=this.Sb;i!==t&&(s.j(t,"string",V,"name"),this.Sb=t,this.h("name",i,t))}),s.defineProperty(V,{$l:"dataFormat"},function(){return this.sr},function(t){var i=this.sr;i!==t&&(s.j(t,"string",V,"dataFormat"),this.sr=t,this.h("dataFormat",i,t))}),s.defineProperty(V,{ib:"isReadOnly"},function(){return this.Si},function(t){var i=this.Si;i!==t&&(s.j(t,"boolean",V,"isReadOnly"),this.Si=t,this.h("isReadOnly",i,t))}),s.defineProperty(V,{Tk:"modelData"},function(){return this.Hz},function(t){var i=this.Hz;i!==t&&(s.j(t,"object",V,"modelData"),this.Hz=t,this.h("modelData",i,t),this.Jb(t))}),V.prototype.addChangedListener=V.prototype.nn=function(t){s.j(t,"function",V,"addChangedListener:listener"),this.kk===null&&(this.kk=new z("function")),this.kk.add(t)},V.prototype.removeChangedListener=V.prototype.Su=function(t){s.j(t,"function",V,"removeChangedListener:listener"),this.kk!==null&&(this.kk.remove(t),this.kk.count===0&&(this.kk=null))},V.prototype.mx=function(t){if(this.gb||this.ja.tF(t),this.kk!==null)for(var i=this.kk,n=i.length,e=0;e<n;e++)i.fa(e)(t)},V.prototype.raiseChangedEvent=V.prototype.bd=function(t,i,n,e,r,o,h){_t(this,"",t,i,n,e,r,o,h)},V.prototype.raiseChanged=V.prototype.h=function(t,i,n,e,r){_t(this,"",Yt,t,this,i,n,e,r)},V.prototype.raiseDataChanged=V.prototype.qB=function(t,i,n,e,r,o){_t(this,"",Yt,i,t,n,e,r,o)};function _t(t,i,n,e,r,o,h,l,u){l===void 0&&(l=null),u===void 0&&(u=null);var f=new Et;f.$=t,f.Fc=n,f.tf=i,f.propertyName=e,f.object=r,f.oldValue=o,f.Gj=l,f.newValue=h,f.Fj=u,t.mx(f)}s.defineProperty(V,{ja:"undoManager"},function(){return this.cA},function(t){var i=this.cA;i!==t&&(s.G(t,Rt,V,"undoManager"),i!==null&&i.sJ(this),this.cA=t,t!==null&&t.oH(this))}),s.defineProperty(V,{gb:"skipsUndoManager"},function(){return this.ij},function(t){s.j(t,"boolean",V,"skipsUndoManager"),this.ij=t}),V.prototype.sn=function(t,i){if(t!==null&&t.$===this)if(t.Fc===Yt){var n=t.object,e=t.propertyName,r=t.ka(i);s.Ma(n,e,r)}else t.Fc===Li?(n=t.Fj,t.tf==="nodeDataArray"?(e=t.newValue,s.Pa(e)&&typeof n=="number"&&(r=this.qb(e),i?(s.Ba(this.He,n)===e&&s.Jg(this.He,n),r!==void 0&&this.Lc.remove(r)):(s.Ba(this.He,n)!==e&&s.sh(this.He,n,e),r!==void 0&&this.Lc.add(r,e)))):t.tf===""?(e=t.object,!s.isArray(e)&&t.propertyName&&(e=s.vb(t.object,t.propertyName)),s.isArray(e)&&typeof n=="number"&&(r=t.newValue,i?s.Jg(e,n):s.sh(e,n,r))):s.k("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.Fc===Ai?(n=t.Gj,t.tf==="nodeDataArray"?(e=t.oldValue,s.Pa(e)&&typeof n=="number"&&(r=this.qb(e),i?(s.Ba(this.He,n)!==e&&s.sh(this.He,n,e),r!==void 0&&this.Lc.add(r,e)):(s.Ba(this.He,n)===e&&s.Jg(this.He,n),r!==void 0&&this.Lc.remove(r)))):t.tf===""?(e=t.object,!s.isArray(e)&&t.propertyName&&(e=s.vb(t.object,t.propertyName)),s.isArray(e)&&typeof n=="number"&&(r=t.oldValue,i?s.sh(e,n,r):s.Jg(e,n))):s.k("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.Fc!==Fr&&s.k("unknown ChangedEvent: "+t.toString())},V.prototype.startTransaction=V.prototype.Ib=function(t){return this.ja.Ib(t)},V.prototype.commitTransaction=V.prototype.Yc=function(t){return this.ja.Yc(t)},V.prototype.rollbackTransaction=V.prototype.om=function(){return this.ja.om()},V.prototype.commit=V.prototype.commit=function(t,i){var n=i;n===void 0&&(n="");var e=this.gb;n===null&&(this.gb=!0,n=""),this.ja.Ib(n);var r=!1;try{t(this),r=!0}finally{r?this.ja.Yc(n):this.ja.om(),this.gb=e}},V.prototype.updateTargetBindings=V.prototype.Jb=function(t,i){i===void 0&&(i=""),_t(this,"SourceChanged",Fr,i,t,null,null)},s.defineProperty(V,{mm:"nodeKeyProperty"},function(){return this.ok},function(t){var i=this.ok;i!==t&&(Dr(t,V,"nodeKeyProperty"),t===""&&s.k("Model.nodeKeyProperty may not be the empty string"),0<this.Lc.count&&s.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ok=t,this.h("nodeKeyProperty",i,t))});function Dr(t,i,n){typeof t!="string"&&typeof t!="function"&&s.Fd(t,"string or function",i,n)}V.prototype.getKeyForNodeData=V.prototype.qb=function(t){if(t!==null){var i=this.ok;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("Key value for node data "+t+" is not a number or a string: "+i)}}},V.prototype.setKeyForNodeData=V.prototype.zy=function(t,i){if(i!=null&&bn(i)||s.Fd(i,"number or string",V,"setKeyForNodeData:key"),t!==null){var n=this.ok;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e!==i&&this.we(i)===null&&(s.Ma(t,n,i),this.Lc.remove(e),this.Lc.add(i,t),_t(this,"nodeKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n),this.Tu(e,i))}else s.Ma(t,n,i)}},s.defineProperty(V,{rL:"makeUniqueKeyFunction"},function(){return this.cp},function(t){var i=this.cp;i!==t&&(t!==null&&s.j(t,"function",V,"makeUniqueKeyFunction"),this.cp=t,this.h("makeUniqueKeyFunction",i,t))});function bn(t){return typeof t=="number"||typeof t=="string"}V.prototype.containsNodeData=V.prototype.Le=function(t){var i=this.qb(t);return i===void 0?!1:this.Lc.ka(i)===t},V.prototype.findNodeDataForKey=V.prototype.we=function(t){return t===null&&s.k("Model.findNodeDataForKey:key must not be null"),t!==void 0&&bn(t)?this.Lc.ka(t):null},s.defineProperty(V,{Pg:"nodeDataArray"},function(){return this.He},function(t){var i=this.He;if(i!==t){s.mA(t,V,"nodeDataArray"),this.Lc.clear(),this.WB();for(var n=s.cb(t),e=0;e<n;e++){var r=s.Ba(t,e);if(!s.Pa(r)){s.k("Model.nodeDataArray must only contain Objects, not: "+r);return}s.cq(r)}this.He=t;for(var o=new z(Object),e=0;e<n;e++){var r=s.Ba(t,e),h=this.qb(r);h===void 0||this.Lc.ka(h)!==null?o.add(r):this.Lc.add(h,r)}for(e=o.i;e.next();)r=e.value,this.eB(r),o=this.qb(r),o!==void 0&&this.Lc.add(o,r);for(_t(this,"nodeDataArray",Yt,"nodeDataArray",this,i,t),e=0;e<n;e++)r=s.Ba(t,e),this.Aq(r),this.zq(r);this.JE(),s.BI(t)||(this.ib=!0)}}),V.prototype.makeNodeDataKeyUnique=V.prototype.eB=function(t){if(t!==null){var i=this.ok;if(i!==""){var n=this.qb(t);if(n===void 0||this.Lc.contains(n)){var e=this.cp;if(e!==null&&(n=e(this,t),n!=null&&!this.Lc.contains(n))){s.Ma(t,i,n);return}if(typeof n=="string"){for(e=2;this.Lc.contains(n+e);)e++;s.Ma(t,i,n+e)}else if(n===void 0||typeof n=="number"){for(e=-this.Lc.count-1;this.Lc.contains(e);)e--;s.Ma(t,i,e)}else s.k("Model.getKeyForNodeData returned something other than a string or a number: "+n)}}}},V.prototype.addNodeData=V.prototype.Rl=function(t){t!==null&&(s.cq(t),this.Le(t)||id(this,t,!0))};function id(t,i,n){var e=t.qb(i);(e===void 0||t.Lc.ka(e)!==i)&&(t.eB(i),e=t.qb(i),e===void 0?s.k("Model.makeNodeDataKeyUnique failed on "+i+".  Data not added to Model."):(t.Lc.add(e,i),e=null,n&&(e=s.cb(t.He),s.sh(t.He,e,i)),_t(t,"nodeDataArray",Li,"nodeDataArray",t,null,i,null,e),t.Aq(i),t.zq(i)))}V.prototype.addNodeDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.Rl(s.Ba(t,n));else for(t=t.i;t.next();)this.Rl(t.value)},V.prototype.removeNodeData=V.prototype.qy=function(t){t!==null&&nd(this,t,!0)};function nd(t,i,n){var e=t.qb(i);if(e!==void 0&&t.Lc.remove(e),e=null,n){if(e=s.Ul(t.He,i),0>e)return;s.Jg(t.He,e)}_t(t,"nodeDataArray",Ai,"nodeDataArray",t,i,null,e,null),t.gv(i)}V.prototype.removeNodeDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.qy(s.Ba(t,n));else for(t=t.i;t.next();)this.qy(t.value)},B=V.prototype,B.Tu=function(t,i){var n=da(this,t);n instanceof R&&this.Li.add(i,n)},B.WB=function(){},B.Aq=function(){},B.zq=function(){},B.gv=function(){};function Xe(t,i,n){if(i!==void 0){var e=t.Li.ka(i);e===null&&(e=new R(Object),t.Li.add(i,e)),e.add(n)}}function cr(t,i,n){if(i!==void 0){var e=t.Li.ka(i);e instanceof R&&(n==null?t.Li.remove(i):(e.remove(n),e.count===0&&t.Li.remove(i)))}}function da(t,i){if(i===void 0)return null;var n=t.Li.ka(i);return n instanceof R?n:null}V.prototype.clearUnresolvedReferences=V.prototype.JE=function(t){t===void 0?this.Li.clear():this.Li.remove(t)},s.defineProperty(V,{NK:"copyNodeDataFunction"},function(){return this.yo},function(t){var i=this.yo;i!==t&&(t!==null&&s.j(t,"function",V,"copyNodeDataFunction"),this.yo=t,this.h("copyNodeDataFunction",i,t))}),s.defineProperty(V,{vA:"copiesArrays"},function(){return this.kr},function(t){var i=this.kr;i!==t&&(t!==null&&s.j(t,"boolean",V,"copiesArrays"),this.kr=t,this.h("copiesArrays",i,t))}),s.defineProperty(V,{uA:"copiesArrayObjects"},function(){return this.jr},function(t){var i=this.jr;i!==t&&(t!==null&&s.j(t,"boolean",V,"copiesArrayObjects"),this.jr=t,this.h("copiesArrayObjects",i,t))}),V.prototype.copyNodeData=function(t){if(t===null)return null;var i=null,i=this.yo,i=i!==null?i(t,this):ga(this,t,!0);return s.Pa(i)&&s.oc(i),i};function ga(t,i,n){if(t.vA&&Array.isArray(i)){var e=[];for(n=0;n<i.length;n++){var r=ga(t,i[n],t.uA);e.push(r)}return s.oc(e),e}if(n&&s.Pa(i)){n=(n=i.constructor)?new n:{};for(e in i)if(e!=="__gohashid"){var r=s.vb(i,e),o;o=r,o instanceof N||o instanceof x||o instanceof ct||o instanceof Nt||o instanceof qn||o instanceof ut||o instanceof it||o instanceof wt||o instanceof Ht||o instanceof vo?(e[0]!=="_"&&s.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+e+'" of data object: '+i.toString()+`  
Model data should not have any references to a Diagram or any part of a diagram, such as: `+o.toString()),o=!0):o=o instanceof V||o instanceof Rt||o instanceof Dn||o instanceof Et,o||(r=ga(t,r,!1)),s.Ma(n,e,r)}return s.oc(n),n}return i instanceof F||i instanceof lt||i instanceof O||i instanceof P||i instanceof xt?i.copy():i}s.defineProperty(V,{qH:"afterCopyFunction"},function(){return this.Uq},function(t){var i=this.Uq;i!==t&&(t!==null&&s.j(t,"function",V,"afterCopyFunction"),this.Uq=t,this.h("afterCopyFunction",i,t))});var Vl=!1;V.prototype.set=function(t,i,n){this.setDataProperty(t,i,n)},V.prototype.set=V.prototype.setDataProperty=function(t,i,n){if(this.Le(t)){if(i===this.mm)this.zy(t,n);else if(i===this.Yn){this.xy(t,n);return}}else!Vl&&t instanceof N&&(Vl=!0,s.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},V.prototype.addArrayItem=function(t,i){this.QA(t,-1,i)},V.prototype.insertArrayItem=V.prototype.QA=function(t,i,n){t===this.He&&s.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>i&&(i=s.cb(t)),s.sh(t,i,n),_t(this,"",Li,"",t,null,n,null,i)},V.prototype.removeArrayItem=V.prototype.cG=function(t,i){i===void 0&&(i=-1),t===this.He&&s.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),i===-1&&(i=s.cb(t)-1);var n=s.Ba(t,i);s.Jg(t,i),_t(this,"",Ai,"",t,n,null,i,null)},s.defineProperty(V,{Yn:"nodeCategoryProperty"},function(){return this.Wm},function(t){var i=this.Wm;i!==t&&(Dr(t,V,"nodeCategoryProperty"),this.Wm=t,this.h("nodeCategoryProperty",i,t))}),V.prototype.getCategoryForNodeData=V.prototype.IA=function(t){if(t===null)return"";var i=this.Wm;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getCategoryForNodeData found a non-string category for "+t+": "+i),"")},V.prototype.setCategoryForNodeData=V.prototype.xy=function(t,i){if(s.j(i,"string",V,"setCategoryForNodeData:cat"),t!==null){var n=this.Wm;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),_t(this,"nodeCategory",Yt,n,t,e,i))}else s.Ma(t,n,i)}};function K(t,i){V.call(this),2<arguments.length&&s.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),this.kf=[],this.Vi=new R(Object),this.fd=new tt(null,Object),this.Cl="",this.Am=this.xo=this.dp=null,this.Xh="from",this.Yh="to",this.Sm=this.Rm="",this.Qm="category",this.zg="",this.hp="isGroup",this.mh="group",this.lr=!1,t!==void 0&&(this.Pg=t),i!==void 0&&(this.Bh=i)}s.La(K,V),s.ga("GraphLinksModel",K),K.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.Cl=this.Cl,t.dp=this.dp,t.xo=this.xo,t.Xh=this.Xh,t.Yh=this.Yh,t.Rm=this.Rm,t.Sm=this.Sm,t.Qm=this.Qm,t.zg=this.zg,t.hp=this.hp,t.mh=this.mh,t.lr=this.lr},K.prototype.clear=K.prototype.clear=function(){V.prototype.clear.call(this),this.kf=[],this.fd.clear(),this.Vi.clear()},B=K.prototype,B.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.PB();var i=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0,e=0;e<n;e++)var r=s.Ba(t,e),i=i+(" "+this.qb(r)+":"+We(r));for(i+=`
 link data:`,t=this.Bh,n=s.cb(t),e=0;e<n;e++)r=s.Ba(t,e),i+=" "+this.em(r)+"-->"+this.fm(r)}return i},B.ko=function(){var t=V.prototype.ko.call(this),i="";return this.Du!=="category"&&typeof this.Du=="string"&&(i+=`,
  "linkCategoryProperty": `+this.quote(this.Du)),this.Dj!==""&&typeof this.Dj=="string"&&(i+=`,
  "linkKeyProperty": `+this.quote(this.Dj)),this.On!=="from"&&typeof this.On=="string"&&(i+=`,
  "linkFromKeyProperty": `+this.quote(this.On)),this.Pn!=="to"&&typeof this.Pn=="string"&&(i+=`,
  "linkToKeyProperty": `+this.quote(this.Pn)),this.Eu!==""&&typeof this.Eu=="string"&&(i+=`,
  "linkFromPortIdProperty": `+this.quote(this.Eu)),this.Gu!==""&&typeof this.Gu=="string"&&(i+=`,
  "linkToPortIdProperty": `+this.quote(this.Gu)),this.Fu!==""&&typeof this.Fu=="string"&&(i+=`,
  "linkLabelKeysProperty": `+this.quote(this.Fu)),this.rq!=="isGroup"&&typeof this.rq=="string"&&(i+=`,
  "nodeIsGroupProperty": `+this.quote(this.rq)),this.Nu!=="group"&&typeof this.Nu=="string"&&(i+=`,
  "nodeGroupKeyProperty": `+this.quote(this.Nu)),t+i},B.Ru=function(t){V.prototype.Ru.call(this,t),t.linkKeyProperty&&(this.Dj=t.linkKeyProperty),t.linkFromKeyProperty&&(this.On=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Pn=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.Eu=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Gu=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.Du=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.Fu=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.rq=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.Nu=t.nodeGroupKeyProperty)},B.aC=function(){var t=V.prototype.aC.call(this),i=`,
  "linkDataArray": `+Qe(this,this.Bh,!0);return t+i},B.sB=function(t){V.prototype.sB.call(this,t),t=t.linkDataArray,s.isArray(t)&&(this.Uu(t),this.Bh=t)},B.bC=function(t){if(!(t instanceof K))return s.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";this.Dj===""&&s.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var i=V.prototype.bC.call(this,t);_s(this,t,"linkKeyProperty"),_s(this,t,"linkFromKeyProperty"),_s(this,t,"linkToKeyProperty"),_s(this,t,"linkLabelKeysProperty"),_s(this,t,"nodeIsGroupProperty"),_s(this,t,"nodeGroupKeyProperty");for(var n=new R,e=new R,r=new R().Pc(this.fd.LF),o=new tt,h=t.Bh,l=0;l<h.length;l++){var u=h[l],f=t.df(u);if(f!==void 0){r.remove(f);var a=this.Zp(f);a===null?(n.add(f),e.add(u)):Ol(this,a,u,o)||e.add(u)}else this.Zx(u),f=this.df(u),n.add(f),e.add(u)}return t=i,0<n.count&&(t+=this.Qy+Qe(this,n.yc(),!0)),0<e.count&&(t+=this.hC+Qe(this,e.yc(),!0)),0<r.count&&(t+=this.Sy+Qe(this,r.yc(),!0)),t},B.Qy=`,
  "insertedLinkKeys": `,B.hC=`,
  "modifiedLinkData": `,B.Sy=`,
  "removedLinkKeys": `,B.$B=function(t,i){this.Dj===""&&s.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=V.prototype.$B.call(this,t,i),e=this,r=new R,o=new R,h=new R;t.Wf.each(function(f){f.$===e&&(f.tf==="linkDataArray"?f.Fc===Li?r.add(f.newValue):f.Fc===Ai&&h.add(f.oldValue):e.uh(f.object)&&o.add(f.object))});var l=new R;r.each(function(f){l.add(e.df(f)),i||o.add(f)});var u=new R;return h.each(function(f){u.add(e.df(f)),i&&o.add(f)}),0<l.count&&(n+=(i?this.Sy:this.Qy)+Qe(this,l.yc(),!0)),0<o.count&&(n+=this.hC+Qe(this,o.yc(),!0)),0<u.count&&(n+=(i?this.Qy:this.Sy)+Qe(this,u.yc(),!0)),n},B.rB=function(t){V.prototype.rB.call(this,t);var i=t.insertedLinkKeys,n=t.modifiedLinkData,e=new tt;if(s.isArray(n))for(var r=0;r<n.length;r++){var o=s.Ba(n,r),h=this.df(o);h!=null&&e.set(h,o)}if(s.isArray(i))for(var r=s.cb(i),l=0;l<r;l++)o=s.Ba(i,l),h=this.Zp(o),h===null&&(h=(h=e.get(o))?h:this.ox({}),this.tG(h,o),this.Ot(h));if(s.isArray(n)){for(r=s.cb(n),l=0;l<r;l++)if(o=s.Ba(n,l),h=this.df(o),h=this.Zp(h),h!==null)for(var u in o)u!=="__gohashid"&&u!==this.Dj&&this.setDataProperty(h,u,o[u])}if(t=t.removedLinkKeys,s.isArray(t))for(r=s.cb(t),l=0;l<r;l++)o=s.Ba(t,l),h=this.Zp(o),h!==null&&this.py(h)},B.sn=function(t,i){if(t.Fc===Li){var n=t.Fj;if(t.tf==="linkDataArray"){var e=t.newValue;if(s.Pa(e)&&typeof n=="number"){var r=this.df(e);i?(this.Vi.remove(e),s.Ba(this.kf,n)===e&&s.Jg(this.kf,n),r!==void 0&&this.fd.remove(r)):(this.Vi.add(e),s.Ba(this.kf,n)!==e&&s.sh(this.kf,n,e),r!==void 0&&this.fd.add(r,e))}return}if(t.tf==="linkLabelKeys"){e=this.Nk(t.object),s.isArray(e)&&typeof n=="number"&&(i?(n=s.Ul(e,t.newValue),0<=n&&s.Jg(e,n)):0>s.Ul(e,t.newValue)&&s.sh(e,n,t.newValue));return}}else if(t.Fc===Ai){if(n=t.Gj,t.tf==="linkDataArray"){e=t.oldValue,s.Pa(e)&&typeof n=="number"&&(r=this.df(e),i?(this.Vi.add(e),s.Ba(this.kf,n)!==e&&s.sh(this.kf,n,e),r!==void 0&&this.fd.add(r,e)):(this.Vi.remove(e),s.Ba(this.kf,n)===e&&s.Jg(this.kf,n),r!==void 0&&this.fd.remove(r)));return}if(t.tf==="linkLabelKeys"){e=this.Nk(t.object),s.isArray(e)&&typeof n=="number"&&(i?0>s.Ul(e,t.newValue)&&s.sh(e,n,t.newValue):(n=s.Ul(e,t.newValue),0<=n&&s.Jg(e,n)));return}}V.prototype.sn.call(this,t,i)},s.defineProperty(K,{kA:"archetypeNodeData"},function(){return this.Am},function(t){var i=this.Am;i!==t&&(t!==null&&s.G(t,Object,K,"archetypeNodeData"),this.Am=t,this.h("archetypeNodeData",i,t))}),K.prototype.Qn=function(t){if(t!==void 0){var i=this.Am;if(i!==null){var n=this.we(t);n===null&&(n=this.copyNodeData(i),s.Ma(n,this.ok,t),this.Rl(n))}return t}},s.defineProperty(K,{On:"linkFromKeyProperty"},function(){return this.Xh},function(t){var i=this.Xh;i!==t&&(Dr(t,K,"linkFromKeyProperty"),this.Xh=t,this.h("linkFromKeyProperty",i,t))}),K.prototype.getFromKeyForLinkData=K.prototype.em=function(t){if(t!==null){var i=this.Xh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("FromKey value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setFromKeyForLinkData=K.prototype.CB=function(t,i){if(i===null&&(i=void 0),i===void 0||bn(i)||s.Fd(i,"number or string",K,"setFromKeyForLinkData:key"),t!==null){var n=this.Xh;if(n!=="")if(i=this.Qn(i),this.uh(t)){var e=s.vb(t,n);e!==i&&(cr(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Xe(this,i,t),_t(this,"linkFromKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Pn:"linkToKeyProperty"},function(){return this.Yh},function(t){var i=this.Yh;i!==t&&(Dr(t,K,"linkToKeyProperty"),this.Yh=t,this.h("linkToKeyProperty",i,t))}),K.prototype.getToKeyForLinkData=K.prototype.fm=function(t){if(t!==null){var i=this.Yh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("ToKey value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setToKeyForLinkData=K.prototype.IB=function(t,i){if(i===null&&(i=void 0),i===void 0||bn(i)||s.Fd(i,"number or string",K,"setToKeyForLinkData:key"),t!==null){var n=this.Yh;if(n!=="")if(i=this.Qn(i),this.uh(t)){var e=s.vb(t,n);e!==i&&(cr(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Xe(this,i,t),_t(this,"linkToKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Eu:"linkFromPortIdProperty"},function(){return this.Rm},function(t){var i=this.Rm;i!==t&&(Dr(t,K,"linkFromPortIdProperty"),t!==this.On&&t!==this.Pn||s.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Rm=t,this.h("linkFromPortIdProperty",i,t))}),K.prototype.getFromPortIdForLinkData=K.prototype.eI=function(t){if(t===null)return"";var i=this.Rm;return i===""?"":(t=s.vb(t,i),t===void 0?"":t)},K.prototype.setFromPortIdForLinkData=K.prototype.DB=function(t,i){if(s.j(i,"string",K,"setFromPortIdForLinkData:portname"),t!==null){var n=this.Rm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),_t(this,"linkFromPortId",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Gu:"linkToPortIdProperty"},function(){return this.Sm},function(t){var i=this.Sm;i!==t&&(Dr(t,K,"linkToPortIdProperty"),t!==this.On&&t!==this.Pn||s.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Sm=t,this.h("linkToPortIdProperty",i,t))}),K.prototype.getToPortIdForLinkData=K.prototype.iI=function(t){if(t===null)return"";var i=this.Sm;return i===""?"":(t=s.vb(t,i),t===void 0?"":t)},K.prototype.setToPortIdForLinkData=K.prototype.JB=function(t,i){if(s.j(i,"string",K,"setToPortIdForLinkData:portname"),t!==null){var n=this.Sm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),_t(this,"linkToPortId",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Fu:"linkLabelKeysProperty"},function(){return this.zg},function(t){var i=this.zg;i!==t&&(Dr(t,K,"linkLabelKeysProperty"),this.zg=t,this.h("linkLabelKeysProperty",i,t))}),K.prototype.getLabelKeysForLinkData=K.prototype.Nk=function(t){if(t===null)return s.no;var i=this.zg;return i===""?s.no:(t=s.vb(t,i),t===void 0?s.no:t)},K.prototype.setLabelKeysForLinkData=K.prototype.uG=function(t,i){if(s.mA(i,K,"setLabelKeysForLinkData:arr"),t!==null){var n=this.zg;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);if(e===void 0&&(e=s.no),e!==i){for(var r=s.cb(e),o=0;o<r;o++){var h=s.Ba(e,o);cr(this,h,t)}for(s.Ma(t,n,i),r=s.cb(i),o=0;o<r;o++)h=s.Ba(i,o),this.we(h)===null&&Xe(this,h,t);_t(this,"linkLabelKeys",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n)}}else s.Ma(t,n,i)}},K.prototype.addLabelKeyForLinkData=K.prototype.yE=function(t,i){if(i!=null&&(bn(i)||s.Fd(i,"number or string",K,"addLabelKeyForLinkData:key"),t!==null)){var n=this.zg;if(n!==""){var e=s.vb(t,n);if(e===void 0)n=[],n.push(i),this.uG(t,n);else if(s.isArray(e)){var r=s.Ul(e,i);0<=r||(r=s.cb(e),s.sh(e,1/0,i),this.uh(t)&&(this.we(i)===null&&Xe(this,i,t),_t(this,"linkLabelKeys",Li,n,t,null,i,null,r)))}else s.k(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},K.prototype.removeLabelKeyForLinkData=K.prototype.rJ=function(t,i){if(i!=null&&(bn(i)||s.Fd(i,"number or string",K,"removeLabelKeyForLinkData:key"),t!==null)){var n=this.zg;if(n!==""){var e=s.vb(t,n);if(s.isArray(e)){var r=s.Ul(e,i);0>r||(s.Jg(e,r),this.uh(t)&&(cr(this,i,t),_t(this,"linkLabelKeys",Ai,n,t,i,null,r,null)))}else e!==void 0&&s.k(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},s.defineProperty(K,{Bh:"linkDataArray"},function(){return this.kf},function(t){var i=this.kf;if(i!==t){s.mA(t,K,"linkDataArray"),this.fd.clear();for(var n=s.cb(t),e=0;e<n;e++){var r=s.Ba(t,e);if(!s.Pa(r)){s.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+r);return}s.cq(r)}if(this.kf=t,this.Dj!==""){for(var o=new z(Object),e=0;e<n;e++){var r=s.Ba(t,e),h=this.df(r);h===void 0||this.fd.ka(h)!==null?o.add(r):this.fd.add(h,r)}for(e=o.i;e.next();)r=e.value,this.Zx(r),o=this.df(r),o!==void 0&&this.fd.add(o,r)}for(o=new R(Object),e=0;e<n;e++)r=s.Ba(t,e),o.add(r);for(this.Vi=o,_t(this,"linkDataArray",Yt,"linkDataArray",this,i,t),e=0;e<n;e++)r=s.Ba(t,e),O0(this,r)}}),s.defineProperty(K,{Dj:"linkKeyProperty"},function(){return this.Cl},function(t){var i=this.Cl;if(i!==t){Dr(t,K,"linkKeyProperty"),this.Cl=t,this.fd.clear();for(var n=s.cb(this.Bh),e=0;e<n;e++){var r=s.Ba(this.Bh,e),o=this.df(r);o===void 0&&(this.Zx(r),o=this.df(r)),o!==void 0&&this.fd.add(o,r)}this.h("linkKeyProperty",i,t)}}),K.prototype.getKeyForLinkData=K.prototype.df=function(t){if(t!==null){var i=this.Cl;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("Key value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setKeyForLinkData=K.prototype.tG=function(t,i){if(i!=null&&bn(i)||s.Fd(i,"number or string",K,"setKeyForLinkData:key"),t!==null){var n=this.Cl;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e!==i&&this.Zp(i)===null&&(s.Ma(t,n,i),this.fd.remove(e),this.fd.add(i,t),_t(this,"linkKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{sL:"makeUniqueLinkKeyFunction"},function(){return this.dp},function(t){var i=this.dp;i!==t&&(t!==null&&s.j(t,"function",K,"makeUniqueLinkKeyFunction"),this.dp=t,this.h("makeUniqueLinkKeyFunction",i,t))}),K.prototype.findLinkDataForKey=K.prototype.Zp=function(t){return t===null&&s.k("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&bn(t)?this.fd.ka(t):null},K.prototype.makeLinkDataKeyUnique=K.prototype.Zx=function(t){if(t!==null){var i=this.Cl;if(i!==""){var n=this.df(t);if(n===void 0||this.fd.contains(n)){var e=this.dp;if(e!==null&&(n=e(this,t),n!=null&&!this.fd.contains(n))){s.Ma(t,i,n);return}if(typeof n=="string"){for(e=2;this.fd.contains(n+e);)e++;s.Ma(t,i,n+e)}else if(n===void 0||typeof n=="number"){for(e=-this.fd.count-1;this.fd.contains(e);)e--;s.Ma(t,i,e)}else s.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+n)}}}},K.prototype.containsLinkData=K.prototype.uh=function(t){return t===null?!1:this.Vi.contains(t)},K.prototype.addLinkData=K.prototype.Ot=function(t){t!==null&&(s.cq(t),this.uh(t)||ed(this,t,!0))};function ed(t,i,n){if(t.Dj!==""){var e=t.df(i);if(e!==void 0&&t.fd.ka(e)===i)return;if(t.Zx(i),e=t.df(i),e===void 0){s.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+i+". Data not added to model.");return}t.fd.add(e,i)}t.Vi.add(i),e=null,n&&(e=s.cb(t.kf),s.sh(t.kf,e,i)),_t(t,"linkDataArray",Li,"linkDataArray",t,null,i,null,e),O0(t,i)}K.prototype.addLinkDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.Ot(s.Ba(t,n));else for(t=t.i;t.next();)this.Ot(t.value)},K.prototype.removeLinkData=K.prototype.py=function(t){t!==null&&rd(this,t,!0)};function rd(t,i,n){t.Vi.remove(i);var e=t.df(i);if(e!==void 0&&t.fd.remove(e),e=null,n){if(e=s.Ul(t.kf,i),0>e)return;s.Jg(t.kf,e)}if(_t(t,"linkDataArray",Ai,"linkDataArray",t,i,null,e,null),n=t.em(i),cr(t,n,i),n=t.fm(i),cr(t,n,i),e=t.Nk(i),s.isArray(e))for(var r=s.cb(e),o=0;o<r;o++)n=s.Ba(e,o),cr(t,n,i)}K.prototype.removeLinkDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.py(s.Ba(t,n));else for(t=t.i;t.next();)this.py(t.value)};function O0(t,i){var n=t.em(i),n=t.Qn(n);t.we(n)===null&&Xe(t,n,i),n=t.fm(i),n=t.Qn(n),t.we(n)===null&&Xe(t,n,i);var e=t.Nk(i);if(s.isArray(e))for(var r=s.cb(e),o=0;o<r;o++)n=s.Ba(e,o),t.we(n)===null&&Xe(t,n,i)}s.defineProperty(K,{MK:"copyLinkDataFunction"},function(){return this.xo},function(t){var i=this.xo;i!==t&&(t!==null&&s.j(t,"function",K,"copyLinkDataFunction"),this.xo=t,this.h("copyLinkDataFunction",i,t))}),K.prototype.copyLinkData=K.prototype.ox=function(t){if(t===null)return null;var i=null,i=this.xo,i=i!==null?i(t,this):ga(this,t,!0);return s.Pa(i)&&(s.oc(i),this.Xh!==""&&s.Ma(i,this.Xh,void 0),this.Yh!==""&&s.Ma(i,this.Yh,void 0),this.zg!==""&&s.Ma(i,this.zg,[])),i},s.defineProperty(K,{rq:"nodeIsGroupProperty"},function(){return this.hp},function(t){var i=this.hp;i!==t&&(Dr(t,K,"nodeIsGroupProperty"),this.hp=t,this.h("nodeIsGroupProperty",i,t))}),K.prototype.isGroupForNodeData=K.prototype.WA=function(t){if(t===null)return!1;var i=this.hp;return i===""?!1:!!s.vb(t,i)},s.defineProperty(K,{Nu:"nodeGroupKeyProperty"},function(){return this.mh},function(t){var i=this.mh;i!==t&&(Dr(t,K,"nodeGroupKeyProperty"),this.mh=t,this.h("nodeGroupKeyProperty",i,t))}),s.defineProperty(K,{wn:"copiesGroupKeyOfNodeData"},function(){return this.lr},function(t){this.lr!==t&&(s.j(t,"boolean",K,"copiesGroupKeyOfNodeData"),this.lr=t)}),K.prototype.getGroupKeyForNodeData=K.prototype.En=function(t){if(t!==null){var i=this.mh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("GroupKey value for node data "+t+" is not a number or a string: "+i)}}},K.prototype.setGroupKeyForNodeData=K.prototype.EB=function(t,i){if(i===null&&(i=void 0),i===void 0||bn(i)||s.Fd(i,"number or string",K,"setGroupKeyForNodeData:key"),t!==null){var n=this.mh;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e!==i&&(cr(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Xe(this,i,t),_t(this,"nodeGroupKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},K.prototype.copyNodeData=function(t){return t===null?null:(t=V.prototype.copyNodeData.call(this,t),this.wn||this.mh===""||s.vb(t,this.mh)===void 0||s.Ma(t,this.mh,void 0),t)},K.prototype.setDataProperty=function(t,i,n){if(this.Le(t))if(i===this.mm)this.zy(t,n);else{if(i===this.Yn){this.xy(t,n);return}if(i===this.Nu){this.EB(t,n);return}i===this.rq&&s.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.uh(t)){if(i===this.On){this.CB(t,n);return}if(i===this.Pn){this.IB(t,n);return}if(i===this.Eu){this.DB(t,n);return}if(i===this.Gu){this.JB(t,n);return}if(i===this.Dj){this.tG(t,n);return}if(i===this.Du){this.sG(t,n);return}if(i===this.Fu){this.uG(t,n);return}}else!Vl&&t instanceof N&&(Vl=!0,s.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},B=K.prototype,B.Tu=function(t,i){V.prototype.Tu.call(this,t,i);for(var n=this.Lc.i;n.next();)this.wB(n.value,t,i);for(n=this.Vi.i;n.next();){var e=n.value,r=t,o=i;if(this.em(e)===r){var h=this.Xh;s.Ma(e,h,o),_t(this,"linkFromKey",Yt,h,e,r,o),typeof h=="string"&&this.Jb(e,h)}if(this.fm(e)===r&&(h=this.Yh,s.Ma(e,h,o),_t(this,"linkToKey",Yt,h,e,r,o),typeof h=="string"&&this.Jb(e,h)),h=this.Nk(e),s.isArray(h))for(var l=s.cb(h),u=this.zg,f=0;f<l;f++)s.Ba(h,f)===r&&(s.GE(h,f,o),_t(this,"linkLabelKeys",Li,u,e,r,o,f,f))}},B.wB=function(t,i,n){if(this.En(t)===i){var e=this.mh;s.Ma(t,e,n),_t(this,"nodeGroupKey",Yt,e,t,i,n),typeof e=="string"&&this.Jb(t,e)}},B.WB=function(){V.prototype.WB.call(this);for(var t=this.Bh,i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);O0(this,e)}},B.Aq=function(t){V.prototype.Aq.call(this,t),t=this.qb(t);var i=da(this,t);if(i!==null){for(var n=new z(Object),i=i.i;i.next();){var e=i.value;if(this.Le(e)){if(this.En(e)===t){var r=this.mh;_t(this,"nodeGroupKey",Yt,r,e,t,t),typeof r=="string"&&this.Jb(e,r),n.add(e)}}else if(this.em(e)===t&&(r=this.Xh,_t(this,"linkFromKey",Yt,r,e,t,t),typeof r=="string"&&this.Jb(e,r),n.add(e)),this.fm(e)===t&&(r=this.Yh,_t(this,"linkToKey",Yt,r,e,t,t),typeof r=="string"&&this.Jb(e,r),n.add(e)),r=this.Nk(e),s.isArray(r))for(var o=s.cb(r),h=this.zg,l=0;l<o;l++)s.Ba(r,l)===t&&(_t(this,"linkLabelKeys",Li,h,e,t,t,l,l),n.add(e))}for(n=n.i;n.next();)cr(this,t,n.value)}},B.zq=function(t){V.prototype.zq.call(this,t);var i=this.En(t);this.we(i)===null&&Xe(this,i,t)},B.gv=function(t){V.prototype.gv.call(this,t);var i=this.En(t);cr(this,i,t)},s.defineProperty(K,{Du:"linkCategoryProperty"},function(){return this.Qm},function(t){var i=this.Qm;i!==t&&(Dr(t,K,"linkCategoryProperty"),this.Qm=t,this.h("linkCategoryProperty",i,t))}),K.prototype.getCategoryForLinkData=K.prototype.bq=function(t){if(t===null)return"";var i=this.Qm;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getCategoryForLinkData found a non-string category for "+t+": "+i),"")},K.prototype.setCategoryForLinkData=K.prototype.sG=function(t,i){if(s.j(i,"string",K,"setCategoryForLinkData:cat"),t!==null){var n=this.Qm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),_t(this,"linkCategory",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}};function Lt(t){1<arguments.length&&s.k("TreeModel constructor can only take one optional argument, the Array of node data."),V.call(this),this.nh="parent",this.mr=!1,this.Zm="parentLinkCategory",t!==void 0&&(this.Pg=t)}s.La(Lt,V),s.ga("TreeModel",Lt),Lt.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.nh=this.nh,t.mr=this.mr,t.Zm=this.Zm},Lt.prototype.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.PB();var i=(this.name!==""?this.name:"")+" TreeModel";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0;e<n;e++)var r=s.Ba(t,e),i=i+(" "+this.qb(r)+":"+We(r))}return i},Lt.prototype.ko=function(){var t=V.prototype.ko.call(this),i="";return this.Ou!=="parent"&&typeof this.Ou=="string"&&(i+=`,
  "nodeParentKeyProperty": `+this.quote(this.Ou)),t+i},Lt.prototype.Ru=function(t){V.prototype.Ru.call(this,t),t.nodeParentKeyProperty&&(this.Ou=t.nodeParentKeyProperty)},Lt.prototype.Qn=function(t){return t},s.defineProperty(Lt,{Ou:"nodeParentKeyProperty"},function(){return this.nh},function(t){var i=this.nh;i!==t&&(Dr(t,Lt,"nodeParentKeyProperty"),this.nh=t,this.h("nodeParentKeyProperty",i,t))}),s.defineProperty(Lt,{xn:"copiesParentKeyOfNodeData"},function(){return this.mr},function(t){this.mr!==t&&(s.j(t,"boolean",Lt,"copiesParentKeyOfNodeData"),this.mr=t)}),Lt.prototype.getParentKeyForNodeData=Lt.prototype.Gn=function(t){if(t!==null){var i=this.nh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(bn(i))return i;s.k("ParentKey value for node data "+t+" is not a number or a string: "+i)}}},Lt.prototype.setParentKeyForNodeData=Lt.prototype.ti=function(t,i){if(i===null&&(i=void 0),i===void 0||bn(i)||s.Fd(i,"number or string",Lt,"setParentKeyForNodeData:key"),t!==null){var n=this.nh;if(n!=="")if(i=this.Qn(i),this.Le(t)){var e=s.vb(t,n);e!==i&&(cr(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Xe(this,i,t),_t(this,"nodeParentKey",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(Lt,{JL:"parentLinkCategoryProperty"},function(){return this.Zm},function(t){var i=this.Zm;i!==t&&(Dr(t,Lt,"parentLinkCategoryProperty"),this.Zm=t,this.h("parentLinkCategoryProperty",i,t))}),Lt.prototype.getParentLinkCategoryForNodeData=Lt.prototype.gI=function(t){if(t===null)return"";var i=this.Zm;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i),"")},Lt.prototype.setParentLinkCategoryForNodeData=Lt.prototype.JJ=function(t,i){if(s.j(i,"string",Lt,"setParentLinkCategoryForNodeData:cat"),t!==null){var n=this.Zm;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),_t(this,"parentLinkCategory",Yt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},Lt.prototype.copyNodeData=function(t){return t===null?null:(t=V.prototype.copyNodeData.call(this,t),this.xn||this.nh===""||s.vb(t,this.nh)===void 0||s.Ma(t,this.nh,void 0),t)},Lt.prototype.setDataProperty=function(t,i,n){if(this.Le(t))if(i===this.mm)this.zy(t,n);else{if(i===this.Yn){this.xy(t,n);return}if(i===this.Ou){this.ti(t,n);return}}else!Vl&&t instanceof N&&(Vl=!0,s.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},B=Lt.prototype,B.Tu=function(t,i){V.prototype.Tu.call(this,t,i);for(var n=this.Lc.i;n.next();)this.wB(n.value,t,i)},B.wB=function(t,i,n){if(this.Gn(t)===i){var e=this.nh;s.Ma(t,e,n),_t(this,"nodeParentKey",Yt,e,t,i,n),typeof e=="string"&&this.Jb(t,e)}},B.Aq=function(t){V.prototype.Aq.call(this,t),t=this.qb(t);var i=da(this,t);if(i!==null){for(var n=new z(Object),i=i.i;i.next();){var e=i.value;if(this.Le(e)&&this.Gn(e)===t){var r=this.nh;_t(this,"nodeParentKey",Yt,r,e,t,t),typeof r=="string"&&this.Jb(e,r),n.add(e)}}for(n=n.i;n.next();)cr(this,t,n.value)}},B.zq=function(t){V.prototype.zq.call(this,t);var i=this.Gn(t),i=this.Qn(i);this.we(i)===null&&Xe(this,i,t)},B.gv=function(t){V.prototype.gv.call(this,t);var i=this.Gn(t);cr(this,i,t)};function Pt(t,i,n){s.oc(this),this.P=!1,t===void 0?t="":s.j(t,"string",Pt,"constructor:targetprop"),i===void 0?i=t:s.j(i,"string",Pt,"constructor:sourceprop"),n===void 0?n=null:n!==null&&s.j(n,"function",Pt,"constructor:conv"),this.bE=-1,this.Gg=null,this.Dp=t,this.Cp=this.Bt=0,this.Ow=null,this.ds=!1,this.sp=i,this.ir=n,this.ys=od,this.br=null,this.sz=new R}s.ga("Binding",Pt),Pt.prototype.copy=function(){var t=new Pt;return t.Dp=this.Dp,t.Bt=this.Bt,t.Cp=this.Cp,t.Ow=this.Ow,t.ds=this.ds,t.sp=this.sp,t.ir=this.ir,t.ys=this.ys,t.br=this.br,t};var od;Pt.OneWay=od=s.p(Pt,"OneWay",1);var ma;Pt.TwoWay=ma=s.p(Pt,"TwoWay",2),Pt.parseEnum=function(t,i){return s.j(t,"function",Pt,"parseEnum:ctor"),s.ob(i,t,Pt,"parseEnum:defval"),function(n){return n=fo(t,n),n===null?i:n}},Pt.prototype.ic=function(t){t.Je===Pt?this.mode=t:s.Lj(this,t)};var We;Pt.toString=We=function(t){var i=t;return s.Pa(t)&&(t.text?i=t.text:t.name?i=t.name:t.key!==void 0?i=t.key:t.id!==void 0?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:t.Key!==void 0?i=t.Key:t.Id!==void 0?i=t.Id:t.ID!==void 0&&(i=t.ID))),i===void 0?"undefined":i===null?"null":i.toString()},Pt.prototype.toString=function(){return"Binding("+this.Cy+":"+this.xG+(this.um!==-1?" "+this.um:"")+" "+this.mode.name+")"},Pt.prototype.freeze=function(){return this.P=!0,this},Pt.prototype.Qa=function(){return this.P=!1,this},s.defineProperty(Pt,{um:null},function(){return this.bE},function(t){this.P&&s.ma(this),s.j(t,"number",Pt,"targetId"),this.bE=t}),s.defineProperty(Pt,{Cy:"targetProperty"},function(){return this.Dp},function(t){this.P&&s.ma(this),s.j(t,"string",Pt,"targetProperty"),this.Dp=t}),s.defineProperty(Pt,{Kq:"sourceName"},function(){return this.Ow},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"string",Pt,"sourceName"),this.Ow=t,t!==null&&(this.ds=!1)}),s.defineProperty(Pt,{Px:"isToModel"},function(){return this.ds},function(t){this.P&&s.ma(this),s.j(t,"boolean",Pt,"isToModel"),this.ds=t}),s.defineProperty(Pt,{xG:"sourceProperty"},function(){return this.sp},function(t){this.P&&s.ma(this),s.j(t,"string",Pt,"sourceProperty"),this.sp=t}),s.defineProperty(Pt,{GH:"converter"},function(){return this.ir},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"function",Pt,"converter"),this.ir=t}),s.defineProperty(Pt,{vH:"backConverter"},function(){return this.br},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"function",Pt,"backConverter"),this.br=t}),s.defineProperty(Pt,{mode:"mode"},function(){return this.ys},function(t){this.P&&s.ma(this),s.ob(t,Pt,Pt,"mode"),this.ys=t}),Pt.prototype.makeTwoWay=Pt.prototype.RI=function(t){return t===void 0&&(t=null),t!==null&&s.j(t,"function",Pt,"makeTwoWay"),this.mode=ma,this.vH=t,this},Pt.prototype.ofObject=Pt.prototype.by=function(t){return t===void 0&&(t=""),this.Kq=t,this.Px=!1,this},Pt.prototype.ofModel=function(){return this.Kq=null,this.Px=!0,this};function sd(t,i,n){return t=t.Kq,t===null||t===""?i:t==="/"?n.W:t==="."?n:t===".."?n.R:i.Cd(t)}Pt.prototype.updateTarget=Pt.prototype.MG=function(t,i,n){var e=this.sp;if(n===void 0||e===""||e===n){n=this.Dp;var r=this.ir;if(r===null&&n==="")s.trace("Binding error: target property is the empty string: "+this.toString());else{var o=i;if(e!==""&&(o=s.vb(i,e)),o!==void 0)if(r===null)n!==""&&s.Ma(t,n,o);else try{if(n!==""){var h=r(o,t);s.Ma(t,n,h)}else r(o,t)}catch{}}}},Pt.prototype.updateSource=Pt.prototype.Ey=function(t,i,n,e){if(this.ys===ma){var r=this.Dp;if(n===void 0||r===n){n=this.sp;var o=this.br,h=t;if(r!==""&&(h=s.vb(t,r)),h!==void 0&&!this.sz.contains(t))try{this.sz.add(t);var l=e!==null?e.g:null,u=l!==null?l.$:null;if(o===null){if(n!=="")u!==null?u.setDataProperty(i,n,h):s.Ma(i,n,h);else if(u!==null&&e!==null&&0<=e.Bu&&e.R!==null&&Array.isArray(e.R.mq)){var f=e.Bu,a=e.R.mq;u.cG(a,f),u.QA(a,f,h)}}else try{if(n!==""){var p=o(h,i,u);u!==null?u.setDataProperty(i,n,p):s.Ma(i,n,p)}else p=o(h,i,u),p!==void 0&&u!==null&&e!==null&&0<=e.Bu&&e.R!==null&&Array.isArray(e.R.mq)&&(f=e.Bu,a=e.R.mq,u.cG(a,f),u.QA(a,f,p))}catch{}}finally{this.sz.remove(t)}}}};function Dn(){this.SG=new z(Et).freeze(),this.Sb="",this.iD=!1}s.ga("Transaction",Dn),Dn.prototype.toString=function(t){var i="Transaction: "+this.name+" "+this.Wf.count.toString()+(this.uu?"":", incomplete");if(t!==void 0&&0<t){t=this.Wf.count;for(var n=0;n<t;n++){var e=this.Wf.fa(n);e!==null&&(i+=`
  `+e.toString())}}return i},Dn.prototype.clear=Dn.prototype.clear=function(){var t=this.Wf;t.Qa();for(var i=t.count-1;0<=i;i--){var n=t.fa(i);n!==null&&n.clear()}t.clear(),t.freeze()},Dn.prototype.canUndo=Dn.prototype.canUndo=function(){return this.uu},Dn.prototype.undo=Dn.prototype.undo=function(){if(this.canUndo())for(var t=this.Wf.count-1;0<=t;t--){var i=this.Wf.fa(t);i!==null&&i.undo()}},Dn.prototype.canRedo=Dn.prototype.canRedo=function(){return this.uu},Dn.prototype.redo=Dn.prototype.redo=function(){if(this.canRedo())for(var t=this.Wf.count,i=0;i<t;i++){var n=this.Wf.fa(i);n!==null&&n.redo()}},s.u(Dn,{Wf:"changes"},function(){return this.SG}),s.defineProperty(Dn,{name:"name"},function(){return this.Sb},function(t){this.Sb=t}),s.defineProperty(Dn,{uu:"isComplete"},function(){return this.iD},function(t){this.iD=t});function Rt(){this.Iz=new R(V),this.jf=!1,this.WG=new z(Dn).freeze(),this.dh=-1,this.wD=999,this.gh=!1,this.Hv=null,this.Ol=0,this.tC=!1,this.lh=new z("string").freeze(),this.gp=new z("number"),this.uz=!0,this.Dz=!1}s.ga("UndoManager",Rt),Rt.prototype.toString=function(t){for(var i="UndoManager "+this.wj+"<"+this.history.count+"<="+this.QF,i=i+"[",n=this.VF.count,e=0;e<n;e++)0<e&&(i+=" "),i+=this.VF.fa(e);if(i+="]",t!==void 0&&0<t)for(n=this.history.count,e=0;e<n;e++)i+=`
 `+this.history.fa(e).toString(t-1);return i},Rt.prototype.clear=Rt.prototype.clear=function(){var t=this.history;t.Qa();for(var i=t.count-1;0<=i;i--){var n=t.fa(i);n!==null&&n.clear()}t.clear(),this.dh=-1,t.freeze(),this.gh=!1,this.Hv=null,this.Ol=0,this.lh.Qa(),this.lh.clear(),this.lh.freeze(),this.gp.clear()},Rt.prototype.addModel=Rt.prototype.oH=function(t){this.Iz.add(t)},Rt.prototype.removeModel=Rt.prototype.sJ=function(t){this.Iz.remove(t)},Rt.prototype.startTransaction=Rt.prototype.Ib=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.lb)return!1;this.uz===!0&&(this.uz=!1,this.Ol++,this.hd("StartingFirstTransaction",t,this.sj),0<this.Ol&&this.Ol--),this.isEnabled&&(this.lh.Qa(),this.lh.add(t),this.lh.freeze(),this.sj===null?this.gp.add(0):this.gp.add(this.sj.Wf.count)),this.Ol++;var i=this.wi===1;return i&&this.hd("StartedTransaction",t,this.sj),i},Rt.prototype.commitTransaction=Rt.prototype.Yc=function(t){return t===void 0&&(t=""),hd(this,!0,t)},Rt.prototype.rollbackTransaction=Rt.prototype.om=function(){return hd(this,!1,"")};function hd(t,i,n){if(t.lb)return!1;t.nA&&1>t.wi&&s.trace("Ending transaction without having started a transaction: "+n);var e=t.wi===1;e&&i&&t.hd("CommittingTransaction",n,t.sj);var r=0;if(0<t.wi&&(t.Ol--,t.isEnabled)){var o=t.lh.count;0<o&&(n===""&&(n=t.lh.fa(0)),t.lh.Qa(),t.lh.cd(o-1),t.lh.freeze()),o=t.gp.count,0<o&&(r=t.gp.fa(o-1),t.gp.cd(o-1))}if(o=t.sj,e){if(i){if(t.Dz=!1,t.isEnabled&&o!==null){for(i=o,i.uu=!0,i.name=n,e=t.history,e.Qa(),r=e.count-1;r>t.wj;r--)o=e.fa(r),o!==null&&o.clear(),e.cd(r),t.Dz=!0;r=t.QF,r===0&&(r=1),0<r&&e.count>=r&&(o=e.fa(0),o!==null&&o.clear(),e.cd(0),t.dh--),e.add(i),t.dh++,e.freeze(),o=i}t.hd("CommittedTransaction",n,o)}else{t.gh=!0;try{t.isEnabled&&o!==null&&(o.uu=!0,o.undo())}finally{t.hd("RolledBackTransaction",n,o),t.gh=!1}o!==null&&o.clear()}return t.Hv=null,!0}if(t.isEnabled&&!i&&o!==null){for(t=r,n=o.Wf,i=n.count-1;i>=t;i--)e=n.fa(i),e!==null&&e.undo(),n.Qa(),n.cd(i);n.freeze()}return!1}Rt.prototype.canUndo=Rt.prototype.canUndo=function(){if(!this.isEnabled||0<this.wi)return!1;var t=this.IG;return!!(t!==null&&t.canUndo())},Rt.prototype.undo=Rt.prototype.undo=function(){if(this.canUndo()){var t=this.IG;try{this.gh=!0,this.hd("StartingUndo","Undo",t),this.dh--,t.undo()}catch(i){s.trace("undo error: "+i.toString())}finally{this.hd("FinishedUndo","Undo",t),this.gh=!1}}},Rt.prototype.canRedo=Rt.prototype.canRedo=function(){if(!this.isEnabled||0<this.wi)return!1;var t=this.HG;return!!(t!==null&&t.canRedo())},Rt.prototype.redo=Rt.prototype.redo=function(){if(this.canRedo()){var t=this.HG;try{this.gh=!0,this.hd("StartingRedo","Redo",t),this.dh++,t.redo()}catch(i){s.trace("redo error: "+i.toString())}finally{this.hd("FinishedRedo","Redo",t),this.gh=!1}}},Rt.prototype.hd=function(t,i,n){n===void 0&&(n=null);var e=new Et;for(e.Fc=Fr,e.propertyName=t,e.object=n,e.oldValue=i,t=this.aJ;t.next();)i=t.value,e.$=i,i.mx(e)},Rt.prototype.handleChanged=Rt.prototype.tF=function(t){if(this.isEnabled&&!this.lb&&!this.skipsEvent(t)){var n=this.sj;n===null&&(this.Hv=n=new Dn);var i=t.copy(),n=n.Wf;n.Qa(),n.add(i),n.freeze(),this.nA&&0>=this.wi&&!this.uz&&(t=t.g,t!==null&&t.Ln===!1||s.trace("Change not within a transaction: "+i.toString()))}},Rt.prototype.skipsEvent=function(t){if(t===null||0>t.Fc.value)return!0;if(t=t.object,t instanceof N){if(t=t.layer,t!==null&&t.Hc)return!0}else if(t instanceof ct&&t.Hc)return!0;return!1},s.u(Rt,{aJ:"models"},function(){return this.Iz.i}),s.defineProperty(Rt,{isEnabled:"isEnabled"},function(){return this.jf},function(t){this.jf=t}),s.u(Rt,{IG:"transactionToUndo"},function(){return 0<=this.wj&&this.wj<=this.history.count-1?this.history.fa(this.wj):null}),s.u(Rt,{HG:"transactionToRedo"},function(){return this.wj<this.history.count-1?this.history.fa(this.wj+1):null}),s.u(Rt,{lb:"isUndoingRedoing"},function(){return this.gh}),s.u(Rt,{history:"history"},function(){return this.WG}),s.defineProperty(Rt,{QF:"maxHistoryLength"},function(){return this.wD},function(t){this.wD=t}),s.u(Rt,{wj:"historyIndex"},function(){return this.dh}),s.u(Rt,{sj:"currentTransaction"},function(){return this.Hv}),s.u(Rt,{wi:"transactionLevel"},function(){return this.Ol}),s.u(Rt,{FF:"isInTransaction"},function(){return 0<this.Ol}),s.defineProperty(Rt,{nA:"checksTransactionLevel"},function(){return this.tC},function(t){this.tC=t}),s.u(Rt,{VF:"nestedTransactionNames"},function(){return this.lh});function it(){0<arguments.length&&s.nd(it),s.oc(this),this.aa=null,this.wC=!1,this.RC=this.xC=!0,this.zC=this.AC=this.SC=this.BC=!1,this.Fl=this.mC=null,this.sE=1.05,this.OC=1,this.Ez=NaN,this.tD=null,this.hA=NaN,this.gA=L0,this.hj=null,this.SD=0}s.ga("CommandHandler",it);var Hl=null,rf="";it.prototype.toString=function(){return"CommandHandler"},s.u(it,{g:"diagram"},function(){return this.aa}),it.prototype.Tc=function(t){this.aa=t},it.prototype.doKeyDown=function(){var t=this.g;if(t!==null){var i=t.N,n=s.zh?i.Iu:i.control,e=i.shift,r=i.alt,o=i.key;!n||o!=="C"&&o!=="Insert"?n&&o==="X"||e&&o==="Del"?this.canCutSelection()&&this.cutSelection():n&&o==="V"||e&&o==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&o==="Y"||r&&e&&o==="Backspace"?this.canRedo()&&this.redo():n&&o==="Z"||r&&o==="Backspace"?this.canUndo()&&this.undo():o==="Del"||o==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&o==="A"?this.canSelectAll()&&this.selectAll():o==="Esc"?this.canStopCommand()&&this.stopCommand():o==="Up"?t.se&&(n?t.scroll("pixel","up"):t.scroll("line","up")):o==="Down"?t.se&&(n?t.scroll("pixel","down"):t.scroll("line","down")):o==="Left"?t.re&&(n?t.scroll("pixel","left"):t.scroll("line","left")):o==="Right"?t.re&&(n?t.scroll("pixel","right"):t.scroll("line","right")):o==="PageUp"?e&&t.re?t.scroll("page","left"):t.se&&t.scroll("page","up"):o==="PageDown"?e&&t.re?t.scroll("page","right"):t.se&&t.scroll("page","down"):o==="Home"?n&&t.se?t.scroll("document","up"):!n&&t.re&&t.scroll("document","left"):o==="End"?n&&t.se?t.scroll("document","down"):!n&&t.re&&t.scroll("document","right"):o===" "?this.canScrollToPart()&&this.scrollToPart():o==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():o==="Add"?this.canIncreaseZoom()&&this.increaseZoom():n&&o==="0"?this.canResetZoom()&&this.resetZoom():e&&o==="Z"?this.canZoomToFit()&&this.zoomToFit():n&&!e&&o==="G"?this.canGroupSelection()&&this.groupSelection():n&&e&&o==="G"?this.canUngroupSelection()&&this.ungroupSelection():i.event&&i.event.which===113?this.canEditTextBlock()&&this.editTextBlock():i.event&&i.event.which===93?this.canShowContextMenu()&&this.showContextMenu():i.bubbles=!0:this.canCopySelection()&&this.copySelection()}},it.prototype.doKeyUp=function(){var t=this.g;t!==null&&(t.N.bubbles=!0)},it.prototype.stopCommand=function(){var t=this.g;if(t!==null){var i=t.Xa;i instanceof pt&&t.Bf&&t.oA(),i!==null&&i.doCancel()}},it.prototype.canStopCommand=function(){return!0},it.prototype.selectAll=function(){var t=this.g;if(t!==null){t.oa();try{t.kc="wait",t.Aa("ChangingSelection");for(var i=t.Hj;i.next();)i.value.jb=!0;for(var n=t.ig;n.next();)n.value.jb=!0;for(var e=t.links;e.next();)e.value.jb=!0}finally{t.Aa("ChangedSelection"),t.kc=""}}},it.prototype.canSelectAll=function(){var t=this.g;return t!==null&&t.Bf},it.prototype.deleteSelection=function(){var t=this.g;if(t!==null&&!t.Aa("SelectionDeleting",t.selection))try{t.kc="wait",t.Ib("Delete"),t.Aa("ChangingSelection");for(var i=new R(L),n=t.selection.i;n.next();)cs(i,n.value,!0,this.QH?1/0:0,this.WE?null:!1,function(e){return e.canDelete()});t.vB(i,!0),t.Aa("SelectionDeleted",i)}finally{t.Aa("ChangedSelection"),t.Yc("Delete"),t.kc=""}},it.prototype.canDeleteSelection=function(){var t=this.g;return!(t===null||t.ib||t.Ef||!t.on||t.selection.count===0)};function cs(t,i,n,e,r,o){if(o===void 0&&(o=null),!(t.contains(i)||o!==null&&!o(i)||i instanceof vt)){if(t.add(i),i instanceof I){if(n&&i instanceof Z)for(var h=i.hc;h.next();)cs(t,h.value,n,e,r,o);if(r!==!1)for(h=i.je;h.next();){var l=h.value;if(!t.contains(l)){var u=l.V,f=l.Z,u=u===null||t.contains(u),f=f===null||t.contains(f);(r?u&&f:u||f)&&cs(t,l,n,e,r,o)}}if(1<e)for(i=i.fF();i.next();)cs(t,i.value,n,e-1,r,o)}else if(i instanceof S)for(i=i.Ff;i.next();)cs(t,i.value,n,e,r,o)}}it.prototype.Tp=function(t,i,n){var e=new tt(L,L);for(t=t.i;t.next();)V0(this,t.value,i,e,n);if(i!==null){n=i.$,t=!1,i.Va.ce!==null&&(t=i.Va.ce.uj);for(var r=new R(S),o=new tt(S,S),h=e.i;h.next();){var l=h.value;if(l instanceof S){var u=l;t||u.V!==null&&u.Z!==null||r.add(u)}else if(n instanceof Lt&&l instanceof I&&l.data!==null){var u=n,f=l,l=h.key,a=l.Kk();a!==null&&(a=e.ka(a),a!==null?(u.ti(f.data,u.qb(a.data)),u=i.Yf(f.data),l=l.Cn(),l!==null&&u!==null&&o.add(l,u)):u.ti(f.data,void 0))}}if(0<r.count&&i.vB(r,!1),0<o.count)for(n=o.i;n.next();)e.add(n.key,n.value)}if(i!==null&&this.g!==null&&(i=i.$,n=i.qH,n!==null)){var p=new tt;e.each(function(y){y.key.data!==null&&p.add(y.key.data,y.value.data)}),n(p,i,this.g.$)}for(i=e.i;i.next();)i.value.Jb();return e};function V0(t,i,n,e,r){if(i===null||r&&!i.canCopy())return null;if(e.contains(i))return e.ka(i);var o=null,h=i.data;if(h!==null&&n!==null){var l=n.$;i instanceof S?l instanceof K&&(h=l.ox(h),s.Pa(h)&&(l.Ot(h),o=n.Yf(h))):(h=l.copyNodeData(h),s.Pa(h)&&(l.Rl(h),o=n.wh(h)))}else be(i),o=i.copy(),o!==null&&(n!==null?n.add(o):h!==null&&t.g!==null&&t.HH&&(l=t.g.$,h=o instanceof S&&l instanceof K?l.ox(h):l.copyNodeData(h),s.Pa(h)&&(o.data=h)));if(!(o instanceof L))return null;if(o.jb=!1,o.Og=!1,e.add(i,o),i instanceof I){for(h=i.je;h.next();){if(l=h.value,l.V===i){var u=e.ka(l);u!==null&&(u.V=o)}l.Z===i&&(u=e.ka(l),u!==null&&(u.Z=o))}if(i instanceof Z&&o instanceof Z)for(h=o,i=i.hc;i.next();)l=V0(t,i.value,n,e,r),l instanceof S||l===null||(l.Ca=h)}else if(i instanceof S&&o instanceof S)for(h=i.V,h!==null&&(h=e.ka(h),h!==null&&(o.V=h)),h=i.Z,h!==null&&(h=e.ka(h),h!==null&&(o.Z=h)),i=i.Ff;i.next();)h=V0(t,i.value,n,e,r),h!==null&&h instanceof I&&(h.Xb=o);return o}it.prototype.copySelection=function(){var t=this.g;if(t!==null){for(var i=new R(L),t=t.selection.i;t.next();)cs(i,t.value,!0,this.KH?1/0:0,this.IH,function(e){return e.canCopy()});this.copyToClipboard(i)}},it.prototype.canCopySelection=function(){var t=this.g;return!!(t!==null&&t.Ck&&t.iA&&t.selection.count!==0)},it.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},it.prototype.canCutSelection=function(){var t=this.g;return!!(t!==null&&!t.ib&&!t.Ef&&t.Ck&&t.on&&t.iA&&t.selection.count!==0)},it.prototype.copyToClipboard=function(t){var i=this.g;if(i!==null){var n=null;if(t===null)Hl=null,rf="";else{var n=i.$,e=!1,r=!1,o=null;try{if(n instanceof Lt){var h=n,e=h.xn;h.xn=this.PE}n instanceof K&&(h=n,r=h.wn,h.wn=this.OE),o=i.Tp(t,null,!0)}finally{n instanceof Lt&&(n.xn=e),n instanceof K&&(n.wn=r),n=new z(L),n.Pc(o),Hl=n,rf=i.$.$l}}i.Aa("ClipboardChanged",n)}},it.prototype.pasteFromClipboard=function(){var t=new R(L),i=Hl;if(i===null)return t;var n=this.g;if(n===null||rf!==n.$.$l)return t;var e=n.$,r=!1,o=!1,h=null;try{if(e instanceof Lt){var l=e,r=l.xn;l.xn=this.PE}e instanceof K&&(l=e,o=l.wn,l.wn=this.OE),h=n.Tp(i,n,!1)}finally{for(e instanceof Lt&&(e.xn=r),e instanceof K&&(e.wn=o),i=h.i;i.next();)n=i.value,e=i.key,n.location.H()||(e.location.H()?n.location=e.location:!n.position.H()&&e.position.H()&&(n.position=e.position)),t.add(n)}return t},it.prototype.pasteSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.kc="wait",i.Ib("Paste"),i.Aa("ChangingSelection");var n=this.pasteFromClipboard();0<n.count&&pf(i);for(var e=n.i;e.next();)e.value.jb=!0;if(i.Aa("ChangedSelection"),t!==null){var r=i.computePartsBounds(i.selection);if(r.H()){var o=i.Va.ce;o===null&&(o=new dt,o.Tc(i));var h=o.computeEffectiveCollection(i.selection);o.moveParts(h,new F(t.x-r.la,t.y-r.sa),!1)}}i.Aa("ClipboardPasted",n)}finally{i.Yc("Paste"),i.kc=""}},it.prototype.canPasteSelection=function(){var t=this.g;return!(t===null||t.ib||t.Ef||!t.Kp||!t.iA||Hl===null||Hl.count===0||rf!==t.$.$l)},it.prototype.undo=function(){var t=this.g;t!==null&&t.ja.undo()},it.prototype.canUndo=function(){var t=this.g;return t===null||t.ib||t.Ef?!1:t.BE&&t.ja.canUndo()},it.prototype.redo=function(){var t=this.g;t!==null&&t.ja.redo()},it.prototype.canRedo=function(){var t=this.g;return t===null||t.ib||t.Ef?!1:t.BE&&t.ja.canRedo()},it.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.Hy),s.Ad(t,it,"decreaseZoom:factor");var i=this.g;i!==null&&i.Vl===je&&(t*=i.scale,t<i.Dh||t>i.Ch||(i.scale=t))},it.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.Hy),s.Ad(t,it,"canDecreaseZoom:factor");var i=this.g;return i===null||i.Vl!==je?!1:(t*=i.scale,t<i.Dh||t>i.Ch?!1:i.lx)},it.prototype.increaseZoom=function(t){t===void 0&&(t=this.Hy),s.Ad(t,it,"increaseZoom:factor");var i=this.g;i!==null&&i.Vl===je&&(t*=i.scale,t<i.Dh||t>i.Ch||(i.scale=t))},it.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.Hy),s.Ad(t,it,"canIncreaseZoom:factor");var i=this.g;return i===null||i.Vl!==je?!1:(t*=i.scale,t<i.Dh||t>i.Ch?!1:i.lx)},it.prototype.resetZoom=function(t){t===void 0&&(t=this.tx),s.Ad(t,it,"resetZoom:newscale");var i=this.g;i===null||t<i.Dh||t>i.Ch||(i.scale=t)},it.prototype.canResetZoom=function(t){t===void 0&&(t=this.tx),s.Ad(t,it,"canResetZoom:newscale");var i=this.g;return i===null||t<i.Dh||t>i.Ch?!1:i.lx},it.prototype.zoomToFit=function(){var t=this.g;if(t!==null){var i=t.scale,n=t.position;i===this.hA&&!isNaN(this.Ez)&&t.Nd.L(this.gA)?(t.scale=this.Ez,t.position=this.tD,this.hA=NaN,this.gA=L0):(this.Ez=i,this.tD=n.copy(),t.zoomToFit(),this.hA=t.scale,this.gA=t.Nd.copy())}},it.prototype.canZoomToFit=function(){var t=this.g;return t===null?!1:t.lx},it.prototype.scrollToPart=function(t){t===void 0&&(t=null),t!==null&&s.G(t,L,it,"part");var i=this.g;if(i!==null){if(t===null){try{this.hj!==null&&(this.hj.next()?t=this.hj.value:this.hj=null)}catch{this.hj=null}t===null&&(0<i.gm.count?this.hj=i.gm.i:0<i.selection.count&&(this.hj=i.selection.i),this.hj!==null&&this.hj.next()&&(t=this.hj.value))}if(t!==null){var n=i.Ka;n.Zn("Scroll To Part");var e=this.DJ;if(0<e){var r=Oh(this,t,[t]),o=function(){i.Ib();for(var u=r.pop();0<r.length&&u instanceof I&&u.wc&&(!(u instanceof Z)||u.$c);)u=r.pop();0<r.length?(u instanceof L&&i.nG(u.U),u instanceof I&&!u.wc&&(u.wc=!0),u instanceof Z&&!u.$c&&(u.$c=!0)):(u instanceof L&&i.IE(u.U),i.uB("LayoutCompleted",h)),i.Yc("Scroll To Part")},h=function(){setTimeout(o,(n.isEnabled?n.duration:0)+e)};i.ax("LayoutCompleted",h),o()}else{var l=i.position.copy();i.IE(t.U),l.Qc(i.position)&&n.Jh()}}}};function Oh(t,i,n){if(i.isVisible())return n;if(i instanceof vt)Oh(t,i.$e,n);else if(i instanceof S){var e=i.V;e!==null&&Oh(t,e,n),i=i.Z,i!==null&&Oh(t,i,n)}else i instanceof I&&(e=i.Xb,e!==null&&Oh(t,e,n),e=i.Kk(),e!==null&&(e.wc||e.Mq||n.push(e),Oh(t,e,n))),i=i.Ca,i!==null&&(i.$c||i.Gy||n.push(i),Oh(t,i,n));return n}it.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof L)?!1:(t=this.g,t===null||t.selection.count===0&&t.gm.count===0?!1:t.re&&t.se)},it.prototype.collapseTree=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Collapse Tree"),i.Ka.Zn("Collapse Tree");var n=new z(I);if(t!==null&&t.wc)t.collapseTree(),n.add(t);else if(t===null)for(var e=i.selection.i;e.next();){var r=e.value;r instanceof I&&(t=r,t.wc&&(t.collapseTree(),n.add(t)))}i.Aa("TreeCollapsed",n)}finally{i.Yc("Collapse Tree")}},it.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null){if(!(t instanceof I&&t.wc))return!1;if(0<t.Gx().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof I&&i.wc&&0<i.Gx().count)return!0;return!1},it.prototype.expandTree=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Expand Tree"),i.Ka.Zn("Expand Tree");var n=new z(I);if(t!==null&&!t.wc)t.expandTree(),n.add(t);else if(t===null)for(var e=i.selection.i;e.next();){var r=e.value;r instanceof I&&(t=r,t.wc||(t.expandTree(),n.add(t)))}i.Aa("TreeExpanded",n)}finally{i.Yc("Expand Tree")}},it.prototype.canExpandTree=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null){if(!(t instanceof I)||t.wc)return!1;if(0<t.Gx().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof I&&!i.wc&&0<i.Gx().count)return!0;return!1},it.prototype.groupSelection=function(){var t=this.g;if(t!==null){var i=t.$;if(i instanceof K){var n=this.CE;if(n!==null){var e=null;try{t.kc="wait",t.Ib("Group"),t.Aa("ChangingSelection");for(var r=new z(L),o=t.selection.i;o.next();){var h=o.value;h.he()&&h.canGroup()&&r.add(h)}for(var l=new z(L),u=r.i;u.next();){for(var f=u.value,o=!1,a=r.i;a.next();)if(f.Ah(a.value)){o=!0;break}o||l.add(f)}if(0<l.count){var p=l.first().Ca;if(p!==null)for(;p!==null;){for(var r=!1,y=l.i;y.next();)if(!y.value.Ah(p)){r=!0;break}if(r)p=p.Ca;else break}if(n instanceof Z)be(n),e=n.copy(),e!==null&&t.add(e);else if(i.WA(n)){var c=i.copyNodeData(n);s.Pa(c)&&(i.Rl(c),e=t.Fx(c))}if(e!==null){p!==null&&this.isValidMember(p,e)&&(e.Ca=p);for(var v=l.i;v.next();){var d=v.value;this.isValidMember(e,d)&&(d.Ca=e)}t.select(e)}}t.Aa("ChangedSelection"),t.Aa("SelectionGrouped",e)}finally{t.Yc("Group"),t.kc=""}}}}},it.prototype.canGroupSelection=function(){var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.gx||!(t.$ instanceof K)||this.CE===null)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canGroup())return!0}return!1};function H0(t){var i=s.Za();for(t=t.i;t.next();){var n=t.value;n instanceof S||i.push(n)}t=new R(L);for(var n=i.length,e=0;e<n;e++){for(var r=i[e],o=!0,h=0;h<n;h++)if(r.Ah(i[h])){o=!1;break}o&&t.add(r)}return s.ra(i),t}it.prototype.isValidMember=function(t,i){if(i===null||t===i||i instanceof S)return!1;if(t!==null){if(t===i||t.Ah(i))return!1;var n=t.gB;if(n!==null&&!n(t,i)||t.data===null&&i.data!==null||t.data!==null&&i.data===null)return!1}return n=this.gB,n!==null?n(t,i):!0},it.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null){var n=i.$;if(n instanceof K)try{i.kc="wait",i.Ib("Ungroup"),i.Aa("ChangingSelection");var e=new z(Z);if(t!==null)e.add(t);else for(var r=i.selection.i;r.next();){var o=r.value;o instanceof Z&&(t=o,t.canUngroup()&&e.add(t))}if(0<e.count){i.oA();for(var h=e.i;h.next();){var l=h.value;l.expandSubGraph();var u=l.Ca,f=u!==null&&u.data!==null?n.qb(u.data):void 0,a=new z(L);a.Pc(l.hc);for(var p=a.i;p.next();){var y=p.value;if(y.jb=!0,!(y instanceof S)){var c=y.data;c!==null?n.EB(c,f):y.Ca=u}}i.remove(l)}}i.Aa("ChangedSelection"),i.Aa("SelectionUngrouped",e,a)}finally{i.Yc("Ungroup"),i.kc=""}}},it.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib||i.Ef||!i.on||!i.kx||!(i.$ instanceof K))return!1;if(t!==null){if(!(t instanceof Z))return!1;if(t.canUngroup())return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Z&&i.canUngroup())return!0;return!1},it.prototype.addTopLevelParts=function(t,i){for(var n=!0,e=H0(t).i;e.next();){var r=e.value;r.Ca!==null&&(!i||this.isValidMember(null,r)?r.Ca=null:n=!1)}return n},it.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Collapse SubGraph"),i.Ka.Zn("Collapse SubGraph");var n=new z(Z);if(t!==null&&t.$c)t.collapseSubGraph(),n.add(t);else if(t===null)for(var e=i.selection.i;e.next();){var r=e.value;r instanceof Z&&(t=r,t.$c&&(t.collapseSubGraph(),n.add(t)))}i.Aa("SubGraphCollapsed",n)}finally{i.Yc("Collapse SubGraph")}},it.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null)return!!(t instanceof Z&&t.$c);for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Z&&i.$c)return!0;return!1},it.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Expand SubGraph"),i.Ka.Zn("Expand SubGraph");var n=new z(Z);if(t!==null&&!t.$c)t.expandSubGraph(),n.add(t);else if(t===null)for(var e=i.selection.i;e.next();){var r=e.value;r instanceof Z&&(t=r,t.$c||(t.expandSubGraph(),n.add(t)))}i.Aa("SubGraphExpanded",n)}finally{i.Yc("Expand SubGraph")}},it.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null)return t instanceof Z&&!t.$c;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Z&&!i.$c)return!0;return!1},it.prototype.editTextBlock=function(t){t===void 0&&(t=null),t!==null&&s.G(t,rt,it,"editTextBlock");var i=this.g;if(i!==null){var n=i.Va.NB;if(n!==null){if(t===null){t=null;for(var e=i.selection.i;e.next();){var r=e.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.bu(function(o){return o instanceof rt&&o.BA})}t!==null&&(i.Xa=null,n.Xg=t,i.Xa=n)}}},it.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib||i.Ef||!i.jx||i.Va.NB===null)return!1;if(t!==null){if(!(t instanceof rt))return!1;if(t=t.W,t!==null&&t.canEdit())return!0}else for(i=i.selection.i;i.next();)if(t=i.value,t.canEdit()&&(t=t.bu(function(n){return n instanceof rt&&n.BA}),t!==null))return!0;return!1},it.prototype.showContextMenu=function(t){var i=this.g;if(i!==null){var n=i.Va.tA;if(n!==null&&(t===void 0&&(t=0<i.selection.count?i.selection.first():i),t=n.findObjectWithContextMenu(t),t!==null)){var e=new Ht,r=null;t instanceof N?r=t.Ya(Tt):i.CI||(r=i.sb,r=new F(r.x+r.width/2,r.y+r.height/2)),r!==null&&(e.g=i,e.Ce=i.Dy(r),e.ea=r,e.left=!1,e.right=!0,e.up=!0,i.N=e),i.Xa=n,jd(n,!1,t)}}},it.prototype.canShowContextMenu=function(t){var i=this.g;if(i===null)return!1;var n=i.Va.tA;return n===null?!1:(t===void 0&&(t=0<i.selection.count?i.selection.first():i),n.findObjectWithContextMenu(t)!==null)},s.defineProperty(it,{HH:"copiesClipboardData"},function(){return this.wC},function(t){s.j(t,"boolean",it,"copiesClipboardData"),this.wC=t}),s.defineProperty(it,{IH:"copiesConnectedLinks"},function(){return this.xC},function(t){s.j(t,"boolean",it,"copiesConnectedLinks"),this.xC=t}),s.defineProperty(it,{WE:"deletesConnectedLinks"},function(){return this.RC},function(t){s.j(t,"boolean",it,"deletesConnectedLinks"),this.RC=t}),s.defineProperty(it,{KH:"copiesTree"},function(){return this.BC},function(t){s.j(t,"boolean",it,"copiesTree"),this.BC=t}),s.defineProperty(it,{QH:"deletesTree"},function(){return this.SC},function(t){s.j(t,"boolean",it,"deletesTree"),this.SC=t}),s.defineProperty(it,{PE:"copiesParentKey"},function(){return this.AC},function(t){s.j(t,"boolean",it,"copiesParentKey"),this.AC=t}),s.defineProperty(it,{OE:"copiesGroupKey"},function(){return this.zC},function(t){s.j(t,"boolean",it,"copiesGroupKey"),this.zC=t}),s.defineProperty(it,{CE:"archetypeGroupData"},function(){return this.mC},function(t){t!==null&&s.G(t,Object,it,"archetypeGroupData");var i=this.g;i!==null&&(i=i.$,i instanceof K&&(t instanceof Z||i.WA(t)||s.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t))),this.mC=t}),s.defineProperty(it,{gB:"memberValidation"},function(){return this.Fl},function(t){t!==null&&s.j(t,"function",it,"memberValidation"),this.Fl=t}),s.defineProperty(it,{tx:"defaultScale"},function(){return this.OC},function(t){s.Ad(t,it,"defaultScale"),0<t||s.k("defaultScale must be larger than zero, not: "+t),this.OC=t}),s.defineProperty(it,{Hy:"zoomFactor"},function(){return this.sE},function(t){s.Ad(t,it,"zoomFactor"),1<t||s.k("zoomFactor must be larger than 1.0, not: "+t),this.sE=t}),s.defineProperty(it,{DJ:"scrollToPartPause"},function(){return this.SD},function(t){s.Ad(t,it,"scrollToPartPause"),this.SD=t});function ut(){0<arguments.length&&s.nd(ut),s.oc(this),this.aa=null,this.Sb="",this.jf=!0,this.gD=!1,this.nE=null,this.Zw=-1}s.ga("Tool",ut),ut.prototype.Tc=function(t){this.aa=t},ut.prototype.toString=function(){return this.name!==""?this.name+" Tool":s.pf(Object.getPrototypeOf(this))},ut.prototype.updateAdornments=function(){},ut.prototype.canStart=function(){return this.isEnabled},ut.prototype.doStart=function(){},ut.prototype.doActivate=function(){this.ta=!0},ut.prototype.doDeactivate=function(){this.ta=!1},ut.prototype.doStop=function(){},ut.prototype.doCancel=function(){this.stopTool()},ut.prototype.stopTool=function(){var t=this.g;t!==null&&t.Xa===this&&(t.Xa=null,t.kc="")},ut.prototype.doMouseDown=function(){!this.ta&&this.canStart()&&this.doActivate()},ut.prototype.doMouseMove=function(){},ut.prototype.doMouseUp=function(){this.stopTool()},ut.prototype.doMouseWheel=function(){},ut.prototype.canStartMultiTouch=function(){return!0},ut.prototype.standardPinchZoomStart=function(){var t=this.g;if(t!==null){var i=t.N,n=i.Ix(0,s.wb(NaN,NaN)),e=i.Ix(1,s.wb(NaN,NaN));if(n.H()&&e.H()&&(this.doCancel(),t.nu("hasGestureZoom"))){t.Ps=t.scale;var r=e.x-n.x,o=e.y-n.y;t.XD=Math.sqrt(r*r+o*o),i.bubbles=!1}s.v(n),s.v(e)}},ut.prototype.standardPinchZoomMove=function(){var t=this.g;if(t!==null){var i=t.N,n=i.Ix(0,s.wb(NaN,NaN)),e=i.Ix(1,s.wb(NaN,NaN));if(n.H()&&e.H()&&(this.doCancel(),t.nu("hasGestureZoom"))){var r=e.x-n.x,o=e.y-n.y,o=Math.sqrt(r*r+o*o)/t.XD,r=new F((Math.min(e.x,n.x)+Math.max(e.x,n.x))/2,(Math.min(e.y,n.y)+Math.max(e.y,n.y))/2),o=t.Ps*o,h=t.pb;if(o!==t.scale&&h.canResetZoom(o)){var l=t.zi;t.zi=r,h.resetZoom(o),t.zi=l}i.bubbles=!1}s.v(n),s.v(e)}},ut.prototype.doKeyDown=function(){var t=this.g;t!==null&&t.N.key==="Esc"&&this.doCancel()},ut.prototype.doKeyUp=function(){},ut.prototype.startTransaction=ut.prototype.Ib=function(t){t===void 0&&(t=this.name),this.Lf=null;var i=this.g;return i===null?!1:i.Ib(t)},ut.prototype.stopTransaction=ut.prototype.Wk=function(){var t=this.g;return t===null?!1:this.Lf===null?t.om():t.Yc(this.Lf)},ut.prototype.standardMouseSelect=function(){var t=this.g;if(t!==null&&t.Bf){var i=t.N,n=t.eu(i.ea,!1);if(n!==null){if(s.zh?i.Iu:i.control){for(t.Aa("ChangingSelection"),i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&(i.jb=!i.jb),t.Aa("ChangedSelection")}else if(i.shift){if(!n.jb){for(t.Aa("ChangingSelection"),i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&(i.jb=!0),t.Aa("ChangedSelection")}}else if(!n.jb){for(i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&t.select(i)}}else!i.left||(s.zh?i.Iu:i.control)||i.shift||t.oA()}},ut.prototype.standardMouseClick=function(t,i){t===void 0&&(t=null),i===void 0&&(i=function(o){return!o.layer.Hc});var n=this.g;if(n===null)return!1;var e=n.N,r=n.Pe(e.ea,t,i);return e.Be=r,ld(r,e,n),e.vc};function ld(t,i,n){if(i.vc=!1,t===null||t.vu()){var e=0;i.left?e=i.te===1?1:i.te===2?2:1:i.right&&i.te===1&&(e=3);var r="";if(t!==null){switch(e){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}e!==0&&n.Aa(r,t)}else{switch(e){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}e!==0&&n.Aa(r)}if(t!==null)for(;t!==null;){switch(n=null,e){case 1:n=t.click;break;case 2:n=t.Zt?t.Zt:t.click;break;case 3:n=t.sA}if(n!==null&&(n(i,t),i.vc))break;t=t.R}else{switch(t=null,e){case 1:t=n.click;break;case 2:t=n.Zt?n.Zt:n.click;break;case 3:t=n.sA}t!==null&&t(i)}}}ut.prototype.standardMouseOver=function(){var t=this.g;if(t!==null){var i=t.N;if(i.g!==null&&t.Ka.sc!==!0){var n=t.gb;t.gb=!0;var e=t.fh?t.Pe(i.ea,null,null):null;i.Be=e;var r=!1;if(e!==t.zo){var o=t.zo,h=o;for(t.zo=e,this.doCurrentObjectChanged(o,e),i.vc=!1;o!==null;){var l=o.Ku;if(l!==null&&(e===o||e!==null&&e.jm(o)||(l(i,o,e),r=!0,i.vc)))break;o=o.R}for(o=h,i.vc=!1;e!==null&&(l=e.Ju,!(l!==null&&(o===e||o!==null&&o.jm(e)||(l(i,e,o),r=!0,i.vc))));)e=e.R;e=t.zo}if(e!==null){for(o=e,h="";o!==null&&(h=o.cursor,h==="");)o=o.R;for(t.kc=h,i.vc=!1,o=e;o!==null&&(e=o.kB,!(e!==null&&(e(i,o),r=!0,i.vc)));)o=o.R}else t.kc="",e=t.kB,e!==null&&(e(i),r=!0);r&&t.ye(),t.gb=n}}},ut.prototype.doCurrentObjectChanged=function(){},ut.prototype.standardMouseWheel=function(){var t=this.g;if(t!==null){var i=t.N,n=i.pi;if(n!==0&&t.Nd.H()){var e=t.pb,r=t.Va.Lu;if((r===ff&&!i.shift||r===Zl&&i.control)&&(0<n?e.canIncreaseZoom():e.canDecreaseZoom()))r=t.zi,t.zi=i.Ce,0<n?e.increaseZoom():e.decreaseZoom(),t.zi=r,i.bubbles=!1;else if(r===ff&&i.shift||r===Zl&&!i.control){var e=t.position.copy(),r=0<n?n:-n,o=i.event.deltaMode,h=i.event.deltaX,l=i.event.deltaY,u="pixel";if((s.hq||s.iq||s.VA)&&(o=1,0<h&&(h=3),0>h&&(h=-3),0<l&&(l=3),0>l&&(l=-3)),o===void 0||h===void 0||l===void 0||h===0&&l===0||i.shift)!i.shift&&t.se?(o=t.Zu,r=3*r*o,0<n?t.scroll("pixel","up",r):t.scroll("pixel","down",r)):i.shift&&t.re&&(o=t.Yu,r=3*r*o,0<n?t.scroll("pixel","left",r):t.scroll("pixel","right",r));else{switch(o){case 0:u="pixel";break;case 1:u="line";break;case 2:u="page";break;default:u="pixel"}h!==0&&t.re&&(0<h?t.scroll(u,"left",-h):t.scroll(u,"right",h)),l!==0&&t.se&&(0<l?t.scroll(u,"up",-l):t.scroll(u,"down",l))}t.position.L(e)||(i.bubbles=!1)}}}},ut.prototype.standardWaitAfter=function(t,i){s.j(t,"number",ut,"standardWaitAfter:delay"),i===void 0&&(i=this.g.N),this.cancelWaitAfter();var n=this,e=i.copy();this.Zw=s.setTimeout(function(){n.doWaitAfter(e)},t)},ut.prototype.cancelWaitAfter=function(){this.Zw!==-1&&s.clearTimeout(this.Zw),this.Zw=-1},ut.prototype.doWaitAfter=function(){},ut.prototype.findToolHandleAt=function(t,i){var n=this.g;return n===null?null:(n=n.Pe(t,function(e){for(;e!==null&&!(e.R instanceof vt);)e=e.R;return e}),n===null?null:n.W.kd===i?n:null)},ut.prototype.isBeyondDragSize=function(t,i){var n=this.g;if(n===null)return!1;t===void 0&&(t=n.uc.Ce),i===void 0&&(i=n.N.Ce);var r=n.Va.UH,e=r.width,r=r.height;return n.uc.Aj&&(e+=6,r+=6),Math.abs(i.x-t.x)>e||Math.abs(i.y-t.y)>r},s.u(ut,{g:"diagram"},function(){return this.aa}),s.defineProperty(ut,{name:"name"},function(){return this.Sb},function(t){s.j(t,"string",ut,"name"),this.Sb=t}),s.defineProperty(ut,{isEnabled:"isEnabled"},function(){return this.jf},function(t){s.j(t,"boolean",ut,"isEnabled"),this.jf=t}),s.defineProperty(ut,{ta:"isActive"},function(){return this.gD},function(t){s.j(t,"boolean",ut,"isActive"),this.gD=t}),s.defineProperty(ut,{Lf:"transactionResult"},function(){return this.nE},function(t){t!==null&&s.j(t,"string",ut,"transactionResult"),this.nE=t});function dt(){ut.call(this),0<arguments.length&&s.nd(dt),this.name="Dragging",this.yC=this.kD=!0,this.Yr=this.XC=!1,this.oD=!0,this.vz=new lt(NaN,NaN).freeze(),this.wz=gi,this.xz=new F(NaN,NaN).freeze(),this.WC=!1,this.ww=this.vw=this.kz=this.vC=this.VC=this.GC=this.fj=null,this.Dr=this.mD=!1,this.wp=new F(NaN,NaN),this.Pw=new F,this.Sw=!1,this.jD=!0,this.Fo=100,this.Uj=[],this.VG=new R(L).freeze()}s.La(dt,ut),s.ga("DraggingTool",dt),s.defineProperty(dt,{BF:"isCopyEnabled"},function(){return this.kD},function(t){s.j(t,"boolean",dt,"isCopyEnabled"),this.kD=t}),s.defineProperty(dt,{JH:"copiesEffectiveCollection"},function(){return this.yC},function(t){s.j(t,"boolean",dt,"copiesEffectiveCollection"),this.yC=t}),s.defineProperty(dt,{VH:"dragsTree"},function(){return this.XC},function(t){s.j(t,"boolean",dt,"dragsTree"),this.XC=t}),s.defineProperty(dt,{Sk:"isGridSnapEnabled"},function(){return this.Yr},function(t){s.j(t,"boolean",dt,"isGridSnapEnabled"),this.Yr=t}),s.defineProperty(dt,{yI:"isComplexRoutingRealtime"},function(){return this.jD},function(t){s.j(t,"boolean",dt,"isComplexRoutingRealtime"),this.jD=t}),s.defineProperty(dt,{DF:"isGridSnapRealtime"},function(){return this.oD},function(t){s.j(t,"boolean",dt,"isGridSnapRealtime"),this.oD=t}),s.defineProperty(dt,{sF:"gridSnapCellSize"},function(){return this.vz},function(t){s.G(t,lt,dt,"gridSnapCellSize"),this.vz.L(t)||(this.vz=t=t.S())}),s.defineProperty(dt,{jI:"gridSnapCellSpot"},function(){return this.wz},function(t){s.G(t,P,dt,"gridSnapCellSpot"),this.wz.L(t)||(this.wz=t=t.S())}),s.defineProperty(dt,{kI:"gridSnapOrigin"},function(){return this.xz},function(t){s.G(t,F,dt,"gridSnapOrigin"),this.xz.L(t)||(this.xz=t=t.S())}),s.defineProperty(dt,{uj:"dragsLink"},function(){return this.WC},function(t){s.j(t,"boolean",dt,"dragsLink"),this.WC=t}),s.defineProperty(dt,{zn:"currentPart"},function(){return this.GC},function(t){t!==null&&s.G(t,L,dt,"currentPart"),this.GC=t}),s.defineProperty(dt,{ec:"copiedParts"},function(){return this.vC},function(t){this.vC=t}),s.defineProperty(dt,{$b:"draggedParts"},function(){return this.VC},function(t){this.VC=t}),s.u(dt,{bL:"draggingParts"},function(){return this.ec!==null?this.ec.Mj():this.$b!==null?this.$b.Mj():this.VG}),s.defineProperty(dt,{ld:"draggedLink"},function(){return this.kz},function(t){t!==null&&s.G(t,S,dt,"draggedLink"),this.kz!==t&&(this.kz=t,t!==null?(this.vw=t.gc,this.ww=t.zc):this.ww=this.vw=null)}),s.defineProperty(dt,{Mx:"isDragOutStarted"},function(){return this.mD},function(t){this.mD=t}),s.defineProperty(dt,{Vk:"startPoint"},function(){return this.Pw},function(t){s.G(t,F,dt,"startPoint"),this.Pw.L(t)||(this.Pw=t=t.S())}),s.defineProperty(dt,{SE:"delay"},function(){return this.Fo},function(t){s.j(t,"number",dt,"delay"),this.Fo=t}),dt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib&&!t.Rt||!t.Tl&&!t.Ck&&!t.Rt||!t.Bf)return!1;var i=t.N;return!i.left||t.Xa!==this&&(!this.isBeyondDragSize()||i.Aj&&i.timestamp-t.uc.timestamp<this.Fo)?!1:this.findDraggablePart()!==null},dt.prototype.findDraggablePart=function(){var t=this.g;if(t===null||(t=t.eu(t.uc.ea,!1),t===null))return null;for(;t!==null&&!t.canSelect();)t=t.Ca;return t!==null&&(t.canMove()||t.canCopy())?t:null},dt.prototype.standardMouseSelect=function(){var t=this.g;if(t!==null&&t.Bf){var i=t.eu(t.uc.ea,!1);if(i!==null){for(;i!==null&&!i.canSelect();)i=i.Ca;this.zn=i,this.zn.jb||(t.Aa("ChangingSelection"),i=t.N,(s.zh?i.Iu:i.control)||i.shift||pf(t),this.zn.jb=!0,t.Aa("ChangedSelection"))}}},dt.prototype.doActivate=function(){var t=this.g;if(t!==null){this.zn===null&&this.standardMouseSelect();var i=this.zn;i!==null&&(i.canMove()||i.canCopy())&&(this.ta=!0,this.wp.set(t.position),K0(this,t.selection),this.Uj.length=0,this.$b=this.computeEffectiveCollection(t.selection),t.sm=!0,xa(this,this.$b),this.Ib("Drag"),this.Vk=t.uc.ea,t.ef=!0,t.Rt&&(this.Mx=!0,this.Dr=!1,Ci=this,Kl=this.g,this.doSimulatedDragOut()))}};function K0(t,i){if(t.uj){var n=t.g;n!==null&&n.pn&&(n.$ instanceof K&&i.count===1&&i.first()instanceof S?(t.ld=i.first(),t.ld.canRelinkFrom()&&t.ld.canRelinkTo()&&t.ld.Ut(),t.fj=n.Va.bG,t.fj===null&&(t.fj=new Ln,t.fj.Tc(n))):(t.ld=null,t.fj=null))}}dt.prototype.computeEffectiveCollection=function(t){var i=this.g!==null&&this.g.Xa===this,n=new tt(L);if(t===null)return n;for(var e=t.i;e.next();)bs(this,n,e.value,i);if(this.ld!==null&&this.uj)return n;for(e=t.i;e.next();)t=e.value,t instanceof S&&(i=t.V,i===null||n.contains(i)?(i=t.Z,i===null||n.contains(i)||n.remove(t)):n.remove(t));return n};function Lr(t,i,n){return n===void 0?new wa(Qs):(t=t.Sk,i.Ca!==null&&(t=!1),t?new wa(new F(Math.round(n.x),Math.round(n.y))):new wa(n.copy()))}function bs(t,i,n,e){if(!i.contains(n)&&(!e||n.canMove()||n.canCopy()))if(n instanceof I){if(i.add(n,Lr(t,n,n.location)),n instanceof Z)for(var r=n.hc;r.next();)bs(t,i,r.value,e);for(r=n.je;r.next();){var o=r.value;if(!i.contains(o)){var h=o.V,l=o.Z;h!==null&&i.contains(h)&&l!==null&&i.contains(l)&&bs(t,i,o,e)}}if(t.VH)for(n=n.fF();n.next();)bs(t,i,n.value,e)}else if(n instanceof S)for(o=n,i.add(o,Lr(t,o)),n=o.Ff;n.next();)bs(t,i,n.value,e);else n instanceof vt||i.add(n,Lr(t,n,n.location))}dt.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;if(t!==null&&mo(t),U0(this),of(this,this.$b),this.$b=this.zn=null,this.Dr=this.Mx=!1,0<th.count){for(var i=th.length,n=0;n<i;n++){var e=th.fa(n);ad(e),vs(e),U0(e),e.g!==null&&mo(e.g)}th.clear()}ad(this),this.wp.m(NaN,NaN),Ci=Kl=null,vs(this),t.ef=!1,t.kc="",t.sm=!1,this.Wk()};function U0(t){var i=t.g;if(i!==null){var n=i.gb;i.gb=!0,vd(t,i.N,null),i.gb=n}t.Uj.length=0}function ud(){var t=Ci;vs(t),Y0(t);var i=t.g;i!==null&&t.wp.H()&&(i.position=t.wp),i!==null&&mo(i)}dt.prototype.doCancel=function(){vs(this),Y0(this);var t=this.g;t!==null&&this.wp.H()&&(t.position=this.wp),this.stopTool()};function xa(t,i){if(i!==null){t.Sw=!0;for(var n=i.i;n.next();){var e=n.key;e instanceof S&&(e.vi=!0)}}}function of(t,i){if(i!==null){for(var n=i.i;n.next();){var e=n.key;e instanceof S&&(e.vi=!1,gc(e)&&e.Tb())}t.Sw=!1}}dt.prototype.doKeyDown=function(){var t=this.g;t!==null&&(t=t.N,t!==null&&this.ta&&(t.key==="Esc"?this.doCancel():this.doMouseMove()))},dt.prototype.doKeyUp=function(){var t=this.g;t!==null&&t.N!==null&&this.ta&&this.doMouseMove()};function fd(t,i){for(var n=1/0,e=1/0,r=-1/0,o=-1/0,h=t.i;h.next();){var l=h.value;if(l.he()&&l.isVisible()){var u=l.location,l=u.x,u=u.y;isNaN(l)||isNaN(u)||(l<n&&(n=l),u<e&&(e=u),l>r&&(r=l),u>o&&(o=u))}}n===1/0?i.m(0,0,0,0):i.m(n,e,r-n,o-e)}function J0(t,i){if(t.ec===null){var n=t.g;if(!(n===null||i&&(n.ib||n.Ef))&&t.$b!==null){var e=n.ja;for(e.isEnabled&&e.FF?e.sj!==null&&0<e.sj.Wf.count&&(n.ja.om(),n.Ib("Drag")):Y0(t),n.gb=!i,n.Sq=!i,t.Vk=n.uc.ea,e=t.JH?t.$b.Mj():n.selection,e=n.Tp(e,n,!0),n=e.i;n.next();)n.value.location=n.key.location;n=s.vf(),fd(e,n),s.Bb(n);for(var n=new tt(L),r=t.$b.i;r.next();){var o=r.key;o.he()&&o.canCopy()&&(o=e.ka(o),o!==null&&(o.Ne(),n.add(o,Lr(t,o,o.location))))}for(e=e.i;e.next();)r=e.value,r instanceof S&&r.canCopy()&&n.add(r,Lr(t,r));t.ec=n,K0(t,n.Mj()),t.ld!==null&&(n=t.ld,e=n.ao,n.Ej(t.Vk.x-(e.x+e.width/2),t.Vk.y-(e.y+e.height/2)))}}}function vs(t){var i=t.g;if(i!==null){if(t.ec!==null&&(i.vB(t.ec.Mj(),!1),t.ec=null,t.$b!==null))for(var n=t.$b.i;n.next();)n.key instanceof S&&(n.value.point=new F(0,0));i.gb=!1,i.Sq=!1,t.Vk=i.uc.ea}}function ad(t){if(t.ld!==null){if(t.uj&&t.fj!==null){var i=t.fj;i.g!==null&&(i.g.remove(i.Wd),i.g.remove(i.Xd))}t.ld=null,t.fj=null}}function Vh(t,i,n){var e=t.g;if(e!==null){var r=t.Vk,o=s.K();o.assign(e.N.ea),t.moveParts(i,o.ui(r),n),s.v(o)}}dt.prototype.moveParts=function(t,i,n){if(t!==null&&(s.G(t,tt,dt,"moveParts:parts"),t.count!==0)){var e=s.K(),r=s.K();r.assign(i),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),(i=this.Sw)||xa(this,t);for(var o=new z(Md),h=new z(Fl),l=t.i;l.next();){var u=l.key;if(u.he()){var f=pd(this,u,t);if(f!==null)o.add(new Md(u,l.value,f));else if(!n||u.canMove()){f=l.value.point,e.assign(f);var a=new F,p=this.computeMove(u,e.add(r),t,a);u.location=p,l.value.vG=a.ui(f)}}else l.key instanceof S&&h.add(l.Wa)}for(n=o.i;n.next();)a=n.value,f=a.info.point,e.assign(f),a.Rc.location=e.add(a.lI.vG);for(n=s.K(),f=s.K(),h=h.i;h.next();)if(l=h.value,o=l.key,o instanceof S)if(o.vi)if(a=o.V,u=o.Z,this.ld!==null&&this.uj)if(l=l.value.point,o.xx===null)t.add(o,Lr(this,o,r)),u=r.x-l.x,l=r.y-l.y,o.Ej(u,l);else{p=s.wb(0,0),(a=o.l(0))&&a.H()&&p.assign(a),a=s.K(),a.assign(p),a.add(r);var y=a;this.Sk&&(this.DF||this.g.N.up)&&(y=s.K(),yd(this,o,a,y)),a.assign(o.xx(o,a,y)),a.ui(p),t.add(o,Lr(this,o,a)),u=a.x-l.x,l=a.y-l.y,o.Ej(u,l),s.v(p),s.v(a),y!==a&&s.v(y)}else a!==null&&(n.assign(a.location),p=t.ka(a),p!==null&&n.ui(p.point)),u!==null&&(f.assign(u.location),p=t.ka(u),p!==null&&f.ui(p.point)),a!==null&&u!==null?n.Qc(f)?(l=l.value.point,a=e,a.assign(n),a.ui(l),t.add(o,Lr(this,o,n)),o.Ej(a.x,a.y)):(o.vi=!1,o.Tb()):(l=l.value.point,a=a!==null?n:u!==null?f:r,t.add(o,Lr(this,o,a)),u=a.x-l.x,l=a.y-l.y,o.Ej(u,l));else(o.V===null||o.Z===null)&&(l=l.value.point,t.add(o,Lr(this,o,r)),u=r.x-l.x,l=r.y-l.y,o.Ej(u,l));s.v(e),s.v(r),s.v(n),s.v(f),i||(te(this.g),of(this,t))}};function pd(t,i,n){return i=i.Ca,i!==null&&(t=pd(t,i,n),t!==null||(t=n.ka(i),t!==null))?t:null}function Y0(t){if(t.$b!==null){for(var i=t.g,n=t.$b.i;n.next();){var e=n.key;e.he()&&(e.location=n.value.point)}for(n=t.$b.i;n.next();)if(e=n.key,e instanceof S&&e.vi){var r=n.value.point;t.$b.add(e,Lr(t,e)),e.Ej(-r.x,-r.y)}i.dg()}}function yd(t,i,n,e){if(e.assign(n),i!==null&&(i=t.g,i!==null)){var r=i.Hn,o=t.sF;i=o.width;var o=o.height,l=t.kI,h=l.x,l=l.y;if(t=t.jI,r!==null){var u=r.Jx;isNaN(i)&&(i=u.width),isNaN(o)&&(o=u.height),r=r.rF,isNaN(h)&&(h=r.x),isNaN(l)&&(l=r.y)}r=s.wb(0,0),r.bv(0,0,i,o,t),ef(n.x,n.y,h+r.x,l+r.y,i,o,e),s.v(r)}}dt.prototype.computeMove=function(t,i,n,e){if(e===void 0&&(e=new F),e.assign(i),t===null)return e;n===void 0&&(n=null);var r=i,o=this.Sk;o&&(this.DF||n===null||this.g!==null&&this.g.N.up)&&(r=s.K(),yd(this,t,i,r)),n=t.xx!==null?t.xx(t,i,r):r;var h=t.$I,l=h.x;isNaN(l)&&(l=o?Math.round(t.location.x):t.location.x),h=h.y,isNaN(h)&&(h=o?Math.round(t.location.y):t.location.y);var u=t.UI,f=u.x;return isNaN(f)&&(f=o?Math.round(t.location.x):t.location.x),u=u.y,isNaN(u)&&(u=o?Math.round(t.location.y):t.location.y),e.m(Math.max(l,Math.min(n.x,f)),Math.max(h,Math.min(n.y,u))),r!==i&&s.v(r),e};function cd(t,i){if(i===null)return!0;var n=i.W;return!!(n===null||n instanceof vt||n.layer.Hc||t.$b&&t.$b.contains(n)||t.ec&&t.ec.contains(n))}function q0(t,i){var n=t.g;if(n!==null){t.uj&&(t.ld!==null&&(t.ld.V=null,t.ld.Z=null),md(t,!1));var e=ja(n,i,null,function(u){return!cd(t,u)}),r=n.N;r.Be=e;var o=n.gb,h=!1;try{if(n.gb=!0,h=vd(t,r,e),!t.ta&&Ci===null)return;if(e===null){var l=n.dJ;l!==null&&(l(r),h=!0)}if(!t.ta&&Ci===null||(t.doDragOver(i,e),!t.ta&&Ci===null))return}finally{n.gb=o,h&&n.dg()}(n.re||n.se)&&n.AA(r.Ce)}}function vd(t,i,n){var e=!1,r=t.Uj.length,o=0<r?t.Uj[0]:null;if(n===o)return!1;i.vc=!1;for(var h=0;h<r;h++){var l=t.Uj[h],u=l.cJ;if(u!==null&&(u(i,l,n),e=!0,i.vc))break}if(t.Uj.length=0,!t.ta&&Ci===null||n===null)return e;for(i.vc=!1;n!==null;)t.Uj.push(n),n=dd(n);for(r=t.Uj.length,h=0;h<r&&(l=t.Uj[h],u=l.bJ,u===null||(u(i,l,o),e=!0,!i.vc));h++);return e}function dd(t){var i=t.R;return i!==null?i:t instanceof L&&!(t instanceof Z)&&(t=t.Ca,t!==null&&t.oI)?t:null}function gd(t,i,n){var e=t.fj;if(e===null)return null;var r=t.g.Bn(i,e.$F,function(f){return e.findValidLinkablePort(f,n)});t=s.K();for(var o=1/0,h=null,r=r.i;r.next();){var l=r.value;if(l.W!==null){var u=l.Ya(Tt,t),u=i.Cf(u);u<o&&(h=l,o=u)}}return s.v(t),h}function md(t,i){var n=t.ld;if(n!==null&&!(2>n.qa)){var e=t.g;if(e!==null&&!e.ib){var r=t.fj;if(r!==null){var o=null,h=null;n.V===null&&(o=gd(t,n.l(0),!1),o!==null&&(h=o.W));var l=null,u=null;n.Z===null&&(l=gd(t,n.l(n.qa-1),!0),l!==null&&(u=l.W)),r.isValidLink(h,o,u,l)?i?(n.Up=n.l(0),n.Vp=n.l(n.qa-1),n.vi=!1,n.V=h,o!==null&&(n.Ng=o.le),n.Z=u,l!==null&&(n.Kh=l.le),n.gc!==t.vw&&e.Aa("LinkRelinked",n,t.vw),n.zc!==t.ww&&e.Aa("LinkRelinked",n,t.ww)):Nd(r,h,o,u,l):Nd(r,null,null,null,null)}}}}dt.prototype.doDragOver=function(){};function xd(t,i){var n=t.g;if(n!==null){t.uj&&md(t,!0),U0(t);var e=ja(n,i,null,function(l){return!cd(t,l)}),r=n.N;if(r.Be=e,e!==null){r.vc=!1;for(var o=e;o!==null;){var h=o.hB;if(h!==null&&(h(r,o),r.vc))break;o=dd(o)}}else o=n.hB,o!==null&&o(r);if(t.ta||Ci!==null){for(r=(t.ec||t.$b).i;r.next();)o=r.key,o instanceof I&&o.je.each(function(l){l.vi=!1});if(t.doDropOnto(i,e),t.ta||Ci!==null){for(e=s.vf(),r=n.selection.i;r.next();)o=r.value,o instanceof I&&xx(n,o,e);s.Bb(e)}}}}function xx(t,i,n){var e=!1;if(i.getAvoidableRect(n),t.sb.Fk(n)&&(e=!0),t=t.DA(n,function(r){return r.W},function(r){return r instanceof S},!0,function(r){return r instanceof S},e),t.count!==0)for(t=t.i;t.next();)n=t.value,!n.Ah(i)&&n.hm&&n.Tb()}dt.prototype.doDropOnto=function(){},dt.prototype.doMouseMove=function(){if(this.ta){var t=this.g;t!==null&&this.zn!==null&&this.$b!==null&&(this.mayCopy()?(t.kc="copy",J0(this,!1),xa(this,this.ec),Vh(this,this.ec,!1),of(this,this.ec)):this.mayMove()?(vs(this),Vh(this,this.$b,!0)):this.mayDragOut()?(t.kc="no-drop",J0(this,!1),Vh(this,this.ec,!1)):vs(this),q0(this,t.N.ea))}},dt.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t!==null){var i=!1,n=this.mayCopy();if(n&&this.ec!==null?(vs(this),J0(this,!0),xa(this,this.ec),Vh(this,this.ec,!1),of(this,this.ec),this.ec!==null&&t.qG(this.ec.Mj())):(i=!0,vs(this),this.mayMove()&&(Vh(this,this.$b,!0),q0(this,t.N.ea))),this.Dr=!0,xd(this,t.N.ea),this.ta){if(this.ec=null,i&&this.$b!==null)for(i=this.$b.i;i.next();){var e=i.key;e instanceof I&&(e=e.Ca,e===null||e.placeholder===null||this.$b.contains(e)||e.placeholder.I())}t.Gc(),of(this,this.$b),this.Lf=n?"Copy":"Move",t.Aa(n?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},dt.prototype.mayCopy=function(){if(!this.BF)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.Ck||(s.zh?!t.N.alt:!t.N.control))return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canCopy())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canCopy())},dt.prototype.mayDragOut=function(){if(!this.BF)return!1;var t=this.g;if(t===null||!t.Rt||!t.Ck||t.Tl)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canCopy())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canCopy())},dt.prototype.mayMove=function(){var t=this.g;if(t===null||t.ib||!t.Tl)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canMove())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canMove())};var th=new z(dt),Ci=null,Kl=null;dt.prototype.getDraggingSource=function(){return Ci},dt.prototype.mayDragIn=function(){var t=this.g;if(t===null||!t.AE||t.ib||t.Ef||!t.Kp)return!1;var i=Ci;return!(i===null||i.g===null||i.g.$.$l!==t.$.$l)},dt.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Ka.Jh(),Wl(t),t.Ka.Jh(),t=Ci,t!==null&&t.g!==null&&(t.g.kc="copy",t.g.sm=!0)}},dt.prototype.doSimulatedDragLeave=function(){var t=Ci;t!==null&&t.doSimulatedDragOut(),this.doCancel()},dt.prototype.doSimulatedDragOver=function(){var t=this.g;if(t!==null){var i=Ci;i!==null&&i.$b!==null&&this.mayDragIn()&&(t.kc="copy",wd(this,i.$b.Mj(),!1,t.uc),Vh(this,this.ec,!1),q0(this,t.N.ea))}},dt.prototype.doSimulatedDrop=function(){var t=this.g;if(t!==null){var i=Ci;if(i!==null){var n=i.g;i.Dr=!0,vs(this),this.mayDragIn()&&(this.Ib("Drop"),wd(this,i.$b.Mj(),!0,t.N),Vh(this,this.ec,!1),this.ec!==null&&t.qG(this.ec.Mj()),xd(this,t.N.ea),t.Gc(),i=t.selection,this.ec!==null?this.Lf="ExternalCopy":i=new R(L),this.ec=null,t.doFocus(),t.Aa("ExternalObjectsDropped",i,n),this.Wk())}}};function wd(t,i,n,e){if(t.ec===null){var r=t.g;if(!r.ib&&!r.Ef){r.gb=!n,r.Sq=!n,t.Vk=e.ea,n=r.Tp(i,r,!0);var o=s.vf();fd(i,o),e=o.x+o.width/2,r=o.y+o.height/2,s.Bb(o);var o=t.Pw,h=new tt(L),l=s.K();for(i=i.i;i.next();){var u=i.value,f=n.ka(u);u.he()&&u.canCopy()?(u=u.location,l.m(o.x-(e-u.x),o.y-(r-u.y)),f.location=l,f.Ne(),h.add(f,Lr(t,f,l))):u instanceof S&&u.canCopy()&&(f.Ej(o.x-e,o.y-r),h.add(f,Lr(t,f)))}s.v(l),t.ec=h,K0(t,h.Mj()),t.ld!==null&&(n=t.ld,e=n.ao,n.Ej(t.Vk.x-(e.x+e.width/2),t.Vk.y-(e.y+e.height/2)))}}}dt.prototype.doSimulatedDragOut=function(){var t=this.g;t!==null&&(this.mayCopy()||this.mayMove()?t.kc="":t.kc="no-drop",t.sm=!1)};function wa(t){this.point=t,this.vG=Qs}s.ga("DraggingInfo",wa);function Md(t,i,n){this.Rc=t,this.info=i,this.lI=n}function jt(){0<arguments.length&&s.nd(jt),ut.call(this),this.OD=100,this.rD=!1;var t=new S,i=new Y;i.ff=!0,i.stroke="blue",t.add(i),i=new Y,i.Lq="Standard",i.fill="blue",i.stroke="blue",t.add(i),t.bg="Tool",this.hE=t,t=new I,i=new Y,i.le="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.mb=2,i.Da=A0,t.add(i),t.pm=!1,t.bg="Tool",this.fE=t,this.gE=i,t=new I,i=new Y,i.le="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.mb=2,i.Da=A0,t.add(i),t.pm=!1,t.bg="Tool",this.iE=t,this.jE=i,this.ND=this.MD=this.HD=this.GD=this.JD=null,this.nD=!0,this.iH=new tt(N,"boolean"),this.PD=this.Dl=this.cE=null}s.La(jt,ut),s.ga("LinkingBaseTool",jt),jt.prototype.doStop=function(){var t=this.g;t!==null&&mo(t),this.Tg=this.Sg=this.Rg=this.Qg=this.mc=null,this.Fy.clear(),this.Kf=null},s.defineProperty(jt,{$F:"portGravity"},function(){return this.OD},function(t){s.j(t,"number",jt,"portGravity"),0<=t&&(this.OD=t)}),s.defineProperty(jt,{kq:"isUnconnectedLinkValid"},function(){return this.rD},function(t){s.j(t,"boolean",jt,"isUnconnectedLinkValid"),this.rD=t}),s.defineProperty(jt,{wf:"temporaryLink"},function(){return this.hE},function(t){s.G(t,S,jt,"temporaryLink"),this.hE=t}),s.defineProperty(jt,{Wd:"temporaryFromNode"},function(){return this.fE},function(t){s.G(t,I,jt,"temporaryFromNode"),this.fE=t}),s.defineProperty(jt,{ho:"temporaryFromPort"},function(){return this.gE},function(t){s.G(t,N,jt,"temporaryFromPort"),this.gE=t}),s.defineProperty(jt,{Xd:"temporaryToNode"},function(){return this.iE},function(t){s.G(t,I,jt,"temporaryToNode"),this.iE=t}),s.defineProperty(jt,{io:"temporaryToPort"},function(){return this.jE},function(t){s.G(t,N,jt,"temporaryToPort"),this.jE=t}),s.defineProperty(jt,{mc:"originalLink"},function(){return this.JD},function(t){t!==null&&s.G(t,S,jt,"originalLink"),this.JD=t}),s.defineProperty(jt,{Qg:"originalFromNode"},function(){return this.GD},function(t){t!==null&&s.G(t,I,jt,"originalFromNode"),this.GD=t}),s.defineProperty(jt,{Rg:"originalFromPort"},function(){return this.HD},function(t){t!==null&&s.G(t,N,jt,"originalFromPort"),this.HD=t}),s.defineProperty(jt,{Sg:"originalToNode"},function(){return this.MD},function(t){t!==null&&s.G(t,I,jt,"originalToNode"),this.MD=t}),s.defineProperty(jt,{Tg:"originalToPort"},function(){return this.ND},function(t){t!==null&&s.G(t,N,jt,"originalToPort"),this.ND=t}),s.defineProperty(jt,{Td:"isForwards"},function(){return this.nD},function(t){s.j(t,"boolean",jt,"isForwards"),this.nD=t}),s.u(jt,{Fy:"validPortsCache"},function(){return this.iH}),s.defineProperty(jt,{Kf:"targetPort"},function(){return this.cE},function(t){t!==null&&s.G(t,N,jt,"targetPort"),this.cE=t}),jt.prototype.copyPortProperties=function(t,i,n,e,r){if(t!==null&&i!==null&&n!==null&&e!==null){e.Da=i.U.size,r?(e.Nb=i.Nb,e.wm=i.wm):(e.Mb=i.Mb,e.cm=i.cm),n.Gf=Tt;var o=s.K();n.location=i.Ya(Tt,o),s.v(o),e.angle=i.dm(),this.ky!==null&&this.ky(t,i,n,e,r)}},jt.prototype.setNoTargetPortProperties=function(t,i,n){i!==null&&(i.Da=A0,i.Mb=ki,i.Nb=ki),t!==null&&this.g!==null&&(t.location=this.g.N.ea),this.ky!==null&&this.ky(null,null,t,i,n)},jt.prototype.doMouseDown=function(){this.ta&&this.doMouseMove()},jt.prototype.doMouseMove=function(){if(this.ta){var t=this.g;if(t!==null){if(this.Kf=this.findTargetPort(this.Td),this.Kf!==null&&this.Kf.W instanceof I){var i=this.Kf.W;this.Td?this.copyPortProperties(i,this.Kf,this.Xd,this.io,!0):this.copyPortProperties(i,this.Kf,this.Wd,this.ho,!1)}else this.Td?this.setNoTargetPortProperties(this.Xd,this.io,!0):this.setNoTargetPortProperties(this.Wd,this.ho,!1);(t.re||t.se)&&t.AA(t.N.Ce)}}},jt.prototype.findValidLinkablePort=function(t,i){if(t===null)return null;var n=t.W;if(!(n instanceof I))return null;for(;t!==null;){var e=i?t.EG:t.hF;if(e===!0&&(t.le!==null||t instanceof I)&&(i?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(e===!1)break;t=t.R}return null},jt.prototype.findTargetPort=function(t){var i=this.g,n=i.N.ea,e=this.$F;0>=e&&(e=.1);for(var r=this,o=i.Bn(n,e,function(c){return r.findValidLinkablePort(c,t)},null,!0),e=1/0,i=null,o=o.i;o.next();){var h=o.value,l=h.W;if(l instanceof I){var u=h.Ya(Tt,s.K()),f=n.x-u.x,a=n.y-u.y;s.v(u),u=f*f+a*a,u<e&&(f=this.Fy.ka(h),f!==null?f&&(i=h,e=u):t&&this.isValidLink(this.Qg,this.Rg,l,h)||!t&&this.isValidLink(l,h,this.Sg,this.Tg)?(this.Fy.add(h,!0),i=h,e=u):this.Fy.add(h,!1))}}return i!==null&&(n=i.W,n instanceof I&&(n.layer===null||n.layer.St))?i:null},jt.prototype.isValidFrom=function(t,i){if(t===null||i===null)return this.kq;if(this.g!==null&&this.g.Xa===this&&(t.layer!==null&&!t.layer.St||i.hF!==!0))return!1;var n=i.GA;if(1/0>n){if(this.mc!==null&&t===this.Qg&&i===this.Rg)return!0;var e=i.le;if(e===null&&(e=""),t.Ex(e).count>=n)return!1}return!0},jt.prototype.isValidTo=function(t,i){if(t===null||i===null)return this.kq;if(this.g!==null&&this.g.Xa===this&&(t.layer!==null&&!t.layer.St||i.EG!==!0))return!1;var n=i.WJ;if(1/0>n){if(this.mc!==null&&t===this.Sg&&i===this.Tg)return!0;var e=i.le;if(e===null&&(e=""),t.Mg(e).count>=n)return!1}return!0},jt.prototype.isInSameNode=function(t,i){if(t===null||i===null)return!1;if(t===i)return!0;var n=t.W,e=i.W;return n!==null&&n===e},jt.prototype.isLinked=function(t,i){if(t===null||i===null)return!1;var n=t.W;if(!(n instanceof I))return!1;var e=t.le;e===null&&(e="");var r=i.W;if(!(r instanceof I))return!1;var o=i.le;for(o===null&&(o=""),r=r.Mg(o);r.next();)if(o=r.value,o.V===n&&o.Ng===e)return!0;return!1},jt.prototype.isValidLink=function(t,i,n,e){if(!this.isValidFrom(t,i)||!this.isValidTo(n,e)||!(i===null||e===null||(i.bI&&e.VJ||!this.isInSameNode(i,e))&&(i.aI&&e.UJ||!this.isLinked(i,e)))||this.mc!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.mc)||n!==null&&this.isLabelDependentOnLink(n,this.mc))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.mc))return!1;if(t!==null){var r=t.Xx;if(r!==null&&!r(t,i,n,e,this.mc))return!1}return n!==null&&(r=n.Xx,r!==null&&!r(t,i,n,e,this.mc))?!1:(r=this.Xx,r!==null?r(t,i,n,e,this.mc):!0)},jt.prototype.isLabelDependentOnLink=function(t,i){if(t===null)return!1;var n=t.Xb;if(n===null)return!1;if(n===i)return!0;var e=new R(I);return e.add(t),Z0(this,n,i,e)};function Z0(t,i,n,e){if(i===n)return!0;var r=i.V;return r!==null&&r.Df&&(e.add(r),Z0(t,r.Xb,n,e))?!0:(i=i.Z,!!(i!==null&&i.Df&&(e.add(i),Z0(t,i.Xb,n,e))))}jt.prototype.isValidCycle=function(t,i,n){if(n===void 0&&(n=null),t===null||i===null)return this.kq;var e=this.g!==null?this.g.bK:yf;if(e!==yf){if(e===eg){if(e=n||this.wf,e!==null&&!e.bc)return!0;for(e=i.je;e.next();){var r=e.value;if(r!==n&&r.bc&&r.Z===i)return!1}return!sf(this,t,i,n,!0)}if(e===rg){if(e=n||this.wf,e!==null&&!e.bc)return!0;for(e=t.je;e.next();)if(r=e.value,r!==n&&r.bc&&r.V===t)return!1;return!sf(this,t,i,n,!0)}if(e===tg)return t===i?t=!0:(e=new R(I),e.add(i),t=Pd(this,e,t,i,n)),!t;if(e===ig)return!sf(this,t,i,n,!1);if(e===ng)return t===i?t=!0:(e=new R(I),e.add(i),t=Td(this,e,t,i,n)),!t}return!0};function sf(t,i,n,e,r){if(i===n)return!0;if(i===null||n===null)return!1;for(var o=i.je;o.next();){var h=o.value;if(h!==e&&(!r||h.bc)&&h.Z===i&&(h=h.V,h!==i&&sf(t,h,n,e,r)))return!0}return!1}function Pd(t,i,n,e,r){if(n===e)return!0;if(n===null||e===null||i.contains(n))return!1;i.add(n);for(var o=n.je;o.next();){var h=o.value;if(h!==r&&h.Z===n&&(h=h.V,h!==n&&Pd(t,i,h,e,r)))return!0}return!1}function Td(t,i,n,e,r){if(n===e)return!0;if(n===null||e===null||i.contains(n))return!1;i.add(n);for(var o=n.je;o.next();){var h=o.value;if(h!==r){var l=h.V,h=h.Z,l=l===n?h:l;if(l!==n&&Td(t,i,l,e,r))return!0}}return!1}s.defineProperty(jt,{Xx:"linkValidation"},function(){return this.Dl},function(t){t!==null&&s.j(t,"function",jt,"linkValidation"),this.Dl=t}),s.defineProperty(jt,{ky:"portTargeted"},function(){return this.PD},function(t){t!==null&&s.j(t,"function",jt,"portTargeted"),this.PD=t});function mi(){0<arguments.length&&s.nd(mi),jt.call(this),this.name="Linking",this.oC={},this.nC=null,this.ba=Ma,this.YD=null}s.La(mi,jt),s.ga("LinkingTool",mi);var Ma;mi.Either=Ma=s.p(mi,"Either",0);var kd;mi.ForwardsOnly=kd=s.p(mi,"ForwardsOnly",0);var Sd;mi.BackwardsOnly=Sd=s.p(mi,"BackwardsOnly",0),s.defineProperty(mi,{EE:"archetypeLinkData"},function(){return this.oC},function(t){t!==null&&s.G(t,Object,mi,"archetypeLinkData"),t instanceof N&&s.G(t,S,mi,"archetypeLinkData"),this.oC=t}),s.defineProperty(mi,{DE:"archetypeLabelNodeData"},function(){return this.nC},function(t){t!==null&&s.G(t,Object,mi,"archetypeLabelNodeData"),t instanceof N&&s.G(t,I,mi,"archetypeLabelNodeData"),this.nC=t}),s.defineProperty(mi,{direction:"direction"},function(){return this.ba},function(t){s.ob(t,mi,mi,"direction"),this.ba=t}),s.defineProperty(mi,{yG:"startObject"},function(){return this.YD},function(t){t!==null&&s.G(t,N,mi,"startObject"),this.YD=t}),mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.St)return!1;var i=t.$;return(i instanceof K||i instanceof Lt)&&t.N.left&&(t.Xa===this||this.isBeyondDragSize())?this.findLinkablePort()!==null:!1},mi.prototype.findLinkablePort=function(){var t=this.g;if(t===null)return null;var i=this.yG;if(i===null&&(i=t.Pe(t.uc.ea,null,null)),i===null||!(i.W instanceof I))return null;if(t=this.direction,t===Ma||t===kd){var n=this.findValidLinkablePort(i,!1);if(n!==null)return this.Td=!0,n}return(t===Ma||t===Sd)&&(n=this.findValidLinkablePort(i,!0),n!==null)?(this.Td=!1,n):null},mi.prototype.doActivate=function(){var t=this.g;if(t!==null){var i=this.findLinkablePort();i!==null&&(this.Ib(this.name),t.ef=!0,t.kc="pointer",this.Td?(this.Xd===null||this.Xd.location.H()||(this.Xd.location=t.N.ea),this.Rg=i,i=this.Rg.W,i instanceof I&&(this.Qg=i),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.ho,!1)):(this.Wd===null||this.Wd.location.H()||(this.Wd.location=t.N.ea),this.Tg=i,i=this.Tg.W,i instanceof I&&(this.Sg=i),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.io,!0)),t.add(this.Wd),t.add(this.Xd),this.wf!==null&&(this.Wd!==null&&(this.wf.V=this.Wd),this.Xd!==null&&(this.wf.Z=this.Xd),this.wf.bc=this.isNewTreeLink(),this.wf.Tb(),t.add(this.wf)),this.ta=!0)}},mi.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;t!==null&&(t.remove(this.wf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.kc="",this.Wk())},mi.prototype.doStop=function(){jt.prototype.doStop.call(this),this.yG=null},mi.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t===null)return;var i=this.Lf=null,n=null,e=null,r=null,o=this.Kf=this.findTargetPort(this.Td);if(o!==null){var h=o.W;h instanceof I&&(this.Td?(this.Qg!==null&&(i=this.Qg,n=this.Rg),e=h,r=o):(i=h,n=o,this.Sg!==null&&(e=this.Sg,r=this.Tg)))}else this.Td?this.Qg!==null&&this.kq&&(i=this.Qg,n=this.Rg):this.Sg!==null&&this.kq&&(e=this.Sg,r=this.Tg);i!==null||e!==null?(h=this.insertLink(i,n,e,r),h!==null?(o===null&&(this.Td?h.Vp=t.N.ea:h.Up=t.N.ea),t.Bf&&t.select(h),this.Lf=this.name,t.Aa("LinkDrawn",h)):(t.$.JE(),this.doNoLink(i,n,e,r))):this.Td?this.doNoLink(this.Qg,this.Rg,null,null):this.doNoLink(null,null,this.Sg,this.Tg)}this.stopTool()},mi.prototype.isNewTreeLink=function(){var t=this.EE;if(t===null)return!0;if(t instanceof S)return t.bc;var i=this.g;return i===null?!0:(t=i.bq(t),i=Ba(i,t),i!==null?i.bc:!0)},mi.prototype.insertLink=function(t,i,n,e){var r=this.g;if(r===null)return null;var o=r.$;if(o instanceof Lt){var h=t;if(i=n,r.Vd||(h=n,i=t),h!==null&&i!==null)return o.ti(i.data,o.qb(h.data)),i.Cn()}else if(o instanceof K){if(h="",t!==null&&(i===null&&(i=t),h=i.le,h===null&&(h="")),i="",n!==null&&(e===null&&(e=n),i=e.le,i===null&&(i="")),e=this.EE,e instanceof S){if(be(e),o=e.copy(),o!==null)return o.V=t,o.Ng=h,o.Z=n,o.Kh=i,r.add(o),t=this.DE,t instanceof I&&(be(t),t=t.copy(),t!==null&&(t.Xb=o,r.add(t))),o}else if(e!==null&&(e=o.ox(e),s.Pa(e)))return t!==null&&o.CB(e,o.qb(t.data)),o.DB(e,h),n!==null&&o.IB(e,o.qb(n.data)),o.JB(e,i),o.Ot(e),t=this.DE,t===null||t instanceof I||(t=o.copyNodeData(t),s.Pa(t)&&(o.Rl(t),t=o.qb(t),t!==void 0&&o.yE(e,t))),o=r.Yf(e)}return null},mi.prototype.doNoLink=function(){};function Ln(){0<arguments.length&&s.nd(Ln),jt.call(this),this.name="Relinking";var t=new Y;t.Fb="Diamond",t.Da=I0,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Re=0,this.aD=t,t=new Y,t.Fb="Diamond",t.Da=I0,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Re=-1,this.kE=t,this.qc=null,this.KD=new O}s.La(Ln,jt),s.ga("RelinkingTool",Ln),Ln.prototype.updateAdornments=function(t){if(t!==null&&t instanceof S){var i="RelinkFrom",n=null;if(t.jb&&this.g!==null&&!this.g.ib){var e=t.Fq;e!==null&&t.canRelinkFrom()&&t.U.H()&&t.isVisible()&&e.U.H()&&e.Cj()&&(n=t.Yp(i),n===null&&(n=this.makeAdornment(e,!1),t.Ql(i,n)))}n===null&&t.Ij(i),i="RelinkTo",n=null,t.jb&&this.g!==null&&!this.g.ib&&(e=t.Fq,e!==null&&t.canRelinkTo()&&t.U.H()&&t.isVisible()&&e.U.H()&&e.Cj()&&(n=t.Yp(i),n===null&&(n=this.makeAdornment(e,!0),t.Ql(i,n)))),n===null&&t.Ij(i)}},Ln.prototype.makeAdornment=function(t,i){var n=new vt;n.type=Mo;var e=i?this.TJ:this.$H;return e!==null&&n.add(e.copy()),n.ub=t,n},s.defineProperty(Ln,{$H:"fromHandleArchetype"},function(){return this.aD},function(t){t!==null&&s.G(t,N,Ln,"fromHandleArchetype"),this.aD=t}),s.defineProperty(Ln,{TJ:"toHandleArchetype"},function(){return this.kE},function(t){t!==null&&s.G(t,N,Ln,"toHandleArchetype"),this.kE=t}),s.u(Ln,{handle:"handle"},function(){return this.qc}),Ln.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.pn)return!1;var i=t.$;return!(i instanceof K||i instanceof Lt)||!t.N.left?!1:(i=this.findToolHandleAt(t.uc.ea,"RelinkFrom"),i===null&&(i=this.findToolHandleAt(t.uc.ea,"RelinkTo")),i!==null)},Ln.prototype.doActivate=function(){var t=this.g;if(t!==null){if(this.mc===null){var i=this.findToolHandleAt(t.uc.ea,"RelinkFrom");if(i===null&&(i=this.findToolHandleAt(t.uc.ea,"RelinkTo")),i===null)return;var n=i.W;if(!(n instanceof vt&&n.$e instanceof S))return;this.qc=i,this.Td=n===null||n.kd==="RelinkTo",this.mc=n.$e}this.Ib(this.name),t.ef=!0,t.kc="pointer",this.Rg=this.mc.gc,this.Qg=this.mc.V,this.Tg=this.mc.zc,this.Sg=this.mc.Z,this.KD.set(this.mc.U),this.mc!==null&&0<this.mc.qa&&(this.mc.V===null&&(this.ho!==null&&(this.ho.Da=$u),this.Wd!==null&&(this.Wd.location=this.mc.l(0))),this.mc.Z===null&&(this.io!==null&&(this.io.Da=$u),this.Xd!==null&&(this.Xd.location=this.mc.l(this.mc.qa-1)))),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.ho,!1),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.io,!0),t.add(this.Wd),t.add(this.Xd),this.wf!==null&&(this.Wd!==null&&(this.wf.V=this.Wd),this.Xd!==null&&(this.wf.Z=this.Xd),this.copyLinkProperties(this.mc,this.wf),this.wf.Tb(),t.add(this.wf)),this.ta=!0}},Ln.prototype.copyLinkProperties=function(t,i){if(t!==null&&i!==null){i.Jp=t.Jp,i.wA=t.wA;var n=t.nf;(n===cu||n===$o)&&(n=ye),i.nf=n,i.sx=t.sx,i.bc=t.bc,i.points=t.points,i.sy=t.sy,i.Iq=t.Iq,i.Mb=t.Mb,i.cm=t.cm,i.lu=t.lu,i.mu=t.mu,i.Nb=t.Nb,i.wm=t.wm,i.ev=t.ev,i.fv=t.fv}},Ln.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;t!==null&&(t.remove(this.wf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.kc="",this.Wk())},Ln.prototype.doStop=function(){jt.prototype.doStop.call(this),this.qc=null},Ln.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t===null)return;this.Lf=null;var i=this.Qg,n=this.Rg,e=this.Sg,r=this.Tg,o=this.mc;if(this.Kf=this.findTargetPort(this.Td),this.Kf!==null){var h=this.Kf.W;h instanceof I&&(this.Td?(e=h,r=this.Kf):(i=h,n=this.Kf))}else this.kq?this.Td?r=e=null:n=i=null:o=null;o!==null?(this.reconnectLink(o,this.Td?e:i,this.Td?r:n,this.Td),this.Kf===null&&(this.Td?o.Vp=t.N.ea:o.Up=t.N.ea,o.Tb()),t.Bf&&(o.jb=!0),this.Lf=this.name,t.Aa("LinkRelinked",o,this.Td?this.Tg:this.Rg)):this.doNoRelink(this.mc,this.Td),yp(this.mc,this.KD)}this.stopTool()},Ln.prototype.reconnectLink=function(t,i,n,e){return this.g===null?!1:(n=n!==null&&n.le!==null?n.le:"",e?(t.Z=i,t.Kh=n):(t.V=i,t.Ng=n),!0)},Ln.prototype.doNoRelink=function(){};function Nd(t,i,n,e,r){t.g!==null&&(i!==null?(t.copyPortProperties(i,n,t.Wd,t.ho,!1),t.g.add(t.Wd)):t.g.remove(t.Wd),e!==null?(t.copyPortProperties(e,r,t.Xd,t.io,!0),t.g.add(t.Xd)):t.g.remove(t.Xd))}function Ot(){0<arguments.length&&s.nd(Ot),ut.call(this),this.name="LinkReshaping";var t=new Y;t.Fb="Rectangle",t.Da=_u,t.fill="lightblue",t.stroke="dodgerblue",this.tl=t,t=new Y,t.Fb="Diamond",t.Da=_u,t.fill="lightblue",t.stroke="dodgerblue",this.xD=t,this.QD=3,this.Uy=this.qc=null,this.jp=new F,this.yw=null}s.La(Ot,ut),s.ga("LinkReshapingTool",Ot);var Pa;Ot.None=Pa=s.p(Ot,"None",0);var Ul;Ot.Horizontal=Ul=s.p(Ot,"Horizontal",1);var Jl;Ot.Vertical=Jl=s.p(Ot,"Vertical",2);var Q0;Ot.All=Q0=s.p(Ot,"All",3),Ot.prototype.getReshapingBehavior=Ot.prototype.mF=function(t){return t&&t.Oz?t.Oz:Pa},Ot.prototype.setReshapingBehavior=Ot.prototype.av=function(t,i){s.G(t,N,Ot,"setReshapingBehavior:obj"),s.ob(i,Ot,Ot,"setReshapingBehavior:behavior"),t.Oz=i},Ot.prototype.updateAdornments=function(t){if(t!==null&&t instanceof S){if(t.jb&&this.g!==null&&!this.g.ib){var i=t.path;if(i!==null&&t.canReshape()&&t.U.H()&&t.isVisible()&&i.U.H()&&i.Cj()){var n=t.Yp(this.name);if((n===null||n.ED!==t.qa||n.rE!==t.Vu)&&(n=this.makeAdornment(i),n!==null&&(n.ED=t.qa,n.rE=t.Vu,t.Ql(this.name,n))),n!==null){n.location=t.position;return}}}t.Ij(this.name)}},Ot.prototype.makeAdornment=function(t){var i=t.W,n=i.qa,e=i.ac,r=null;if(i.points!==null&&1<n){r=new vt,r.type=Mo;var n=i.fu,o=i.Sx,h=e?1:0;if(i.Vu&&i.computeCurve()!==De)for(var l=n+h;l<o-h;l++){var u=this.makeResegmentHandle(t,l);u!==null&&(u.Re=l,u.zB=.5,u.GA=999,r.add(u))}for(l=n+1;l<o;l++)if(u=this.makeHandle(t,l),u!==null){if(u.Re=l,l!==n)if(l===n+1&&e){var h=i.l(n),f=i.l(n+1);$(h.x,f.x)&&$(h.y,f.y)&&(f=i.l(n-1)),$(h.x,f.x)?(this.av(u,Jl),u.cursor="n-resize"):$(h.y,f.y)&&(this.av(u,Ul),u.cursor="w-resize")}else l===o-1&&e?(h=i.l(o-1),f=i.l(o),$(h.x,f.x)&&$(h.y,f.y)&&(h=i.l(o+1)),$(h.x,f.x)?(this.av(u,Jl),u.cursor="n-resize"):$(h.y,f.y)&&(this.av(u,Ul),u.cursor="w-resize")):l!==o&&(this.av(u,Q0),u.cursor="move");r.add(u)}r.ub=t}return r},Ot.prototype.makeHandle=function(){var t=this.pu;return t===null?null:t.copy()},s.defineProperty(Ot,{pu:"handleArchetype"},function(){return this.tl},function(t){t!==null&&s.G(t,N,Ot,"handleArchetype"),this.tl=t}),Ot.prototype.makeResegmentHandle=function(){var t=this.ZI;return t===null?null:t.copy()},s.defineProperty(Ot,{ZI:"midHandleArchetype"},function(){return this.xD},function(t){t!==null&&s.G(t,N,Ot,"midHandleArchetype"),this.xD=t}),s.u(Ot,{handle:"handle"},function(){return this.qc}),s.u(Ot,{Qt:"adornedLink"},function(){return this.Uy}),Ot.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.hx&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Ot.prototype.doActivate=function(){var t=this.g;if(t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null)){var i=this.qc.W.$e;if(i instanceof S){if(this.Uy=i,t.ef=!0,this.Ib(this.name),i.Vu&&this.qc.GA===999){var n=i.points.copy(),e=this.getResegmentingPoint();if(n.Rd(this.qc.Re+1,e),i.ac&&n.Rd(this.qc.Re+1,e),i.points=n,i.Sd(),i.updateAdornments(),this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc===null){this.doDeactivate();return}}this.jp=i.l(this.qc.Re),this.yw=i.points.copy(),this.ta=!0}}},Ot.prototype.doDeactivate=function(){this.Wk(),this.Uy=this.qc=null;var t=this.g;t!==null&&(t.ef=!1),this.ta=!1},Ot.prototype.doCancel=function(){var t=this.Qt;t!==null&&(t.points=this.yw),this.stopTool()},Ot.prototype.getResegmentingPoint=function(){return this.handle.Ya(Tt)},Ot.prototype.doMouseMove=function(){var t=this.g;this.ta&&t!==null&&(t=this.computeReshape(t.N.ea),this.reshape(t))},Ot.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){var i=this.computeReshape(t.N.ea);if(this.reshape(i),i=this.Qt,i!==null&&i.Vu){var n=this.handle.Re,e=i.l(n-1),r=i.l(n),o=i.l(n+1);if(i.ac){if(n>i.fu+1&&n<i.Sx-1){var h=i.l(n-2);if(Math.abs(e.x-r.x)<this.Hh&&Math.abs(e.y-r.y)<this.Hh&&(Yl(this,h,e,r,o,!0)||Yl(this,h,e,r,o,!1))){var l=i.points.copy();Yl(this,h,e,r,o,!0)?(l.kg(n-2,new F(h.x,(o.y+h.y)/2)),l.kg(n+1,new F(o.x,(o.y+h.y)/2))):(l.kg(n-2,new F((o.x+h.x)/2,h.y)),l.kg(n+1,new F((o.x+h.x)/2,o.y))),l.cd(n),l.cd(n-1),i.points=l,i.Sd()}else h=i.l(n+2),Math.abs(r.x-o.x)<this.Hh&&Math.abs(r.y-o.y)<this.Hh&&(Yl(this,e,r,o,h,!0)||Yl(this,e,r,o,h,!1))&&(l=i.points.copy(),Yl(this,e,r,o,h,!0)?(l.kg(n-1,new F(e.x,(e.y+h.y)/2)),l.kg(n+2,new F(h.x,(e.y+h.y)/2))):(l.kg(n-1,new F((e.x+h.x)/2,e.y)),l.kg(n+2,new F((e.x+h.x)/2,h.y))),l.cd(n+1),l.cd(n),i.points=l,i.Sd())}}else h=s.K(),Ws(e.x,e.y,o.x,o.y,r.x,r.y,h)&&h.Cf(r)<this.Hh*this.Hh&&(l=i.points.copy(),l.cd(n),i.points=l,i.Sd()),s.v(h)}t.Gc(),this.Lf=this.name,t.Aa("LinkReshaped",this.Qt,this.yw)}this.stopTool()};function Yl(t,i,n,e,r,o){return o?Math.abs(i.y-n.y)<t.Hh&&Math.abs(n.y-e.y)<t.Hh&&Math.abs(e.y-r.y)<t.Hh:Math.abs(i.x-n.x)<t.Hh&&Math.abs(n.x-e.x)<t.Hh&&Math.abs(e.x-r.x)<t.Hh}s.defineProperty(Ot,{Hh:"resegmentingDistance"},function(){return this.QD},function(t){s.j(t,"number",Ot,"resegmentingDistance"),this.QD=t}),Ot.prototype.reshape=function(t){var i=this.Qt;i.tm();var n=this.handle.Re,e=this.mF(this.handle);if(i.ac)if(n===i.fu+1)n=i.fu+1,e===Jl?(i.ca(n,i.l(n-1).x,t.y),i.ca(n+1,i.l(n+2).x,t.y)):e===Ul&&(i.ca(n,t.x,i.l(n-1).y),i.ca(n+1,t.x,i.l(n+2).y));else if(n===i.Sx-1)n=i.Sx-1,e===Jl?(i.ca(n-1,i.l(n-2).x,t.y),i.ca(n,i.l(n+1).x,t.y)):e===Ul&&(i.ca(n-1,t.x,i.l(n-2).y),i.ca(n,t.x,i.l(n+1).y));else{var e=n,r=i.l(e),o=i.l(e-1),h=i.l(e+1);$(o.x,r.x)&&$(r.y,h.y)?($(o.x,i.l(e-2).x)&&!$(o.y,i.l(e-2).y)?(i.w(e,t.x,o.y),n++,e++):i.ca(e-1,t.x,o.y),$(h.y,i.l(e+2).y)&&!$(h.x,i.l(e+2).x)?i.w(e+1,h.x,t.y):i.ca(e+1,h.x,t.y)):$(o.y,r.y)&&$(r.x,h.x)?($(o.y,i.l(e-2).y)&&!$(o.x,i.l(e-2).x)?(i.w(e,o.x,t.y),n++,e++):i.ca(e-1,o.x,t.y),$(h.x,i.l(e+2).x)&&!$(h.y,i.l(e+2).y)?i.w(e+1,t.x,h.y):i.ca(e+1,t.x,h.y)):$(o.x,r.x)&&$(r.x,h.x)?($(o.x,i.l(e-2).x)&&!$(o.y,i.l(e-2).y)?(i.w(e,t.x,o.y),n++,e++):i.ca(e-1,t.x,o.y),$(h.x,i.l(e+2).x)&&!$(h.y,i.l(e+2).y)?i.w(e+1,t.x,h.y):i.ca(e+1,t.x,h.y)):$(o.y,r.y)&&$(r.y,h.y)&&($(o.y,i.l(e-2).y)&&!$(o.x,i.l(e-2).x)?(i.w(e,o.x,t.y),n++,e++):i.ca(e-1,o.x,t.y),$(h.y,i.l(e+2).y)&&!$(h.x,i.l(e+2).x)?i.w(e+1,h.x,t.y):i.ca(e+1,h.x,t.y)),i.ca(n,t.x,t.y)}else i.ca(n,t.x,t.y),r=i.V,o=i.gc,r!==null&&(e=r.findVisibleNode(),e!==null&&e!==r&&(r=e,o=r.port)),n===1&&i.computeSpot(!0,o).Ud()&&(e=o.Ya(Tt,s.K()),r=i.getLinkPointFromPoint(r,o,e,t,!0,s.K()),i.ca(0,r.x,r.y),s.v(e),s.v(r)),r=i.Z,o=i.zc,r!==null&&(e=r.findVisibleNode(),e!==null&&e!==r&&(r=e,o=r.port)),n===i.qa-2&&i.computeSpot(!1,o).Ud()&&(e=o.Ya(Tt,s.K()),r=i.getLinkPointFromPoint(r,o,e,t,!1,s.K()),i.ca(i.qa-1,r.x,r.y),s.v(e),s.v(r));i.qj()},Ot.prototype.computeReshape=function(t){var i=this.Qt,n=this.handle.Re;switch(this.mF(this.handle)){case Q0:return t;case Jl:return i=i.l(n),new F(i.x,t.y);case Ul:return i=i.l(n),new F(t.x,i.y);default:case Pa:return i.l(n)}},s.u(Ot,{FL:"originalPoint"},function(){return this.jp}),s.u(Ot,{GL:"originalPoints"},function(){return this.yw});function Xt(){0<arguments.length&&s.nd(Xt),ut.call(this),this.name="Resizing",this.$h=new lt(1,1).freeze(),this.Zh=new lt(9999,9999).freeze(),this.Rj=new lt(NaN,NaN).freeze(),this.Yr=!1,this.Kc=null;var t=new Y;t.qh=Tt,t.Fb="Rectangle",t.Da=_u,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.tl=t,this.qc=null,this.jp=new F,this.FD=new lt,this.LD=new F,this.rz=new lt(0,0),this.qz=new lt(1/0,1/0),this.pz=new lt(1,1),this.DD=!0}s.La(Xt,ut),s.ga("ResizingTool",Xt),Xt.prototype.updateAdornments=function(t){if(!(t===null||t instanceof S)){if(t.jb&&this.g!==null&&!this.g.ib){var i=t.jG;if(i!==null&&t.canResize()&&t.U.H()&&t.isVisible()&&i.U.H()&&i.Cj()){var n=t.Yp(this.name);if((n===null||n.ub!==i)&&(n=this.makeAdornment(i)),n!==null){var e=i.dm();n.angle=e;var r=i.Ya(n.Gf,s.K()),o=i.vj();if(n.location=r,s.v(r),r=n.placeholder,r!==null){var i=i.Ja,h=s.vm();h.m(i.width*o,i.height*o),r.Da=h,s.Lk(h)}this.updateResizeHandles(n,e),t.Ql(this.name,n);return}}}t.Ij(this.name)}},Xt.prototype.makeAdornment=function(t){var i=null,i=t.W.iG;if(i===null){i=new vt,i.type=hh,i.Gf=Tt;var n=new en;n.ff=!0,i.add(n),i.add(this.makeHandle(t,gi)),i.add(this.makeHandle(t,Dl)),i.add(this.makeHandle(t,_i)),i.add(this.makeHandle(t,Ll)),i.add(this.makeHandle(t,Se)),i.add(this.makeHandle(t,Un)),i.add(this.makeHandle(t,Ce)),i.add(this.makeHandle(t,Ne))}else if(be(i),i=i.copy(),i===null)return null;return i.ub=t,i},Xt.prototype.makeHandle=function(t,i){var n=this.pu;return n===null?null:(n=n.copy(),n.alignment=i,n)},Xt.prototype.updateResizeHandles=function(t,i){if(t!==null){if(!t.alignment.ge()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;n.Ud()&&(n=Tt);var e=i;if(0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else if(1<=n.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof A)for(n=t.elements;n.next();)this.updateResizeHandles(n.value,i)}},s.defineProperty(Xt,{pu:"handleArchetype"},function(){return this.tl},function(t){t!==null&&s.G(t,N,Xt,"handleArchetype"),this.tl=t}),s.u(Xt,{handle:"handle"},function(){return this.qc}),s.defineProperty(Xt,{ub:"adornedObject"},function(){return this.Kc},function(t){t!==null&&s.G(t,N,Xt,"adornedObject"),this.Kc=t}),Xt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.Tt&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Xt.prototype.doActivate=function(){var t=this.g;t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null&&(this.Kc=this.qc.W.ub,this.jp.set(this.ub.Ya(this.handle.alignment.YF())),this.LD.set(this.Kc.W.location),this.FD.set(this.Kc.Da),this.pz=this.computeCellSize(),this.rz=this.computeMinSize(),this.qz=this.computeMaxSize(),t.ef=!0,this.DD=t.Ka.isEnabled,t.Ka.isEnabled=!1,this.Ib(this.name),this.ta=!0))},Xt.prototype.doDeactivate=function(){var t=this.g;t!==null&&(this.Wk(),this.Kc=this.qc=null,this.ta=t.ef=!1,t.Ka.isEnabled=this.DD)},Xt.prototype.doCancel=function(){this.ub!==null&&(this.ub.Da=this.ZF,this.ub.W.location=this.jJ),this.stopTool()},Xt.prototype.doMouseMove=function(){var t=this.g;if(this.ta&&t!==null){var o=this.rz,i=this.qz,n=this.pz,e=this.ub.kF(t.N.ea,s.K()),r=this.computeReshape(),o=this.computeResize(e,this.handle.alignment,o,i,n,r);this.resize(o),t.dg(),s.v(e)}},Xt.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){var o=this.rz,i=this.qz,n=this.pz,e=this.ub.kF(t.N.ea,s.K()),r=this.computeReshape(),o=this.computeResize(e,this.handle.alignment,o,i,n,r);this.resize(o),s.v(e),t.Gc(),this.Lf=this.name,t.Aa("PartResized",this.ub,this.ZF)}this.stopTool()},Xt.prototype.resize=function(t){var i=this.g;if(i!==null){var n=this.ub,e=n.W;if(n.Da=t.size,e.Ne(),t=this.ub.Ya(this.handle.alignment.YF()),e instanceof Z){var n=i.Va.ce,r=!1;n!==null&&(r=n.Sk,n.Sk=!1);var o=new z(L);o.add(e),i.moveParts(o,this.jp.copy().ui(t),!0),n!==null&&(n.Sk=r)}else e.location=e.location.copy().ui(t).add(this.jp)}},Xt.prototype.computeResize=function(t,i,n,e,r,o){i.Ud()&&(i=Tt);var h=this.ub.Ja,l=h.x,u=h.y,f=h.x+h.width,a=h.y+h.height,p=1;if(!o){var p=h.width,y=h.height;0>=p&&(p=1),0>=y&&(y=1),p=y/p}return y=s.K(),ef(t.x,t.y,l,u,r.width,r.height,y),t=h.copy(),0>=i.x?0>=i.y?(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=Math.max(f-t.x,n.width),t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=Math.max(a-t.y,n.height),o||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.x=f-t.width,t.y=a-t.height)):1<=i.y?(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=Math.max(f-t.x,n.width),t.height=Math.max(Math.min(y.y-u,e.height),n.height),o||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.x=f-t.width)):(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=f-t.x,o||(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p,t.y=u+.5*(a-u-t.height))):1<=i.x?0>=i.y?(t.width=Math.max(Math.min(y.x-l,e.width),n.width),t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=Math.max(a-t.y,n.height),o||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.y=a-t.height)):1<=i.y?(t.width=Math.max(Math.min(y.x-l,e.width),n.width),t.height=Math.max(Math.min(y.y-u,e.height),n.height),o||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width))):(t.width=Math.max(Math.min(y.x-l,e.width),n.width),o||(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p,t.y=u+.5*(a-u-t.height))):0>=i.y?(t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=a-t.y,o||(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width,t.x=l+.5*(f-l-t.width))):1<=i.y&&(t.height=Math.max(Math.min(y.y-u,e.height),n.height),o||(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width,t.x=l+.5*(f-l-t.width))),s.v(y),t},Xt.prototype.computeReshape=function(){var t=ri;return this.ub instanceof Y&&(t=Zy(this.ub)),!(t===ji||this.g!==null&&this.g.N.shift)},Xt.prototype.computeMinSize=function(){var t=this.ub.si.copy(),i=this.si;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t},Xt.prototype.computeMaxSize=function(){var t=this.ub.Hf.copy(),i=this.Hf;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t},Xt.prototype.computeCellSize=function(){var t=new lt(NaN,NaN),i=this.ub.W;if(i!==null){var n=i.vJ;!isNaN(n.width)&&0<n.width&&(t.width=n.width),!isNaN(n.height)&&0<n.height&&(t.height=n.height)}return n=this.Np,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height),i=this.g,(isNaN(t.width)||isNaN(t.height))&&i&&(n=i.Va.ce,n!==null&&n.Sk&&(n=n.sF,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height)),i=i.Hn,i!==null&&i.visible&&this.Sk&&(n=i.Jx,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},s.defineProperty(Xt,{si:"minSize"},function(){return this.$h},function(t){if(s.G(t,lt,Xt,"minSize"),!this.$h.L(t)){var i=t.width;isNaN(i)&&(i=0),t=t.height,isNaN(t)&&(t=0),this.$h.m(i,t)}}),s.defineProperty(Xt,{Hf:"maxSize"},function(){return this.Zh},function(t){if(s.G(t,lt,Xt,"maxSize"),!this.Zh.L(t)){var i=t.width;isNaN(i)&&(i=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Zh.m(i,t)}}),s.defineProperty(Xt,{Np:"cellSize"},function(){return this.Rj},function(t){s.G(t,lt,Xt,"cellSize"),this.Rj.L(t)||this.Rj.assign(t)}),s.defineProperty(Xt,{Sk:"isGridSnapEnabled"},function(){return this.Yr},function(t){s.j(t,"boolean",Xt,"isGridSnapEnabled"),this.Yr=t}),s.u(Xt,{ZF:"originalDesiredSize"},function(){return this.FD}),s.u(Xt,{jJ:"originalLocation"},function(){return this.LD});function Qi(){0<arguments.length&&s.nd(Qi),ut.call(this),this.name="Rotating",this.WD=45,this.VD=2,this.Kc=null;var t=new Y;t.Fb="Ellipse",t.Da=I0,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.tl=t,this.qc=null,this.xw=0,this.RD=new F}s.La(Qi,ut),s.ga("RotatingTool",Qi),Qi.prototype.updateAdornments=function(t){if(t!==null){if(t instanceof S){var i=t.xB;if(i===t||i===t.path||i.ff)return}if(t.jb&&this.g!==null&&!this.g.ib&&(i=t.xB,i!==null&&t.canRotate()&&t.U.H()&&t.isVisible()&&i.U.H()&&i.Cj())){var n=t.Yp(this.name);if((n===null||n.ub!==i)&&(n=this.makeAdornment(i)),n!==null){n.angle=i.dm();var r=null,e=null;i===t||i===t.cg?(r=t.cg,e=t.Gf):(r=i,e=Tt);for(var o=r.Ja,e=s.wb(o.width*e.x+e.offsetX,o.height*e.y+e.offsetY);r!==null&&r!==i;)r.transform.nb(e),r=r.R;var r=e.y,o=Math.max(e.x-i.Ja.width,0),h=s.K();n.location=i.Ya(new P(1,0,50+o,r),h),s.v(h),s.v(e),t.Ql(this.name,n);return}}t.Ij(this.name)}},Qi.prototype.makeAdornment=function(t){var i=null,i=t.W.yJ;if(i===null){i=new vt,i.type=Ja,i.Gf=Tt;var n=this.pu;n!==null&&i.add(n.copy())}else if(be(i),i=i.copy(),i===null)return null;return i.ub=t,i},s.defineProperty(Qi,{pu:"handleArchetype"},function(){return this.tl},function(t){t!==null&&s.G(t,N,Qi,"handleArchetype"),this.tl=t}),s.u(Qi,{handle:"handle"},function(){return this.qc}),s.defineProperty(Qi,{ub:"adornedObject"},function(){return this.Kc},function(t){t!==null&&s.G(t,N,Qi,"adornedObject"),this.Kc=t}),Qi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.ix&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Qi.prototype.doActivate=function(){var t=this.g;if(t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null)){this.Kc=this.qc.W.ub;var i=this.Kc.W,n=i.cg;this.RD=this.Kc===i||this.Kc===n?n.Ya(i.Gf):this.Kc.Ya(Tt),this.xw=this.Kc.angle,t.ef=!0,t.zA=!0,this.Ib(this.name),this.ta=!0}},Qi.prototype.doDeactivate=function(){var t=this.g;t!==null&&(this.Wk(),this.Kc=this.qc=null,this.ta=t.ef=!1)},Qi.prototype.doCancel=function(){var t=this.g;t!==null&&(t.zA=!1),this.rotate(this.xw),this.stopTool()},Qi.prototype.doMouseMove=function(){var t=this.g;this.ta&&t!==null&&(t=this.computeRotate(t.N.ea),this.rotate(t))},Qi.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){t.zA=!1;var i=this.computeRotate(t.N.ea);this.rotate(i),t.Gc(),this.Lf=this.name,t.Aa("PartRotated",this.Kc,this.xw)}this.stopTool()},Qi.prototype.rotate=function(t){this.Kc!==null&&(this.Kc.angle=t)},Qi.prototype.computeRotate=function(t){t=this.RD.Qb(t);var i=this.Kc.R;i!==null&&(t-=i.dm(),360<=t?t-=360:0>t&&(t+=360));var i=Math.min(Math.abs(this.NJ),180),n=Math.min(Math.abs(this.MJ),i/2);return(this.g===null||!this.g.N.shift)&&0<i&&0<n&&(t%i<n?t=Math.floor(t/i)*i:t%i>i-n&&(t=(Math.floor(t/i)+1)*i)),360<=t?t-=360:0>t&&(t+=360),t},s.defineProperty(Qi,{NJ:"snapAngleMultiple"},function(){return this.WD},function(t){s.j(t,"number",Qi,"snapAngleMultiple"),this.WD=t}),s.defineProperty(Qi,{MJ:"snapAngleEpsilon"},function(){return this.VD},function(t){s.j(t,"number",Qi,"snapAngleEpsilon"),this.VD=t}),s.u(Qi,{EL:"originalAngle"},function(){return this.xw});function ql(){ut.call(this),0<arguments.length&&s.nd(ql),this.name="ClickSelecting"}s.La(ql,ut),s.ga("ClickSelectingTool",ql),ql.prototype.canStart=function(){return!(!this.isEnabled||this.g===null||this.isBeyondDragSize())},ql.prototype.doMouseUp=function(){this.ta&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.g!==null&&this.g.N.Aj&&this.g.Va.doToolTip()),this.stopTool()};function Jo(){ut.call(this),0<arguments.length&&s.nd(Jo),this.name="Action",this.oo=null}s.La(Jo,ut),s.ga("ActionTool",Jo),Jo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null)return!1;var i=t.N,n=t.Pe(i.ea,function(e){for(;e.R!==null&&!e.Kx;)e=e.R;return e});return n!==null&&n.Kx?(this.oo=n,t.zo=t.Pe(i.ea,null,null),!0):!1},Jo.prototype.doMouseDown=function(){if(this.ta){var t=this.g.N,i=this.oo;i!==null&&(t.Be=i,i.uE!==null&&i.uE(t,i))}else this.canStart()&&this.doActivate()},Jo.prototype.doMouseMove=function(){if(this.ta){var t=this.g.N,i=this.oo;i!==null&&(t.Be=i,i.vE!==null&&i.vE(t,i))}},Jo.prototype.doMouseUp=function(){if(this.ta){var t=this.g,i=t.N,n=this.oo;if(n===null)return;i.Be=n,n.wE!==null&&n.wE(i,n),this.isBeyondDragSize()||ld(n,i,t)}this.stopTool()},Jo.prototype.doCancel=function(){var t=this.g;if(t!==null){var t=t.N,i=this.oo;if(i===null)return;t.Be=i,i.tE!==null&&i.tE(t,i)}this.stopTool()},Jo.prototype.doStop=function(){this.oo=null};function go(){ut.call(this),0<arguments.length&&s.nd(go),this.name="ClickCreating",this.Am=null,this.lD=!0,this.$C=new F(0,0)}s.La(go,ut),s.ga("ClickCreatingTool",go),go.prototype.canStart=function(){if(!this.isEnabled||this.kA===null)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.N.left||this.isBeyondDragSize())return!1;if(this.zI){if(t.N.te===1&&(this.$C=t.N.Ce.copy()),t.N.te!==2||this.isBeyondDragSize(this.$C))return!1}else if(t.N.te!==1)return!1;return!(t.Xa!==this&&t.eu(t.N.ea,!0)!==null)},go.prototype.doMouseUp=function(){var t=this.g;this.ta&&t!==null&&this.insertPart(t.N.ea),this.stopTool()},go.prototype.insertPart=function(t){var i=this.g;if(i===null)return null;var n=this.kA;if(n===null)return null;this.Ib(this.name);var e=null;return n instanceof L?n.he()&&(be(n),e=n.copy(),e!==null&&i.add(e)):n!==null&&(n=i.$.copyNodeData(n),s.Pa(n)&&(i.$.Rl(n),e=i.wh(n))),e!==null&&(e.location=t,i.Bf&&i.select(e)),i.Gc(),this.Lf=this.name,i.Aa("PartCreated",e),this.Wk(),e},s.defineProperty(go,{kA:"archetypeNodeData"},function(){return this.Am},function(t){t!==null&&s.G(t,Object,go,"archetypeNodeData"),this.Am=t}),s.defineProperty(go,{zI:"isDoubleClick"},function(){return this.lD},function(t){s.j(t,"boolean",go,"isDoubleClick"),this.lD=t});function Yn(){this.pE=this.vD=this.zz=this.Uz=null}s.ga("HTMLInfo",Yn),s.defineProperty(Yn,{dB:"mainElement"},function(){return this.vD},function(t){t!==null&&s.G(t,HTMLElement,Yn,"mainElement"),this.vD=t}),s.defineProperty(Yn,{show:"show"},function(){return this.Uz},function(t){this.Uz!==t&&(t!==null&&s.j(t,"function",Yn,"show"),this.Uz=t)}),s.defineProperty(Yn,{In:"hide"},function(){return this.zz},function(t){this.zz!==t&&(t!==null&&s.j(t,"function",Yn,"hide"),this.zz=t)}),s.defineProperty(Yn,{YB:"valueFunction"},function(){return this.pE},function(t){this.pE=t});function vr(t,i,n){this.text=t,this.LE=i,this.visible=n}function tn(){ut.call(this),0<arguments.length&&s.nd(tn),this.name="ContextMenu",this.FC=this.bz=this.CC=null,this.BD=new F,this.dz=this.Fm=null;var t=this;this.aA=function(){t.stopTool()},wx(this)}s.La(tn,ut),s.ga("ContextMenuTool",tn);function wx(t){var i=new Yn;if(i.show=function(r,o,h){h.showDefaultContextMenu()},i.In=function(r,o){o.hideDefaultContextMenu()},t.Fm=i,t.aA=function(){t.stopTool()},s.RE===!1){var i=s.createElement("div"),n=s.createElement("div");i.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var e=s.createElement("style");q.document.getElementsByTagName("head")[0].appendChild(e),e.sheet.insertRule(".goCXul { list-style: none; }",0),e.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),e.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",X0,!1),i.addEventListener("selectstart",X0,!1),n.addEventListener("contextmenu",X0,!1),q.document.body&&(q.document.body.appendChild(i),q.document.body.appendChild(n)),s.Wt=i,s.Vt=n,s.RE=!0}}function X0(t){return t.preventDefault(),!1}tn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t===null||this.isBeyondDragSize()||!t.N.right?!1:!!(this.Fm!==null&&t.N.Aj||this.findObjectWithContextMenu()!==null)},tn.prototype.doStart=function(){var t=this.g;t!==null&&this.BD.set(t.uc.ea)},tn.prototype.doStop=function(){this.hideContextMenu(),this.qx=null},tn.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var i=this.g;if(i===null)return null;var n=i.N,e=null;if(t instanceof x||(e=t instanceof N?t:i.Pe(n.ea,null,function(r){return!r.layer.Hc})),e!==null){for(t=e;t!==null;){if(t.contextMenu!==null)return t;t=t.R}if(this.Fm!==null&&i.N.Aj)return e.W}else if(i.contextMenu!==null)return i;return null},tn.prototype.doActivate=function(){},tn.prototype.doMouseDown=function(){ut.prototype.doMouseDown.call(this),this.g!==null&&this.g.Va.gf.contains(this)&&Cd(this)},tn.prototype.doMouseUp=function(){Cd(this)};function Cd(t){var i=t.g;if(i!==null)if(t.ta){var n=t.Yl;if(n!==null){if(!(n instanceof Yn)){var e=i.Pe(i.N.ea,null,null);e!==null&&e.jm(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(i.Xa=t,t.doMouseUp())}}else t.canStart()&&(jd(t,!0),t.ta||t.stopTool())}function jd(t,i,n){if(n===void 0&&(n=null),i&&t.standardMouseSelect(),!t.standardMouseClick())if(t.ta=!0,i=t.Fm,n===null&&(n=t.findObjectWithContextMenu()),n!==null){var e=n.contextMenu;e!==null?(t.qx=n instanceof N?n:null,t.showContextMenu(e,t.qx)):i!==null&&t.showContextMenu(i,t.qx)}else i!==null&&t.showContextMenu(i,null)}tn.prototype.doMouseMove=function(){this.ta&&this.g!==null&&this.g.Va.doMouseMove()},tn.prototype.showContextMenu=function(t,i){i!==null&&s.G(i,N,tn,"showContextMenu:obj");var n=this.g;if(n!==null){if(t!==this.Yl&&this.hideContextMenu(),t instanceof vt){t.bg="Tool",t.pm=!1,t.scale=1/n.scale,t.kd=this.name,t.placeholder!==null&&(t.placeholder.scale=n.scale);var e=t.g;e!==null&&e!==n&&e.remove(t),n.add(t),i!==null?(n=null,e=i.bm(),e!==null&&(n=e.data),t.ub=i,t.data=n):t.data=n.$,t.Ne(),this.positionContextMenu(t,i)}else t instanceof Yn&&t.show(i,n,this);this.Yl=t}},tn.prototype.positionContextMenu=function(t){if(t.placeholder===null){var i=this.g;if(i!==null){var n=i.N.ea.copy(),e=t.za,r=i.sb;i.N.Aj&&(n.x-=e.width),n.x+e.width>r.right&&(n.x-=e.width+5/i.scale),n.x<r.x&&(n.x=r.x),n.y+e.height>r.bottom&&(n.y-=e.height+5/i.scale),n.y<r.y&&(n.y=r.y),t.position=n}}},tn.prototype.hideContextMenu=function(){var t=this.g;if(t!==null){var i=this.Yl;i!==null&&(i instanceof vt?(t.remove(i),this.bz!==null&&this.bz.Ij(i.kd),i.data=null,i.ub=null):i instanceof Yn&&(i.In!==null?i.In(t,this):i.dB!==null&&(i.dB.style.display="none")),this.Yl=null,this.standardMouseOver())}};function Mx(t){return t.g===null?null:(t=new z(vr),t.add(new vr("Copy",function(i){i.pb.copySelection()},function(i){return i.pb.canCopySelection()})),t.add(new vr("Cut",function(i){i.pb.cutSelection()},function(i){return i.pb.canCutSelection()})),t.add(new vr("Delete",function(i){i.pb.deleteSelection()},function(i){return i.pb.canDeleteSelection()})),t.add(new vr("Paste",function(i){i.pb.pasteSelection(i.N.ea)},function(i){return i.pb.canPasteSelection()})),t.add(new vr("Select All",function(i){i.pb.selectAll()},function(i){return i.pb.canSelectAll()})),t.add(new vr("Undo",function(i){i.pb.undo()},function(i){return i.pb.canUndo()})),t.add(new vr("Redo",function(i){i.pb.redo()},function(i){return i.pb.canRedo()})),t.add(new vr("Scroll To Part",function(i){i.pb.scrollToPart()},function(i){return i.pb.canScrollToPart()})),t.add(new vr("Zoom To Fit",function(i){i.pb.zoomToFit()},function(i){return i.pb.canZoomToFit()})),t.add(new vr("Reset Zoom",function(i){i.pb.resetZoom()},function(i){return i.pb.canResetZoom()})),t.add(new vr("Group Selection",function(i){i.pb.groupSelection()},function(i){return i.pb.canGroupSelection()})),t.add(new vr("Ungroup Selection",function(i){i.pb.ungroupSelection()},function(i){return i.pb.canUngroupSelection()})),t.add(new vr("Edit Text",function(i){i.pb.editTextBlock()},function(i){return i.pb.canEditTextBlock()})),t)}tn.prototype.showDefaultContextMenu=function(){var t=this.g;if(t!==null){this.dz===null&&(this.dz=Mx(this)),s.Wt.innerHTML="",s.Vt.addEventListener("click",this.aA,!1);var i=this,n=s.createElement("ul");n.className="goCXul",s.Wt.appendChild(n),n.innerHTML="";for(var e=this.dz.i;e.next();){var r=e.value,o=r.visible;if(typeof r.LE=="function"&&(typeof o!="function"||o(t))){o=s.createElement("li"),o.className="goCXli";var h=s.createElement("a");h.className="goCXa",h.href="#",h.TG=r.LE,h.addEventListener("click",function(l){return this.TG(t),i.stopTool(),l.preventDefault(),!1},!1),h.textContent=r.text,o.appendChild(h),n.appendChild(o)}}s.Wt.style.display="block",s.Vt.style.display="block"}},tn.prototype.hideDefaultContextMenu=function(){this.Yl!==null&&this.Yl===this.Fm&&(s.Wt.style.display="none",s.Vt.style.display="none",s.Vt.removeEventListener("click",this.aA,!1),this.Yl=null)},s.defineProperty(tn,{Yl:"currentContextMenu"},function(){return this.CC},function(t){this.CC=t,this.bz=t instanceof vt?t.$e:null}),s.defineProperty(tn,{aL:"defaultTouchContextMenu"},function(){return this.Fm},function(t){this.Fm=t}),s.defineProperty(tn,{qx:"currentObject"},function(){return this.FC},function(t){t!==null&&s.G(t,N,tn,"currentObject"),this.FC=t}),s.u(tn,{AL:"mouseDownPoint"},function(){return this.BD});function ue(){ut.call(this),0<arguments.length&&s.nd(ue),this.name="DragSelecting",this.Fo=175,this.qD=!1;var t=new L;t.bg="Tool",t.pm=!1;var i=new Y;i.name="SHAPE",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",t.add(i),this.Cm=t}s.La(ue,ut),s.ga("DragSelectingTool",ue),ue.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||!t.Bf)return!1;var i=t.N;return!(!i.left||t.Xa!==this&&(!this.isBeyondDragSize()||i.timestamp-t.uc.timestamp<this.SE||t.eu(i.ea,!0)!==null))},ue.prototype.doActivate=function(){var t=this.g;t!==null&&(this.ta=!0,t.ef=!0,t.gb=!0,t.add(this.th),this.doMouseMove())},ue.prototype.doDeactivate=function(){var t=this.g;t!==null&&(mo(t),t.remove(this.th),t.gb=!1,this.ta=t.ef=!1)},ue.prototype.doMouseMove=function(){var t=this.g;if(t!==null&&this.ta&&this.th!==null){var i=this.computeBoxBounds(),n=this.th.Cd("SHAPE");n===null&&(n=this.th.Bd()),n.Da=i.size,this.th.position=i.position,(t.re||t.se)&&t.AA(t.N.Ce)}},ue.prototype.doMouseUp=function(){if(this.ta){var t=this.g;t.remove(this.th);try{t.kc="wait",this.selectInRect(this.computeBoxBounds())}finally{t.kc=""}}this.stopTool()},ue.prototype.computeBoxBounds=function(){var t=this.g;return t===null?new O(0,0,0,0):new O(t.uc.ea,t.N.ea)},ue.prototype.selectInRect=function(t){var i=this.g;if(i!==null){var n=i.N;if(i.Aa("ChangingSelection"),t=i.Jk(t,null,function(o){return o instanceof L?o.canSelect():!1},this.EI),s.zh?n.Iu:n.control)if(n.shift)for(t=t.i;t.next();)n=t.value,n.jb&&(n.jb=!1);else for(t=t.i;t.next();)n=t.value,n.jb=!n.jb;else{if(!n.shift){for(var n=new z(L),e=i.selection.i;e.next();){var r=e.value;t.contains(r)||n.add(r)}for(n=n.i;n.next();)n.value.jb=!1}for(t=t.i;t.next();)n=t.value,n.jb||(n.jb=!0)}i.Aa("ChangedSelection")}},s.defineProperty(ue,{SE:"delay"},function(){return this.Fo},function(t){s.j(t,"number",ue,"delay"),this.Fo=t}),s.defineProperty(ue,{EI:"isPartialInclusion"},function(){return this.qD},function(t){s.j(t,"boolean",ue,"isPartialInclusion"),this.qD=t}),s.defineProperty(ue,{th:"box"},function(){return this.Cm},function(t){t!==null&&s.G(t,L,ue,"box"),this.Cm=t});function dr(){ut.call(this),0<arguments.length&&s.nd(dr),this.name="Panning",this.Lz=new F,this.Qj=!1;var t=this;this.$D=function(){q.document.removeEventListener("scroll",t.$D,!1),t.stopTool()}}s.La(dr,ut),s.ga("PanningTool",dr),dr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(t===null||!t.re&&!t.se||!t.N.left||t.Xa!==this&&!this.isBeyondDragSize())},dr.prototype.doActivate=function(){var t=this.g;t!==null&&(this.Qj?(t.N.bubbles=!0,q.document.addEventListener("scroll",this.$D,!1)):(t.kc="move",t.ef=!0,this.Lz=t.position.copy()),this.ta=!0)},dr.prototype.doDeactivate=function(){var t=this.g;t!==null&&(t.kc="",this.ta=t.ef=!1)},dr.prototype.doCancel=function(){var t=this.g;t!==null&&(t.position=this.Lz,t.ef=!1),this.stopTool()},dr.prototype.doMouseMove=function(){this.move()},dr.prototype.doMouseUp=function(){this.move(),this.stopTool()},dr.prototype.move=function(){var t=this.g;if(this.ta&&t)if(this.Qj)t.N.bubbles=!0;else{var i=t.position,r=t.uc.ea,n=t.N.ea,e=i.x+r.x-n.x,r=i.y+r.y-n.y;t.re||(e=i.x),t.se||(r=i.y),t.position=new F(e,r)}},s.defineProperty(dr,{bubbles:"bubbles"},function(){return this.Qj},function(t){s.j(t,"boolean",dr,"bubbles"),this.Qj=t}),s.u(dr,{HL:"originalPosition"},function(){return this.Lz});function kt(){0<arguments.length&&s.nd(kt),ut.call(this),this.name="TextEditing",this.Zz=this.vk=null,this.ZD=_0,this.Ml=null,this.Ta=hf,this.Ms=null,this.yD=1,this.TD=!0;var t=new Yn;this.HC=null,this.PC=t,this.ez=null,Px(this,t)}s.ga("TextEditingTool",kt),s.La(kt,ut);var Fd;kt.LostFocus=Fd=s.p(kt,"LostFocus",0);var W0;kt.MouseDown=W0=s.p(kt,"MouseDown",1);var $0;kt.Tab=$0=s.p(kt,"Tab",2);var Ta;kt.Enter=Ta=s.p(kt,"Enter",3),kt.SingleClick=s.p(kt,"SingleClick",0);var _0;kt.SingleClickSelected=_0=s.p(kt,"SingleClickSelected",1);var Dd;kt.DoubleClick=Dd=s.p(kt,"DoubleClick",2);var hf;kt.StateNone=hf=s.p(kt,"StateNone",0);var lf;kt.StateActive=lf=s.p(kt,"StateActive",1);var ka;kt.StateEditing=ka=s.p(kt,"StateEditing",2);var b0;kt.StateValidating=b0=s.p(kt,"StateValidating",3);var uf;kt.StateInvalid=uf=s.p(kt,"StateInvalid",4);var ty;kt.StateValidated=ty=s.p(kt,"StateValidated",5);function Px(t,i){var n=s.createElement("textarea");t.ez=n,n.addEventListener("input",function(){if(t.Xg!==null){var e=t.WI(this.value);this.style.width=20+e.za.width*this.SJ+"px",this.rows=e.Vx}},!1),n.addEventListener("keydown",function(e){if(t.Xg!==null){var r=e.which;r===13?(t.Xg.Ox===!1&&e.preventDefault(),t.acceptText(Ta)):r===9?(t.acceptText($0),e.preventDefault()):r===27&&(t.doCancel(),t.g!==null&&t.g.doFocus())}},!1),n.addEventListener("focus",function(){Ad(t)},!1),n.addEventListener("blur",function(){Id(t)},!1),i.YB=function(){return n.value},i.dB=n,i.show=function(e,r,o){if(o.state===uf)n.style.border="3px solid red",n.focus();else{var y=e.Ya(Tt),h=r.position,l=r.scale,u=e.vj()*l;u<o.TF&&(u=o.TF);var f=e.Ja.width*u+6,a=e.Ja.height*u+2,p=(y.x-h.x)*l,y=(y.y-h.y)*l;n.value=e.text,r.tj.style.font=e.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*u+"%",n.style.lineHeight="normal",n.style.width=f+"px",n.style.left=(p-f/2|0)-1+"px",n.style.top=(y-a/2|0)-1+"px",n.style.textAlign=e.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow=" hidden",n.rows=e.Vx,n.SJ=u,r.tj.appendChild(n),n.focus(),o.wy&&(n.select(),n.setSelectionRange(0,9999))}},i.In=function(e){e.tj.removeChild(n)}}s.defineProperty(kt,{Xg:"textBlock"},function(){return this.Zz},function(t){t!==null&&s.G(t,rt,kt,"textBlock"),this.Zz=t}),s.defineProperty(kt,{rj:"currentTextEditor"},function(){return this.HC},function(t){this.HC=t}),s.defineProperty(kt,{OH:"defaultTextEditor"},function(){return this.PC},function(t){this.PC=t}),s.defineProperty(kt,{zG:"starting"},function(){return this.ZD},function(t){s.ob(t,kt,kt,"starting"),this.ZD=t}),kt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||!t.N.left||this.isBeyondDragSize())return!1;var i=t.Pe(t.N.ea);return i!==null&&i instanceof rt&&i.BA&&i.W.canEdit()?(i=i.W,!(i===null||this.zG===_0&&!i.jb||this.zG===Dd&&2>t.N.te)):!1},kt.prototype.doStart=function(){this.ta||this.Xg===null||this.doActivate()},kt.prototype.doActivate=function(){if(!this.ta){var t=this.g;if(t!==null){var i=this.Xg;if(i===null&&(i=t.Pe(t.N.ea)),i!==null&&i instanceof rt&&(this.Xg=i,i.W!==null)){this.ta=!0,this.Ta=lf;var n=this.OH;i.DG!==null&&(n=i.DG),this.vk=this.Xg.copy();var e=new O(this.Xg.Ya(gi),this.Xg.Ya(_i));t.nG(e),n instanceof Yn?n.show(i,t,this):(n.style.position="absolute",n.style.zIndex="100",n.textEditingTool=this,typeof n.onActivate=="function"&&n.onActivate(),t.tj.appendChild(n),typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&this.wy&&(n.select(),n.setSelectionRange(0,9999))),this.rj=n}}}},kt.prototype.doCancel=function(){this.Ms!==null&&this.rj instanceof HTMLElement&&(this.rj.style.border=this.Ms,this.Ms=null),this.stopTool()},kt.prototype.doMouseUp=function(){!this.ta&&this.canStart()&&this.doActivate()},kt.prototype.doMouseDown=function(){this.ta&&this.acceptText(W0)},kt.prototype.acceptText=function(t){switch(t){case W0:this.Ta===ty?this.rj instanceof HTMLElement&&this.rj.focus():(this.Ta===lf||this.Ta===uf||this.Ta===ka)&&(this.Ta=b0,Ld(this));break;case Fd:case Ta:case $0:if(Ta===t&&this.Zz.Ox===!0)break;(this.Ta===lf||this.Ta===uf||this.Ta===ka)&&(this.Ta=b0,Ld(this))}};function Ld(t){var i=t.Xg,n=t.g,e=t.rj;if(i!==null&&e!==null){var r=i.text,o="";e instanceof Yn?e.YB!==null&&(o=e.YB()):(o=e.value,o=typeof o=="function"?o():o),t.isValidText(i,r,o)?(t.Ib(t.name),t.Ta=ty,t.Lf=t.name,i.text=o,i.CG!==null&&i.CG(i,r,o),n!==null&&n.Aa("TextEdited",i,r),t.Wk(),t.stopTool(),n!==null&&n.doFocus()):(t.Ta=uf,i.CA!==null&&i.CA(t,r,o),e instanceof Yn?e.show(i,n,t):(t.Ms===null&&(t.Ms=e.style.border,e.style.border="3px solid red"),typeof e.focus=="function"&&e.focus()))}}kt.prototype.doDeactivate=function(){var t=this.g;if(t!==null){if(this.Ta=hf,this.Xg=null,this.rj!==null){var i=this.rj;i instanceof Yn?i.In(t,this):(typeof i.onDeactivate=="function"&&i.onDeactivate(),i!==null&&t.tj.removeChild(i))}this.ta=!1}},kt.prototype.doFocus=function(){Ad(this)},kt.prototype.doBlur=function(){Id(this)};function Ad(t){if(t.rj!==null&&t.state!==hf){var i=t.ez;t.Ta===lf&&(t.Ta=ka),typeof i.select=="function"&&t.wy&&(i.select(),i.setSelectionRange(0,9999))}}function Id(t){if(t.rj!==null&&t.state!==hf){var i=t.ez;typeof i.focus=="function"&&i.focus(),typeof i.select=="function"&&t.wy&&(i.select(),i.setSelectionRange(0,9999))}}kt.prototype.isValidText=function(t,i,n){s.G(t,rt,kt,"isValidText:textblock");var e=this.OB;return e!==null&&!e(t,i,n)?!1:(e=t.OB,!!(e===null||e(t,i,n)))},s.defineProperty(kt,{OB:"textValidation"},function(){return this.Ml},function(t){t!==null&&s.j(t,"function",kt,"textValidation"),this.Ml=t}),s.defineProperty(kt,{TF:"minimumEditorScale"},function(){return this.yD},function(t){t!==null&&s.j(t,"number",kt,"minimumEditorScale"),this.yD=t}),s.defineProperty(kt,{wy:"selectsTextOnActivate"},function(){return this.TD},function(t){t!==null&&s.j(t,"boolean",kt,"selectsTextOnActivate"),this.TD=t}),s.defineProperty(kt,{state:"state"},function(){return this.Ta},function(t){this.Ta!==t&&(s.ob(t,kt,kt,"starting"),this.Ta=t)}),kt.prototype.measureTemporaryTextBlock=kt.prototype.WI=function(t){var i=this.vk;return i.text=t,Gt(i,this.Xg.$o,1/0),i};function pt(){ut.call(this),this.name="ToolManager",this.YG=new z(ut),this.ZG=new z(ut),this.$G=new z(ut),this.dD=this.eD=850,this.UC=new lt(2,2).Ha(),this.lE=5e3,this.CD=Zl,this.bD=Bd,this.Gv=this.IC=null,this.mn=-1}s.La(pt,ut),s.ga("ToolManager",pt);var Zl;pt.WheelScroll=Zl=s.p(pt,"WheelScroll",0);var ff;pt.WheelZoom=ff=s.p(pt,"WheelZoom",1),pt.WheelNone=s.p(pt,"WheelNone",2);var Bd;pt.GestureZoom=Bd=s.p(pt,"GestureZoom",3);var Ql;pt.GestureCancel=Ql=s.p(pt,"GestureCancel",4);var af;pt.GestureNone=af=s.p(pt,"GestureNone",5),s.defineProperty(pt,{Lu:"mouseWheelBehavior"},function(){return this.CD},function(t){s.ob(t,pt,pt,"mouseWheelBehavior"),this.CD=t}),s.defineProperty(pt,{Mk:"gestureBehavior"},function(){return this.bD},function(t){s.ob(t,pt,pt,"gestureBehavior"),this.bD=t}),pt.prototype.initializeStandardTools=function(){this.kH=new Jo,this.bG=new Ln,this.NI=new Ot,this.lG=new Xt,this.AJ=new Qi,this.PF=new mi,this.ce=new dt,this.TH=new ue,this.kJ=new dr,this.tA=new tn,this.NB=new kt,this.xH=new go,this.yH=new ql},pt.prototype.updateAdornments=function(t){var i=this.Zl;if(i instanceof vt&&this.Gv===t){var n=i.ub;(t!==null?n.W===t:n===null)?this.showToolTip(i,n):this.hideToolTip()}},pt.prototype.doMouseDown=function(){var t=this.g;if(t!==null){var i=t.N;if(i.Aj&&this.Mk===Ql&&(i.bubbles=!1),i.zu){if(this.cancelWaitAfter(),this.Mk===af){i.bubbles=!0;return}if(this.Mk===Ql)return;if(t.Xa.canStartMultiTouch()){t.Xa.standardPinchZoomStart();return}}var n=t.ja;n.nA&&n.wi!==0&&s.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var n=this.gf.length,e=0;e<n;e++){var r=this.gf.fa(e);if(r.g===null&&r.Tc(this.g),r.canStart()){t.doFocus(),t.Xa=r,t.Xa===r&&(r.ta||r.doActivate(),r.doMouseDown());return}}t.N.button===1&&(this.Lu===Zl?this.Lu=ff:this.Lu===ff&&(this.Lu=Zl)),this.doActivate(),this.standardWaitAfter(this.vF,i)}},pt.prototype.doMouseMove=function(){var t=this.g;if(t!==null){var i=t.N;if(i.zu){if(this.Mk===af){i.bubbles=!0;return}if(this.Mk===Ql)return;if(t.Xa.canStartMultiTouch()){t.Xa.standardPinchZoomMove();return}}if(this.ta)for(var n=this.eg.length,e=0;e<n;e++){var r=this.eg.fa(e);if(r.g===null&&r.Tc(this.g),r.canStart()){t.doFocus(),t.Xa=r,t.Xa===r&&(r.ta||r.doActivate(),r.doMouseMove());return}}zd(this,t),t=i.event,t===null||t.type!=="mousemove"&&t.type!=="pointermove"&&t.cancelable||(i.bubbles=!0)}};function zd(t,i){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.ta?t.vF:t.rI,i.N)}pt.prototype.doCurrentObjectChanged=function(t,i){var n=this.Zl;n===null||i!==null&&n instanceof vt&&(i===n||i.jm(n))||this.hideToolTip()},pt.prototype.doWaitAfter=function(t){var i=this.g;i!==null&&i.zb&&(this.doMouseHover(),this.ta||this.doToolTip(),t.Aj&&!i.N.vc&&(t=t.copy(),t.button=2,t.buttons=2,i.N=t,i.Bp=!0,i.doMouseUp()))},pt.prototype.doMouseHover=function(){var t=this.g;if(t!==null){var i=t.N;i.Be===null&&(i.Be=t.Pe(i.ea,null,null));var n=i.Be;if(n!==null)for(i.vc=!1;n!==null&&(t=this.ta?n.iB:n.jB,!(t!==null&&(t(i,n),i.vc)));)n=n.R;else n=this.ta?t.iB:t.jB,n!==null&&n(i)}},pt.prototype.doToolTip=function(){var t=this.g;if(t!==null){var i=t.N;if(i.Be===null&&(i.Be=t.Pe(i.ea,null,null)),i=i.Be,i!==null){if(t=this.Zl,!(t instanceof vt)||i!==t&&!i.jm(t)){for(;i!==null;){if(t=i.QB,t!==null){this.showToolTip(t,i);return}i=i.R}this.hideToolTip()}}else t=t.QB,t!==null?this.showToolTip(t,null):this.hideToolTip()}},pt.prototype.showToolTip=function(t,i){i!==null&&s.G(i,N,pt,"showToolTip:obj");var n=this.g;if(n!==null){if(t!==this.Zl&&this.hideToolTip(),t instanceof vt){t.bg="Tool",t.pm=!1,t.scale=1/n.scale,t.kd="ToolTip",t.placeholder!==null&&(t.placeholder.scale=n.scale);var e=t.g;e!==null&&e!==n&&e.remove(t),n.add(t),i!==null?(n=null,e=i.bm(),e!==null&&(n=e.data),t.ub=i,t.data=n):t.data=n.$,t.Ne(),this.positionToolTip(t,i)}else t instanceof Yn&&t!==this.Zl&&t.show(i,n,this);if(this.Zl=t,this.mn!==-1&&(s.clearTimeout(this.mn),this.mn=-1),n=this.XJ,0<n&&n!==1/0){var r=this;this.mn=s.setTimeout(function(){r.hideToolTip()},n)}}},pt.prototype.positionToolTip=function(t){if(t.placeholder===null){var i=this.g;if(i!==null){var n=i.N.ea.copy(),e=t.za,r=i.sb;i.N.Aj&&(n.x-=e.width),n.x+e.width>r.right&&(n.x-=e.width+5/i.scale),n.x<r.x&&(n.x=r.x),n.y=n.y+20/i.scale+e.height>r.bottom?n.y-(e.height+5/i.scale):n.y+20/i.scale,n.y<r.y&&(n.y=r.y),t.position=n}}},pt.prototype.hideToolTip=function(){this.mn!==-1&&(s.clearTimeout(this.mn),this.mn=-1);var t=this.g;if(t!==null){var i=this.Zl;i!==null&&(i instanceof vt?(t.remove(i),this.Gv!==null&&this.Gv.Ij(i.kd),i.data=null,i.ub=null):i instanceof Yn&&i.In!==null&&i.In(t,this),this.Zl=null)}},s.defineProperty(pt,{Zl:"currentToolTip"},function(){return this.IC},function(t){this.IC=t,this.Gv=t!==null&&t instanceof vt?t.$e:null}),pt.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(t!==null){if(this.ta)for(var i=this.fg.length,n=0;n<i;n++){var e=this.fg.fa(n);if(e.g===null&&e.Tc(this.g),e.canStart()){t.doFocus(),t.Xa=e,t.Xa===e&&(e.ta||e.doActivate(),e.doMouseUp());return}}t.doFocus(),this.doDeactivate()}},pt.prototype.doMouseWheel=function(){this.standardMouseWheel()},pt.prototype.doKeyDown=function(){var t=this.g;t!==null&&t.pb.doKeyDown()},pt.prototype.doKeyUp=function(){var t=this.g;t!==null&&t.pb.doKeyUp()},pt.prototype.doCancel=function(){Ci!==null&&Ci.doCancel(),ut.prototype.doCancel.call(this)},pt.prototype.findTool=function(t){s.j(t,"string",pt,"findTool:name");for(var i=this.gf.length,n=0;n<i;n++){var e=this.gf.fa(n);if(e.name===t)return e}for(i=this.eg.length,n=0;n<i;n++)if(e=this.eg.fa(n),e.name===t)return e;for(i=this.fg.length,n=0;n<i;n++)if(e=this.fg.fa(n),e.name===t)return e;return null},pt.prototype.replaceTool=function(t,i){s.j(t,"string",pt,"replaceTool:name"),i!==null&&(s.G(i,ut,pt,"replaceTool:newtool"),i.g&&i.g!==this.g&&s.k("Cannot share tools between Diagrams: "+i.toString()),i.Tc(this.g));for(var n=this.gf.length,e=0;e<n;e++){var r=this.gf.fa(e);if(r.name===t)return i!==null?this.gf.kg(e,i):this.gf.cd(e),r}for(n=this.eg.length,e=0;e<n;e++)if(r=this.eg.fa(e),r.name===t)return i!==null?this.eg.kg(e,i):this.eg.cd(e),r;for(n=this.fg.length,e=0;e<n;e++)if(r=this.fg.fa(e),r.name===t)return i!==null?this.fg.kg(e,i):this.fg.cd(e),r;return null};function Ar(t,i,n,e){s.j(i,"string",pt,"replaceStandardTool:name"),s.G(e,z,pt,"replaceStandardTool:list"),n!==null&&(s.G(n,ut,pt,"replaceStandardTool:newtool"),n.g&&n.g!==t.g&&s.k("Cannot share tools between Diagrams: "+n.toString()),n.name=i,n.Tc(t.g)),t.findTool(i)?t.replaceTool(i,n):n!==null&&e.add(n)}s.u(pt,{gf:"mouseDownTools"},function(){return this.YG}),s.u(pt,{eg:"mouseMoveTools"},function(){return this.ZG}),s.u(pt,{fg:"mouseUpTools"},function(){return this.$G}),s.defineProperty(pt,{rI:"hoverDelay"},function(){return this.eD},function(t){s.j(t,"number",pt,"hoverDelay"),this.eD=t}),s.defineProperty(pt,{vF:"holdDelay"},function(){return this.dD},function(t){s.j(t,"number",pt,"holdDelay"),this.dD=t}),s.defineProperty(pt,{UH:"dragSize"},function(){return this.UC},function(t){s.G(t,lt,pt,"dragSize"),this.UC=t.S()}),s.defineProperty(pt,{XJ:"toolTipDuration"},function(){return this.lE},function(t){s.j(t,"number",pt,"toolTipDuration"),this.lE=t}),s.defineProperty(pt,{kH:"actionTool"},function(){return this.findTool("Action")},function(t){Ar(this,"Action",t,this.gf)}),s.defineProperty(pt,{bG:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){Ar(this,"Relinking",t,this.gf)}),s.defineProperty(pt,{NI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){Ar(this,"LinkReshaping",t,this.gf)}),s.defineProperty(pt,{lG:"resizingTool"},function(){return this.findTool("Resizing")},function(t){Ar(this,"Resizing",t,this.gf)}),s.defineProperty(pt,{AJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){Ar(this,"Rotating",t,this.gf)}),s.defineProperty(pt,{PF:"linkingTool"},function(){return this.findTool("Linking")},function(t){Ar(this,"Linking",t,this.eg)}),s.defineProperty(pt,{ce:"draggingTool"},function(){return this.findTool("Dragging")},function(t){Ar(this,"Dragging",t,this.eg)}),s.defineProperty(pt,{TH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){Ar(this,"DragSelecting",t,this.eg)}),s.defineProperty(pt,{kJ:"panningTool"},function(){return this.findTool("Panning")},function(t){Ar(this,"Panning",t,this.eg)}),s.defineProperty(pt,{tA:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){Ar(this,"ContextMenu",t,this.fg)}),s.defineProperty(pt,{NB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){Ar(this,"TextEditing",t,this.fg)}),s.defineProperty(pt,{xH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){Ar(this,"ClickCreating",t,this.fg)}),s.defineProperty(pt,{yH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){Ar(this,"ClickSelecting",t,this.fg)});function qn(){this.JC=Tx,this.xr=this.yr=this.aa=null,this.zm=this.zr=this.Ar=0,this.ro=this.sc=this.Wo=this.dk=!1,this.yl=this.jf=!0,this.Ev=this.Dv=this.EC=null,this.DC=0,this.Fv=null,this.tv=new R("string"),this.mz=600,this.aH=new F(0,0),this.rC=this.qC=this.oE=!1,this.Xm=new tt(N,oy)}s.ga("AnimationManager",qn),qn.prototype.Tc=function(t){this.aa=t};function Tx(t,i,n,e){return t/=e/2,1>t?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i}s.u(qn,{DK:"animationReasons"},function(){return this.tv}),qn.prototype.canStart=function(){return!0},qn.prototype.prepareAutomaticAnimation=qn.prototype.Zn=function(t){this.jf&&(this.yl||this.aa.Ln)&&(this.tv.add(t),this.canStart(t)&&(this.dk&&this.Jh(),this.sc=!0))};function Ed(t){if(t.jf&&(t.tv.clear(),t.sc)){if(!t.ro)t.sc=!1;else if(t.zm===0){var i=+new Date;t.zm=i,requestAnimationFrame(function(){if(t.sc!==!1&&!t.dk&&t.zm===i){var n=t.aa;n.Ok("temporaryPixelRatio")&&(n.uk=1),sy(n),t.sc=!1,n.Aa("AnimationStarting"),kx(t,i)}})}}}function ih(t,i,n,e,r,o){if(!(!t.sc||n==="position"&&e.L(r)||i instanceof L&&!i.zF)){var h=t.Xm;if(h.contains(i)){var h=h.ka(i),l=h.start,u=h.end;l[n]===void 0&&(l[n]=nh(e)),h.px&&u[n]!==void 0?h.au[n]=nh(r):(o||(h.au[n]=nh(r)),u[n]=nh(r)),o&&n.indexOf("position:")===0&&i instanceof L&&(h.au.location=nh(i.location))}else l=new Pi,u=new Pi,l[n]=nh(e),u[n]=nh(r),e=u,r=l.position,r instanceof F&&!r.H()&&t.tv.contains("Expand SubGraph")&&r.assign(e.position),l=new oy(l,u,o),o&&n.indexOf("position:")===0&&i instanceof L&&(l.au.location=nh(i.location)),h.add(i,l);t.ro=!0}}function nh(t){return t instanceof F||t instanceof lt?t.copy():t}function kx(t,i){var n;function e(){if(o.dk!==!1&&o.zm===i){var d=+new Date,g=d>v?f:d-c;iy(o),Rd(o,r,y,h,g,f),o.Dv&&o.Dv(),Wl(r),ny(o),d>v?Gd(o):requestAnimationFrame(e)}}n===void 0&&(n=new Pi);var r=t.aa;if(r!==null){var o=t,h=n.dL||t.JC,l=n.CL||null,u=n.DL||null,f=n.duration||t.mz,a=t.aH;for(n=t.Xm.i;n.next();){var p=n.value.start.position;p instanceof F&&(p.H()||p.assign(a))}t.EC=h,t.Dv=l,t.Ev=u,t.DC=f,t.Fv=t.Xm;var y=t.Fv;for(n=y.i;n.next();)l=n.value.end,l["position:placeholder"]&&(u=n.key.findVisibleNode(),u instanceof Z&&u.placeholder!==null&&(u=u.placeholder,a=u.Ya(gi),a.x+=u.padding.left,a.y+=u.padding.top,l["position:placeholder"]=a));t.dk=!0,iy(t),Rd(t,r,y,h,0,f),Wl(t.aa,!0),ny(t);var c=+new Date,v=c+f;o.zm===i&&requestAnimationFrame(function(){e()})}}function iy(t){if(!t.Wo){var i=t.aa;t.oE=i.gb,t.qC=i.Se,t.rC=i.sm,i.gb=!0,i.Se=!0,i.sm=!0,t.Wo=!0}}function ny(t){var i=t.aa;i.gb=t.oE,i.Se=t.qC,i.sm=t.rC,t.Wo=!1}function Rd(t,i,n,e,r,o){for(n=n.i;n.next();){var h=n.key,u=n.value,l=u.start,u=u.end,f;for(f in u)(f!=="position"||!u["position:placeholder"]&&!u["position:node"])&&Sa[f]!==void 0&&Sa[f](h,l[f],u[f],e,r,o)}e=i.UA,i.UA=!0,f=t.JC,t.Ar!==0&&t.zr!==0&&(n=t.Ar,i.rb=f(r,n,t.zr-n,o)),t.yr!==null&&t.xr!==null&&(n=t.yr,t=t.xr,i.ab=new F(f(r,n.x,t.x-n.x,o),f(r,n.y,t.y-n.y,o))),i.UA=e}qn.prototype.stopAnimation=qn.prototype.Jh=function(){this.sc===!0&&(this.sc=!1,this.zm=0,this.ro&&this.aa.ye()),this.dk&&this.jf&&Gd(this)};function Gd(t){t.dk=!1,t.ro=!1,iy(t);for(var i=t.aa,n=t.EC,e=t.DC,r=t.Fv.i;r.next();){var o=r.key,h=r.value,l=h.start,u=h.end,f=h.au,a;for(a in u)if(Sa[a]!==void 0){var p=a;!h.px||p!=="position:node"&&p!=="position:placeholder"||(p="position"),Sa[p](o,l[a],f[a]!==void 0?f[a]:h.px?l[a]:u[a],n,e,e)}h.px&&f.location!==void 0&&o instanceof L&&(o.location=f.location),h.ny&&o instanceof L&&o.Dd(!1)}for(n=t.aa.links;n.next();)e=n.value,e.pp!==null&&(e.points=e.pp,e.pp=null);i.Yx.clear(),i.uk=null,i.Gc(),i.oa(),i.dg(),Wd(i),ny(t),t.Ev&&t.Ev(),t.zm=0,t.Fv=null,t.Ev=null,t.Dv=null,t.yr=null,t.xr=null,t.Ar=0,t.zr=0,t.Xm=new tt(N,oy),i.Aa("AnimationFinished"),i.ye()}function ey(t,i,n){var e=i.U,r=n.U,o=null;if(n instanceof Z&&(o=n.placeholder),o!==null?(e=o.Ya(gi),e.x+=o.padding.left,e.y+=o.padding.top,ih(t,i,"position",e,i.position,!1)):ih(t,i,"position",new F(r.x+r.width/2-e.width/2,r.y+r.height/2-e.height/2),i.position,!1),ih(t,i,"scale",.01,i.scale,!1),i instanceof Z)for(i=i.hc;i.next();)o=i.value,o instanceof I&&ey(t,o,n)}function ry(t,i,n){if(i.isVisible()){var e=null;if(n instanceof Z&&(e=n.placeholder),e!==null?ih(t,i,"position:placeholder",i.position,e,!0):ih(t,i,"position:node",i.position,n,!0),ih(t,i,"scale",i.scale,.01,!0),t.sc&&(e=t.Xm,e.contains(i)&&(e.ka(i).ny=!0)),i instanceof Z)for(i=i.hc;i.next();)e=i.value,e instanceof I&&ry(t,e,n)}}function Od(t,i,n){t.sc&&(t.yr===null&&i.H()&&t.xr===null&&(t.yr=i.copy()),t.xr=n.copy(),t.ro=!0)}function Vd(t,i,n){t.sc&&t.aa.Ln&&(t.Ar===0&&t.zr===0&&(t.Ar=i),t.zr=n,t.ro=!0)}s.defineProperty(qn,{isEnabled:"isEnabled"},function(){return this.jf},function(t){s.j(t,"boolean",qn,"isEnabled"),this.jf=t}),s.defineProperty(qn,{duration:"duration"},function(){return this.mz},function(t){s.j(t,"number",qn,"duration"),1>t&&s.Fa(t,">= 1",qn,"duration"),this.mz=t}),s.u(qn,{Qe:"isAnimating"},function(){return this.dk}),s.u(qn,{FI:"isTicking"},function(){return this.Wo}),s.defineProperty(qn,{GF:"isInitial"},function(){return this.yl},function(t){s.j(t,"boolean",qn,"isInitial"),this.yl=t});function oy(t,i,n){this.start=t,this.end=i,this.au=new Pi,this.px=n,this.ny=!1}var Sa={opacity:function(t,i,n,e,r,o){t.opacity=e(r,i,n-i,o)},position:function(t,i,n,e,r,o){r!==o?t.Ay(e(r,i.x,n.x-i.x,o),e(r,i.y,n.y-i.y,o)):t.position=new F(e(r,i.x,n.x-i.x,o),e(r,i.y,n.y-i.y,o))},"position:node":function(t,i,n,e,r,o){var h=t.U,l=n.U;n=l.x+l.width/2-h.width/2,h=l.y+l.height/2-h.height/2,r!==o?t.Ay(e(r,i.x,n-i.x,o),e(r,i.y,h-i.y,o)):t.position=new F(e(r,i.x,n-i.x,o),e(r,i.y,h-i.y,o))},"position:placeholder":function(t,i,n,e,r,o){r!==o?t.Ay(e(r,i.x,n.x-i.x,o),e(r,i.y,n.y-i.y,o)):t.position=new F(e(r,i.x,n.x-i.x,o),e(r,i.y,n.y-i.y,o))},scale:function(t,i,n,e,r,o){t.scale=e(r,i,n-i,o)},visible:function(t,i,n,e,r,o){t.visible=r!==o?i:n}};function ct(){0<arguments.length&&s.nd(ct),s.oc(this),this.aa=null,this.xb=new z(L),this.Sb="",this.Dc=1,this.Cz=!1,this.Hl=this.fA=this.il=this.hl=this.gl=this.fl=this.dl=this.el=this.cl=this.kl=this.bl=this.jl=this.al=this.$k=!0,this.Az=!1,this.Qs=[]}s.ga("Layer",ct),ct.prototype.Tc=function(t){this.aa=t},ct.prototype.toString=function(t){t===void 0&&(t=0);var i='Layer "'+this.name+'"';if(0>=t)return i;for(var n=0,e=0,r=0,o=0,h=0,l=this.xb.i;l.next();){var u=l.value;u instanceof Z?r++:u instanceof I?e++:u instanceof S?o++:u instanceof vt?h++:n++}if(l="",0<n&&(l+=n+" Parts "),0<e&&(l+=e+" Nodes "),0<r&&(l+=r+" Groups "),0<o&&(l+=o+" Links "),0<h&&(l+=h+" Adornments "),1<t)for(t=this.xb.i;t.next();)n=t.value,l+=`
    `+n.toString(),e=n.data,e!==null&&s.Pd(e)&&(l+=" #"+s.Pd(e)),n instanceof I?l+=" "+We(e):n instanceof S&&(l+=" "+We(n.V)+" "+We(n.Z));return i+" "+this.xb.count+": "+l},ct.prototype.findObjectAt=ct.prototype.Pe=function(t,i,n){if(i===void 0&&(i=null),n===void 0&&(n=null),this.Hl===!1)return null;var e=!1;this.g!==null&&this.g.sb.Ia(t)&&(e=!0);for(var r=s.K(),o=this.xb.n,h=o.length;h--;){var l=o[h];if((e!==!0||To(l)!==!1)&&l.isVisible()&&(r.assign(t),pn(r,l.rh),l=l.Pe(r,i,n),l!==null&&(i!==null&&(l=i(l)),l!==null&&(n===null||n(l)))))return s.v(r),l}return s.v(r),null},ct.prototype.findObjectsAt=ct.prototype.du=function(t,i,n,e){if(i===void 0&&(i=null),n===void 0&&(n=null),e instanceof z||e instanceof R||(e=new R(N)),this.Hl===!1)return e;var r=!1;this.g!==null&&this.g.sb.Ia(t)&&(r=!0);for(var o=s.K(),h=this.xb.n,l=h.length;l--;){var u=h[l];if((r!==!0||To(u)!==!1)&&u.isVisible()){o.assign(t),pn(o,u.rh);var f=u;u.du(o,i,n,e)&&(i!==null&&(f=i(f)),f===null||n!==null&&!n(f)||(e instanceof R&&e.add(f),e instanceof z&&e.add(f)))}}return s.v(o),e},ct.prototype.findObjectsIn=ct.prototype.Jk=function(t,i,n,e,r){if(i===void 0&&(i=null),n===void 0&&(n=null),e===void 0&&(e=!1),r instanceof z||r instanceof R||(r=new R(N)),this.Hl===!1)return r;var o=!1;this.g!==null&&this.g.sb.Fk(t)&&(o=!0);for(var h=this.xb.n,l=h.length;l--;){var u=h[l];if((o!==!0||To(u)!==!1)&&u.isVisible()){var f=u;u.Jk(t,i,n,e,r)&&(i!==null&&(f=i(f)),f===null||n!==null&&!n(f)||(r instanceof R&&r.add(f),r instanceof z&&r.add(f)))}}return r},ct.prototype.DA=function(t,i,n,e,r,o,h){if(this.Hl===!1)return r;for(var l=this.xb.n,u=l.length;u--;){var f=l[u];if((h!==!0||To(f)!==!1)&&o(f)&&f.isVisible()){var a=f;f.Jk(t,i,n,e,r)&&(i!==null&&(a=i(a)),a===null||n!==null&&!n(a)||(r instanceof R&&r.add(a),r instanceof z&&r.add(a)))}}return r},ct.prototype.findObjectsNear=ct.prototype.Bn=function(t,i,n,e,r,o){if(n===void 0&&(n=null),e===void 0&&(e=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof z||r instanceof R)&&(o=r),r=!0),o instanceof z||o instanceof R||(o=new R(N)),this.Hl===!1)return o;var h=!1;this.g!==null&&this.g.sb.Ia(t)&&(h=!0);for(var l=s.K(),u=s.K(),f=this.xb.n,a=f.length;a--;){var p=f[a];if((h!==!0||To(p)!==!1)&&p.isVisible()){l.assign(t),pn(l,p.rh),u.m(t.x+i,t.y),pn(u,p.rh);var y=p;p.Bn(l,u,n,e,r,o)&&(n!==null&&(y=n(y)),y===null||e!==null&&!e(y)||(o instanceof R&&o.add(y),o instanceof z&&o.add(y)))}}return s.v(l),s.v(u),o},B=ct.prototype,B.If=function(t,i){if(this.visible){var n;n=i===void 0?t.sb:i;for(var e=this.xb.n,r=e.length,o=s.Za(),h=s.Za(),l=0;l<r;l++){var u=e[l];if(u.uD=l,!(u instanceof S&&u.Mf===!1)){if(u instanceof vt){var f=u;if(f.$e!==null)continue}Bv(u.U,n)?(u.If(!0),o.push(u)):(u.If(!1),u.ex!==null&&0<u.ex.count&&h.push(u))}}for(l=0;l<o.length;l++)for(f=u=o[l],(f.Q&16384)!==0&&(f.updateAdornments(),ec(f,!1)),u=u.ex;u.next();)f=u.value,Gt(f,1/0,1/0),f.jc(),f.If(!0);for(l=0;l<h.length;l++)u=h[l],u.updateAdornments(),ec(u,!0);s.ra(o),s.ra(h)}},B.ve=function(t,i,n){if(this.visible&&this.Dc!==0&&(n===void 0&&(n=!0),n||!this.Hc)){n=this.xb.n;var e=n.length;if(e!==0){this.Dc!==1&&(t.globalAlpha=this.Dc);var r=this.Qs;r.length=0;for(var o=i.scale,h=0;h<e;h++){var l=n[h];if(To(l)){if(l instanceof S){var u=l;if(u.ac&&r.push(u),u.Mf===!1)continue}u=l.U,1<u.width*o||1<u.height*o?l.ve(t,i):Sf(l,t)}}t.globalAlpha=1}}};function Sx(t,i,n,e){if(t.visible&&t.Dc!==0){t.Dc!==1&&(i.globalAlpha=t.Dc);var r=t.Qs;r.length=0;var o=n.scale;t=t.xb.n;for(var h=t.length,l=e.length,u=0;u<h;u++){var f=t[u];if(To(f)){if(f instanceof S){var a=f;if(a.ac&&r.push(a),a.Mf===!1)continue}var a=Wh(f,f.U),p;t:{p=a;for(var y=e,c=l,v=2/o,d=4/o,g=0;g<c;g++){var m=y[g];if(m.width!==0&&m.height!==0&&p.xF(m.x-v,m.y-v,m.width+d,m.height+d)){p=!0;break t}}p=!1}p&&(1<a.width*o||1<a.height*o?f.ve(i,n):Sf(f,i))}}i.globalAlpha=1}}B.h=function(t,i,n,e,r){var o=this.g;o!==null&&o.bd(Yt,t,this,i,n,e,r)},B.eq=function(t,i,n){var e=this.xb;if(i.iw=this,t>=e.count)t=e.count;else if(e.fa(t)===i)return-1;return e.Rd(t,i),i.qu(n),e=this.g,e!==null&&(n?e.oa():e.eq(i)),Na(this,t,i),t},B.rf=function(t,i,n){if(!n&&i.layer!==this&&i.layer!==null)return i.layer.rf(t,i,n);var e=this.xb;if(0>t||t>=e.length){if(t=e.indexOf(i),0>t)return-1}else if(e.fa(t)!==i&&(t=e.indexOf(i),0>t))return-1;return i.ru(n),e.cd(t),e=this.g,e!==null&&(n?e.oa():e.rf(i)),i.iw=null,t};function Na(t,i,n){if(i=Nx(t,i,n),n instanceof Z&&n!==null&&isNaN(n.mo)){if(n.hc.count!==0){for(var e=-1,r=t.xb.n,o=r.length,h=0;h<o;h++){var l=r[h];if(l===n&&(i=h,0<=e)||0>e&&l.Ca===n&&(e=h,0<=i))break}!(0>e)&&e<i&&(r=t.xb,r.cd(i),r.Rd(e,n))}n=n.Ca,n!==null&&Na(t,-1,n)}}function Nx(t,i,n){var e=n.mo;if(isNaN(e))return i;t=t.xb;var r=t.count;if(1>=r)return i;if(0>i&&(i=t.indexOf(n)),0>i)return-1;for(var o=i-1,h=NaN;0<=o&&(h=t.fa(o).mo,!!isNaN(h));)o--;for(var l=i+1,u=NaN;l<r&&(u=t.fa(l).mo,!!isNaN(u));)l++;if(!isNaN(h)&&h>e)for(;;){if(o===-1||h<=e){if(o++,o===i)break;return t.cd(i),t.Rd(o,n),o}for(h=NaN;0<=--o&&(h=t.fa(o).mo,isNaN(h)););}else if(!isNaN(u)&&u<e)for(;;){if(l===r||u>=e){if(l--,l===i)break;return t.cd(i),t.Rd(l,n),l}for(u=NaN;++l<r&&(u=t.fa(l).mo,isNaN(u)););}return i}B.clear=function(){for(var t=this.xb.yc(),i=t.length,n=0;n<i;n++)t[n].If(!1),this.rf(-1,t[n],!1);this.Qs.length=0},s.u(ct,{Hj:"parts"},function(){return this.xb.i}),s.u(ct,{KL:"partsBackwards"},function(){return this.xb.Mn}),s.u(ct,{g:"diagram"},function(){return this.aa}),s.defineProperty(ct,{name:"name"},function(){return this.Sb},function(t){s.j(t,"string",ct,"name");var i=this.Sb;if(i!==t){var n=this.g;if(n!==null)for(i===""&&s.k("Cannot rename default Layer to: "+t),n=n.Ux;n.next();)n.value.name===t&&s.k("Layer.name is already present in this diagram: "+t);for(this.Sb=t,this.h("name",i,t),t=this.xb.i;t.next();)t.value.bg=this.Sb}}),s.defineProperty(ct,{opacity:"opacity"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(s.j(t,"number",ct,"opacity"),(0>t||1<t)&&s.Fa(t,"0 <= value <= 1",ct,"opacity"),this.Dc=t,this.h("opacity",i,t),t=this.g,t!==null&&t.oa())}),s.defineProperty(ct,{Hc:"isTemporary"},function(){return this.Cz},function(t){var i=this.Cz;i!==t&&(s.j(t,"boolean",ct,"isTemporary"),this.Cz=t,this.h("isTemporary",i,t))}),s.defineProperty(ct,{visible:"visible"},function(){return this.fA},function(t){var i=this.fA;if(i!==t){for(s.j(t,"boolean",ct,"visible"),this.fA=t,this.h("visible",i,t),i=this.xb.i;i.next();)i.value.Dd(t);t=this.g,t!==null&&t.oa()}}),s.defineProperty(ct,{Ug:"pickable"},function(){return this.Hl},function(t){var i=this.Hl;i!==t&&(s.j(t,"boolean",ct,"pickable"),this.Hl=t,this.h("pickable",i,t))}),s.defineProperty(ct,{AF:"isBoundsIncluded"},function(){return this.Az},function(t){this.Az!==t&&(this.Az=t,this.g!==null&&this.g.Gc())}),s.defineProperty(ct,{Ck:"allowCopy"},function(){return this.$k},function(t){var i=this.$k;i!==t&&(s.j(t,"boolean",ct,"allowCopy"),this.$k=t,this.h("allowCopy",i,t))}),s.defineProperty(ct,{on:"allowDelete"},function(){return this.al},function(t){var i=this.al;i!==t&&(s.j(t,"boolean",ct,"allowDelete"),this.al=t,this.h("allowDelete",i,t))}),s.defineProperty(ct,{jx:"allowTextEdit"},function(){return this.jl},function(t){var i=this.jl;i!==t&&(s.j(t,"boolean",ct,"allowTextEdit"),this.jl=t,this.h("allowTextEdit",i,t))}),s.defineProperty(ct,{gx:"allowGroup"},function(){return this.bl},function(t){var i=this.bl;i!==t&&(s.j(t,"boolean",ct,"allowGroup"),this.bl=t,this.h("allowGroup",i,t))}),s.defineProperty(ct,{kx:"allowUngroup"},function(){return this.kl},function(t){var i=this.kl;i!==t&&(s.j(t,"boolean",ct,"allowUngroup"),this.kl=t,this.h("allowUngroup",i,t))}),s.defineProperty(ct,{St:"allowLink"},function(){return this.cl},function(t){var i=this.cl;i!==t&&(s.j(t,"boolean",ct,"allowLink"),this.cl=t,this.h("allowLink",i,t))}),s.defineProperty(ct,{pn:"allowRelink"},function(){return this.el},function(t){var i=this.el;i!==t&&(s.j(t,"boolean",ct,"allowRelink"),this.el=t,this.h("allowRelink",i,t))}),s.defineProperty(ct,{Tl:"allowMove"},function(){return this.dl},function(t){var i=this.dl;i!==t&&(s.j(t,"boolean",ct,"allowMove"),this.dl=t,this.h("allowMove",i,t))}),s.defineProperty(ct,{hx:"allowReshape"},function(){return this.fl},function(t){var i=this.fl;i!==t&&(s.j(t,"boolean",ct,"allowReshape"),this.fl=t,this.h("allowReshape",i,t))}),s.defineProperty(ct,{Tt:"allowResize"},function(){return this.gl},function(t){var i=this.gl;i!==t&&(s.j(t,"boolean",ct,"allowResize"),this.gl=t,this.h("allowResize",i,t))}),s.defineProperty(ct,{ix:"allowRotate"},function(){return this.hl},function(t){var i=this.hl;i!==t&&(s.j(t,"boolean",ct,"allowRotate"),this.hl=t,this.h("allowRotate",i,t))}),s.defineProperty(ct,{Bf:"allowSelect"},function(){return this.il},function(t){var i=this.il;i!==t&&(s.j(t,"boolean",ct,"allowSelect"),this.il=t,this.h("allowSelect",i,t))});function x(t){function i(){q.document.removeEventListener("DOMContentLoaded",i,!1),n.setScrollWidth()}1<arguments.length&&s.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),s.oc(this),_y=[],this.Wc=!0,this.lC=new qn,this.lC.Tc(this),this.zd=17,this.as=!1,this.Pz="default";var n=this;q.document.body!==null?this.setScrollWidth():q.document.addEventListener("DOMContentLoaded",i,!1),this.dc=new z(ct),this.Cb=this.Db=0,this.qk=this.Ob=this.hf=this.zb=null,this.hG(),this.To=null,this.gG(),this.ab=new F(NaN,NaN).freeze(),this.rb=1,this.Yv=new F(NaN,NaN).freeze(),this.Zv=NaN,this.qw=1e-4,this.ow=100,this.jd=new Qt,this.$w=new F(NaN,NaN).freeze(),this.Qv=new O(NaN,NaN,NaN,NaN).freeze(),this.Hw=new xt(0,0,0,0).freeze(),this.Iw=Uh,this.Lw=!0,this.Ew=this.Cw=null,this.Bm=je,this.Em=cn,this.wl=je,this.Qo=cn,this.$v=this.Xv=gi,this.Fe=!0,this.Wr=!1,this.vg=new R(L),this.ql=new tt(S,O),this.Cr=!0,this.$q=250,this.so=-1,this.vv=new xt(16,16,16,16).freeze(),this.Go=this.Tf=!1,this.Lo=!0,this.Pi=new Ht,this.xd=new Ht,this.Rb=new Ht,this.jh=this.Di=null,this.Bp=!1,this.hz=this.iz=null,this.Vy=q.PointerEvent&&(s.hq||s.iq||s.VA)&&q.navigator&&q.navigator.msPointerEnabled!==!1,xg(this),this.ip=new R(I),this.Nl=new R(Z),this.bp=new R(S),this.xb=new R(L),this.ew=!0,this.Vw=rh,this.hD=!1,this.Xw=yf,this.cz=this.fz=this.$z=null,this.Cv="",this.wr="auto",this.Hi=this.jj=this.Yi=this.tw=this.Zi=this.$i=this.aj=this.Gi=this.Mi=this.Ei=null,this.Jz=!1,this.Nz={},this.lp=[null,null],this.$y=null,this.Sq=this.gz=this.Vz=this.UD=this.ij=!1,this.sD=!0,this.Km=this.$d=!1,this.qe=null;var e=this;this.zD=function(o){if(o.$===e.$&&e.Ua){e.Ua=!1;try{var h=o.Fc;o.tf===""&&h===Yt&&vy(e,o.object,o.propertyName)}finally{e.Ua=!0}}},this.AD=function(o){Lx(e,o)},this.qE=!0,this.dh=-2,this.Ii=new tt(Object,L),this.Sj=new tt(Object,S),this.Nm=new tt(Object,Array),this.kp=new tt("string",Array),this.Mz=new z(oi),this.Si=!1,this.al=this.$k=this.lv=this.jf=!0,this.nv=this.mv=!1,this.sv=this.qv=this.il=this.hl=this.gl=this.fl=this.dl=this.el=this.cl=this.pv=this.kl=this.bl=this.jl=!0,this.fh=this.pD=!1,this.rv=this.ov=this.Vv=this.Uv=!0,this.Kw=this.Gw=16,this.Rz=this.Fw=!1,this.kt=this.Jw=null,this.Sz=this.Tz=0,this.lf=new xt(5).freeze(),this.Nw=new R(L).freeze(),this.pw=999999999,this.Wv=new R(L).freeze(),this.xl=this.Jm=this.ck=!0,this.ul=this.bk=!1,this.oe=null,this.Pj=!0,this.eh=!1,this.XG=new R(S),this.fD=new R(du),this.rk=this.Kd=null,this.Ps=1,this.XD=0,this.ph={scale:1,position:new F,bounds:new O,isScroll:!1},this.eA=new O(NaN,NaN,NaN,NaN).freeze(),this.Jv=new O(NaN,NaN,NaN,NaN).freeze(),this.fw=!1,this.Lv=null,this.zw=new R(Ir),Ud(this),this.kw=this.Sv=this.uw=this.MC=this.LC=this.NC=this.jk=this.sl=this.bj=null,Kd(this),this.td=null,this.Rv=!1,this.zo=null,this.Va=new pt,this.Va.initializeStandardTools(),this.Xa=this.Xt=this.Va,this.pb=new it,this.$=new K,this.ij=!0,this.Ub=new wt,this.ij=!1,this.YC=this.lz=null,this.wd=1,this.uk=null;var r=s.vfo.split(".");s.vx.licenseKey!==!0&&r[0]==="1"&&7>parseInt(r[1],10)&&(s.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+s.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),s.vx.licenseKey=!0),this.Wh=1,this.ik=0,this.hw=new F,this.bA=500,this.uv=new F,this.tt=null,this.fk=!1,this.preventDefault=this.my=this.uq=this.vq=this.tq=this.sq=this.Un=this.Wn=this.Vn=this.Sn=this.Tn=this.ZB=this.RB=this.SB=this.TB=this.Jl=this.gt=this.Il=this.ft=null,this.bw=!1,this.vl=new Fy,t!==void 0&&Dy(this,t),this.Wc=!1}s.ga("Diagram",x),x.prototype.clear=x.prototype.clear=function(){this.$.clear(),Hl=null,rf="",Hd(this,!1),this.Jv=new O(NaN,NaN,NaN,NaN).freeze(),this.oa()};function Hd(t,i){var n=null;t.td!==null&&(n=t.td.W),t.Ka.Jh();for(var e=[],r=t.dc.length,o=0;o<r;o++){var h=t.dc.n[o];if(i)for(var l=h.Hj;l.next();){var u=l.value;u!==n&&u.data===null&&e.push(u)}h.clear()}if(t.vg.clear(),t.ql.clear(),t.ip.clear(),t.Nl.clear(),t.bp.clear(),t.xb.clear(),t.Ii.clear(),t.Sj.clear(),t.Nm.clear(),t.Nw.Qa(),t.Nw.clear(),t.Nw.freeze(),t.Wv.Qa(),t.Wv.clear(),t.Wv.freeze(),t.zo=null,s.My=[],n!==null&&(t.add(n),t.xb.remove(n)),i)for(n=0;n<e.length;n++)t.add(e[n])}x.prototype.reset=x.prototype.reset=function(){this.Wc=!0,this.clear(),this.dc=new z(ct),this.hG(),this.gG(),this.ab=new F(NaN,NaN).freeze(),this.rb=1,this.Yv=new F(NaN,NaN).freeze(),this.Zv=NaN,this.qw=1e-4,this.ow=100,this.$w=new F(NaN,NaN).freeze(),this.Qv=new O(NaN,NaN,NaN,NaN).freeze(),this.Hw=new xt(0,0,0,0).freeze(),this.Iw=Uh,this.Lw=!0,this.Ew=this.Cw=null,this.Bm=je,this.Em=cn,this.wl=je,this.Qo=cn,this.$v=this.Xv=gi,this.$q=250,this.vv=new xt(16,16,16,16).freeze(),this.ew=!0,this.Vw=rh,this.Xw=yf,this.wr="auto",this.Hi=this.jj=this.Yi=this.tw=this.Zi=this.$i=this.aj=this.Gi=this.Mi=this.Ei=null,this.Si=!1,this.al=this.$k=this.lv=this.jf=!0,this.nv=this.mv=!1,this.rv=this.ov=this.Vv=this.Uv=this.sv=this.qv=this.il=this.hl=this.gl=this.fl=this.dl=this.el=this.cl=this.pv=this.kl=this.bl=this.jl=!0,this.Kw=this.Gw=16,this.lf=new xt(5).freeze(),this.pw=999999999,this.oe=null,this.fw=!1,Kd(this),this.td=null,this.Va=new pt,this.Va.initializeStandardTools(),this.Xa=this.Xt=this.Va,this.pb=new it,this.ij=!0,Ud(this),this.Ub=new wt,this.ij=!1,this.$=new K,this.eh=!1,this.Lo=!0,this.Wc=this.Tf=!1,this.oa(),this.jh=this.Di=null,xg(this),this.Cv=""};function Kd(t){t.bj=new tt("string",L);var i=new I,n=new rt;n.bind(new Pt("text","",We)),i.add(n),t.NC=i,t.bj.add("",i),i=new I,n=new rt,n.stroke="brown",n.bind(new Pt("text","",We)),i.add(n),t.bj.add("Comment",i),i=new I,i.pm=!1,i.lA=!1,n=new Y,n.Fb="Ellipse",n.fill="black",n.stroke=null,n.Da=new lt(3,3).Ha(),i.add(n),t.bj.add("LinkLabel",i),t.sl=new tt("string",Z),i=new Z,i.BB="GROUPPANEL",i.type=Oy,n=new rt,n.font="bold 12pt sans-serif",n.bind(new Pt("text","",We)),i.add(n),n=new A(wo),n.name="GROUPPANEL";var e=new Y;e.Fb="Rectangle",e.fill="rgba(128,128,128,0.2)",e.stroke="black",n.add(e),e=new en,e.padding=new xt(5,5,5,5).Ha(),n.add(e),i.add(n),t.LC=i,t.sl.add("",i),t.jk=new tt("string",S),i=new S,n=new Y,n.ff=!0,i.add(n),n=new Y,n.Lq="Standard",n.fill="black",n.stroke=null,n.mb=0,i.add(n),t.MC=i,t.jk.add("",i),i=new S,n=new Y,n.ff=!0,n.stroke="brown",i.add(n),t.jk.add("Comment",i),i=new vt,i.type=wo,n=new Y,n.fill=null,n.stroke="dodgerblue",n.mb=3,i.add(n),n=new en,n.margin=new xt(1.5,1.5,1.5,1.5).Ha(),i.add(n),t.uw=i,t.Sv=i,i=new vt,i.type=Mo,n=new Y,n.ff=!0,n.fill=null,n.stroke="dodgerblue",n.mb=3,i.add(n),t.kw=i}x.prototype.setScrollWidth=function(t){t=t===void 0?q.document.body:t;var i=s.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var n=s.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.style.boxSizing="content-box",n.appendChild(i),t.appendChild(n);var e=i.offsetWidth;n.style.overflow="scroll",i=i.offsetWidth,e===i&&(i=n.clientWidth),t.removeChild(n),n=e-i,n!==0||s.EF||(n=11),this.zd=n,n=s.createElement("div"),n.dir="rtl",n.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",n.textContent="A",t.appendChild(n),e="reverse",0<n.scrollLeft?e="default":(n.scrollLeft=1,n.scrollLeft===0&&(e="negative")),t.removeChild(n),this.Pz=e},x.prototype.ic=function(t){t.Je===x?this.Vl=t:s.Lj(this,t)},x.prototype.toString=function(t){t===void 0&&(t=0);var i="";if(this.tj&&this.tj.id&&(i=this.tj.id),i='Diagram "'+i+'"',0>=t)return i;for(var n=this.dc.i;n.next();)i+=`
  `+n.value.toString(t-1);return i},x.fromDiv=function(t){var i=t;return typeof t=="string"&&(i=q.document.getElementById(t)),i instanceof HTMLDivElement&&i.aa instanceof x?i.aa:null},s.defineProperty(x,{tj:"div"},function(){return this.Ob},function(t){if(t!==null&&s.G(t,HTMLDivElement,x,"div"),this.Ob!==t){_y=[];var i=this.Ob;i!==null?(i.aa=void 0,i.innerHTML="",this.zb!==null&&(this.zb.removeEventListener("touchstart",this.TB,!1),this.zb.removeEventListener("touchmove",this.SB,!1),this.zb.removeEventListener("touchend",this.RB,!1),this.zb.Od.aa=null),i=this.Va,i!==null&&(i.gf.each(function(n){n.cancelWaitAfter()}),i.eg.each(function(n){n.cancelWaitAfter()}),i.fg.each(function(n){n.cancelWaitAfter()})),i.cancelWaitAfter(),this.Xa.doCancel(),this.hf=this.zb=null,q.removeEventListener("resize",this.ZB,!1),q.removeEventListener("mousemove",this.Tn,!0),q.removeEventListener("mousedown",this.Sn,!0),q.removeEventListener("mouseup",this.Vn,!0),q.removeEventListener("wheel",this.Wn,!0),q.removeEventListener("mouseout",this.Un,!0)):this.eh=!1,this.Ob=null,t!==null&&((i=t.aa)&&(i.tj=null),Dy(this,t),this.yq())}});function Cx(t){var i=t.zb;t.Vy?(i.addEventListener("pointerdown",t.sq,!1),i.addEventListener("pointermove",t.tq,!1),i.addEventListener("pointerup",t.vq,!1),i.addEventListener("pointerout",t.uq,!1)):(i.addEventListener("touchstart",t.TB,!1),i.addEventListener("touchmove",t.SB,!1),i.addEventListener("touchend",t.RB,!1),i.addEventListener("mousemove",t.Tn,!1),i.addEventListener("mousedown",t.Sn,!1),i.addEventListener("mouseup",t.Vn,!1),i.addEventListener("mouseout",t.Un,!1)),i.addEventListener("wheel",t.Wn,!1),i.addEventListener("keydown",t.HI,!1),i.addEventListener("keyup",t.II,!1),i.addEventListener("selectstart",function(n){return n.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(n){return n.preventDefault(),!1},!1),i.addEventListener("gesturestart",function(n){t.Va.Mk!==af&&(t.Va.Mk===Ql?n.preventDefault():(n.preventDefault(),t.Ps=t.scale,t.Xa.doCancel()))},!1),i.addEventListener("gesturechange",function(n){if(t.Va.Mk!==af)if(t.Va.Mk===Ql)n.preventDefault();else{n.preventDefault();var e=n.scale;if(t.Ps!==null){var r=t.Db,o=t.Cb,h=t.zb.getBoundingClientRect();n=new F(n.pageX-q.scrollX-r/h.width*h.left,n.pageY-q.scrollY-o/h.height*h.top),e*=t.Ps,r=t.pb,e!==t.scale&&r.canResetZoom(e)&&(o=t.zi,t.zi=n,r.resetZoom(e),t.zi=o)}}},!1),q.addEventListener("resize",t.ZB,!1)}x.prototype.computePixelRatio=function(){if(this.uk!==null)return this.uk;var t=this.hf;return(q.devicePixelRatio||1)/(t.ua.webkitBackingStorePixelRatio||t.ua.mozBackingStorePixelRatio||t.ua.msBackingStorePixelRatio||t.ua.oBackingStorePixelRatio||t.ua.backingStorePixelRatio||1)},x.prototype.doMouseMove=function(){this.Xa.doMouseMove()},x.prototype.doMouseDown=function(){this.Xa.doMouseDown()},x.prototype.doMouseUp=function(){this.Xa.doMouseUp()},x.prototype.doMouseWheel=function(){this.Xa.doMouseWheel()},x.prototype.doKeyDown=function(){this.Xa.doKeyDown()},x.prototype.doKeyUp=function(){this.Xa.doKeyUp()},x.prototype.doFocus=function(){this.focus()},x.prototype.focus=x.prototype.focus=function(){if(this.zb)if(this.EJ)this.zb.focus();else{var t=q.scrollX||q.pageXOffset,i=q.scrollY||q.pageYOffset;this.zb.focus(),q.scrollTo(t,i)}};function sy(t){if(t.zb!==null){var i=t.Ob;if(i.clientWidth!==0&&i.clientHeight!==0){var n=t.ul?t.zd:0,e=t.bk?t.zd:0,r=t.wd;t.wd=t.computePixelRatio(),t.wd!==r&&(t.Wr=!0,t.ye()),(i.clientWidth!==t.Db+n||i.clientHeight!==t.Cb+e)&&(t.Jm=!0,t.Fe=!0,i=t.Ub,i!==null&&i.Qx&&t.Vl===je&&(t.Go=!0,i.J()),t.$d||t.ye())}}}function Ud(t){var i=new ct;i.name="Background",t.Nt(i),i=new ct,i.name="",t.Nt(i),i=new ct,i.name="Foreground",t.Nt(i),i=new ct,i.name="Adornment",i.Hc=!0,t.Nt(i),i=new ct,i.name="Tool",i.Hc=!0,i.AF=!0,t.Nt(i),i=new ct,i.name="Grid",i.Bf=!1,i.Ug=!1,i.Hc=!0,t.nH(i,t.cu("Background"))}function Jd(t){t.td=new A(Yh),t.td.name="GRID";var i=new Y;i.Fb="LineH",i.stroke="lightgray",i.mb=.5,i.interval=1,t.td.add(i),i=new Y,i.Fb="LineH",i.stroke="gray",i.mb=.5,i.interval=5,t.td.add(i),i=new Y,i.Fb="LineH",i.stroke="gray",i.mb=1,i.interval=10,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="lightgray",i.mb=.5,i.interval=1,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="gray",i.mb=.5,i.interval=5,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="gray",i.mb=1,i.interval=10,t.td.add(i),i=new L,i.add(t.td),i.bg="Grid",i.mo=0,i.XA=!1,i.zF=!1,i.Ug=!1,i.cB="GRID",t.add(i),t.xb.remove(i),t.td.visible=!1}function jx(){this.aa.Rz?this.aa.Rz=!1:this.aa.isEnabled?this.aa.SH(this):fy(this.aa)}function Yd(t){this.aa.isEnabled?(this.aa.Tz=t.target.scrollTop,this.aa.Sz=t.target.scrollLeft):fy(this.aa)}x.prototype.diagramScroll=x.prototype.SH=function(t){if(this.zb!==null){this.Fw=!0;var u=this.Nd,c=this.sb,h=this.ty,i=u.x-h.left,n=u.y-h.top,e=u.width+h.left+h.right,r=u.height+h.top+h.bottom,o=u.right+h.right,h=u.bottom+h.bottom,l=c.x,u=c.y,f=c.width,a=c.height,p=c.right,y=c.bottom,c=this.scale,v;if(v=t.scrollLeft,this.as)switch(this.Pz){case"negative":v=v+t.scrollWidth-t.clientWidth;break;case"reverse":v=t.scrollWidth-v-t.clientWidth}var d=v;f<e||a<r?(v=s.wb(this.position.x,this.position.y),this.re&&this.Sz!==d&&(v.x=d/c+i,this.Sz=d),this.se&&this.Tz!==t.scrollTop&&(v.y=t.scrollTop/c+n,this.Tz=t.scrollTop),this.position=v,s.v(v),this.Jm=this.Fw=!1):(v=s.K(),t.dH&&this.re&&(i<l&&(this.position=v.m(d+i,this.position.y)),o>p&&(this.position=v.m(-(this.Jw.scrollWidth-this.Db)+d-this.Db/c+o,this.position.y))),t.eH&&this.se&&(n<u&&(this.position=v.m(this.position.x,t.scrollTop+n)),h>y&&(this.position=v.m(this.position.x,-(this.Jw.scrollHeight-this.Cb)+t.scrollTop-this.Cb/c+h))),s.v(v),ds(this),this.Jm=this.Fw=!1,u=this.Nd,c=this.sb,o=u.right,p=c.right,h=u.bottom,y=c.bottom,i=u.x,l=c.x,n=u.y,u=c.y,f>=e&&i>=l&&o<=p&&(this.kt.style.width="1px"),a>=r&&n>=u&&h<=y&&(this.kt.style.height="1px"))}},x.prototype.computeBounds=function(){return 0<this.vg.count&&te(this),qd(this)};function qd(t){if(t.gF.H()){var i=t.gF.copy();return i.bx(t.padding),i}for(var n=!0,e=t.dc.n,r=e.length,o=0;o<r;o++){var h=e[o];if(h.visible&&(!h.Hc||h.AF))for(var h=h.xb.n,l=h.length,u=0;u<l;u++){var f=h[u];f.XA&&f.isVisible()&&(f=f.U,f.H()&&(n?(n=!1,i=f.copy()):i.Zg(f)))}}return n&&(i=new O(0,0,0,0)),i.bx(t.padding),i}x.prototype.computePartsBounds=function(t,i){i===void 0&&(i=!1);for(var n=null,e=t.i;e.next();){var r=e.value;!i&&r instanceof S||(r.Ne(),n===null?n=r.U.copy():n.Zg(r.U))}return n===null?new O(NaN,NaN,0,0):n};function Jr(t,i){if((i||t.eh)&&!t.Wc&&t.zb!==null&&!t.Ka.Qe&&t.Nd.H()){t.Wc=!0;var e=t.Bm;i&&t.wl!==je&&(e=t.wl);var n=e!==je?Ca(t,e):t.scale,e=t.sb.copy(),r=t.Db/n,o=t.Cb/n,h=null,l=t.Ka;l.sc&&(h=t.ab.copy()),t.position.Qa();var u=t.Em;i&&!u.Zc()&&t.Qo.Zc()&&(u=t.Qo),hy(t,t.ab,t.Nd,r,o,u,i),t.position.freeze(),h!==null&&Od(l,h,t.ab),r=t.scale,t.scale=n,t.Wc=!1,n=t.sb,n.Qc(e)||t.Pu(e,n,r,t.scale,!1)}}function Ca(t,i){var n=t.pb.tx;if(t.zb===null)return n;t.ck&&_l(t,t.computeBounds());var r=t.Nd;if(!r.H())return n;var e=r.width,r=r.height,o=t.Db,h=t.Cb,l=o/e,u=h/r;return i===$l?(e=Math.min(u,l),e>n&&(e=n),e<t.Dh&&(e=t.Dh),e>t.Ch&&(e=t.Ch),e):i===Aa?(e=u>l?(h-t.zd)/r:(o-t.zd)/e,e>n&&(e=n),e<t.Dh&&(e=t.Dh),e>t.Ch&&(e=t.Ch),e):t.scale}x.prototype.zoomToFit=x.prototype.zoomToFit=function(){this.scale=Ca(this,$l),this.uy!==Uh&&(this.ab.Qa(),hy(this,this.ab,this.Nd,this.Db/this.rb,this.Cb/this.rb,this.Em,!0),this.ab.freeze())},x.prototype.zoomToRect=function(t,i){i===void 0&&(i=$l);var n=t.width,e=t.height;if(!(n===0||e===0||isNaN(n)&&isNaN(e))){var o=1;if(i===$l||i===Aa)if(isNaN(n))o=this.sb.height*this.scale/e;else if(isNaN(e))o=this.sb.width*this.scale/n;else var o=this.Db,r=this.Cb,o=i===Aa?r/e>o/n?(r-(this.bk?this.zd:0))/e:(o-(this.ul?this.zd:0))/n:Math.min(r/e,o/n);this.scale=o,this.position=new F(t.x,t.y)}},s.defineProperty(x,{UA:null},function(){return this.Wc},function(t){this.Wc=t}),x.prototype.alignDocument=function(t,i){this.ck&&_l(this,this.computeBounds());var n=this.Nd,e=this.sb;this.position=new F(n.x+(t.x*n.width+t.offsetX)-(i.x*e.width-i.offsetX),n.y+(t.y*n.height+t.offsetY)-(i.y*e.height-i.offsetY))};function hy(t,i,n,e,r,o,h){var l=i.x,u=i.y;(h||t.uy===Uh)&&(o.Zc()&&(e>n.width&&(l=n.x+(o.x*n.width+o.offsetX)-(o.x*e-o.offsetX)),r>n.height&&(u=n.y+(o.y*n.height+o.offsetY)-(o.y*r-o.offsetY))),o=t.ty,h=e-n.width,e<n.width+o.left+o.right?(l=Math.min(l+e/2,n.right+Math.max(h,o.right)-e/2),l=Math.max(l,n.left-Math.max(h,o.left)+e/2),l-=e/2):l>n.left?l=n.left:l<n.right-e&&(l=n.right-e),e=r-n.height,r<n.height+o.top+o.bottom?(u=Math.min(u+r/2,n.bottom+Math.max(e,o.bottom)-r/2),u=Math.max(u,n.top-Math.max(e,o.top)+r/2),u-=r/2):u>n.top?u=n.top:u<n.bottom-r&&(u=n.bottom-r)),i.x=isFinite(l)?l:-t.padding.left,i.y=isFinite(u)?u:-t.padding.top,t.aG!==null&&(t=t.aG(t,i),i.x=t.x,i.y=t.y)}x.prototype.findPartAt=x.prototype.eu=function(t,i){var n=i?ja(this,t,function(e){return e.W},function(e){return e.canSelect()}):ja(this,t,function(e){return e.W});return n instanceof L?n:null},x.prototype.findObjectAt=x.prototype.Pe=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null),te(this);for(var e=this.dc.Mn;e.next();){var r=e.value;if(r.visible&&(r=r.Pe(t,i,n),r!==null))return r}return null};function ja(t,i,n,e){for(n===void 0&&(n=null),e===void 0&&(e=null),te(t),t=t.dc.Mn;t.next();){var r=t.value;if(r.visible&&!r.Hc&&(r=r.Pe(i,n,e),r!==null))return r}return null}x.prototype.findObjectsAt=x.prototype.du=function(t,i,n,e){i===void 0&&(i=null),n===void 0&&(n=null),e instanceof z||e instanceof R||(e=new R(N)),te(this);for(var r=this.dc.Mn;r.next();){var o=r.value;o.visible&&o.du(t,i,n,e)}return e},x.prototype.findObjectsIn=x.prototype.Jk=function(t,i,n,e,r){i===void 0&&(i=null),n===void 0&&(n=null),e===void 0&&(e=!1),r instanceof z||r instanceof R||(r=new R(N)),te(this);for(var o=this.dc.Mn;o.next();){var h=o.value;h.visible&&h.Jk(t,i,n,e,r)}return r},x.prototype.DA=function(t,i,n,e,r,o){var h=new R(N);te(this);for(var l=this.dc.Mn;l.next();){var u=l.value;u.visible&&u.DA(t,i,n,e,h,r,o)}return h},x.prototype.findObjectsNear=x.prototype.Bn=function(t,i,n,e,r,o){n===void 0&&(n=null),e===void 0&&(e=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof z||r instanceof R)&&(o=r),r=!0),o instanceof z||o instanceof R||(o=new R(N)),te(this);for(var h=this.dc.Mn;h.next();){var l=h.value;l.visible&&l.Bn(t,i,n,e,r,o)}return o},x.prototype.acceptEvent=function(t){var i=this.xd;return this.xd=this.Rb,this.Rb=i,Hh(this,this,t,i,t instanceof MouseEvent),i};function Hh(t,i,n,e,r){e.g=i,e.event=n,r?Kh(t,n,e):(e.Ce=i.Rb.Ce,e.ea=i.Rb.ea),t=0,n.ctrlKey&&(t+=1),n.altKey&&(t+=2),n.shiftKey&&(t+=4),n.metaKey&&(t+=8),e.md=t,e.button=n.button,n.buttons===void 0||s.xu||(e.buttons=n.buttons),s.zh&&n.button===0&&n.ctrlKey&&(e.button=2),e.Hk=!1,e.up=!1,e.te=1,e.pi=0,e.vc=!1,e.bubbles=!1,e.timestamp=Date.now(),e.zu=!1,e.Jf=Xl(n),e.Be=null}function Xl(t){var i=t.target.aa;if(!i){var n=t.path;n||typeof t.CH!="function"||(n=t.CH()),n&&n[0]&&(i=n[0].aa)}return i||null}function Zd(t,i,n,e){var r=t.xd;return t.xd=t.Rb,t.Rb=r,r.g=t,Kh(t,n,r),r.button=0,r.buttons=1,n=0,i.ctrlKey&&(n+=1),i.altKey&&(n+=2),i.shiftKey&&(n+=4),i.metaKey&&(n+=8),r.md=n,r.Hk=!0,r.up=!1,r.te=1,r.pi=0,r.vc=!1,r.bubbles=!0,r.event=i,r.timestamp=Date.now(),r.zu=e,r.Jf=Xl(i),r.Be=null,e||(t.Pi=r.copy()),Ci=null,r}function Qd(t,i,n,e){var r=t.xd;t.xd=t.Rb,t.Rb=r;var o=null;return r.g=t,n!==null?((o=q.document.elementFromPoint(n.clientX,n.clientY))&&o.aa?o=o.aa:(n=i.targetTouches!==void 0?i.targetTouches[0]:i,o=t),r.Jf=o,Kh(t,n,r)):t.xd!==null?(r.ea=t.xd.ea,r.Ce=t.xd.Ce,r.Jf=t.xd.Jf):t.Pi!==null&&(r.ea=t.Pi.ea,r.Ce=t.Pi.Ce,r.Jf=t.Pi.Jf),r.button=0,r.buttons=1,t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),r.md=t,r.Hk=!1,r.up=!1,r.te=1,r.pi=0,r.vc=!1,r.bubbles=!1,r.event=i,r.timestamp=Date.now(),r.zu=e,r.Be=null,r}function Yr(t,i){return t.bubbles?!0:(i.stopPropagation!==void 0&&i.stopPropagation(),i.preventDefault(),i.cancelBubble=!0,!1)}x.prototype.HI=function(t){if(!this.aa.isEnabled)return!1;var i=this.aa.Rb;switch(Hh(this.aa,this.aa,t,i,!1),i.key=String.fromCharCode(t.which),i.Hk=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return this.aa.doKeyDown(),Yr(i,t)},x.prototype.II=function(t){if(!this.aa.isEnabled)return!1;var i=this.aa.Rb;switch(Hh(this.aa,this.aa,t,i,!1),i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return this.aa.doKeyUp(),Yr(i,t)},x.prototype.Nr=function(t){var n=this.zb;if(n===null)return new F(0,0);var e=this.Db,i=this.Cb,n=n.getBoundingClientRect(),e=t.clientX-e/n.width*n.left;return t=t.clientY-i/n.height*n.top,this.jd!==null?(t=new F(e,t),pn(t,this.jd),t):new F(e,t)};function Kh(t,i,n){var e=t.zb,r=t.Db,o=t.Cb,h=0,l=0;e!==null&&(e=e.getBoundingClientRect(),h=i.clientX-r/e.width*e.left,l=i.clientY-o/e.height*e.top),n.Ce.m(h,l),t.jd!==null?(i=s.wb(h,l),t.jd.xh(i),n.ea.assign(i),s.v(i)):n.ea.m(h,l)}function Xd(t,i,n,e){var r=null;if(i.targetTouches!==void 0){if(2>i.targetTouches.length)return;r=i.targetTouches[n]}else if(t.lp[0]!==null)r=t.lp[n];else return;n=t.zb,i=t.Db,t=t.Cb;var o=0,h=0;n!==null&&r!==null&&(n=n.getBoundingClientRect(),o=r.clientX-i/n.width*n.left,h=r.clientY-t/n.height*n.top),e.m(o,h)}x.prototype.invalidateDocumentBounds=x.prototype.Gc=function(){this.ck||(this.ck=!0,this.ye(!0))};function Wd(t){t.$d||te(t),t.ck&&_l(t,t.computeBounds())}x.prototype.redraw=x.prototype.yq=function(){this.Wc||this.$d||(this.oa(),eh(this),ds(this),this.Gc(),this.dg())},x.prototype.isUpdateRequested=function(){return this.Tf},x.prototype.delayInitialization=function(t){t===void 0&&(t=null);var i=this.Ka,n=i.isEnabled;i.Jh(),i.isEnabled=!1,Wl(this),this.eh=!1,i.isEnabled=n,t!==null&&s.setTimeout(t,1)},x.prototype.requestUpdate=x.prototype.ye=function(t){if(t===void 0&&(t=!1),this.Tf!==!0&&!(this.Wc||t===!1&&this.$d)){this.Tf=!0;var i=this;requestAnimationFrame(function(){i.Tf&&i.dg()})}},x.prototype.maybeUpdate=x.prototype.dg=function(){(!this.Lo||this.Tf)&&(this.Lo&&(this.Lo=!1),Wl(this))};function Fa(t,i){t.Ka.Qe||t.Wc||!t.Jm||fy(t)||(i&&te(t),Jr(t,!1))}function Wl(t,i){if(!t.$d&&(t.Tf=!1,t.Ob!==null)){t.$d=!0;var n=t.Ka,e=t.Mz;if(!n.Wo&&e.length!==0){for(var r=e.n,o=r.length,h=0;h<o;h++){var l=r[h];ne(l,!1),l.I()}e.clear()}e=t.fD,0<e.count&&(e.each(function(u){u.XB()}),e.clear()),r=e=!1,n.Qe&&(r=!0,e=t.gb,t.gb=!0),n.sc||sy(t),Fa(t,!1),t.td!==null&&(t.td.visible&&!t.Rv&&(Yo(t),t.Rv=!0),!t.td.visible&&t.Rv&&(t.Rv=!1)),te(t),o=!1,(!t.eh||t.Pj)&&(t.eh?gg(t,!t.Go):(t.Ib("Initial Layout"),n.isEnabled===!1&&n.Jh(),gg(t,!1)),o=!0),t.Go=!1,te(t),t.Vz||n.Qe||Wd(t),Fa(t,!0),o&&(t.eh||Fx(t),t.Aa("LayoutCompleted")),te(t),o&&!t.eh&&(t.eh=!0,t.Yc("Initial Layout"),t.gb||t.ja.clear(),s.setTimeout(function(){t.ri=!1},1)),$d(t),Ed(n),i||t.ve(t.hf),r&&(t.gb=e),t.$d=!1}}s.u(x,{Ln:null},function(){return this.eh});function Fx(t){var i=t.dc.n;if(t.If(i,i.length,t),t.wl!==je?t.scale=Ca(t,t.wl):t.Bm!==je?t.scale=Ca(t,t.Bm):(i=t.vI,isFinite(i)&&0<i&&(t.scale=i)),i=t.uI,i.H())t.position=i;else{i=s.K(),i.bo(t.Nd,t.tI);var n=t.sb,n=s.lg(0,0,n.width,n.height),e=s.K();e.bo(n,t.wI),e.m(i.x-e.x,i.y-e.y),t.position=e,s.Bb(n),s.v(e),s.v(i),eh(t),Fa(t,!0),Jr(t,!0)}t.Aa("InitialLayoutCompleted"),Yo(t)}function te(t){if((t.$d||!t.Ka.Qe)&&t.vg.count!==0){for(var i=0;23>i;i++){var n=t.vg.i;if(n===null||t.vg.count===0)break;t.vg=new R(L),t.XB(n,t.vg)}t.ig.each(function(e){e instanceof Z&&(e.ya&65536)!==0&&(e.ya^=65536)})}}x.prototype.XB=function(t,i){for(t.reset();t.next();){var n=t.value;!n.he()||n instanceof Z||(n.km()?(Gt(n,1/0,1/0),n.jc()):i.add(n))}for(t.reset();t.next();)n=t.value,n instanceof Z&&n.isVisible()&&ly(this,n);for(t.reset();t.next();)n=t.value,n instanceof S&&n.isVisible()&&(n.km()?(Gt(n,1/0,1/0),n.jc()):i.add(n));for(t.reset();t.next();)n=t.value,n instanceof vt&&n.isVisible()&&(n.km()?(Gt(n,1/0,1/0),n.jc()):i.add(n))};function ly(t,i){for(var n=s.Za(),e=s.Za(),r=i.hc;r.next();){var o=r.value;o.isVisible()&&(o instanceof Z?(xs(o)||$e(o)||ws(o))&&ly(t,o):o instanceof S?o.V===i||o.Z===i?e.push(o):n.push(o):(Gt(o,1/0,1/0),o.jc()))}for(var r=n.length,h=0;h<r;h++)o=n[h],Gt(o,1/0,1/0),o.jc();for(s.ra(n),Gt(i,1/0,1/0),i.jc(),r=e.length,h=0;h<r;h++)o=e[h],Gt(o,1/0,1/0),o.jc();s.ra(e)}x.prototype.If=function(t,i,n,e){var r=this.Ka;if(this.xl||r.Qe)for(r=0;r<i;r++)t[r].If(n,e)},x.prototype.ve=function(t,i){i===void 0&&(i=null),this.Ob===null&&s.k("No div specified");var n=this.zb;n===null&&s.k("No canvas specified");var e=this.Ka;if(!e.sc&&(La(this),this.Ob.style.opacity!=="0")){var r=t!==this.hf,o=this.dc.n,l=o.length,h=this;if(this.If(o,l,h),r)t.Ke(!0),ds(this);else if(!this.Fe&&i===null&&!e.dk)return;var l=this.ab,u=this.rb,f=Math.round(l.x*u)/u,a=Math.round(l.y*u)/u,e=this.jd;for(e.reset(),u!==1&&e.scale(u),l.x===0&&l.y===0||e.translate(-f,-a),u=this.wd,s.Jn?(n.width=n.width,t.Ke(!0),t.scale(u,u)):(t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.clearRect(0,0,this.Db,this.Cb)),t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=i!==null?function(y){var c=i;if(y.visible&&y.Dc!==0){var v=y.xb.n,d=v.length;if(d!==0){y.Dc!==1&&(t.globalAlpha=y.Dc),y=y.Qs,y.length=0;for(var g=h.scale,m=0;m<d;m++){var w=v[m];if(To(w)&&!c.contains(w)){if(w instanceof S){var M=w;if(M.ac&&y.push(M),M.Mf===!1)continue}M=w.U,1<M.width*g||1<M.height*g?w.ve(t,h):Sf(w,t)}}t.globalAlpha=1}}}:function(y){y.ve(t,h)},uy(this,t),l=o.length,f=0;f<l;f++)t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n(o[f]);this.vl?this.vl.xm(this)&&this.Lv():this.Nr=function(){return new F(0,0)},r?(this.hf.Ke(!0),ds(this)):this.Fe=this.xl=!1}};function Dx(t,i,n,e,r){t.Ob===null&&s.k("No div specified");var o=t.zb;if(o===null&&s.k("No canvas specified"),!t.Ka.sc){var h=t.hf;if(t.Fe){La(t);var l=t.wd;s.Jn?(o.width=o.width,h.Ke(!0)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,t.Db*l,t.Cb*l)),h.yy(!1),h.drawImage(t.lz.Od,0<e?0:Math.round(-e),0<r?0:Math.round(-r)),r=t.ab;var o=t.rb,u=Math.round(r.x*o)/o,f=Math.round(r.y*o)/o;for(e=t.jd,e.reset(),o!==1&&e.scale(o),r.x===0&&r.y===0||e.translate(-u,-f),h.save(),h.beginPath(),r=n.length,o=0;o<r;o++)u=n[o],u.width!==0&&u.height!==0&&h.rect(Math.floor(u.x),Math.floor(u.y),Math.ceil(u.width),Math.ceil(u.height));for(h.clip(),h.setTransform(1,0,0,1,0,0),h.scale(l,l),h.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.dc.n,r=n.length,t.If(n,r,t),uy(t,h),o=0;o<r;o++)Sx(n[o],h,t,i);h.restore(),h.Ke(!0),t.vl?t.vl.xm(t)&&t.Lv():t.Nr=function(){return new F(0,0)},t.xl=!1,t.Fe=!1,t.my()}}}function Da(t,i,n,e,r,o,h,l,u,f){t.Ob===null&&s.k("No div specified"),t.zb===null&&s.k("No canvas specified"),h===void 0&&(h=null),l===void 0&&(l=null),u===void 0&&(u=!1),f===void 0&&(f=!1),La(t),t.hf.Ke(!0),ds(t),t.Km=!0;var a=t.rb;t.rb=r;var p=t.dc.n,y=p.length;try{var c=new O(o.x,o.y,e.width/r,e.height/r),v=c.copy();v.bx(n),Yo(t,v),te(t),t.If(p,y,t,c);var d=t.wd;i.setTransform(1,0,0,1,0,0),i.scale(d,d),i.clearRect(0,0,e.width,e.height),l!==null&&l!==""&&(i.fillStyle=l,i.fillRect(0,0,e.width,e.height));var g=s.Wg();g.reset(),g.translate(n.left,n.top),g.scale(r),o.x===0&&o.y===0||g.translate(-o.x,-o.y),i.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),s.cf(g),uy(t,i);var m;if(h!==null){var w=new R(L),M=h.i;for(M.reset();M.next();){var k=M.value;f===!1&&k.layer.name==="Grid"||k===null||w.add(k)}m=function(G){var H=u;if(G.visible&&G.Dc!==0&&(H===void 0&&(H=!0),H||!G.Hc)){var H=G.xb.n,U=H.length;if(U!==0){G.Dc!==1&&(i.globalAlpha=G.Dc),G=G.Qs,G.length=0;for(var X=t.scale,_=0;_<U;_++){var Mt=H[_];if(To(Mt)&&w.contains(Mt)){if(Mt instanceof S){var Ft=Mt;if(Ft.ac&&G.push(Ft),Ft.Mf===!1)continue}Ft=Mt.U,1<Ft.width*X||1<Ft.height*X?Mt.ve(i,t):Sf(Mt,i)}}i.globalAlpha=1}}}}else if(!u&&f){var D=t.Hn.W,C=D.layer;m=function(G){G===C?D.ve(i,t):G.ve(i,t,u)}}else m=function(G){G.ve(i,t,u)};for(n=0;n<y;n++)m(p[n]);t.Km=!1,t.vl?t.vl.xm(t)&&t.Lv():t.Nr=function(){return new F(0,0)}}finally{t.rb=a,t.hf.Ke(!0),ds(t),t.If(p,y,t),Yo(t)}}x.prototype.getRenderingHint=x.prototype.Ok=function(t){return this.qk[t]},x.prototype.setRenderingHint=x.prototype.KJ=function(t,i){this.qk[t]=i,this.yq()},x.prototype.resetRenderingHints=x.prototype.hG=function(){this.qk=new Pi,this.qk.drawShadows=!0,this.qk.textGreeking=!0,this.qk.viewportOptimizations=!(s.EF||s.hq||s.iq),this.qk.temporaryPixelRatio=!0,this.qk.pictureRatioOptimization=!0};function uy(t,i){var n=t.qk;n!==null&&(n.imageSmoothingEnabled!==void 0&&i.yy(!!n.imageSmoothingEnabled),n=n.defaultFont,n!=null&&(i.font=n))}x.prototype.getInputOption=x.prototype.nu=function(t){return this.To[t]},x.prototype.setInputOption=function(t,i){this.To[t]=i},x.prototype.resetInputOptions=x.prototype.gG=function(){this.To=new Pi,this.To.extraTouchArea=10,this.To.extraTouchThreshold=10,this.To.hasGestureZoom=!0},x.prototype.setProperties=function(t){s.$u(this,t)};function $d(t){if(t.ja.wi===0&&t.ql.count!==0){for(;0<t.ql.count;){var i=t.ql;for(t.ql=new tt(S,O),i=i.i;i.next();){var n=i.key;yp(n,i.value),n.fe()}}t.oa()}}x.prototype.oa=function(t){if(t===void 0&&(t=null),t===null)this.Fe=!0,this.ye();else{var i=this.sb;t!==null&&t.H()&&i.$f(t)&&(this.Fe=!0,this.ye())}for(i=this.zw.i;i.next();)i.value.oa(t)},x.prototype.yF=function(t,i){if(this.Fe!==!0){this.Fe=!0;var n=this.Ok("temporaryPixelRatio")===!0;if(this.Ok("viewportOptimizations")===!0&&this.uy!==og&&this.ty.Bx(0,0,0,0)&&i.width===t.width&&i.height===t.height){var e=this.scale,r=s.vf(),o=Math.max(t.x,i.x),h=Math.max(t.y,i.y),l=Math.min(t.x+t.width,i.x+i.width),u=Math.min(t.y+t.height,i.y+i.height);if(r.x=o,r.y=h,r.width=Math.max(0,l-o)*e,r.height=Math.max(0,u-h)*e,0<r.width&&0<r.height){if(!this.$d&&(this.Tf=!1,this.Ob!==null)){this.$d=!0,$d(this),this.Nd.H()||_l(this,this.computeBounds());var f=this.zb;if(f!==null){var a=this.wd,h=this.Db*a,l=this.Cb*a,o=this.scale*a,e=Math.round(Math.round(i.x*o)-Math.round(t.x*o)),o=Math.round(Math.round(i.y*o)-Math.round(t.y*o)),u=this.lz,c=this.YC;u.width!==h&&(u.width=h),u.height!==l&&(u.height=l),c.clearRect(0,0,h,l);var u=190*this.wd,p=70*this.wd,g=Math.max(e,0),y=Math.max(o,0),v=Math.floor(h-g),m=Math.floor(l-y);c.yy(!1),c.drawImage(f.Od,g,y,v,m,0,0,v,m),this.vl.xm(this)&&c.clearRect(0,0,u,p);var f=s.Za(),c=s.Za(),m=Math.abs(e),v=Math.abs(o),d=g===0?0:h-m,g=s.wb(d,0),m=s.wb(m+d,l);c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y)));var w=this.jd;w.reset(),w.scale(a,a),this.rb!==1&&w.scale(this.rb),a=this.ab,(a.x!==0||a.y!==0)&&isFinite(a.x)&&isFinite(a.y)&&w.translate(-a.x,-a.y),pn(g,w),pn(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),d=y===0?0:l-v,g.m(0,d),m.m(h,v+d),c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),pn(g,w),pn(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),this.vl.xm(this)&&(h=0<e?0:-e,l=0<o?0:-o,g.m(h,l),m.m(u+h,p+l),c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),pn(g,w),pn(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y)))),s.v(g),s.v(m),Fa(this,!1),Dx(this,f,c,e,o),s.ra(f),s.ra(c),this.$d=!1}}}else this.dg();s.Bb(r),n&&(this.uk=1,this.dg(),this.uk=null,this.my())}else n?(this.uk=1,this.dg(),this.uk=null,this.my()):this.dg()}};function eh(t){t.Jm===!1&&(t.Jm=!0)}function ds(t){t.xl===!1&&(t.xl=!0)}function La(t){t.Wr!==!1&&(t.Wr=!1,_d(t,t.Db,t.Cb))}function _d(t,i,n){var e=t.zb,o=t.wd,r=i*o,o=n*o;(e.width!==r||e.height!==o)&&(e.width=r,e.height=o,e.style.width=i+"px",e.style.height=n+"px",t.Fe=!0,t.hf.Ke(!0))}function fy(t){var i=t.zb;if(i===null)return!0;var f=t.Ob,n=t.Db,e=t.Cb,r=t.eA.copy();if(!r.H())return!0;var o=!1,h=t.ul?t.zd:0,l=t.bk?t.zd:0,u=f.clientWidth||n+h,f=f.clientHeight||e+l;(u!==n+h||f!==e+l)&&(t.ul=!1,t.bk=!1,l=h=0,t.Db=u,t.Cb=f,o=t.Wr=!0),t.Jm=!1;var M=t.sb,C=t.Nd,y=0,v=0,g=0,w=0,u=M.width,f=M.height,a=t.ty;t.rA.Zc()?(C.width>u&&(y=a.left,v=a.right),C.height>f&&(g=a.top,w=a.bottom)):(y=a.left,v=a.right,g=a.top,w=a.bottom);var a=C.width+y+v,p=C.height+g+w,y=C.x-y,c=M.x,v=C.right+v,d=M.right+h,g=C.y-g,m=M.y,w=C.bottom+w,M=M.bottom+l,k="1px",D="1px",C=t.scale,H=!(a<u+h),G=!(p<f+l);t.uy===Uh&&(H||G)&&(H&&t.NA&&t.re&&(k=1,y+1<c&&(k=Math.max((c-y)*C+t.Db,k)),v>d+1&&(k=Math.max((v-d)*C+t.Db,k)),u+h+1<a&&(k=Math.max((a-u+h)*C+t.Db,k)),k=k.toString()+"px"),G&&t.OA&&t.se&&(D=1,g+1<m&&(D=Math.max((m-g)*C+t.Cb,D)),w>M+1&&(D=Math.max((w-M)*C+t.Cb,D)),f+l+1<p&&(D=Math.max((p-f+l)*C+t.Cb,D)),D=D.toString()+"px"));var H=k!=="1px",U=D!=="1px";if(H&&U||!H&&!U||(G=!(p<f+l),U&&(d-=t.zd),H&&(M-=t.zd),a<u+h||!t.NA||!t.re||(k=1,y+1<c&&(k=Math.max((c-y)*C+t.Db,k)),v>d+1&&(k=Math.max((v-d)*C+t.Db,k)),u+1<a&&(k=Math.max((a-u)*C+t.Db,k)),k=k.toString()+"px"),H=k!=="1px",h=t.Cb,H!==t.bk&&(h=H?t.Cb-t.zd:t.Cb+t.zd),G&&t.OA&&t.se&&(D=1,g+1<m&&(D=Math.max((m-g)*C+h,D)),w>M+1&&(D=Math.max((w-M)*C+h,D)),f+1<p&&(D=Math.max((p-f)*C+h,D)),D=D.toString()+"px"),U=D!=="1px"),t.Fw&&H===t.bk&&U===t.ul)return n===t.Db&&e===t.Cb||t.dg(),!1;if(H!==t.bk&&(t.Cb=k==="1px"?t.Cb+t.zd:Math.max(t.Cb-t.zd,1),o=!0),t.bk=H,t.kt.style.width=k,U!==t.ul&&(t.Db=D==="1px"?t.Db+t.zd:Math.max(t.Db-t.zd,1),o=!0,t.as&&(h=s.K(),U?(i.style.left=t.zd+"px",t.position=h.m(t.ab.x+t.zd/t.scale,t.ab.y)):(i.style.left="0px",t.position=h.m(t.ab.x-t.zd/t.scale,t.ab.y)),s.v(h))),t.ul=U,t.kt.style.height=D,t.Rz=!0,o&&(t.Wr=!0),i=t.Jw,h=i.scrollLeft,t.NA&&t.re&&(u+1<a?h=(t.position.x-y)*C:y+1<c?h=i.scrollWidth-i.clientWidth:v>d+1&&(h=t.position.x*C)),t.as)switch(t.Pz){case"negative":h=-(i.scrollWidth-h-i.clientWidth);break;case"reverse":h=i.scrollWidth-h-i.clientWidth}return i.scrollLeft=h,t.OA&&t.se&&(f+1<p?i.scrollTop=(t.position.y-g)*C:g+1<m?i.scrollTop=i.scrollHeight-i.clientHeight:w>M+1&&(i.scrollTop=t.position.y*C)),u=t.Db,f=t.Cb,i.style.width=u+(t.ul?t.zd:0)+"px",i.style.height=f+(t.bk?t.zd:0)+"px",n!==u||e!==f||t.Ka.sc?(M=t.sb,t.Pu(r,M,C,t.scale,o),!1):!0}x.prototype.add=x.prototype.add=function(t){s.G(t,L,x,"add:part");var i=t.g;if(i!==this){i!==null&&s.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+i.toString()),this.Sq&&(t.Bl="Tool");var n=t.bg,i=this.cu(n);i===null&&(i=this.cu("")),i===null&&s.k('Cannot add a Part when unable find a Layer named "'+n+'" and there is no default Layer'),t.layer!==i&&(n=i.eq(99999999,t,t.g===this),0<=n&&this.bd(Li,"parts",i,null,t,null,n),i.Hc||this.Gc(),t.J(au),n=t.Tx,n!==null&&n(t,null,i))}},x.prototype.eq=function(t){if(t instanceof I){if(this.ip.add(t),t instanceof Z){var i=t.Ca;i===null?this.Nl.add(t):i.fp.add(t),i=t.Ub,i!==null&&(i.g=this)}}else t instanceof S?this.bp.add(t):t instanceof vt||this.xb.add(t);var n=this;lh(t,function(e){hg(n,e)}),(t instanceof vt||t instanceof Z&&t.Lb!==null)&&t.I(),i=t.data,i!==null&&(t instanceof vt||(t instanceof S?this.Sj.add(i,t):this.Ii.add(i,t)),lh(t,function(e){dy(n,e)})),$e(t)!==!0&&ws(t)!==!0||this.vg.add(t),g1(t,!0,this),x1(t)?(t.U.H()&&this.oa(Wh(t,t.U)),this.Gc()):t.isVisible()&&t.U.H()&&this.oa(Wh(t,t.U)),this.ye()},x.prototype.rf=function(t){if(t.Ut(),t instanceof I){if(this.ip.remove(t),t instanceof Z){var i=t.Ca;i===null?this.Nl.remove(t):i.fp.remove(t),i=t.Ub,i!==null&&(i.g=null)}}else t instanceof S?this.bp.remove(t):t instanceof vt||this.xb.remove(t);var n=this;lh(t,function(e){lg(n,e)}),i=t.data,i!==null&&(t instanceof vt||(t instanceof S?this.Sj.remove(i):this.Ii.remove(i)),lh(t,function(e){gy(n,e)})),this.vg.remove(t),x1(t)?(t.U.H()&&this.oa(Wh(t,t.U)),this.Gc()):t.isVisible()&&t.U.H()&&this.oa(Wh(t,t.U)),this.ye()},x.prototype.remove=x.prototype.remove=function(t){s.G(t,L,x,"remove:part"),ay(this,t,!0)};function ay(t,i,n){var e=i.layer;e!==null&&e.g===t&&(i.jb=!1,i.Og=!1,i.J(pu),n&&i.An(),n=e.rf(-1,i,!1),0<=n&&t.bd(Ai,"parts",e,i,null,n,null),t=i.Tx,t!==null&&t(i,e,null))}x.prototype.removeParts=x.prototype.vB=function(t,i){if(s.isArray(t))for(var n=s.cb(t),e=0;e<n;e++){var r=s.Ba(t,e);i&&!r.canDelete()||this.remove(r)}else for(r=new R(L),r.Pc(t),n=r.i;n.next();)r=n.value,i&&!r.canDelete()||this.remove(r)},x.prototype.copyParts=x.prototype.Tp=function(t,i,n){return this.pb.Tp(t,i,n)},x.prototype.moveParts=x.prototype.moveParts=function(t,i,n){s.G(i,F,x,"moveParts:offset");var e=this.Va;if(e!==null){e=e.ce,e===null&&(e=new dt,e.Tc(this));var r=new tt(L);if(t!==null)t=t.i;else{for(t=this.Hj;t.next();)bs(e,r,t.value,n);for(t=this.ig;t.next();)bs(e,r,t.value,n);t=this.links}for(;t.next();)bs(e,r,t.value,n);e.moveParts(r,i,n)}};function py(t,i,n){if(s.G(i,ct,x,"addLayer:layer"),i.g!==null&&i.g!==t&&s.k("Cannot share a Layer with another Diagram: "+i+" of "+i.g),n===null?i.g!==null&&s.k("Cannot add an existing Layer to this Diagram again: "+i):(s.G(n,ct,x,"addLayer:existingLayer"),n.g!==t&&s.k("Existing Layer must be in this Diagram: "+n+" not in "+n.g),i===n&&s.k("Cannot move a Layer before or after itself: "+i)),i.g!==t){i=i.name,t=t.dc,n=t.count;for(var e=0;e<n;e++)t.fa(e).name===i&&s.k("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}}x.prototype.addLayer=x.prototype.Nt=function(t){py(this,t,null),t.Tc(this);var i=this.dc,n=i.count-1;if(!t.Hc)for(;0<=n&&i.fa(n).Hc;)n--;i.Rd(n+1,t),this.qe!==null&&this.bd(Li,"layers",this,null,t,null,n+1),this.oa(),this.Gc()},x.prototype.addLayerBefore=x.prototype.nH=function(t,i){py(this,t,i),t.Tc(this);var n=this.dc,e=n.indexOf(t);0<=e&&(n.remove(t),this.qe!==null&&this.bd(Ai,"layers",this,t,null,e,null));for(var r=n.count,o=0;o<r;o++)if(n.fa(o)===i){n.Rd(o,t);break}this.qe!==null&&this.bd(Li,"layers",this,null,t,null,o),this.oa(),0>e&&this.Gc()},x.prototype.addLayerAfter=function(t,i){py(this,t,i),t.Tc(this);var n=this.dc,e=n.indexOf(t);0<=e&&(n.remove(t),this.qe!==null&&this.bd(Ai,"layers",this,t,null,e,null));for(var r=n.count,o=0;o<r;o++)if(n.fa(o)===i){n.Rd(o+1,t);break}this.qe!==null&&this.bd(Li,"layers",this,null,t,null,o+1),this.oa(),0>e&&this.Gc()},x.prototype.removeLayer=function(t){if(s.G(t,ct,x,"removeLayer:layer"),t.g!==this&&s.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),t.name!==""){var i=this.dc,n=i.indexOf(t);if(i.remove(t)){for(i=t.xb.copy().i;i.next();){var e=i.value,r=e.bg;e.bg=r!==t.name?r:""}this.qe!==null&&this.bd(Ai,"layers",this,t,null,n,null),this.oa(),this.Gc()}}},x.prototype.findLayer=x.prototype.cu=function(t){for(var i=this.Ux;i.next();){var n=i.value;if(n.name===t)return n}return null},x.prototype.addModelChangedListener=x.prototype.pH=function(t){s.j(t,"function",x,"addModelChangedListener:listener"),this.jh===null&&(this.jh=new z("function")),this.jh.add(t),this.$.nn(t)},x.prototype.removeModelChangedListener=function(t){s.j(t,"function",x,"removeModelChangedListener:listener"),this.jh!==null&&(this.jh.remove(t),this.jh.count===0&&(this.jh=null)),this.$.Su(t)},x.prototype.addChangedListener=x.prototype.nn=function(t){s.j(t,"function",x,"addChangedListener:listener"),this.Di===null&&(this.Di=new z("function")),this.Di.add(t)},x.prototype.removeChangedListener=x.prototype.Su=function(t){s.j(t,"function",x,"removeChangedListener:listener"),this.Di!==null&&(this.Di.remove(t),this.Di.count===0&&(this.Di=null))},x.prototype.mx=function(t){if(this.gb||this.ja.tF(t),t.Fc!==Fr&&(this.ri=!0),this.Di!==null)for(var i=this.Di,n=i.length,e=0;e<n;e++)i.fa(e)(t)},x.prototype.raiseChangedEvent=x.prototype.bd=function(t,i,n,e,r,o,h){o===void 0&&(o=null),h===void 0&&(h=null);var l=new Et;l.g=this,l.Fc=t,l.propertyName=i,l.object=n,l.oldValue=e,l.Gj=o,l.newValue=r,l.Fj=h,this.mx(l)},x.prototype.raiseChanged=x.prototype.h=function(t,i,n,e,r){this.bd(Yt,t,this,i,n,e,r)},s.u(x,{Ka:"animationManager"},function(){return this.lC}),s.u(x,{ja:"undoManager"},function(){return this.qe.ja}),s.defineProperty(x,{gb:"skipsUndoManager"},function(){return this.ij},function(t){s.j(t,"boolean",x,"skipsUndoManager"),this.ij=t,this.qe.ij=t}),s.defineProperty(x,{zA:"delaysLayout"},function(){return this.gz},function(t){this.gz=t}),x.prototype.sn=function(t,i){if(t!==null&&t.g===this){var n=this.Se;try{this.Se=!0;var e=t.Fc,r;if(e===Yt){var o=t.object,h=t.propertyName,l=t.ka(i);if(s.Ma(o,h,l),o instanceof N){var u,f=o.W;f!==null&&f.Sd()}this.ri=!0}else if(e===Li){var a=t.object,p=t.Fj,o=t.newValue;if(a instanceof A){if(typeof p=="number"&&o instanceof N){u=o;var y=a;i?y.rf(p):y.Rd(p,u),f=a.W,f!==null&&f.Sd()}else if(typeof p=="number"&&o instanceof Nt){var c=o,y=a;i?c.xe?y.fG(p):y.dG(p):(r=c.xe?y.ee(c.index):y.de(c.index),r.Sp(c))}}else if(a instanceof ct){var v=t.Gj===!0;if(typeof p=="number"&&o instanceof L){var f=o,d=a;i?(f.jb=!1,f.Og=!1,f.Sd(),d.rf(v?p:-1,f,v)):d.eq(p,f,v)}}else if(a instanceof x){if(typeof p=="number"&&o instanceof ct){var g=o;i?this.dc.cd(p):(e=g,e.Tc(this),this.dc.Rd(p,e))}}else s.k("unknown ChangedEvent.Insert object: "+t.toString());this.ri=!0}else e===Ai?(a=t.object,p=t.Gj,o=t.oldValue,a instanceof A?typeof p=="number"&&o instanceof N?(y=a,i?y.Rd(p,o):y.rf(p)):typeof p=="number"&&o instanceof Nt&&(c=o,y=a,i?(r=c.xe?y.ee(c.index):y.de(c.index),r.Sp(c)):c.xe?y.fG(p):y.dG(p)):a instanceof ct?(v=t.Fj===!0,typeof p=="number"&&o instanceof L&&(f=o,d=a,i?0>d.xb.indexOf(f)&&d.eq(p,f,v):(f.jb=!1,f.Og=!1,f.Sd(),d.rf(v?p:-1,f,v)))):a instanceof x?typeof p=="number"&&o instanceof ct&&(g=o,i?(e=g,e.Tc(this),this.dc.Rd(p,e)):this.dc.cd(p)):s.k("unknown ChangedEvent.Remove object: "+t.toString()),this.ri=!0):e!==Fr&&s.k("unknown ChangedEvent: "+t.toString())}finally{this.Se=n}}},x.prototype.startTransaction=x.prototype.Ib=function(t){return this.ja.Ib(t)},x.prototype.commitTransaction=x.prototype.Yc=function(t){return this.ja.Yc(t)},x.prototype.rollbackTransaction=x.prototype.om=function(){return this.ja.om()},x.prototype.commit=x.prototype.commit=function(t,i){var n=i;n===void 0&&(n="");var e=this.gb;n===null&&(this.gb=!0,n=""),this.ja.Ib(n);var r=!1;try{t(this),r=!0}finally{r?this.ja.Yc(n):this.ja.om(),this.gb=e}},x.prototype.updateAllTargetBindings=x.prototype.LG=function(t){t===void 0&&(t="");for(var i=this.Hj;i.next();)i.value.Jb(t);for(i=this.ig;i.next();)i.value.Jb(t);for(i=this.links;i.next();)i.value.Jb(t)},x.prototype.updateAllRelationshipsFromData=x.prototype.aK=function(){for(var t=this.$,i=new R,n=t.Pg,e=0;e<n.length;e++){var r=n[e];i.add(r)}var o=[];for(this.ig.each(function(f){f.data===null||i.contains(f.data)||o.push(f.data)}),this.Hj.each(function(f){f.data===null||i.contains(f.data)||o.push(f.data)}),o.forEach(function(f){nd(t,f,!1)}),e=0;e<n.length;e++){var r=n[e],h=this.wh(r);h===null&&id(t,r,!1)}if(t instanceof K){for(var l=new R,n=t.Bh,e=0;e<n.length;e++)r=n[e],l.add(r);var u=[];for(this.links.each(function(f){f.data===null||l.contains(f.data)||u.push(f.data)}),u.forEach(function(f){rd(t,f,!1)}),e=0;e<n.length;e++)r=n[e],h=this.Yf(r),h===null&&ed(t,r,!1)}for(e=this.Hj;e.next();)h=e.value,h.updateRelationshipsFromData();for(e=this.ig;e.next();)e.value.updateRelationshipsFromData();for(e=this.links;e.next();)h=e.value,h.updateRelationshipsFromData()};function bd(t,i,n){if(t.Wc||t.$d)t.rb=n,n=t.Ka,n.sc&&Vd(n,i,t.rb);else if(t.Wc=!0,t.zb===null)t.rb=n;else{var e=t.sb.copy(),r=t.Db,o=t.Cb;e.width=t.Db/i,e.height=t.Cb/i;var h=t.zi.x,l=t.zi.y,u=t.rA;isNaN(h)&&(u.zj()?u.xj(Il)?h=0:u.xj(Bl)&&(h=r-1):h=u.Zc()?u.x*(r-1):r/2),isNaN(l)&&(u.zj()?u.xj(Al)?l=0:u.xj(zl)&&(l=o-1):l=u.Zc()?u.y*(o-1):o/2),t.mG!==null&&(n=t.mG(t,n)),n<t.Dh&&(n=t.Dh),n>t.Ch&&(n=t.Ch),r=s.wb(t.ab.x+h/i-h/n,t.ab.y+l/i-l/n),t.position=r,s.v(r),t.rb=n,t.Pu(e,t.sb,i,n,!1),t.Wc=!1,Jr(t,!1),n=t.Ka,n.sc&&Vd(n,i,t.rb),t.oa(),eh(t)}}x.prototype.Pu=function(t,i,n,e,r){t.L(i)||(r===void 0&&(r=!1),r||eh(this),ds(this),e=this.Ub,e===null||!e.Qx||this.Vl!==je||r||t.width===i.width&&t.height===i.height||e.J(),e=this.Xa,this.fh===!0&&e instanceof pt&&(this.N.ea=this.UB(this.N.Ce),zd(e,this)),this.Wc||this.yF(t,i),Yo(this),this.ph.scale=n,this.ph.position.x=t.x,this.ph.position.y=t.y,this.ph.bounds.set(t),this.ph.isScroll=r,this.Aa("ViewportBoundsChanged",this.ph,t),this.$A&&this.links.each(function(o){o.hm&&o.U.$f(i)&&o.Tb()}))};function Yo(t,i){i===void 0&&(i=null);var n=t.td;if(n!==null&&n.visible){for(var e=s.vm(),r=1,o=1,h=n.xa.n,l=h.length,u=0;u<l;u++){var f=h[u],a=f.interval;2>a||(Vy(f.Fb)?o=o*a/qv(o,a):r=r*a/qv(r,a))}if(h=n.Jx,e.m(o*h.width,r*h.height),h=o=u=l=0,i!==null)l=i.width,u=i.height,o=i.x,h=i.y;else{for(r=s.vf(),o=t.sb,r.m(o.x,o.y,o.width,o.height),h=t.zw.i;h.next();)o=h.value.sb,o.H()&&yn(r,o.x,o.y,o.width,o.height);if(!r.H()){s.Bb(r);return}l=r.width,u=r.height,o=r.x,h=r.y,s.Bb(r)}n.width=l+2*e.width,n.height=u+2*e.height,r=s.K(),ef(o,h,0,0,e.width,e.height,r),r.offset(-e.width,-e.height),s.Lk(e),n.W.location=r,s.v(r)}}x.prototype.clearSelection=x.prototype.oA=function(){var t=0<this.selection.count;t&&this.Aa("ChangingSelection"),pf(this),t&&this.Aa("ChangedSelection")};function pf(t){if(t=t.selection,0<t.count){for(var i=t.yc(),n=i.length,e=0;e<n;e++)i[e].jb=!1;t.Qa(),t.clear(),t.freeze()}}x.prototype.select=x.prototype.select=function(t){t!==null&&(s.G(t,L,x,"select:part"),t.layer.g===this&&(!t.jb||1<this.selection.count)&&(this.Aa("ChangingSelection"),pf(this),t.jb=!0,this.Aa("ChangedSelection")))},x.prototype.selectCollection=x.prototype.qG=function(t){if(this.Aa("ChangingSelection"),pf(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);e instanceof L||s.k("Diagram.selectCollection given something that is not a Part: "+e),e.jb=!0}else for(t=t.i;t.next();)e=t.value,e instanceof L||s.k("Diagram.selectCollection given something that is not a Part: "+e),e.jb=!0;this.Aa("ChangedSelection")},x.prototype.clearHighlighteds=x.prototype.wH=function(){var t=this.gm;if(0<t.count){for(var i=t.yc(),n=i.length,e=0;e<n;e++)i[e].Og=!1;t.Qa(),t.clear(),t.freeze()}},x.prototype.highlight=function(t){t!==null&&t.layer.g===this&&(s.G(t,L,x,"highlight:part"),!t.Og||1<this.gm.count)&&(this.wH(),t.Og=!0)},x.prototype.highlightCollection=function(t){for(var i=new R(L).Pc(t),n=this.gm.copy().oy(i).i;n.next();)t=n.value,t.Og=!1;for(i=i.i;i.next();)t=i.value,t instanceof L||s.k("Diagram.highlightCollection given something that is not a Part: "+t),t.Og=!0},x.prototype.scroll=x.prototype.scroll=function(t,i,n){n===void 0&&(n=1);var e=i==="up"||i==="down",r=0;if(t==="pixel")r=n;else if(t==="line")r=n*(e?this.Zu:this.Yu);else if(t==="page")t=e?this.sb.height:this.sb.width,t*=this.scale,t!==0&&(r=Math.max(t-(e?this.Zu:this.Yu),0),r*=n);else{if(t==="document"){r=this.Nd,e=this.sb,n=s.K(),i==="up"?this.position=n.m(e.x,r.y):i==="left"?this.position=n.m(r.x,e.y):i==="down"?this.position=n.m(e.x,r.bottom-e.height):i==="right"&&(this.position=n.m(r.right-e.width,e.y)),s.v(n);return}s.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,n=this.position.copy(),i==="up"?n.y=this.position.y-r:i==="down"?n.y=this.position.y+r:i==="left"?n.x=this.position.x-r:i==="right"?n.x=this.position.x+r:s.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),this.position=n},x.prototype.scrollToRect=x.prototype.nG=function(t){var i=this.sb;i.Fk(t)||(t=t.Wl,t.x-=i.width/2,t.y-=i.height/2,this.position=t)},x.prototype.centerRect=x.prototype.IE=function(t){var i=this.sb;t=t.Wl,t.x-=i.width/2,t.y-=i.height/2,this.position=t},x.prototype.transformDocToView=x.prototype.Dy=function(t){var i=this.jd;i.reset(),this.rb!==1&&i.scale(this.rb);var n=this.ab;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),t.copy().transform(this.jd)},x.prototype.transformViewToDoc=x.prototype.UB=function(t){var i=this.jd;i.reset(),this.rb!==1&&i.scale(this.rb);var n=this.ab;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),pn(t.copy(),this.jd)};var je;x.None=je=s.p(x,"None",0);var $l;x.Uniform=$l=s.p(x,"Uniform",1);var Aa;x.UniformToFill=Aa=s.p(x,"UniformToFill",2);var yf;x.CycleAll=yf=s.p(x,"CycleAll",10);var tg;x.CycleNotDirected=tg=s.p(x,"CycleNotDirected",11);var ig;x.CycleNotDirectedFast=ig=s.p(x,"CycleNotDirectedFast",12);var ng;x.CycleNotUndirected=ng=s.p(x,"CycleNotUndirected",13);var eg;x.CycleDestinationTree=eg=s.p(x,"CycleDestinationTree",14);var rg;x.CycleSourceTree=rg=s.p(x,"CycleSourceTree",15);var Uh;x.DocumentScroll=Uh=s.p(x,"DocumentScroll",1);var og;x.InfiniteScroll=og=s.p(x,"InfiniteScroll",2);var rh;x.TreeParentCollapsed=rh=s.p(x,"TreeParentCollapsed",21);var yy;x.AllParentsCollapsed=yy=s.p(x,"AllParentsCollapsed",22);var cy;x.AnyParentsCollapsed=cy=s.p(x,"AnyParentsCollapsed",23),s.defineProperty(x,{bK:"validCycle"},function(){return this.Xw},function(t){var i=this.Xw;i!==t&&(s.ob(t,x,x,"validCycle"),this.Xw=t,this.h("validCycle",i,t))}),s.u(x,{Ux:"layers"},function(){return this.dc.i}),s.defineProperty(x,{Ef:"isModelReadOnly"},function(){var t=this.qe;return t===null?!1:t.ib},function(t){var i=this.qe;i!==null&&(i.ib=t)}),s.defineProperty(x,{ib:"isReadOnly"},function(){return this.Si},function(t){var i=this.Si;i!==t&&(s.j(t,"boolean",x,"isReadOnly"),this.Si=t,this.h("isReadOnly",i,t))}),s.defineProperty(x,{isEnabled:"isEnabled"},function(){return this.jf},function(t){var i=this.jf;i!==t&&(s.j(t,"boolean",x,"isEnabled"),this.jf=t,this.h("isEnabled",i,t))}),s.defineProperty(x,{iA:"allowClipboard"},function(){return this.lv},function(t){var i=this.lv;i!==t&&(s.j(t,"boolean",x,"allowClipboard"),this.lv=t,this.h("allowClipboard",i,t))}),s.defineProperty(x,{Ck:"allowCopy"},function(){return this.$k},function(t){var i=this.$k;i!==t&&(s.j(t,"boolean",x,"allowCopy"),this.$k=t,this.h("allowCopy",i,t))}),s.defineProperty(x,{on:"allowDelete"},function(){return this.al},function(t){var i=this.al;i!==t&&(s.j(t,"boolean",x,"allowDelete"),this.al=t,this.h("allowDelete",i,t))}),s.defineProperty(x,{Rt:"allowDragOut"},function(){return this.mv},function(t){var i=this.mv;i!==t&&(s.j(t,"boolean",x,"allowDragOut"),this.mv=t,this.h("allowDragOut",i,t))}),s.defineProperty(x,{AE:"allowDrop"},function(){return this.nv},function(t){var i=this.nv;i!==t&&(s.j(t,"boolean",x,"allowDrop"),this.nv=t,this.h("allowDrop",i,t))}),s.defineProperty(x,{jx:"allowTextEdit"},function(){return this.jl},function(t){var i=this.jl;i!==t&&(s.j(t,"boolean",x,"allowTextEdit"),this.jl=t,this.h("allowTextEdit",i,t))}),s.defineProperty(x,{gx:"allowGroup"},function(){return this.bl},function(t){var i=this.bl;i!==t&&(s.j(t,"boolean",x,"allowGroup"),this.bl=t,this.h("allowGroup",i,t))}),s.defineProperty(x,{kx:"allowUngroup"},function(){return this.kl},function(t){var i=this.kl;i!==t&&(s.j(t,"boolean",x,"allowUngroup"),this.kl=t,this.h("allowUngroup",i,t))}),s.defineProperty(x,{Kp:"allowInsert"},function(){return this.pv},function(t){var i=this.pv;i!==t&&(s.j(t,"boolean",x,"allowInsert"),this.pv=t,this.h("allowInsert",i,t))}),s.defineProperty(x,{St:"allowLink"},function(){return this.cl},function(t){var i=this.cl;i!==t&&(s.j(t,"boolean",x,"allowLink"),this.cl=t,this.h("allowLink",i,t))}),s.defineProperty(x,{pn:"allowRelink"},function(){return this.el},function(t){var i=this.el;i!==t&&(s.j(t,"boolean",x,"allowRelink"),this.el=t,this.h("allowRelink",i,t))}),s.defineProperty(x,{Tl:"allowMove"},function(){return this.dl},function(t){var i=this.dl;i!==t&&(s.j(t,"boolean",x,"allowMove"),this.dl=t,this.h("allowMove",i,t))}),s.defineProperty(x,{hx:"allowReshape"},function(){return this.fl},function(t){var i=this.fl;i!==t&&(s.j(t,"boolean",x,"allowReshape"),this.fl=t,this.h("allowReshape",i,t))}),s.defineProperty(x,{Tt:"allowResize"},function(){return this.gl},function(t){var i=this.gl;i!==t&&(s.j(t,"boolean",x,"allowResize"),this.gl=t,this.h("allowResize",i,t))}),s.defineProperty(x,{ix:"allowRotate"},function(){return this.hl},function(t){var i=this.hl;i!==t&&(s.j(t,"boolean",x,"allowRotate"),this.hl=t,this.h("allowRotate",i,t))}),s.defineProperty(x,{Bf:"allowSelect"},function(){return this.il},function(t){var i=this.il;i!==t&&(s.j(t,"boolean",x,"allowSelect"),this.il=t,this.h("allowSelect",i,t))}),s.defineProperty(x,{BE:"allowUndo"},function(){return this.qv},function(t){var i=this.qv;i!==t&&(s.j(t,"boolean",x,"allowUndo"),this.qv=t,this.h("allowUndo",i,t))}),s.defineProperty(x,{lx:"allowZoom"},function(){return this.sv},function(t){var i=this.sv;i!==t&&(s.j(t,"boolean",x,"allowZoom"),this.sv=t,this.h("allowZoom",i,t))}),s.defineProperty(x,{OA:"hasVerticalScrollbar"},function(){return this.Vv},function(t){var i=this.Vv;i!==t&&(s.j(t,"boolean",x,"hasVerticalScrollbar"),this.Vv=t,eh(this),this.oa(),this.h("hasVerticalScrollbar",i,t),Jr(this,!1))}),s.defineProperty(x,{NA:"hasHorizontalScrollbar"},function(){return this.Uv},function(t){var i=this.Uv;i!==t&&(s.j(t,"boolean",x,"hasHorizontalScrollbar"),this.Uv=t,eh(this),this.oa(),this.h("hasHorizontalScrollbar",i,t),Jr(this,!1))}),s.defineProperty(x,{re:"allowHorizontalScroll"},function(){return this.ov},function(t){var i=this.ov;i!==t&&(s.j(t,"boolean",x,"allowHorizontalScroll"),this.ov=t,this.h("allowHorizontalScroll",i,t),Jr(this,!1))}),s.defineProperty(x,{se:"allowVerticalScroll"},function(){return this.rv},function(t){var i=this.rv;i!==t&&(s.j(t,"boolean",x,"allowVerticalScroll"),this.rv=t,this.h("allowVerticalScroll",i,t),Jr(this,!1))}),s.defineProperty(x,{Yu:"scrollHorizontalLineChange"},function(){return this.Gw},function(t){var i=this.Gw;i!==t&&(s.j(t,"number",x,"scrollHorizontalLineChange"),0>t&&s.Fa(t,">= 0",x,"scrollHorizontalLineChange"),this.Gw=t,this.h("scrollHorizontalLineChange",i,t))}),s.defineProperty(x,{Zu:"scrollVerticalLineChange"},function(){return this.Kw},function(t){var i=this.Kw;i!==t&&(s.j(t,"number",x,"scrollVerticalLineChange"),0>t&&s.Fa(t,">= 0",x,"scrollVerticalLineChange"),this.Kw=t,this.h("scrollVerticalLineChange",i,t))}),s.defineProperty(x,{N:"lastInput"},function(){return this.Rb},function(t){this.Rb=t}),s.defineProperty(x,{uc:"firstInput"},function(){return this.Pi},function(t){this.Pi=t}),s.defineProperty(x,{kc:"currentCursor"},function(){return this.Cv},function(t){if(t===""&&(t=this.wr),this.Cv!==t){s.j(t,"string",x,"currentCursor");var i=this.zb,n=this.Ob;if(i!==null){this.Cv=t;var e=i.style.cursor;i.style.cursor=t,n.style.cursor=t,i.style.cursor===e&&(i.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,i.style.cursor===e&&(i.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,i.style.cursor===e&&(i.style.cursor=t,n.style.cursor=t)))}}}),s.defineProperty(x,{SK:"defaultCursor"},function(){return this.wr},function(t){t===""&&(t="auto");var i=this.wr;i!==t&&(s.j(t,"string",x,"defaultCursor"),this.wr=t,this.h("defaultCursor",i,t))}),s.defineProperty(x,{click:"click"},function(){return this.Ei},function(t){var i=this.Ei;i!==t&&(t!==null&&s.j(t,"function",x,"click"),this.Ei=t,this.h("click",i,t))}),s.defineProperty(x,{Zt:"doubleClick"},function(){return this.Mi},function(t){var i=this.Mi;i!==t&&(t!==null&&s.j(t,"function",x,"doubleClick"),this.Mi=t,this.h("doubleClick",i,t))}),s.defineProperty(x,{sA:"contextClick"},function(){return this.Gi},function(t){var i=this.Gi;i!==t&&(t!==null&&s.j(t,"function",x,"contextClick"),this.Gi=t,this.h("contextClick",i,t))}),s.defineProperty(x,{kB:"mouseOver"},function(){return this.aj},function(t){var i=this.aj;i!==t&&(t!==null&&s.j(t,"function",x,"mouseOver"),this.aj=t,this.h("mouseOver",i,t))}),s.defineProperty(x,{jB:"mouseHover"},function(){return this.$i},function(t){var i=this.$i;i!==t&&(t!==null&&s.j(t,"function",x,"mouseHover"),this.$i=t,this.h("mouseHover",i,t))}),s.defineProperty(x,{iB:"mouseHold"},function(){return this.Zi},function(t){var i=this.Zi;i!==t&&(t!==null&&s.j(t,"function",x,"mouseHold"),this.Zi=t,this.h("mouseHold",i,t))}),s.defineProperty(x,{dJ:"mouseDragOver"},function(){return this.tw},function(t){var i=this.tw;i!==t&&(t!==null&&s.j(t,"function",x,"mouseDragOver"),this.tw=t,this.h("mouseDragOver",i,t))}),s.defineProperty(x,{hB:"mouseDrop"},function(){return this.Yi},function(t){var i=this.Yi;i!==t&&(t!==null&&s.j(t,"function",x,"mouseDrop"),this.Yi=t,this.h("mouseDrop",i,t))}),s.defineProperty(x,{QB:"toolTip"},function(){return this.jj},function(t){var i=this.jj;i!==t&&(this.jj=t,this.h("toolTip",i,t))}),s.defineProperty(x,{contextMenu:"contextMenu"},function(){return this.Hi},function(t){var i=this.Hi;i!==t&&(this.Hi=t,this.h("contextMenu",i,t))}),s.defineProperty(x,{pb:"commandHandler"},function(){return this.$y},function(t){var i=this.$y;i!==t&&(s.G(t,it,x,"commandHandler"),t.g!==null&&s.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),i!==null&&i.Tc(null),this.$y=t,t.Tc(this))}),s.defineProperty(x,{Va:"toolManager"},function(){return this.$z},function(t){var i=this.$z;i!==t&&(s.G(t,pt,x,"toolManager"),t.g!==null&&s.k("Cannot share ToolManagers between Diagrams: "+t.toString()),i!==null&&i.Tc(null),this.$z=t,t.Tc(this))}),s.defineProperty(x,{Xt:"defaultTool"},function(){return this.fz},function(t){var i=this.fz;i!==t&&(s.G(t,ut,x,"defaultTool"),this.fz=t,this.Xa===i&&(this.Xa=t))}),s.defineProperty(x,{Xa:"currentTool"},function(){return this.cz},function(t){var i=this.cz;i!==null&&(i.ta&&i.doDeactivate(),i.cancelWaitAfter(),i.doStop()),t===null&&(t=this.Xt),t!==null&&(s.G(t,ut,x,"currentTool"),this.cz=t,t.Tc(this),t.doStart())}),s.u(x,{selection:"selection"},function(){return this.Nw}),s.defineProperty(x,{VI:"maxSelectionCount"},function(){return this.pw},function(t){var i=this.pw;if(i!==t)if(s.j(t,"number",x,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.pw=t,this.h("maxSelectionCount",i,t),!this.ja.lb&&(t=this.selection.count-t,0<t)){this.Aa("ChangingSelection");for(var i=this.selection.yc(),n=0;n<t;n++)i[n].jb=!1;this.Aa("ChangedSelection")}}else s.Fa(t,">= 0",x,"maxSelectionCount")}),s.defineProperty(x,{hJ:"nodeSelectionAdornmentTemplate"},function(){return this.uw},function(t){var i=this.uw;i!==t&&(s.G(t,vt,x,"nodeSelectionAdornmentTemplate"),this.uw=t,this.h("nodeSelectionAdornmentTemplate",i,t))}),s.defineProperty(x,{mI:"groupSelectionAdornmentTemplate"},function(){return this.Sv},function(t){var i=this.Sv;i!==t&&(s.G(t,vt,x,"groupSelectionAdornmentTemplate"),this.Sv=t,this.h("groupSelectionAdornmentTemplate",i,t))}),s.defineProperty(x,{OI:"linkSelectionAdornmentTemplate"},function(){return this.kw},function(t){var i=this.kw;i!==t&&(s.G(t,vt,x,"linkSelectionAdornmentTemplate"),this.kw=t,this.h("linkSelectionAdornmentTemplate",i,t))}),s.u(x,{gm:"highlighteds"},function(){return this.Wv}),s.defineProperty(x,{ri:"isModified"},function(){var t=this.ja;return t.isEnabled?t.sj!==null?!0:this.bw&&this.dh!==t.wj:this.bw},function(t){if(this.bw!==t){s.j(t,"boolean",x,"isModified"),this.bw=t;var i=this.ja;!t&&i.isEnabled&&(this.dh=i.wj),t||sg(this)}});function sg(t){var i=t.ri;t.qE!==i&&(t.qE=i,t.Aa("Modified"))}s.defineProperty(x,{$:"model"},function(){return this.qe},function(t){var i=this.qe;if(i!==t){s.G(t,V,x,"model"),this.Xa.doCancel(),i!==null&&i.ja!==t.ja&&i.ja.FF&&s.k("Do not replace a Diagram.model while a transaction is in progress."),Hd(this,!0),this.eh=!1,this.Lo=!0,this.dh=-2,this.Tf=!1;var n=this.$d;this.$d=!0,this.Ka.Zn("Model"),i!==null&&(this.jh!==null&&this.jh.each(function(e){i.Su(e)}),i.Su(this.AD)),this.qe=t,t.nn(this.zD),wy(this,t.Pg),t instanceof K&&My(this,t.Bh),t.Su(this.zD),t.nn(this.AD),this.jh!==null&&this.jh.each(function(e){t.nn(e)}),this.$d=n,this.Wc||this.oa(),i!==null&&(t.ja.isEnabled=i.ja.isEnabled)}}),s.defineProperty(x,{Ua:null},function(){return this.sD},function(t){this.sD=t}),s.u(x,{Yx:null},function(){return this.XG});function Lx(t,i){if(i.$===t.$){var n=i.Fc,e=i.propertyName;if(n===Fr&&e[0]==="S")if(e==="StartingFirstTransaction")n=t.Va,n.gf.each(function(J){J.Tc(t)}),n.eg.each(function(J){J.Tc(t)}),n.fg.each(function(J){J.Tc(t)}),t.$d||t.eh||(t.Go=!0,t.Lo&&(t.Tf=!0));else if(e==="StartingUndo"||e==="StartingRedo"){var r=t.Ka;r.Qe&&!t.gb&&r.Jh(),t.Aa("ChangingSelection")}else e==="StartedTransaction"&&(r=t.Ka,r.Qe&&!t.gb&&r.Jh());else if(t.Ua){t.Ua=!1;try{var o=i.tf;if(o!=="")if(n===Yt){if(o==="linkFromKey"){var h=i.object,l=t.Yf(h);if(l!==null){var u=i.newValue,f=t.Oe(u);l.V=f}}else if(o==="linkToKey")h=i.object,l=t.Yf(h),l!==null&&(u=i.newValue,f=t.Oe(u),l.Z=f);else if(o==="linkFromPortId"){if(h=i.object,l=t.Yf(h),l!==null){var a=i.newValue;typeof a=="string"&&(l.Ng=a)}}else if(o==="linkToPortId")h=i.object,l=t.Yf(h),l!==null&&(a=i.newValue,typeof a=="string"&&(l.Kh=a));else if(o==="nodeGroupKey"){var h=i.object,p=t.wh(h);if(p!==null){var y=i.newValue;if(y!==void 0){var c=t.Oe(y);p.Ca=c instanceof Z?c:null}else p.Ca=null}}else if(o==="linkLabelKeys"){if(h=i.object,l=t.Yf(h),l!==null){var v=i.oldValue,d=i.newValue;if(s.isArray(v))for(var g=s.cb(v),m=0;m<g;m++){var w=s.Ba(v,m),f=t.Oe(w);f!==null&&(f.Xb=null)}if(s.isArray(d))for(g=s.cb(d),m=0;m<g;m++)w=s.Ba(d,m),f=t.Oe(w),f!==null&&(f.Xb=l)}}else if(o==="nodeParentKey"){var M=i.object,k=t.Oe(i.newValue),D=t.Fx(M);if(t.rk!==null)k!==null&&(t.rk.data=M,t.rk.kd=t.bq(M));else if(D!==null){var C=D.Cn();C!==null?k===null?t.remove(C):t.Vd?C.V=k:C.Z=k:Ia(t,k,D)}}else if(o==="parentLinkCategory"){var M=i.object,D=t.Fx(M),G=i.newValue;D!==null&&typeof G=="string"&&(C=D.Cn(),C!==null&&(C.kd=G))}else if(o==="nodeCategory"){var h=i.object,H=t.wh(h),G=i.newValue;H!==null&&typeof G=="string"&&(H.kd=G)}else if(o==="linkCategory"){var h=i.object,U=t.Yf(h),G=i.newValue;U!==null&&typeof G=="string"&&(U.kd=G)}else if(o==="nodeDataArray"){var X=i.oldValue;za(t,X);var _=i.newValue;wy(t,_)}else o==="linkDataArray"&&(X=i.oldValue,za(t,X),_=i.newValue,My(t,_));t.ri=!0}else n===Li?(_=i.newValue,o==="nodeDataArray"&&s.Pa(_)?ug(t,_):o==="linkDataArray"&&s.Pa(_)?Py(t,_):o==="linkLabelKeys"&&bn(_)&&(l=t.Yf(i.object),f=t.Oe(_),l!==null&&f!==null&&(f.Xb=l)),t.ri=!0):n===Ai?(X=i.oldValue,o==="nodeDataArray"&&s.Pa(X)||o==="linkDataArray"&&s.Pa(X)?Ty(t,X):o==="linkLabelKeys"&&bn(X)&&(f=t.Oe(X),f!==null&&(f.Xb=null)),t.ri=!0):n===Fr&&(o==="SourceChanged"?i.object!==null?vy(t,i.object,i.propertyName):(t.aK(),t.LG()):o==="ModelDisplaced"&&t.nm());else if(n===Yt){var Mt=i.propertyName,h=i.object;h===t.$?(Mt==="nodeKeyProperty"||Mt==="nodeCategoryProperty"||Mt==="linkFromKeyProperty"||Mt==="linkToKeyProperty"||Mt==="linkFromPortIdProperty"||Mt==="linkToPortIdProperty"||Mt==="linkLabelKeysProperty"||Mt==="nodeIsGroupProperty"||Mt==="nodeGroupKeyProperty"||Mt==="nodeParentKeyProperty"||Mt==="linkCategoryProperty")&&(t.ja.lb||t.nm()):vy(t,h,Mt),t.ri=!0}else if(n===Li||n===Ai)Ax(t,i),t.ri=!0;else if(n===Fr){(e==="FinishedUndo"||e==="FinishedRedo")&&(t.Aa("ChangedSelection"),te(t)),r=t.Ka,e==="RolledBackTransaction"&&r.Jh(),t.Go=!0,t.dg(),t.ja.wi===0&&Ed(r),e==="CommittedTransaction"&&t.ja.Dz&&(t.dh=Math.min(t.dh,t.ja.wj-1));var Ft=i.KF;Ft&&(sg(t),t.Yx.clear()),!t.Jz&&Ft&&(t.Jz=!0,s.setTimeout(function(){t.Xa.standardMouseOver(),t.Jz=!1},10))}}finally{t.Ua=!0}}}}function vy(t,i,n){if(typeof n=="string"){var e=t.wh(i);if(e!==null)e.Jb(n),t.$ instanceof Lt&&(e=t.Yf(i),e!==null&&e.Jb(n));else{for(var e=null,r=t.Nm.i;r.next();){for(var o=r.value,h=0;h<o.length;h++){var l=o[h].YH(i);l!==null&&(e===null&&(e=s.Za()),e.push(l))}if(e!==null)break}if(e!==null){for(r=0;r<e.length;r++)e[r].Jb(n);s.ra(e)}}i===t.$.Tk&&t.LG(n)}}s.defineProperty(x,{Se:"skipsModelSourceBindings"},function(){return this.UD},function(t){this.UD=t}),s.defineProperty(x,{sm:null},function(){return this.Vz},function(t){this.Vz=t});function Ax(t,i){var n=i.Fc===Li,e=n?i.Fj:i.Gj,r=n?i.newValue:i.oldValue,o=t.Nm.ka(i.object);if(Array.isArray(o))for(var h=0;h<o.length;h++){var l=o[h];if(n)Jg(l,r,e);else{var u=e;if(!(0>u)){var f=u;Pf(l)&&f++,l.rf(f,!0),Yg(l,f,u)}}}}function dy(t,i){var n=i.hk;if(s.isArray(n)){var e=t.Nm.ka(n);if(e===null)e=[],e.push(i),t.Nm.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function gy(t,i){var n=i.hk;if(s.isArray(n)){var e=t.Nm.ka(n);if(e!==null){for(var r=0;r<e.length;r++)if(e[r]===i){e.splice(r,1),e.length===0&&t.Nm.remove(n);break}}}}function hg(t,i){for(var n=i.xa.n,e=n.length,r=0;r<e;r++){var o=n[r];o instanceof oi&&my(t,o)}}function my(t,i){var n=i.element;if(n!==null&&n instanceof HTMLImageElement){var e=i.We;if(e!==null&&(e.No instanceof Event&&i.Xe!==null&&i.Xe(i,e.No),e.Zr===!0&&(i.li!==null&&i.li(i,e.Qz),i.g!==null&&i.g.Mz.add(i))),n=n.src,e=t.kp.ka(n),e===null)e=[],e.push(i),t.kp.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function lg(t,i){for(var n=i.xa.n,e=n.length,r=0;r<e;r++){var o=n[r];o instanceof oi&&xy(t,o)}}function xy(t,i){var n=i.element;if(n!==null&&n instanceof HTMLImageElement){var n=n.src,e=t.kp.ka(n);if(e!==null){for(var r=0;r<e.length;r++)if(e[r]===i){e.splice(r,1),e.length===0&&(t.kp.remove(n),by(n));break}}}}x.prototype.rebuildParts=x.prototype.nm=function(){for(var t=this.nB.i;t.next();){var i=t.value,n=t.key;(!i.he()||i instanceof Z)&&s.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(t=this.MA.i;t.next();)i=t.value,n=t.key,i instanceof Z||s.k('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(t=this.bB.i;t.next();)i=t.value,n=t.key,i instanceof S||s.k('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(t=s.Za(),i=this.selection.i;i.next();)(n=i.value.data)&&t.push(n);for(var i=s.Za(),e=this.gm.i;e.next();)(n=e.value.data)&&i.push(n);for(n=s.Za(),e=this.ig.i;e.next();){var r=e.value;r.data!==null&&(n.push(r.data),n.push(r.location))}for(e=this.links.i;e.next();)r=e.value,r.data!==null&&(n.push(r.data),n.push(r.location));for(e=this.Hj.i;e.next();)r=e.value,r.data!==null&&(n.push(r.data),n.push(r.location));for(e=this.$,e instanceof K&&za(this,e.Bh),za(this,e.Pg),wy(this,e.Pg),e instanceof K&&My(this,e.Bh),e=0;e<t.length;e++)r=this.wh(t[e]),r!==null&&(r.jb=!0);for(e=0;e<i.length;e++)r=this.wh(i[e]),r!==null&&(r.Og=!0);for(e=0;e<n.length;e+=2)r=this.wh(n[e]),r!==null&&(r.location=n[e+1]);s.ra(t),s.ra(i),s.ra(n)};function wy(t,i){if(i!==null){for(var n=t.$,e=n instanceof K,r=s.cb(i),o=0;o<r;o++){var h=s.Ba(i,o);n.Le(h)?ug(t,h,!1):e&&Py(t,h)}if(e||n instanceof Lt){for(o=0;o<r;o++)h=s.Ba(i,o),n.Le(h)&&yg(t,h);if(e)for(n=t.links;n.next();)vu(n.value)}Sy(t,!1)}}function ug(t,i,n){if(i!=null&&!t.ja.lb&&!t.Ii.contains(i)){n===void 0&&(n=!0);var e=t.IA(i),r=pg(t,i,e);if(r!==null&&(be(r),r=r.copy(),r!==null)){var o=t.Se;t.Se=!0,r.Ci=e,r.Zd=i,t.add(r),r.Zd=null,r.data=i,n&&yg(t,i),t.Se=o}}}x.prototype.IA=function(t){return this.$.IA(t)};var fg=!1,ag=!1;function pg(t,i,n){var e=!1,r=t.$;return r instanceof K&&(e=r.WA(i)),e?(i=t.MA.ka(n),i===null&&(i=t.MA.ka(""),i===null&&(ag||(ag=!0,s.trace('No Group template found for category "'+n+'"'),s.trace("  Using default group template")),i=t.LC))):(i=t.nB.ka(n),i===null&&(i=t.nB.ka(""),i===null&&(fg||(fg=!0,s.trace('No Node template found for category "'+n+'"'),s.trace("  Using default node template")),i=t.NC))),i}function yg(t,i){var n=t.$;if(n instanceof K||n instanceof Lt){var e=n.qb(i);if(e!==void 0){var r=da(n,e),o=t.wh(i);if(r!==null&&o!==null){for(r=r.i;r.next();){var h=r.value;if(n instanceof K){var l=n;if(l.Le(h)){if(o instanceof Z&&l.En(h)===e){var u=o,h=t.wh(h);h!==null&&(h.Ca=u)}}else{var f=t.Yf(h);if(f!==null&&o instanceof I&&(u=o,l.em(h)===e&&(f.V=u),l.fm(h)===e&&(f.Z=u),h=l.Nk(h),s.isArray(h))){for(l=0;l<s.cb(h);l++)if(s.Ba(h,l)===e){u.Xb=f;break}}}}else n instanceof Lt&&(f=n,f.Le(h)&&o instanceof I&&(u=o,f.Gn(h)===e&&(h=t.Fx(h),Ia(t,u,h))))}cr(n,e)}n instanceof K?(n=n.En(i),n!==void 0&&(n=t.Oe(n),n instanceof Z&&(o.Ca=n))):n instanceof Lt&&(n=n.Gn(i),n!==void 0&&o instanceof I&&(u=o,o=t.Oe(n),Ia(t,o,u)))}}}function Ia(t,i,n){if(i!==null&&n!==null){var e=t.Va.PF,r=i,o=n;if(t.Vd){for(i=o.je;i.next();)if(i.value.Z===o)return}else for(r=n,o=i,i=r.je;i.next();)if(i.value.V===r)return;if((e===null||!sf(e,r,o,null,!0))&&(e=t.bq(n.data),i=Ba(t,e),i!==null&&(be(i),i=i.copy(),i!==null))){var h=t.Se;t.Se=!0,i.Ci=e,i.Zd=n.data,i.V=r,i.Z=o,t.add(i),i.Zd=null,i.data=n.data,t.Se=h}}}function My(t,i){if(i!==null){for(var n=s.cb(i),e=0;e<n;e++){var r=s.Ba(i,e);Py(t,r)}Sy(t,!1)}}function Py(t,i){if(i!=null&&!t.ja.lb&&!t.Sj.contains(i)){var n=t.bq(i),e=Ba(t,n);if(e!==null&&(be(e),e=e.copy(),e!==null)){var r=t.Se;t.Se=!0,e.Ci=n,e.Zd=i;var n=t.$,o=n.eI(i);if(o!==""&&(e.Ng=o),o=n.em(i),o!==void 0&&(o=t.Oe(o),o instanceof I&&(e.V=o)),o=n.iI(i),o!==""&&(e.Kh=o),o=n.fm(i),o!==void 0&&(o=t.Oe(o),o instanceof I&&(e.Z=o)),n=n.Nk(i),s.isArray(n))for(var o=s.cb(n),h=0;h<o;h++){var l=s.Ba(n,h),l=t.Oe(l);l!==null&&(l.Xb=e)}t.add(e),e.Zd=null,e.data=i,t.Se=r}}}x.prototype.bq=function(t){var i=this.$,n="";return i instanceof K?n=i.bq(t):i instanceof Lt&&(n=i.gI(t)),n};var cg=!1;function Ba(t,i){var n=t.bB.ka(i);return n===null&&(n=t.bB.ka(""),n===null&&(cg||(cg=!0,s.trace('No Link template found for category "'+i+'"'),s.trace("  Using default link template")),n=t.MC)),n}function za(t,i){for(var n=s.cb(i),e=0;e<n;e++){var r=s.Ba(i,e);Ty(t,r)}}function Ty(t,i){if(i!=null){var n=t.wh(i);if(n!==null){ay(t,n,!1);var e=t.$;if(e instanceof K&&n instanceof I){var r=n,n=e.qb(r.data);if(n!==void 0){for(var o=r.je;o.next();)Xe(e,n,o.value.data);if(r.Df&&(o=r.Xb,o!==null&&Xe(e,n,o.data)),r instanceof Z)for(r=r.hc;r.next();)o=r.value.data,e.Le(o)&&Xe(e,n,o)}}else if(e instanceof Lt&&n instanceof I){if(r=n,n=e.qb(r.data),o=t.Yf(r.data),o!==null){o.jb=!1,o.Og=!1;var h=o.layer;if(h!==null){var l=h.rf(-1,o,!1);0<=l&&t.bd(Ai,"parts",h,o,null,l,null),l=o.Tx,l!==null&&l(o,h,null)}}for(o=t.Vd,r=r.je;r.next();)h=r.value,h=(o?h.Z:h.V).data,e.Le(h)&&Xe(e,n,h)}}}}x.prototype.findPartForKey=x.prototype.ZH=function(t){if(t==null)return null;var i=this.$.we(t);return i!==null?this.Ii.ka(i):this.$ instanceof K&&(i=this.$.Zp(t),i!==null)?this.Sj.ka(i):null},x.prototype.findNodeForKey=x.prototype.Oe=function(t){return t==null||(t=this.$.we(t),t===null)?null:(t=this.Ii.ka(t),t instanceof I?t:null)},x.prototype.findPartForData=x.prototype.wh=function(t){if(t===null)return null;var i=this.Ii.ka(t);return i!==null?i:i=this.Sj.ka(t)},x.prototype.findNodeForData=x.prototype.Fx=function(t){return t===null?null:(t=this.Ii.ka(t),t instanceof I?t:null)},x.prototype.findLinkForData=x.prototype.Yf=function(t){return t===null?null:this.Sj.ka(t)},x.prototype.findNodesByExample=function(t){for(var i=new R(I),n=this.ip.i;n.next();){var e=n.value,r=e.data;if(r!==null)for(var o=0;o<arguments.length;o++){var h=arguments[o];if(s.Pa(h)&&ky(this,r,h)){i.add(e);break}}}return i.i},x.prototype.findLinksByExample=function(t){for(var i=new R(S),n=this.bp.i;n.next();){var e=n.value,r=e.data;if(r!==null)for(var o=0;o<arguments.length;o++){var h=arguments[o];if(s.Pa(h)&&ky(this,r,h)){i.add(e);break}}}return i.i};function ky(t,i,n){for(var e in n){var r=i[e],o=n[e];if(s.isArray(o)){if(!s.isArray(r)||r.length<o.length)return!1;for(var h=0;h<r.length;h++){var l=r[h],u=o[h];if(u!==void 0&&!vg(t,l,u))return!1}}else if(!vg(t,r,o))return!1}return!0}function vg(t,i,n){if(typeof n=="function"){if(!n(i))return!1}else if(n instanceof RegExp){if(!i||!n.test(i.toString()))return!1}else if(s.Pa(i)&&s.Pa(n)){if(!ky(t,i,n))return!1}else if(i!==n)return!1;return!0}s.defineProperty(x,{BL:"nodeTemplate"},function(){return this.bj.ka("")},function(t){var i=this.bj.ka("");i!==t&&(s.G(t,L,x,"nodeTemplate"),this.bj.add("",t),this.h("nodeTemplate",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{nB:"nodeTemplateMap"},function(){return this.bj},function(t){var i=this.bj;i!==t&&(s.G(t,tt,x,"nodeTemplateMap"),this.bj=t,this.h("nodeTemplateMap",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{fL:"groupTemplate"},function(){return this.sl.ka("")},function(t){var i=this.sl.ka("");i!==t&&(s.G(t,Z,x,"groupTemplate"),this.sl.add("",t),this.h("groupTemplate",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{MA:"groupTemplateMap"},function(){return this.sl},function(t){var i=this.sl;i!==t&&(s.G(t,tt,x,"groupTemplateMap"),this.sl=t,this.h("groupTemplateMap",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{qL:"linkTemplate"},function(){return this.jk.ka("")},function(t){var i=this.jk.ka("");i!==t&&(s.G(t,S,x,"linkTemplate"),this.jk.add("",t),this.h("linkTemplate",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{bB:"linkTemplateMap"},function(){return this.jk},function(t){var i=this.jk;i!==t&&(s.G(t,tt,x,"linkTemplateMap"),this.jk=t,this.h("linkTemplateMap",i,t),this.ja.lb||this.nm())}),s.defineProperty(x,{CI:null},function(){return this.fh},function(t){this.fh=t}),s.defineProperty(x,{ef:"isMouseCaptured"},function(){return this.pD},function(t){var i=this.zb;i!==null&&(t?(this.N.bubbles=!1,this.Vy?(i.removeEventListener("pointermove",this.tq,!1),i.removeEventListener("pointerdown",this.sq,!1),i.removeEventListener("pointerup",this.vq,!1),i.removeEventListener("pointerout",this.uq,!1),q.addEventListener("pointermove",this.tq,!0),q.addEventListener("pointerdown",this.sq,!0),q.addEventListener("pointerup",this.vq,!0),q.addEventListener("pointerout",this.uq,!0)):(i.removeEventListener("mousemove",this.Tn,!1),i.removeEventListener("mousedown",this.Sn,!1),i.removeEventListener("mouseup",this.Vn,!1),i.removeEventListener("mouseout",this.Un,!1),q.addEventListener("mousemove",this.Tn,!0),q.addEventListener("mousedown",this.Sn,!0),q.addEventListener("mouseup",this.Vn,!0),q.addEventListener("mouseout",this.Un,!0)),i.removeEventListener("wheel",this.Wn,!1),q.addEventListener("wheel",this.Wn,!0),q.addEventListener("selectstart",this.preventDefault,!1)):(this.Vy?(q.removeEventListener("pointermove",this.tq,!0),q.removeEventListener("pointerdown",this.sq,!0),q.removeEventListener("pointerup",this.vq,!0),q.removeEventListener("pointerout",this.uq,!0),i.addEventListener("pointermove",this.tq,!1),i.addEventListener("pointerdown",this.sq,!1),i.addEventListener("pointerup",this.vq,!1),i.addEventListener("pointerout",this.uq,!1)):(q.removeEventListener("mousemove",this.Tn,!0),q.removeEventListener("mousedown",this.Sn,!0),q.removeEventListener("mouseup",this.Vn,!0),q.removeEventListener("mouseout",this.Un,!0),i.addEventListener("mousemove",this.Tn,!1),i.addEventListener("mousedown",this.Sn,!1),i.addEventListener("mouseup",this.Vn,!1),i.addEventListener("mouseout",this.Un,!1)),q.removeEventListener("wheel",this.Wn,!0),q.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("wheel",this.Wn,!1)),this.pD=t)}),s.defineProperty(x,{position:"position"},function(){return this.ab},function(t){var i=this.ab;if(!i.L(t)){s.G(t,F,x,"position");var n=this.sb.copy();if(t=t.copy(),!this.Wc&&this.zb!==null){this.Wc=!0;var e=this.scale;hy(this,t,this.Nd,this.Db/e,this.Cb/e,this.Em,!1),this.Wc=!1}this.ab=t.S(),t=this.Ka,t.sc&&Od(t,i,this.ab),this.Wc||this.Pu(n,this.sb,this.rb,this.rb,!1)}}),s.defineProperty(x,{uI:"initialPosition"},function(){return this.Yv},function(t){this.Yv.L(t)||(s.G(t,F,x,"initialPosition"),this.Yv=t.S())}),s.defineProperty(x,{vI:"initialScale"},function(){return this.Zv},function(t){this.Zv!==t&&(s.j(t,"number",x,"initialScale"),this.Zv=t)}),s.defineProperty(x,{Hn:"grid"},function(){return this.td===null&&Jd(this),this.td},function(t){var i=this.td;if(i!==t){i===null&&(Jd(this),i=this.td),s.G(t,A,x,"grid"),t.type!==Yh&&s.k("Diagram.grid must be a Panel of type Panel.Grid");var n=i.R;n!==null&&n.remove(i),this.td=t,t.name="GRID",n!==null&&n.add(t),Yo(this),this.oa(),this.h("grid",i,t)}}),s.u(x,{sb:"viewportBounds"},function(){var t=this.eA;if(this.zb===null)return t;var i=this.ab,n=this.rb;return t.m(i.x,i.y,Math.max(this.Db,0)/n,Math.max(this.Cb,0)/n),t}),s.defineProperty(x,{gF:"fixedBounds"},function(){return this.Qv},function(t){var i=this.Qv;i.L(t)||(s.G(t,O,x,"fixedBounds"),t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||s.k("fixedBounds width/height must not be Infinity"),this.Qv=t=t.S(),this.Gc(),this.h("fixedBounds",i,t))}),s.defineProperty(x,{ty:"scrollMargin"},function(){return this.Hw},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"scrollMargin");var i=this.Hw;i.L(t)||(this.Hw=t=t.S(),this.h("scrollMargin",i,t),this.yq())}),s.defineProperty(x,{uy:"scrollMode"},function(){return this.Iw},function(t){var i=this.Iw;i!==t&&(s.ob(t,x,x,"scrollMode"),this.Iw=t,t===Uh&&Jr(this,!1),this.h("scrollMode",i,t),this.yq())}),s.defineProperty(x,{EJ:"scrollsPageOnFocus"},function(){return this.Lw},function(t){var i=this.Lw;i!==t&&(s.j(t,"boolean",x,"scrollsPageOnFocus"),this.Lw=t,this.h("scrollsPageOnFocus",i,t))}),s.defineProperty(x,{aG:"positionComputation"},function(){return this.Cw},function(t){var i=this.Cw;i!==t&&(t!==null&&s.j(t,"function",x,"positionComputation"),this.Cw=t,Jr(this,!1),this.h("positionComputation",i,t))}),s.defineProperty(x,{mG:"scaleComputation"},function(){return this.Ew},function(t){var i=this.Ew;i!==t&&(t!==null&&s.j(t,"function",x,"scaleComputation"),this.Ew=t,bd(this,this.scale,this.scale),this.h("scaleComputation",i,t))}),s.u(x,{Nd:"documentBounds"},function(){return this.Jv});function _l(t,i){t.ck=!1;var n=t.Jv;n.L(i)||(i=i.S(),t.Jv=i,Jr(t,!1),t.Aa("DocumentBoundsChanged",null,n.copy()),eh(t))}s.defineProperty(x,{$A:"isVirtualized"},function(){return this.fw},function(t){var i=this.fw;i!==t&&(s.j(t,"boolean",x,"isVirtualized"),this.fw=t,this.h("isVirtualized",i,t))}),s.defineProperty(x,{scale:"scale"},function(){return this.rb},function(t){var i=this.rb;s.Ad(t,x,"scale"),i!==t&&bd(this,i,t)}),s.defineProperty(x,{Vl:"autoScale"},function(){return this.Bm},function(t){var i=this.Bm;i!==t&&(s.ob(t,x,x,"autoScale"),this.Bm=t,this.h("autoScale",i,t),t!==je&&Jr(this,!1))}),s.defineProperty(x,{iL:"initialAutoScale"},function(){return this.wl},function(t){var i=this.wl;i!==t&&(s.ob(t,x,x,"initialAutoScale"),this.wl=t,this.h("initialAutoScale",i,t))}),s.defineProperty(x,{wI:"initialViewportSpot"},function(){return this.$v},function(t){var i=this.$v;i!==t&&(s.G(t,P,x,"initialViewportSpot"),t.Zc()||s.k("initialViewportSpot must be a specific Spot: "+t),this.$v=t,this.h("initialViewportSpot",i,t))}),s.defineProperty(x,{tI:"initialDocumentSpot"},function(){return this.Xv},function(t){var i=this.Xv;i!==t&&(s.G(t,P,x,"initialDocumentSpot"),t.Zc()||s.k("initialViewportSpot must be a specific Spot: "+t),this.Xv=t,this.h("initialDocumentSpot",i,t))}),s.defineProperty(x,{Dh:"minScale"},function(){return this.qw},function(t){s.Ad(t,x,"minScale");var i=this.qw;i!==t&&(0<t?(this.qw=t,this.h("minScale",i,t),t>this.scale&&(this.scale=t)):s.Fa(t,"> 0",x,"minScale"))}),s.defineProperty(x,{Ch:"maxScale"},function(){return this.ow},function(t){s.Ad(t,x,"maxScale");var i=this.ow;i!==t&&(0<t?(this.ow=t,this.h("maxScale",i,t),t<this.scale&&(this.scale=t)):s.Fa(t,"> 0",x,"maxScale"))}),s.defineProperty(x,{zi:"zoomPoint"},function(){return this.$w},function(t){this.$w.L(t)||(s.G(t,F,x,"zoomPoint"),this.$w=t=t.S())}),s.defineProperty(x,{rA:"contentAlignment"},function(){return this.Em},function(t){var i=this.Em;i.L(t)||(s.G(t,P,x,"contentAlignment"),this.Em=t=t.S(),this.h("contentAlignment",i,t),Jr(this,!1))}),s.defineProperty(x,{jL:"initialContentAlignment"},function(){return this.Qo},function(t){var i=this.Qo;i.L(t)||(s.G(t,P,x,"initialContentAlignment"),this.Qo=t=t.S(),this.h("initialContentAlignment",i,t))}),s.defineProperty(x,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"padding");var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.Gc(),this.h("padding",i,t))}),s.u(x,{ig:"nodes"},function(){return this.ip.i}),s.u(x,{links:"links"},function(){return this.bp.i}),s.u(x,{Hj:"parts"},function(){return this.xb.i}),x.prototype.findTopLevelNodesAndLinks=function(){for(var t=new R(L),i=this.ip.i;i.next();){var n=i.value;n.jq&&t.add(n)}for(i=this.bp.i;i.next();)n=i.value,n.jq&&t.add(n);return t.i},x.prototype.findTopLevelGroups=function(){return this.Nl.i},s.defineProperty(x,{Ub:"layout"},function(){return this.oe},function(t){var i=this.oe;i!==t&&(s.G(t,wt,x,"layout"),i!==null&&(i.g=null,i.group=null),this.oe=t,t.g=this,t.group=null,this.Pj=!0,this.h("layout",i,t),this.ye())}),x.prototype.layoutDiagram=function(t){te(this),t&&Sy(this,!0),this.Go=!0,Wl(this)};function Sy(t,i){for(var n=t.Nl.i;n.next();)dg(t,n.value,i);t.Ub!==null&&(i?t.Ub.sf=!1:t.Ub.J())}function dg(t,i,n){if(i!==null){for(var e=i.fp.i;e.next();)dg(t,e.value,n);i.Ub!==null&&(n?i.Ub.sf=!1:i.Ub.J())}}function gg(t,i){if(t.Pj&&!t.gz){var n=t.Ua;t.Ua=!0;var e=t.ja.wi,r=t.Ub;try{e===0&&t.Ib("Layout");var o=t.Ka;1>=e&&!o.Qe&&!o.sc&&(i||o.Zn("Layout")),t.Pj=!1;for(var h=t.Nl.i;h.next();)mg(t,h.value,i,e);r.sf||(!i||r.JF||e===0?(r.doLayout(t),te(t),r.sf=!0):t.Pj=!0)}finally{e===0&&t.Yc("Layout"),t.Pj=!r.sf,t.Ua=n}}}function mg(t,i,n,e){if(i!==null){for(var r=i.fp.i;r.next();)mg(t,r.value,n,e);r=i.Ub,r===null||r.sf||(!n||r.JF||e===0?(i.Xn=!i.location.H(),r.doLayout(i),i.J(ic),ly(t,i),r.sf=!0):t.Pj=!0)}}s.defineProperty(x,{Vd:"isTreePathToChildren"},function(){return this.ew},function(t){var i=this.ew;if(i!==t&&(s.j(t,"boolean",x,"isTreePathToChildren"),this.ew=t,this.h("isTreePathToChildren",i,t),!this.ja.lb))for(t=this.ig;t.next();)Nf(t.value)}),x.prototype.findTreeRoots=function(){for(var t=new z(I),i=this.ig;i.next();){var n=i.value;n.jq&&n.Cn()===null&&t.add(n)}return t.i},s.defineProperty(x,{VB:"treeCollapsePolicy"},function(){return this.Vw},function(t){var i=this.Vw;i!==t&&(t!==rh&&t!==yy&&t!==cy&&s.k("Unknown Diagram.treeCollapsePolicy: "+t),this.Vw=t,this.h("treeCollapsePolicy",i,t))}),s.defineProperty(x,{yh:null},function(){return this.hD},function(t){this.hD=t});function xg(t){function i(r){var o=r.toLowerCase(),h=new z("function");n.add(r,h),n.add(o,h),e.add(r,r),e.add(o,r)}var n=new tt("string",z),e=new tt("string","string");i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),t.iz=n,t.hz=e}function wg(t,i){var n=t.hz.ka(i);return n!==null?n:t.hz.ka(i.toLowerCase())}function Ny(t,i){var n=t.iz.ka(i);return n!==null||(n=t.iz.ka(i.toLowerCase()),n!==null)?n:(s.k("Unknown DiagramEvent name: "+i),null)}x.prototype.addDiagramListener=x.prototype.ax=function(t,i){s.j(t,"string",x,"addDiagramListener:name"),s.j(i,"function",x,"addDiagramListener:listener");var n=Ny(this,t);n!==null&&n.add(i)},x.prototype.removeDiagramListener=x.prototype.uB=function(t,i){s.j(t,"string",x,"removeDiagramListener:name"),s.j(i,"function",x,"addDiagramListener:listener");var n=Ny(this,t);n!==null&&n.remove(i)},x.prototype.raiseDiagramEvent=x.prototype.Aa=function(t,i,n){var e=Ny(this,t),r=new vo;if(r.g=this,t=wg(this,t),t!==null&&(r.name=t),i!==void 0&&(r.MB=i),n!==void 0&&(r.pB=n),i=e.length,i===1)e=e.fa(0),e(r);else if(i!==0)for(n=e.yc(),t=0;t<i;t++)e=n[t],e(r);return r.cancel};function Mg(t){return t.Ka.Qe?!1:(t=t.Xa,t instanceof dt?!t.Sw||t.yI:!0)}x.prototype.isUnoccupied=x.prototype.lq=function(t,i){return i===void 0&&(i=null),Cy(this,!1,null,i).lq(t.x,t.y,t.width,t.height)},x.prototype.computeOccupiedArea=function(){return this.$A?this.sb.copy():this.ck?qd(this):this.Nd.copy()};function Cy(t,i,n,e){if(t.Kd===null&&(t.Kd=new tl),t.Kd.su||t.Kd.group!==n||t.Kd.LB!==e){if(n===null){i=t.computeOccupiedArea(),i.Zf(100,100),t.Kd.initialize(i),i=s.vf();for(var r=t.ig;r.next();){var o=r.value,h=o.layer;h!==null&&h.visible&&!h.Hc&&jy(t,o,e,i)}}else for(0<n.hc.count&&(i=t.computePartsBounds(n.hc,!1),i.Zf(20,20),t.Kd.initialize(i)),i=s.vf(),r=n.hc;r.next();)o=r.value,o instanceof I&&jy(t,o,e,i);s.Bb(i),t.Kd.group=n,t.Kd.LB=e,t.Kd.su=!1}else i&&Mc(t.Kd);return t.Kd}function jy(t,i,n,e){if(i!==n){if(i.isVisible()&&i.lA&&!i.Df){n=i.getAvoidableRect(e),e=t.Kd.Op,i=t.Kd.Mp;for(var r=n.x+n.width,o=n.y+n.height,h=n.x;h<r;h+=e){for(var l=n.y;l<o;l+=i)cp(t.Kd,h,l);cp(t.Kd,h,o)}for(l=n.y;l<o;l+=i)cp(t.Kd,r,l);cp(t.Kd,r,o)}else if(i instanceof Z)for(i=i.hc;i.next();)r=i.value,r instanceof I&&jy(t,r,n,e)}}x.invalidatePositionArray=x.prototype.SA=function(t){this.Kd!==null&&!this.Kd.su&&(t===void 0&&(t=null),t===null||t.lA&&!t.Df)&&(this.Kd.su=!0)},x.prototype.simulatedMouseMove=function(t,i,n){if(Ci!==null){var e=Ci.g;n instanceof x||(n=null);var r=Kl;return n!==r&&(r!==null&&r!==e&&r.Va.ce!==null&&(mo(r),Ci.Mx=!1,r.Va.ce.doSimulatedDragLeave()),Kl=n,n!==null&&n!==e&&n.Va.ce!==null&&(ud(),r=n.Va.ce,th.contains(r)||th.add(r),n.Va.ce.doSimulatedDragEnter())),n===null||n===e||!n.AE||n.ib||!n.Kp?!1:(e=n.Va.ce,e!==null&&(t!==null?i=n.Nr(t):i===null&&(i=new F),n.Rb.ea=i,n.Rb.Ce=n.Dy(i),n.Rb.Hk=!1,n.Rb.up=!1,e.doSimulatedDragOver()),!0)}return!1},x.prototype.simulatedMouseUp=function(t,i,n,e){if(Ci!==null){e===null&&(e=i),i=Kl;var r=Ci.g;if(e!==i){if(i!==null&&i!==r&&i.Va.ce!==null)return mo(i),Ci.Mx=!1,i.Va.ce.doSimulatedDragLeave(),!1;Kl=e,e!==null&&e.Va.ce!==null&&(ud(),i=e.Va.ce,th.contains(i)||th.add(i),e.Va.ce.doSimulatedDragEnter())}if(e===null)return Ci.doCancel(),!0;if(e!==this)return t!==null&&(n=e.Nr(t)),e.Rb.ea=n,e.Rb.Ce=e.Dy(n),e.Rb.Hk=!1,e.Rb.up=!0,t=e.Va.ce,t!==null&&t.doSimulatedDrop(),t=Ci,t!==null&&(e=t.mayCopy(),t.Lf=e?"Copy":"Move",t.stopTool()),!0}return!1},s.defineProperty(x,{GK:"autoScrollInterval"},function(){return this.$q},function(t){var i=this.$q;s.Ad(t,x,"scale"),i!==t&&(this.$q=t,this.h("autoScrollInterval",i,t))}),s.defineProperty(x,{HE:"autoScrollRegion"},function(){return this.vv},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"autoScrollRegion");var i=this.vv;i.L(t)||(this.vv=t=t.S(),this.Gc(),this.h("autoScrollRegion",i,t))}),x.prototype.doAutoScroll=x.prototype.AA=function(t){this.uv.assign(t),Tg(this,this.uv).Qc(this.position)?mo(this):Pg(this)};function Pg(t){t.so===-1&&(t.so=s.setTimeout(function(){if(t.so!==-1){mo(t);var i=t.N.event;if(i!==null){var n=Tg(t,t.uv);n.Qc(t.position)||(t.position=n,t.N.ea=t.UB(t.uv),n=Xl(i),t.simulatedMouseMove(i,null,n)||t.doMouseMove(),t.ck=!0,_l(t,t.Nd.copy().Zg(t.computeBounds())),t.Fe=!0,t.dg(),Pg(t))}}},t.$q))}function mo(t){t.so!==-1&&(s.clearTimeout(t.so),t.so=-1)}function Tg(t,i){var n=t.position,e=t.HE;if(0>=e.top&&0>=e.left&&0>=e.right&&0>=e.bottom)return n;var o=t.sb,r=t.scale,o=s.lg(0,0,o.width*r,o.height*r),h=s.wb(0,0);if(i.x>=o.x&&i.x<o.x+e.left){var l=Math.max(t.Yu,1),l=l|0;h.x-=l,i.x<o.x+e.left/2&&(h.x-=l),i.x<o.x+e.left/4&&(h.x-=4*l)}else i.x<=o.x+o.width&&i.x>o.x+o.width-e.right&&(l=Math.max(t.Yu,1),l|=0,h.x+=l,i.x>o.x+o.width-e.right/2&&(h.x+=l),i.x>o.x+o.width-e.right/4&&(h.x+=4*l));return i.y>=o.y&&i.y<o.y+e.top?(l=Math.max(t.Zu,1),l|=0,h.y-=l,i.y<o.y+e.top/2&&(h.y-=l),i.y<o.y+e.top/4&&(h.y-=4*l)):i.y<=o.y+o.height&&i.y>o.y+o.height-e.bottom&&(l=Math.max(t.Zu,1),l|=0,h.y+=l,i.y>o.y+o.height-e.bottom/2&&(h.y+=l),i.y>o.y+o.height-e.bottom/4&&(h.y+=4*l)),h.Qc(Qs)||(n=new F(n.x+h.x/r,n.y+h.y/r)),s.Bb(o),s.v(h),n}x.prototype.makeSvg=x.prototype.makeSVG=function(t){return t===void 0&&(t=new Pi),t.context="svg",t=Sg(this,t),t!==null?t.Xk:null},x.prototype.makeImage=function(t){t===void 0&&(t=new Pi);var i=(t.document||document).createElement("img");return i.src=this.QI(t),i},x.prototype.makeImageData=x.prototype.QI=function(t){t===void 0&&(t=new Pi);var i=Sg(this,t);if(i!==null){var n=t.returnType,n=n===void 0?"string":n.toLowerCase();switch(n){case"imagedata":return i.Gk.getImageData(0,0,i.width,i.height);case"blob":if(i=i.Od,n=t.callback,typeof n!="function"){s.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if(typeof i.toBlob=="function")return i.toBlob(n,t.type,t.details),"toBlob";if(typeof i.msToBlob=="function")return n(i.msToBlob()),"msToBlob";n(null);break;default:return i.toDataURL(t.type,t.details)}}return""};var kg=!1;function Sg(t,i){if(t.Ka.Jh(),t.dg(),t.zb===null)return null;typeof i!="object"&&s.k("properties argument must be an Object.");var n=!1,e=i.size||null,r=i.scale||null;i.scale!==void 0&&isNaN(i.scale)&&(r="NaN");var o=i.maxSize;i.maxSize===void 0&&(n=!0,o=i.context==="svg"?new lt(1/0,1/0):new lt(2e3,2e3));var h=i.position||null,l=i.parts||null,u=i.padding===void 0?1:i.padding,f=i.background||null,a=i.omitTemporary;a===void 0&&(a=!0);var p=i.document||document,y=i.elementFinished||null,c=i.showTemporary;c===void 0&&(c=!a),a=i.showGrid,a===void 0&&(a=c),e!==null&&isNaN(e.width)&&isNaN(e.height)&&(e=null),typeof u=="number"?u=new xt(u):u instanceof xt||s.k("MakeImage padding must be a Margin or a number."),u.left=Math.max(u.left,0),u.right=Math.max(u.right,0),u.top=Math.max(u.top,0),u.bottom=Math.max(u.bottom,0),t.hf.Ke(!0);var v=new Hr(null,p),d=v.Gk;if(!(e||r||l||h))return v.width=t.Db+Math.ceil(u.left+u.right),v.height=t.Cb+Math.ceil(u.top+u.bottom),i.context==="svg"?(d=new Qu(v.Od,p,y),Da(t,d,u,new lt(v.width,v.height),t.rb,t.ab,l,f,c,a),d):(t.Cr=!1,Da(t,d,u,new lt(v.width,v.height),t.rb,t.ab,l,f,c,a),t.Cr=!0,v);var g=t.pb.tx,m=new F(0,0),w=t.Nd.copy();if(w.BG(t.padding),c)for(var M=!0,M=t.dc.n,k=M.length,D=0;D<k;D++){var C=M[D];if(C.visible&&C.Hc)for(var C=C.xb.n,G=C.length,H=0;H<G;H++){var U=C[H];U.XA&&U.isVisible()&&(U=U.U,U.H()&&w.Zg(U))}}if(m.x=w.x,m.y=w.y,l!==null){var X,M=!0,k=l.i;for(k.reset();k.next();)U=k.value,U instanceof L&&(C=U.layer,C!==null&&!C.visible||C!==null&&!c&&C.Hc||!U.isVisible()||(U=U.U,U.H()&&(M?(M=!1,X=U.copy()):X.Zg(U))));M&&(X=new O(0,0,0,0)),w.width=X.width,w.height=X.height,m.x=X.x,m.y=X.y}return h!==null&&h.H()&&(m=h,r||(r=g)),M=U=0,u!==null&&(U=u.left+u.right,M=u.top+u.bottom),D=k=0,e!==null&&(k=e.width,D=e.height,isFinite(k)&&(k=Math.max(0,k-U)),isFinite(D)&&(D=Math.max(0,D-M))),X=h=0,e!==null&&r!==null?(r==="NaN"&&(r=g),e.H()?(h=k,X=D):isNaN(D)?(h=k,X=w.height*r):(h=w.width*r,X=D)):e!==null?e.H()?(r=Math.min(k/w.width,D/w.height),h=k,X=D):isNaN(D)?(r=k/w.width,h=k,X=w.height*r):(r=D/w.height,h=w.width*r,X=D):r!==null?r==="NaN"&&o.H()?(r=Math.min((o.width-U)/w.width,(o.height-M)/w.height),r>g?(r=g,h=w.width,X=w.height):(h=o.width,X=o.height)):(h=w.width*r,X=w.height*r):(r=g,h=w.width,X=w.height),u!==null?(h+=U,X+=M):u=new xt(0),o!==null&&(e=o.width,o=o.height,i.context!=="svg"&&n&&!kg&&(h>e||X>o)&&(s.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(X)+" vs 2000x2000) Consider increasing the max size."),kg=!0),isNaN(e)&&(e=2e3),isNaN(o)&&(o=2e3),isFinite(e)&&(h=Math.min(h,e)),isFinite(o)&&(X=Math.min(X,o))),v.width=Math.ceil(h),v.height=Math.ceil(X),i.context==="svg"?(d=new Qu(v.Od,p,y),Da(t,d,u,new lt(Math.ceil(h),Math.ceil(X)),r,m,l,f,c,a),d):(t.Cr=!1,Da(t,d,u,new lt(Math.ceil(h),Math.ceil(X)),r,m,l,f,c,a),t.Cr=!0,v)}x.inherit=function(t,i){if(typeof t=="function"&&Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);s.j(t,"function",x,"inherit"),s.j(i,"function",x,"inherit"),i.fH&&s.k("Cannot inherit from "+s.pf(i)),s.La(t,i)};function Fy(){this.aE=null,this.hH="63ad05bbe23a1786468a4c741b6d2",this.Ni=this.hH===this._tk?!0:null}Fy.prototype.xm=function(t){if(t.hf.setTransform(t.wd,0,0,t.wd,0,0),this.Ni===null){var i="f",n=q[s.Kg("76a715b2f73f148a")][s.Kg("72ba13b5")];if(t=s.Kg,this.Ni=!0,q[t("7da7")]&&q[t("7da7")][t("76a115b6ed251eaf4692")]){var e=q[t("7da7")][t("76a115b6ed251eaf4692")],e=t(e).split(t("39e9"));if(!(6>e.length)){var r=t(e[1]).split(".");if(e[4]==="7da71ca0"){var o=t(s[t("6cae19")]).split(".");if(r[0]>o[0]||r[0]===o[0]&&r[1]>=o[1]){for(o=n[t("76ad18b4f73e")],r=n[t("73a612b6fb191d")](t("35e7"))+2;r<o;r++)i+=n[r];if(n=i[t("73a612b6fb191d")](t(e[2])),0>n&&t(e[2])!==t("7da71ca0ad381e90")&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),0>n&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),(this.Ni=!(0<=n&&n<i[t("73a612b6fb191d")](t("35"))))&&(i=t(e[2]),i[0]==="#")){for(n=q.document[t("79ba13b2f7333e8846865a7d00")]("div"),r=e[0].replace(/[A-Za-z]/g,"");4>r.length;)r+="9";if(r=r.substr(r.length-4),e=""+["gsh","gsf"][parseInt(r.substr(0,1),10)%2],e+=["Header","Background","Display","Feedback"][parseInt(r.substr(0,1),10)%4],n[t("79a417a0f0181a8946")]=e,q.document[t("78a712aa")]){if(q.document[t("78a712aa")][t("7bb806b6ed32388c4a875b")](n),r=q[t("7dad0290ec3b0b91578e5b40007031bf")](n)[t("7dad0283f1390b81519f4645156528bf")](t("78a704b7e62456904c9b12701b6532a8")),q.document[t("78a712aa")][t("68ad1bbcf533388c4a875b")](n),r){if(r.indexOf(parseInt(i[1]+i[2],16))!==-1&&r.indexOf(parseInt(i[3]+i[4],16))!==-1)this.Ni=!1;else if(s.xu||s.hq||s.iq||s.VA)for(e="."+e,r=0;r<document.styleSheets.length;r++){t=document.styleSheets[r].rules||document.styleSheets[r].cssRules;for(var h in t)if(e===t[h].selectorText){this.Ni=!1;break}}}}else this.Ni=null,this.Ni=!1}}}}}else{for(o=n[t("76ad18b4f73e")],r=n[t("73a612b6fb191d")](t("35e7"))+2;r<o;r++)i+=n[r];n=i[t("73a612b6fb191d")](t("7da71ca0ad381e90")),this.Ni=!(0<=n&&n<i[t("73a612b6fb191d")](t("35")))}}return 0<this.Ni&&this!==this.aE},Fy.prototype.t=function(){this.aE=null};function Dy(t,i){i!=null||s.k("Diagram setup requires an argument DIV."),t.Ob!==null&&s.k("Diagram has already completed setup."),typeof i=="string"?t.Ob=q.document.getElementById(i):i instanceof HTMLDivElement?t.Ob=i:s.k("No DIV or DIV id supplied: "+i),t.Ob===null&&s.k("Invalid DIV id; could not get element with id: "+i),t.Ob.aa!==void 0&&s.k("Invalid div id; div already has a Diagram associated with it."),q.getComputedStyle(t.Ob,null).position==="static"&&(t.Ob.style.position="relative"),t.Ob.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.Ob.style["-ms-touch-action"]="none",t.Ob.innerHTML="",t.Ob.aa=t;var e=new Hr(t);e.Od.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",e.style!==void 0&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",q.getComputedStyle(t.Ob,null).getPropertyValue("direction")==="rtl"&&(t.as=!0),e.style.zIndex="2",e.style.bM="none",e.style.webkitUserSelect="none",e.style.MozUserSelect="none"),t.Db=t.Ob.clientWidth||1,t.Cb=t.Ob.clientHeight||1,t.zb=e,t.hf=e.Gk;var n=t.hf;t.wd=t.computePixelRatio(),_d(t,t.Db,t.Cb),t.Lv=n[s.Kg("7eba17a4ca3b1a8346")][s.Kg("78a118b7")](n,s.xm,4,4),t.Ob.insertBefore(e.Od,t.Ob.firstChild),e=new Hr(null),e.width=1,e.height=1,t.lz=e,t.YC=e.Gk;var e=s.createElement("div"),r=s.createElement("div");e.style.position="absolute",e.style.overflow="auto",e.style.width=t.Db+"px",e.style.height=t.Cb+"px",e.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",t.Ob.appendChild(e),e.appendChild(r),e.onscroll=jx,e.onmousedown=Yd,e.ontouchstart=Yd,e.aa=t,e.dH=!0,e.eH=!0,t.Jw=e,t.kt=r,t.my=s.QE(function(){t.uk=null,t.oa()},300,!1),t.ZB=s.QE(function(){sy(t)},250,!1),t.preventDefault=function(o){return o.preventDefault(),!1},t.Tn=function(o){if(t.isEnabled){t.fh=!0;var h=t.xd;s.Jn&&h.Aj?(o.preventDefault(),o.simulated=!0,t.tt=o):(t.xd=t.Rb,t.Rb=h,Hh(t,t,o,h,!0),t.simulatedMouseMove(o,null,o.target.aa)||(t.doMouseMove(),t.Xa.isBeyondDragSize()&&(t.Wh=0),Yr(h,o)))}},t.Sn=function(o){if(t.isEnabled){t.fh=!0;var h=t.xd;s.Jn&&t.tt!==null?(t.tt=o,o.preventDefault()):s.Jn&&400>o.timeStamp-t.ik||t.fk?o.preventDefault():(t.xd=t.Rb,t.Rb=h,Hh(t,t,o,h,!0),h.Hk=!0,h.te=o.detail,(s.hq||s.iq)&&(o.timeStamp-t.ik<t.bA&&!t.Xa.isBeyondDragSize()?t.Wh++:t.Wh=1,t.ik=o.timeStamp,h.te=t.Wh),t.Pi=h,h.Ir.simulated===!0?(o.preventDefault(),o.simulated=!0):(Ci=null,t.doMouseDown(),t.Pi=t.Pi.copy(),o.button===1?o.preventDefault():Yr(h,o)))}},t.Vn=function(o){if(t.isEnabled)if(t.fk&&o.button===2)o.preventDefault();else if(t.fk&&o.button===0&&(t.fk=!1),t.Bp)o.preventDefault();else{t.fh=!0;var h=t.xd;if(s.Jn){if(400>o.timeStamp-t.ik){o.preventDefault();return}t.ik=o.timeStamp}s.Jn&&t.tt!==null?(t.tt=null,o.preventDefault()):(t.xd=t.Rb,t.Rb=h,Hh(t,t,o,h,!0),h.up=!0,h.te=o.detail,(s.hq||s.iq)&&(h.te=t.Wh),h.bubbles=o.bubbles,h.Jf=Xl(o),t.simulatedMouseUp(o,null,new F,h.Jf)||(t.doMouseUp(),mo(t),Yr(h,o)))}},t.Wn=function(o){if(t.isEnabled){var h=t.xd;t.xd=t.Rb,t.Rb=h,Hh(t,t,o,h,!0),h.bubbles=!0;var l=0,u=0;o.deltaX!==void 0?(l=0<o.deltaX?1:-1,u=0<o.deltaY?1:-1,h.pi=Math.abs(o.deltaX)>Math.abs(o.deltaY)?-l:-u):o.wheelDeltaX!==void 0?(l=0<o.wheelDeltaX?-1:1,u=0<o.wheelDeltaY?-1:1,h.pi=Math.abs(o.wheelDeltaX)>Math.abs(o.wheelDeltaY)?-l:-u):h.pi=o.wheelDelta!==void 0?0<o.wheelDelta?1:-1:0,t.doMouseWheel(),Yr(h,o)}},t.Un=function(){if(t.isEnabled){t.fh=!1;var o=t.Xa;o.cancelWaitAfter(),o.standardMouseOver()}},t.TB=function(o){if(t.isEnabled){t.Bp=!1,t.fk=!0;var h=Zd(t,o,o.targetTouches[0],1<o.touches.length);t.doMouseDown(),Yr(h,o)}},t.SB=function(o){if(t.isEnabled){var h=null;0<o.targetTouches.length?h=o.targetTouches[0]:0<o.changedTouches.length&&(h=o.changedTouches[0]);var l=Qd(t,o,h,1<o.touches.length);t.simulatedMouseMove(h||o,null,l.Jf)||t.doMouseMove(),Yr(l,o)}},t.RB=function(o){if(t.isEnabled){if(t.Bp)o.preventDefault();else if(!(1<o.touches.length)){var h=null,l=null;0<o.targetTouches.length?l=o.targetTouches[0]:0<o.changedTouches.length&&(l=o.changedTouches[0]);var u=t.xd;if(t.xd=t.Rb,t.Rb=u,u.g=t,u.te=1,l!==null){h=q.document.elementFromPoint(l.clientX,l.clientY),h!==null&&h.aa instanceof x&&h.aa!==t&&Kh(h.aa,l,u),Kh(t,l,u);var f=l.screenX,a=l.screenY,p=t.hw;o.timeStamp-t.ik<t.bA&&!(25<Math.abs(p.x-f)||25<Math.abs(p.y-a))?t.Wh++:t.Wh=1,u.te=t.Wh,t.ik=o.timeStamp,t.hw.m(f,a)}f=0,o.ctrlKey&&(f+=1),o.altKey&&(f+=2),o.shiftKey&&(f+=4),o.metaKey&&(f+=8),u.md=f,u.button=0,u.buttons=1,u.Hk=!1,u.up=!0,u.pi=0,u.vc=!1,u.bubbles=!1,u.event=o,u.timestamp=Date.now(),u.Jf=h===null?Xl(o):h.aa?h.aa:null,u.Be=null,t.simulatedMouseUp(l||o,null,new F,u.Jf)||t.doMouseUp(),Yr(u,o),t.fk=!1}}},t.sq=function(o){if(t.isEnabled){t.fh=!0;var h=t.Nz;h[o.pointerId]===void 0&&(h[o.pointerId]=o);var h=t.lp,l=!1;if(h[0]!==null&&h[0].pointerId===o.pointerId)h[0]=o;else if(h[1]!==null&&h[1].pointerId===o.pointerId)h[1]=o,l=!0;else if(h[0]===null)h[0]=o;else if(h[1]===null)h[1]=o,l=!0;else{o.preventDefault();return}(o.pointerType==="touch"||o.pointerType==="pen")&&(t.Bp=!1,t.fk=!0),h=Zd(t,o,o,l),o.pointerType!=="touch"&&(h.button=o.button,o.buttons===void 0||s.xu||(h.buttons=o.buttons),s.zh&&o.button===0&&o.ctrlKey&&(h.button=2)),t.doMouseDown(),o.button===1?o.preventDefault():Yr(h,o)}},t.tq=function(o){if(t.isEnabled){t.fh=!0;var h=t.lp;if(h[0]!==null&&h[0].pointerId===o.pointerId)h[0]=o;else{if(h[1]!==null&&h[1].pointerId===o.pointerId){h[1]=o;return}if(h[0]===null)h[0]=o;else return}h[0].pointerId===o.pointerId&&(h=Qd(t,o,o,h[1]!==null),o.pointerType!=="touch"&&(h.button=o.button,o.buttons===void 0||s.xu||(h.buttons=o.buttons),s.zh&&o.button===0&&o.ctrlKey&&(h.button=2)),t.simulatedMouseMove(o,null,h.Jf)||(t.doMouseMove(),Yr(h,o)))}},t.vq=function(o){if(t.isEnabled){t.fh=!0;var h=o.pointerType==="touch"||o.pointerType==="pen",l=t.Nz;if(h&&t.Bp)delete l[o.pointerId],o.preventDefault();else if(l=t.lp,l[0]!==null&&l[0].pointerId===o.pointerId){l[0]=null,l=t.xd,t.xd=t.Rb,t.Rb=l;var u=q.document.elementFromPoint(o.clientX,o.clientY);u!==null&&u.aa instanceof x&&u.aa!==t&&Kh(u.aa,o,l),Kh(t,o,l),l.g=t;var f=t.hw,a=h?25:10;o.timeStamp-t.ik<t.bA&&!(Math.abs(f.x-o.screenX)>a||Math.abs(f.y-o.screenY)>a)?t.Wh++:t.Wh=1,l.te=t.Wh,t.ik=o.timeStamp,t.hw.m(o.screenX,o.screenY),f=0,o.ctrlKey&&(f+=1),o.altKey&&(f+=2),o.shiftKey&&(f+=4),o.metaKey&&(f+=8),l.md=f,l.button=o.button,o.buttons===void 0||s.xu||(l.buttons=o.buttons),s.zh&&o.button===0&&o.ctrlKey&&(l.button=2),l.Hk=!1,l.up=!0,l.pi=0,l.vc=!1,l.bubbles=!0,l.event=o,l.timestamp=Date.now(),l.Jf=u===null?Xl(o):u.aa?u.aa:null,l.Be=null,t.simulatedMouseUp(o,null,new F,l.Jf)||(t.doMouseUp(),mo(t),Yr(l,o),h&&(t.fk=!1))}else l[1]!==null&&l[1].pointerId===o.pointerId&&(l[1]=null)}},t.uq=function(o){if(t.isEnabled){t.fh=!1;var h=t.Nz;h[o.pointerId]&&delete h[o.pointerId],h=t.lp,h[0]!==null&&h[0].pointerId===o.pointerId&&(h[0]=null),h[1]!==null&&h[1].pointerId===o.pointerId&&(h[1]=null),o.pointerType!=="touch"&&o.pointerType!=="pen"&&(o=t.Xa,o.cancelWaitAfter(),o.standardMouseOver())}},n.Ke(!0),Cx(t)}function Ng(t){1<arguments.length&&s.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),x.call(this,t),this.Rt=!0,this.Tl=!1,this.ib=!0,this.rA=po,this.Ub=new zt}s.La(Ng,x),s.ga("Palette",Ng);function Ir(t){1<arguments.length&&s.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),x.call(this,t),this.Ka.isEnabled=!1,this.Wc=!0,this.pk=null,this.Mv=!0,this.KJ("drawShadows",!1);var i=new L,n=new Y;n.stroke="magenta",n.mb=2,n.fill="transparent",n.name="BOXSHAPE",i.pm=!0,i.BB="BOXSHAPE",i.cB="BOXSHAPE",i.kG="BOXSHAPE",i.cursor="move",i.add(n),this.Cm=i,n=new vt,n.type=hh,n.Gf=Tt;var e=new en;e.ff=!0,n.add(e),e=new Y,e.qh=Tt,e.Fb="Rectangle",e.Da=new lt(64,64),e.cursor="se-resize",e.alignment=_i,n.add(e),i.iG=n,this.on=this.Ck=!1,this.Bf=this.Tt=!0,this.HE=new xt(0,0,0,0),this.Xz=new Hr(null),this.gH=this.Xz.Gk,this.Va.ce=new cf,this.Va.lG=new Ly;var r=this;this.click=function(){var o=r.pk;if(o!==null){var h=o.sb,l=r.N.ea;o.position=new F(l.x-h.width/2,l.y-h.height/2)}},this.XF=function(){Ea(r)},this.WF=function(){r.pk!==null&&(r.Gc(),r.oa())},this.Vl=$l,this.Wc=!1}s.La(Ir,x),s.ga("Overview",Ir);function Ix(t){t.Wc||t.$d||t.Tf!==!1||(t.Tf=!0,requestAnimationFrame(function(){if(t.Tf&&!t.$d&&(t.Tf=!1,t.Ob!==null)){if(t.$d=!0,te(t),t.Nd.H()||_l(t,t.computeBounds()),t.Ob===null&&s.k("No div specified"),t.zb===null&&s.k("No canvas specified"),t.Fe){var i=t.pk;if(i!==null&&!i.Ka.Qe&&!i.Ka.sc){var i=t.hf,n=t.Xz;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.zb.width,t.zb.height),i.drawImage(n.Od,0,0),n=t.jd,n.reset(),t.scale!==1&&n.scale(t.scale),t.position.x===0&&t.position.y===0||n.translate(-t.position.x,-t.position.y),i.scale(t.wd,t.wd),i.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var n=t.dc.n,e=n.length,r=0;r<e;r++)n[r].ve(i,t);t.xl=!1,t.Fe=!1}}t.$d=!1}}))}Ir.prototype.computePixelRatio=function(){return 1},Ir.prototype.ve=function(){if(this.Ob===null&&s.k("No div specified"),this.zb===null&&s.k("No canvas specified"),this.Fe){var t=this.pk;if(t!==null&&!t.Ka.Qe){La(this);var n=t.Hn;(n!==null&&n.visible&&isNaN(n.width)||isNaN(n.height))&&Yo(t);var i=this.zb,n=this.hf,e=this.Xz,r=this.gH;e.width=i.width,e.height=i.height,n.Ke(!0),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),e=this.jd,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),n.scale(this.wd,this.wd),n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=this.Mv,o=this.sb,h=t.dc.n,l=h.length,t=0;t<l;t++){var u=h[t],f=n,a=o,p=e;if(u.visible&&u.Dc!==0&&(p===void 0&&(p=!0),p||!u.Hc)){u.Dc!==1&&(f.globalAlpha=u.Dc);for(var p=this.scale,u=u.xb.n,y=u.length,c=0;c<y;c++){var v=u[c],d=v.U;d.$f(a)&&(1<d.width*p||1<d.height*p?v.ve(f,this):Sf(v,f))}f.globalAlpha=1}}for(r.drawImage(i.Od,0,0),i=this.dc.n,r=i.length,t=0;t<r;t++)i[t].ve(n,this);this.Fe=this.xl=!1}}},s.defineProperty(Ir,{oB:"observed"},function(){return this.pk},function(t){var i=this.pk;t!==null&&s.G(t,x,Ir,"observed"),t instanceof Ir&&s.k("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(i!==null&&(this.remove(this.th),i.uB("ViewportBoundsChanged",this.XF),i.uB("DocumentBoundsChanged",this.WF),i.zw.remove(this)),this.pk=t,t!==null&&(t.ax("ViewportBoundsChanged",this.XF),t.ax("DocumentBoundsChanged",this.WF),t.zw.add(this),this.add(this.th),Ea(this)),this.Gc(),this.h("observed",i,t))}),s.defineProperty(Ir,{th:"box"},function(){return this.Cm},function(t){var i=this.Cm;i!==t&&(this.Cm=t,this.remove(i),this.add(this.Cm),Ea(this),this.h("box",i,t))}),s.defineProperty(Ir,{cL:"drawsTemporaryLayers"},function(){return this.Mv},function(t){this.Mv!==t&&(this.Mv=t,this.yq())});function Ea(t){var i=t.th;if(i!==null){var n=t.pk;if(n!==null){t.Fe=!0;var n=n.sb,e=i.Fq,r=s.vm();r.m(n.width,n.height),e.Da=r,s.Lk(r),t=2/t.scale,e instanceof Y&&(e.mb=t),i.location=new F(n.x-t/2,n.y-t/2)}}}Ir.prototype.computeBounds=function(){var t=this.pk;return t===null?L0:t.Nd},Ir.prototype.yF=function(){this.Fe!==!0&&(this.Fe=!0,Ix(this))},Ir.prototype.Pu=function(t,i,n,e,r){this.Wc||(ds(this),this.oa(),eh(this),this.Gc(),Ea(this),this.ph.scale=n,this.ph.position.x=t.x,this.ph.position.y=t.y,this.ph.bounds.set(t),this.ph.isScroll=r,this.Aa("ViewportBoundsChanged",this.ph,t))};function cf(){dt.call(this),this.Gl=null}s.La(cf,dt),cf.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||!t.Tl||!t.Bf)return!1;var i=t.oB;if(i===null)return!1;if(this.findDraggablePart()===null){var n=i.sb;this.Gl=new F(n.width/2,n.height/2),t=t.uc.ea,i.position=new F(t.x-this.Gl.x,t.y-this.Gl.y)}return!0},cf.prototype.doActivate=function(){this.Gl=null,dt.prototype.doActivate.call(this)},cf.prototype.moveParts=function(){var t=this.g,i=t.oB;if(i!==null){var n=t.th;if(n!==null){if(this.Gl===null){var e=t.uc.ea,n=n.location;this.Gl=new F(e.x-n.x,e.y-n.y)}t=t.N.ea,i.position=new F(t.x-this.Gl.x,t.y-this.Gl.y)}}};function Ly(){Xt.call(this)}s.La(Ly,Xt),Ly.prototype.resize=function(t){var i=this.g.oB;if(i!==null){var n=i.sb.copy(),e=i.scale;(n.width!==t.width||n.height!==t.height)&&0<t.width&&0<t.height&&(i.scale=Math.min(e*n.width/t.width,e*n.height/t.height))}};function Ra(){this.hg=this.ad=this.Ed=this.Ic=0}function yt(t){1<arguments.length&&s.k("Brush constructor can take at most one optional argument, the Brush type."),s.oc(this),this.P=!1,t===void 0?(this.na=gs,this.vo="black"):typeof t=="string"?(this.na=gs,this.vo=t):(this.na=t,this.vo="black");var i=this.na;i===qr?(this.vp=po,this.Jo=Rh):this.Jo=i===fe?this.vp=Tt:this.vp=ki,this.Qw=0,this.Nv=NaN,this.bh=this.Bw=this.ah=null,this.az=this.wo=0}s.ga("Brush",yt);var gs;yt.Solid=gs=s.p(yt,"Solid",0);var qr;yt.Linear=qr=s.p(yt,"Linear",1);var fe;yt.Radial=fe=s.p(yt,"Radial",2);var bl;yt.Pattern=bl=s.p(yt,"Pattern",4);var tu;yt.Lab=tu=s.p(yt,"Lab",5);var Cg;yt.HSL=Cg=s.p(yt,"HSL",6),yt.prototype.copy=function(){var t=new yt;return t.na=this.na,t.vo=this.vo,t.vp=this.vp.S(),t.Jo=this.Jo.S(),t.Qw=this.Qw,t.Nv=this.Nv,this.ah!==null&&(t.ah=this.ah.copy()),t.Bw=this.Bw,t},B=yt.prototype,B.Ha=function(){return this.freeze(),Object.freeze(this),this},B.freeze=function(){return this.P=!0,this.ah!==null&&this.ah.freeze(),this},B.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this.P=!1,this.ah!==null&&this.ah.Qa(),this},B.ic=function(t){t.Je===yt?this.type=t:s.Lj(this,t)},B.toString=function(){var t="Brush(";if(this.type===gs)t+=this.color;else if(t=this.type===qr?t+"Linear ":this.type===fe?t+"Radial ":this.type===bl?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.Dk!==null)for(var i=this.Dk.i;i.next();)t+=" "+i.key+":"+i.value;return t+")"},yt.prototype.addColorStop=yt.prototype.addColorStop=function(t,i){this.P&&s.ma(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&s.Fa(t,"0 <= loc <= 1",yt,"addColorStop:loc"),s.j(i,"string",yt,"addColorStop:color"),this.ah===null&&(this.ah=new tt("number","string")),this.ah.add(t,i),this.na===gs&&(this.type=qr),this.bh=null},s.defineProperty(yt,{type:"type"},function(){return this.na},function(t){this.P&&s.ma(this,t),s.ob(t,yt,yt,"type"),this.na=t,this.start.Ud()&&(t===qr?this.start=po:t===fe&&(this.start=Tt)),this.end.Ud()&&(t===qr?this.end=Rh:t===fe&&(this.end=Tt)),this.bh=null}),s.defineProperty(yt,{color:"color"},function(){return this.vo},function(t){this.P&&s.ma(this,t),this.vo=t,this.bh=null}),s.defineProperty(yt,{start:"start"},function(){return this.vp},function(t){this.P&&s.ma(this,t),s.G(t,P,yt,"start"),this.vp=t.S(),this.bh=null}),s.defineProperty(yt,{end:"end"},function(){return this.Jo},function(t){this.P&&s.ma(this,t),s.G(t,P,yt,"end"),this.Jo=t.S(),this.bh=null}),s.defineProperty(yt,{dv:"startRadius"},function(){return this.Qw},function(t){this.P&&s.ma(this,t),s.Ad(t,yt,"startRadius"),0>t&&s.Fa(t,">= zero",yt,"startRadius"),this.Qw=t,this.bh=null}),s.defineProperty(yt,{$t:"endRadius"},function(){return this.Nv},function(t){this.P&&s.ma(this,t),s.Ad(t,yt,"endRadius"),0>t&&s.Fa(t,">= zero",yt,"endRadius"),this.Nv=t,this.bh=null}),s.defineProperty(yt,{Dk:"colorStops"},function(){return this.ah},function(t){this.P&&s.ma(this,t),this.ah=t,this.bh=null}),s.defineProperty(yt,{pattern:"pattern"},function(){return this.Bw},function(t){this.P&&s.ma(this,t),this.Bw=t,this.bh=null}),yt.randomColor=function(t,i){t===void 0&&(t=128),i===void 0&&(i=Math.max(t,255));var r=Math.abs(i-t),n=Math.floor(t+Math.random()*r).toString(16),e=Math.floor(t+Math.random()*r).toString(16),r=Math.floor(t+Math.random()*r).toString(16);return 2>n.length&&(n="0"+n),2>e.length&&(e="0"+e),2>r.length&&(r="0"+r),"#"+n+e+r};var ae=new Hr(null).Gk,jg;yt.isValidColor=jg=function(t){if(t==="black")return!0;if(t==="")return!1;ae.fillStyle="#000000";var i=ae.fillStyle;return ae.fillStyle=t,ae.fillStyle!==i?!0:(ae.fillStyle="#FFFFFF",i=ae.fillStyle,ae.fillStyle=t,ae.fillStyle!==i)};var Vt=new Ra,qo=new Ra,mn=new Ra,Zr=new Ra;yt.lighten=function(t){return Fg(t)},yt.prototype.lightenBy=function(t,i){this.P&&s.ma(this);var n=t===void 0||typeof t!="number"?.2:t,e=i===void 0?tu:i;if(this.type===gs)nu(this.color),this.color=iu(n,e);else if((this.type===qr||this.type===fe)&&this.Dk!==null)for(var r=this.Dk.i;r.next();)nu(r.value),this.addColorStop(r.key,iu(n,e));return this};var Fg;yt.lightenBy=Fg=function(t,i,n){return i=i===void 0||typeof i!="number"?.2:i,n=n===void 0?tu:n,nu(t),iu(i,n)},yt.darken=function(t){return Dg(t)},yt.prototype.darkenBy=function(t,i){this.P&&s.ma(this);var n=t===void 0||typeof t!="number"?.2:t,e=i===void 0?tu:i;if(this.type===gs)nu(this.color),this.color=iu(-n,e);else if((this.type===qr||this.type===fe)&&this.Dk!==null)for(var r=this.Dk.i;r.next();)nu(r.value),this.addColorStop(r.key,iu(-n,e));return this};var Dg;yt.darkenBy=Dg=function(t,i,n){return i=i===void 0||typeof i!="number"?.2:i,n=n===void 0?tu:n,nu(t),iu(-i,n)};function iu(t,i){switch(i){case tu:var n=100*Ay(Vt.Ic),u=100*Ay(Vt.Ed),e=100*Ay(Vt.ad);return mn.Ic=.4124564*n+.3575761*u+.1804375*e,mn.Ed=.2126729*n+.7151522*u+.072175*e,mn.ad=.0193339*n+.119192*u+.9503041*e,mn.hg=Vt.hg,n=zy(mn.Ic/eu[0]),u=zy(mn.Ed/eu[1]),e=zy(mn.ad/eu[2]),Zr.Ic=116*u-16,Zr.Ed=500*(n-u),Zr.ad=200*(u-e),Zr.hg=mn.hg,Zr.Ic=Math.min(100,Math.max(0,Zr.Ic+100*t)),n=(Zr.Ic+16)/116,u=n-Zr.ad/200,mn.Ic=eu[0]*Lg(Zr.Ed/500+n),mn.Ed=eu[1]*(Zr.Ic>Ga*By?Math.pow(n,3):Zr.Ic/Ga),mn.ad=eu[2]*Lg(u),mn.hg=Zr.hg,n=-.969266*mn.Ic+1.8760108*mn.Ed+.041556*mn.ad,u=.0556434*mn.Ic+-.2040259*mn.Ed+1.0572252*mn.ad,Vt.Ic=255*Iy((3.2404542*mn.Ic+-1.5371385*mn.Ed+-.4985314*mn.ad)/100),Vt.Ed=255*Iy(n/100),Vt.ad=255*Iy(u/100),Vt.hg=mn.hg,Vt.Ic=Math.round(Vt.Ic),255<Vt.Ic?Vt.Ic=255:0>Vt.Ic&&(Vt.Ic=0),Vt.Ed=Math.round(Vt.Ed),255<Vt.Ed?Vt.Ed=255:0>Vt.Ed&&(Vt.Ed=0),Vt.ad=Math.round(Vt.ad),255<Vt.ad?Vt.ad=255:0>Vt.ad&&(Vt.ad=0),"rgba("+Vt.Ic+", "+Vt.Ed+", "+Vt.ad+", "+Vt.hg+")";case Cg:var e=Vt.Ic/255,r=Vt.Ed/255,o=Vt.ad/255,h=Math.max(e,r,o),u=Math.min(e,r,o),l=h-u,u=(h+u)/2;if(l===0)n=e=0;else{switch(h){case e:n=(r-o)/l%6;break;case r:n=(o-e)/l+2;break;case o:n=(e-r)/l+4}n*=60,0>n&&(n+=360),e=l/(1-Math.abs(2*u-1))}return qo.Ic=Math.round(n),qo.Ed=Math.round(100*e),qo.ad=Math.round(100*u),qo.hg=Vt.hg,qo.ad=Math.min(100,Math.max(0,qo.ad+100*t)),"hsla("+qo.Ic+", "+qo.Ed+"%, "+qo.ad+"%, "+qo.hg+")";default:return s.k("Unknown color space: "+i),"rgba(0, 0, 0, 1)"}}function nu(t){ae.clearRect(0,0,1,1),ae.fillStyle="#000000";var i=ae.fillStyle;ae.fillStyle=t,ae.fillStyle!==i?(ae.fillRect(0,0,1,1),t=ae.getImageData(0,0,1,1).data,Vt.Ic=t[0],Vt.Ed=t[1],Vt.ad=t[2],Vt.hg=t[3]/255):(ae.fillStyle="#FFFFFF",ae.fillStyle=t,Vt.Ic=0,Vt.Ed=0,Vt.ad=0,Vt.hg=1)}function Ay(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Iy(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var By=216/24389,Ga=24389/27,eu=[95.047,100,108.883];function zy(t){return t>By?Math.pow(t,1/3):(Ga*t+16)/116}function Lg(t){var i=t*t*t;return i>By?i:(116*t-16)/Ga}function N(){s.oc(this),this.M=4225027,this.Dc=1,this.ej=null,this.Sb="",this.cc=this.Gb=null,this.ab=new F(NaN,NaN).freeze(),this.Ve=Hv,this.$h=$u,this.Zh=vx,this.jd=new Qt,this.Zk=new Qt,this.Wi=new Qt,this.rb=this.Ho=1,this.mg=0,this.Fg=Br,this.Tm=Wu,this.ud=new O(NaN,NaN,NaN,NaN).freeze(),this.pc=new O(NaN,NaN,NaN,NaN).freeze(),this.Nc=new O(0,0,NaN,NaN).freeze(),this.Y=this.Vs=this.Ws=null,this.ym=this.me=cn,this.ht=0,this.gj=1,this.gr=0,this.Fi=1,this.xt=null,this.lt=-1/0,this.dn=0,this.en=Qs,this.fn=ye,this.pr="",this.Ac=this.ia=null,this.to=-1,this.kn=this.og=this.nl=this.tp=null,this.Oz=Pa,this.$m=null}s.oi(N),s.ga("GraphObject",N),N.prototype.cloneProtected=function(t){t.M=this.M|6144,t.Dc=this.Dc,t.Sb=this.Sb,t.Gb=this.Gb,t.cc=this.cc,t.ab.assign(this.ab),t.Ve=this.Ve.S(),t.$h=this.$h.S(),t.Zh=this.Zh.S(),t.Wi=this.Wi.copy(),t.rb=this.rb,t.mg=this.mg,t.Fg=this.Fg,t.Tm=this.Tm.S(),t.ud.assign(this.ud),t.pc.assign(this.pc),t.Nc.assign(this.Nc),t.Vs=this.Vs,this.Y!==null&&(t.Y=this.Y.copy()),t.me=this.me.S(),t.ym=this.ym.S(),t.ht=this.ht,t.gj=this.gj,t.gr=this.gr,t.Fi=this.Fi,t.xt=this.xt,t.lt=this.lt,t.dn=this.dn,t.en=this.en.S(),t.fn=this.fn,t.pr=this.pr,this.ia!==null&&(t.ia=this.ia.copy()),t.Ac=this.Ac,t.to=this.to,this.nl!==null&&(t.nl=s.Xl(this.nl)),this.og!==null&&(t.og=this.og.copy()),t.kn=this.kn},N.prototype.addCopyProperty=N.prototype.mH=function(t){var i=this.nl;if(s.isArray(i)){for(var n=0;n<i.length;n++)if(i[n]===t)return}else this.nl=i=[];i.push(t)},N.prototype.qi=function(t){t.Ws=null,t.$m=null,t.I()},N.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.nl!==null)for(var i=0;i<this.nl.length;i++){var n=this.nl[i];t[n]=this[n]}return t},N.prototype.copy=function(){return this.clone()},N.prototype.ic=function(t){t.Je===S?t.name.indexOf("Orient")===0?this.Eq=t:s.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.Je===N?this.stretch=t:s.Lj(this,t)},N.prototype.toString=function(){return s.pf(Object.getPrototypeOf(this))+"#"+s.Pd(this)};var ri;N.None=ri=s.p(N,"None",0);var Br;N.Default=Br=s.p(N,"Default",0);var nn;N.Vertical=nn=s.p(N,"Vertical",4);var Xi;N.Horizontal=Xi=s.p(N,"Horizontal",5);var ii;N.Fill=ii=s.p(N,"Fill",3);var ji;N.Uniform=ji=s.p(N,"Uniform",1);var vf;N.UniformToFill=vf=s.p(N,"UniformToFill",2);var df;N.FlipVertical=df=s.p(N,"FlipVertical",1);var gf;N.FlipHorizontal=gf=s.p(N,"FlipHorizontal",2);var mf;N.FlipBoth=mf=s.p(N,"FlipBoth",3);function ie(t){t.ia===null&&(t.ia=new Gy)}N.prototype.Qd=function(){if(this.Y===null){var t=new gp;t.$j=ki,t.zk=ki,t.Yj=10,t.xk=10,t.Xj=yu,t.wk=yu,t.Zj=0,t.yk=0,this.Y=t}};function ru(t,i,n,e,r,o,h){var l=.001,u=o.length;t.moveTo(i,n),e-=i,l=r-n,e===0&&(e=.001),r=l/e;for(var f=Math.sqrt(e*e+l*l),a=0,p=!0,y=h!==0;.1<=f;){if(y){for(l=o[a++%u],l-=h;0>l;)l+=o[a++%u],p=!p;y=!1}else l=o[a++%u];l>f&&(l=f);var c=Math.sqrt(l*l/(1+r*r));0>e&&(c=-c),i+=c,n+=r*c,p?t.lineTo(i,n):t.moveTo(i,n),f-=l,p=!p}}N.prototype.raiseChangedEvent=N.prototype.bd=function(t,i,n,e,r,o,h){var l=this.W;if(l!==null&&(l.$n(t,i,n,e,r,o,h),Jh(this)&&n===this&&t===Yt&&oh(this,l,i),n===l&&(l.M&16777216)!==0&&l.data!==null))for(t=this.xa.n,n=t.length,e=0;e<n;e++)r=t[e],r instanceof A&&lh(r,function(u){u.data!==null&&(u.M&16777216)!==0&&u.Jb(i)})};function oh(t,i,n){var e=t.bm();if(e!==null)for(var r=t.Ac.i;r.next();){var o=r.value,h=null;if(o.Kq!==null){if(h=sd(o,e,t),h===null)continue;o.Ey(t,h,n,null)}else if(o.Px){var l=i.g;l===null||l.Se||o.Ey(t,l.$.Tk,n,e)}else{var u=e.data;if(u===null)continue;l=i.g,l===null||l.Se||o.Ey(t,u,n,e)}h===t&&(l=e.Dx(o.um),l!==null&&o.MG(l,h,n))}}N.prototype.Dx=function(t){return this.to===t?this:null},N.prototype.raiseChanged=N.prototype.h=function(t,i,n){this.bd(Yt,t,this,i,n)};function Qr(t,i,n,e,r){var o=t.ud,h=t.Wi;h.reset(),Ey(t,h,i,n,e,r),t.Wi=h,o.x=i,o.y=n,o.width=e,o.height=r,h.yu()||h.JG(o)}function Ag(t,i,n,e){return t.Ug===!1?!1:(e.multiply(t.transform),n?t.$f(i,e):t.vn(i,e))}N.prototype.eF=function(t,i,n){if(this.Ug===!1)return!1;var e=this.Ja;return i=t.Cf(i),n?Tn(t.x,t.y,0,0,0,e.height)<=i||Tn(t.x,t.y,0,e.height,e.width,e.height)<=i||Tn(t.x,t.y,e.width,e.height,e.width,0)<=i||Tn(t.x,t.y,e.width,0,0,0)<=i:t.Xf(0,0)<=i&&t.Xf(0,e.height)<=i&&t.Xf(e.width,0)<=i&&t.Xf(e.width,e.height)<=i},N.prototype.Yg=function(){return!0},N.prototype.containsPoint=N.prototype.Ia=function(t){var i=s.K();i.assign(t),this.transform.nb(i);var n=this.U;if(!n.H())return s.v(i),!1;var e=this.g;if(e!==null&&e.fk){var r=e.nu("extraTouchThreshold"),o=e.nu("extraTouchArea"),h=o/2,l=this.Ja,e=this.vj()*e.scale,u=1/e;if(l.width*e<r&&l.height*e<r)return t=ao(n.x-h*u,n.y-h*u,n.width+o*u,n.height+o*u,i.x,i.y),s.v(i),t}return(this instanceof vt||this instanceof Y?ao(n.x-5,n.y-5,n.width+10,n.height+10,i.x,i.y):n.Ia(i))?(r=!1,r=this.og&&!this.og.Ia(i)?!1:this.cc!==null&&n.Ia(i)||this.Gb!==null&&this.Nc.Ia(t)?!0:this.Ek(t),s.v(i),r):(s.v(i),!1)},N.prototype.Ek=function(t){var i=this.Ja;return ao(0,0,i.width,i.height,t.x,t.y)},N.prototype.containsRect=N.prototype.Fk=function(t){if(this.angle===0)return this.U.Fk(t);var i=this.Ja,i=s.lg(0,0,i.width,i.height),n=this.transform,e=!1,r=s.wb(t.x,t.y);return i.Ia(n.xh(r))&&(r.m(t.x,t.bottom),i.Ia(n.xh(r))&&(r.m(t.right,t.bottom),i.Ia(n.xh(r))&&(r.m(t.right,t.y),i.Ia(n.xh(r))&&(e=!0)))),s.v(r),s.Bb(i),e},N.prototype.containedInRect=N.prototype.vn=function(t,i){if(i===void 0)return t.Fk(this.U);var n=this.Ja,e=!1,r=s.wb(0,0);return t.Ia(i.nb(r))&&(r.m(0,n.height),t.Ia(i.nb(r))&&(r.m(n.width,n.height),t.Ia(i.nb(r))&&(r.m(n.width,0),t.Ia(i.nb(r))&&(e=!0)))),s.v(r),e},N.prototype.intersectsRect=N.prototype.$f=function(t,i){if(i===void 0&&(i=this.transform,this.angle===0))return t.$f(this.U);var n=this.Ja,e=i,r=s.wb(0,0),o=s.wb(0,n.height),h=s.wb(n.width,n.height),l=s.wb(n.width,0),u=!1;if(t.Ia(e.nb(r))||t.Ia(e.nb(o))||t.Ia(e.nb(h))||t.Ia(e.nb(l)))u=!0;else{var n=s.lg(0,0,n.width,n.height),f=s.wb(t.x,t.y);n.Ia(e.xh(f))?u=!0:(f.m(t.x,t.bottom),n.Ia(e.xh(f))?u=!0:(f.m(t.right,t.bottom),n.Ia(e.xh(f))?u=!0:(f.m(t.right,t.y),n.Ia(e.xh(f))&&(u=!0)))),s.v(f),s.Bb(n),!u&&(aa(t,r,o)||aa(t,o,h)||aa(t,h,l)||aa(t,l,r))&&(u=!0)}return s.v(r),s.v(o),s.v(h),s.v(l),u},N.prototype.getDocumentPoint=N.prototype.Ya=function(t,i){if(i===void 0&&(i=new F),t instanceof P){t.Ud()&&s.k("getDocumentPoint:s Spot must be specific: "+t.toString());var n=this.Ja;i.m(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else i.set(t);return this.rh.nb(i),i},N.prototype.getDocumentAngle=N.prototype.dm=function(){var t;return t=this.rh,t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},N.prototype.getDocumentScale=N.prototype.vj=function(){if((this.M&4096)===0)return this.Ho;var t=this.rb;return this.R!==null?t*this.R.vj():t},N.prototype.getLocalPoint=N.prototype.kF=function(t,i){return i===void 0&&(i=new F),i.assign(t),this.rh.xh(i),i},N.prototype.getNearestIntersectionPoint=N.prototype.lF=function(t,i,n){return this.Fn(t.x,t.y,i.x,i.y,n)},B=N.prototype,B.Fn=function(t,i,n,e,r){var o=this.transform,h=1/(o.m11*o.m22-o.m12*o.m21),l=o.m22*h,u=-o.m12*h,f=-o.m21*h,a=o.m11*h,p=h*(o.m21*o.dy-o.m22*o.dx),y=h*(o.m12*o.dx-o.m11*o.dy);return this.qn!==null?(o=this.U,co(o.left,o.top,o.right,o.bottom,t,i,n,e,r)):(h=t*l+i*f+p,t=t*u+i*a+y,i=n*l+e*f+p,n=n*u+e*a+y,r.m(0,0),e=this.Ja,n=co(0,0,e.width,e.height,h,t,i,n,r),r.transform(o),n)};function Gt(t,i,n,e,r){if(xs(t)!==!1){var h=t.margin,o=h.right+h.left,h=h.top+h.bottom;i=Math.max(i-o,0),n=Math.max(n-h,0),r=r||0,e=Math.max((e||0)-o,0),r=Math.max(r-h,0);var o=t.angle,h=0,h=t.Da,l=0;t instanceof Y&&(l=t.mb),o===90||o===270?(i=isFinite(h.height)?h.height+l:i,n=isFinite(h.width)?h.width+l:n):(i=isFinite(h.width)?h.width+l:i,n=isFinite(h.height)?h.height+l:n);var h=e||0,l=r||0,u=t instanceof A;switch(zr(t,!0)){case ri:l=h=0,u&&(n=i=1/0);break;case ii:isFinite(i)&&i>e&&(h=i),isFinite(n)&&n>r&&(l=n);break;case Xi:isFinite(i)&&i>e&&(h=i),l=0,u&&(n=1/0);break;case nn:isFinite(n)&&n>r&&(l=n),h=0,u&&(i=1/0)}var u=t.Hf,f=t.si;h>u.width&&f.width<u.width&&(h=u.width),l>u.height&&f.height<u.height&&(l=u.height),e=Math.max(h/t.scale,f.width),r=Math.max(l/t.scale,f.height),u.width<e&&(e=Math.min(f.width,e)),u.height<r&&(r=Math.min(f.height,r)),i=Math.min(u.width,i),n=Math.min(u.height,n),i=Math.max(e,i),n=Math.max(r,n),(o===90||o===270)&&(h=i,i=n,n=h,h=e,e=r,r=h),t.ud.Qa(),t.Rn(i,n,e,r),t.ud.freeze(),t.ud.H()||s.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),ne(t,!1)}}B.Rn=function(){},B.yj=function(){return!1},B.jc=function(t,i,n,e,r){this.Ri();var o=s.vf();if(o.assign(this.pc),this.pc.Qa(),$e(this)===!1){var h=this.pc;h.x=t,h.y=i,h.width=n,h.height=e}else this.pj(t,i,n,e);this.pc.freeze(),this.og=r===void 0?null:r,n=!1,r!==void 0?n=!0:(r=this.R,r===null||r.type!==_e&&r.type!==mr||(r=r.R),r!==null&&(r=r.Nc,e=this.za,this.qn!==null&&(e=this.pc),n=i+e.height,e=t+e.width,n=!(0<=t+.05&&e<=r.width+.05&&0<=i+.05&&n<=r.height+.05),this instanceof rt&&(t=this.Nc,this.nw>t.height||this.zf.Ge>t.width))&&(n=!0)),this.M=n?this.M|256:this.M&-257,this.pc.H()||s.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.pc.toString()),this.ey(o,this.pc),sh(this,!1),s.Bb(o)},B.pj=function(){};function Oa(t,i,n,e,r){var o=t.U;if(o.x=i,o.y=n,o.width=e,o.height=r,!t.Da.H()){o=t.ud,n=t.margin,i=n.right+n.left;var h=n.top+n.bottom;switch(n=o.width+i,o=o.height+h,e+=i,r+=h,i=zr(t,!0),n===e&&o===r&&(i=ri),i){case ri:(n>e||o>r)&&(ne(t,!0),Gt(t,n>e?e:n,o>r?r:o));break;case ii:ne(t,!0),Gt(t,e,r,0,0);break;case Xi:ne(t,!0),Gt(t,e,o,0,0);break;case nn:ne(t,!0),Gt(t,n,r,0,0)}}}B.ey=function(t,i){var n=this.W;n!==null&&n.g!==null&&(n.Fq!==this&&n.jG!==this&&n.xB!==this||oc(n,!0),this.oa(),g0(t,i)||(n.Rk(),this.Ks(n)))},B.Ks=function(t){this.le!==null&&(oc(t,!0),t instanceof I&&T1(t,this))},s.defineProperty(N,{eo:"shadowVisible"},function(){return this.kn},function(t){var i=this.kn;i!==t&&(this.kn=t,this.oa(),this.h("shadowVisible",i,t))}),N.prototype.ve=function(t,i){if(this.visible){var n=this instanceof A&&(this.type===_e||this.type===mr),e=this.pc;if(n||e.width!==0&&e.height!==0&&!isNaN(e.x)&&!isNaN(e.y)){var r=this.opacity;if(r!==0){var o=1;if(r!==1&&(o=t.globalAlpha,t.globalAlpha=o*r),t instanceof Qu)t:if(this.visible){var n=null,h=t.Rx;if(this instanceof A&&(this.type===_e||this.type===mr))Ig(this,t,i);else{var l=this.pc;if(l.width!==0&&l.height!==0&&!isNaN(l.x)&&!isNaN(l.y)){var u=this.transform,f=this.R;(this.M&4096)!==0&&Va(this);var e=(this.M&256)!==0,a=!1;if(this instanceof rt&&(t.font=this.font),e){if(a=f.Yg()?f.Ja:f.U,this.og!==null)var v=this.og,p=v.x,y=v.y,c=v.width,v=v.height;else p=Math.max(l.x,a.x),y=Math.max(l.y,a.y),c=Math.min(l.right,a.right)-p,v=Math.min(l.bottom,a.bottom)-y;if(p>l.width+l.x||l.x>a.width+a.x||y>l.height+l.y||l.y>a.height+a.y)break t;a=!0,ps(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(p,y,c,v),t.clip()}if(this.yj()){var d=this;if(!d.isVisible())break t}t.vh.Vb=[1,0,0,1,0,0],this instanceof rt&&1<this.Vx&&ps(t,1,0,0,1,0,0),p=!1,this.yj()&&this.lm&&i.Ok("drawShadows")&&(y=this.jn,t.KB(y.x*i.scale*i.wd,y.y*i.scale*i.wd,d.Eg),t.fo(),t.shadowColor=d.hn),d=!1,this.W&&i.Ok("drawShadows")&&(d=this.W.lm),this.eo===!0?(t.fo(),p===!1&&d&&(ps(t,1,0,0,1,0,0),t.fb(),p=!0)):this.eo===!1&&t.rm(),this.cc!==null&&(Zn(this,t,this.cc,!0,!0),p===!1&&d&&(ps(t,1,0,0,1,0,0),t.fb(),p=!0),this.cc instanceof yt&&this.cc.type===fe?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.Lg(this.cc)):t.fillRect(l.x,l.y,l.width,l.height)),this instanceof A?ps(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy):t.vh.Vb=[u.m11,u.m12,u.m21,u.m22,u.dx,u.dy],this.Gb!==null&&(p===!1&&d&&(ps(t,1,0,0,1,0,0),t.fb(),p=!0),c=this.Ja,u=l=0,y=c.width,c=c.height,v=0,this instanceof Y&&(c=this.Sa.eb,l=c.x,u=c.y,y=c.width,c=c.height,v=this.ki),Zn(this,t,this.Gb,!0,!1),this.Gb instanceof yt&&this.Gb.type===fe?(t.beginPath(),t.rect(l-v/2,u-v/2,y+v,c+v),t.Lg(this.Gb)):t.fillRect(l-v/2,u-v/2,y+v,c+v)),d&&(this.Gb!==null||this.cc!==null||f!==null&&(f.M&512)!==0||f!==null&&(f.type===wo||f.type===hh)&&f.Bd()!==this)?(Ha(this,!0),this.eo===null&&t.rm()):Ha(this,!1),this.Ik(t,i),d&&(this.M&512)!==0&&t.fo(),this.yj()&&d&&t.rm(),e&&(t.restore(),a&&t.qf.pop()),this instanceof A&&(n=t.qf.pop()),p===!0&&t.qf.pop(),this instanceof rt&&1<this.Vx&&(n=t.qf.pop()),t.XE!==null&&(n===null&&(h===t.Rx?(ps(t,1,0,0,1,0,0),n=t.qf.pop()):n=t.Rx),t.XE(this,n))}}}else if(n)Ig(this,t,i);else{if(this instanceof S&&this.Hu(!1),n=this.transform,h=this.R,(this.M&4096)!==0&&Va(this),f=!1,d=this.W,l=0,d&&i.Ok("drawShadows")&&(f=d.lm)&&(a=d.jn,l=Math.max(a.y,a.x)*i.scale*i.wd),!(u=i.Km)){var c=l,v=this.Nc,l=this.Zk,g=l.m11,m=l.m21,w=l.dx,M=l.m12,k=l.m22,D=l.dy,C,G,H=G=0,l=G*g+H*m+w,u=G*M+H*k+D,y=p=0;G=v.width+c,H=0,C=G*g+H*m+w,G=G*M+H*k+D,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,G=v.width+c,H=v.height+c,C=G*g+H*m+w,G=G*M+H*k+D,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,G=0,H=v.height+c,C=G*g+H*m+w,G=G*M+H*k+D,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,c=i.eA,v=c.x,g=c.y,u=!(l>c.width+v||v>p+l||u>c.height+g||g>y+u)}if(u){if(l=(this.M&256)!==0,t.Qp&&(l=!1),this instanceof rt&&(t.font=this.font),l){if(u=h.Yg()?h.Ja:h.U,this.og!==null?(v=this.og,p=v.x,y=v.y,c=v.width,v=v.height):(p=Math.max(e.x,u.x),y=Math.max(e.y,u.y),c=Math.min(e.right,u.right)-p,v=Math.min(e.bottom,u.bottom)-y),p>e.width+e.x||e.x>u.width+u.x){r!==1&&(t.globalAlpha=o);return}t.save(),t.beginPath(),t.rect(p,y,c,v),t.clip()}if(this.yj()){if(!d.isVisible()){r!==1&&(t.globalAlpha=o);return}f&&(t.KB(a.x*i.scale*i.wd,a.y*i.scale*i.wd,d.Eg),t.fo(),t.shadowColor=d.hn)}this.eo===!0?t.fo():this.eo===!1&&t.rm(),this.cc!==null&&(Zn(this,t,this.cc,!0,!0),this.cc instanceof yt&&this.cc.type===fe?(t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.Lg(this.cc)):t.fillRect(e.x,e.y,e.width,e.height)),n.yu()||t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),f&&(h!==null&&(h.M&512)!==0||h!==null&&(h.type===wo||h.type===hh)&&h.Bd()!==this)&&this.eo===null&&t.rm(),this.Gb!==null&&(u=this.Ja,a=e=0,d=u.width,u=u.height,p=0,this instanceof Y&&(u=this.Sa.eb,e=u.x,a=u.y,d=u.width,u=u.height,p=this.ki),Zn(this,t,this.Gb,!0,!1),this.Gb instanceof yt&&this.Gb.type===fe?(t.beginPath(),t.rect(e-p/2,a-p/2,d+p,u+p),t.Lg(this.Gb)):t.fillRect(e-p/2,a-p/2,d+p,u+p)),f&&(this.Gb!==null||this.cc!==null||h!==null&&(h.M&512)!==0||h!==null&&(h.type===wo||h.type===hh)&&h.Bd()!==this)?(Ha(this,!0),this.eo===null&&t.rm()):Ha(this,!1),this.Ik(t,i),f&&(this.M&512)!==0&&t.fo(),this.yj()&&f&&t.rm(),l?(t.restore(),this instanceof A?t.Ke(!0):t.Ke(!1)):n.yu()||(h=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*h,-n.m12*h,-n.m21*h,n.m11*h,h*(n.m21*n.dy-n.m22*n.dx),h*(n.m12*n.dx-n.m11*n.dy)))}}r!==1&&(t.globalAlpha=o)}}}};function Ig(t,i,n){var e=t.pc;t.cc!==null&&(Zn(t,i,t.cc,!0,!0),t.cc instanceof yt&&t.cc.type===fe?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.Lg(t.cc)):i.fillRect(e.x,e.y,e.width,e.height)),t.Gb!==null&&(Zn(t,i,t.Gb,!0,!1),t.Gb instanceof yt&&t.Gb.type===fe?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.Lg(t.Gb)):i.fillRect(e.x,e.y,e.width,e.height)),t.Ik(i,n)}N.prototype.Ik=function(){};function Zn(t,i,n,e,r){if(n!==null){var o=1,h=1;if(typeof n=="string")e?i.fillStyle=n:i.strokeStyle=n;else if(n.type===gs)e?i.fillStyle=n.color:i.strokeStyle=n.color;else{var l,h=t.Ja,o=h.width,h=h.height;if(r)var u=t.U,o=u.width,h=u.height;var f=i instanceof bi;if(f&&n.bh&&(n.type===bl||n.wo===o&&n.az===h))l=n.bh;else{var a=u=0,p=0,y=0,c=0,v=0,v=c=0;if(r&&(u=t.U,o=u.width,h=u.height,c=u.x,v=u.y),u=n.start.x*o+n.start.offsetX,a=n.start.y*h+n.start.offsetY,p=n.end.x*o+n.end.offsetX,y=n.end.y*h+n.end.offsetY,u+=c,p+=c,a+=v,y+=v,n.type===qr)l=i.createLinearGradient(u,a,p,y);else if(n.type===fe)v=isNaN(n.$t)?Math.max(o,h)/2:n.$t,isNaN(n.dv)?(c=0,v=Math.max(o,h)/2):c=n.dv,l=i.createRadialGradient(u,a,c,p,y,v);else if(n.type===bl)try{l=i.createPattern(n.pattern,"repeat")}catch{l=null}else s.Fd(n.type,"Brush type");if(n.type!==bl&&(r=n.Dk,r!==null))for(r=r.i;r.next();)l.addColorStop(r.key,r.value);if(f&&(n.bh=l,l!==null&&(n.wo=o,n.az=h),l===null&&n.type===bl&&n.wo!==-1)){n.wo=-1;var d=t.g;d!==null&&n.wo===-1&&s.setTimeout(function(){d.yq()},600)}}e?i.fillStyle=l:i.strokeStyle=l}}}N.prototype.isContainedBy=N.prototype.jm=function(t){if(t instanceof A)t:{if(this!==t&&t!==null)for(var i=this.R;i!==null;){if(i===t){t=!0;break t}i=i.R}t=!1}else t=!1;return t},N.prototype.isVisibleObject=N.prototype.Cj=function(){if(!this.visible)return!1;var t=this.R;return t!==null?t.Cj():!0},N.prototype.isEnabledObject=N.prototype.vu=function(){for(var t=this instanceof A?this:this.R;t!==null&&t.isEnabled;)t=t.R;return t===null},s.defineProperty(N,{YE:"enabledChanged"},function(){return this.ia!==null?this.ia.Gr:null},function(t){ie(this);var i=this.ia.Gr;i!==t&&(t!==null&&s.j(t,"function",N,"enabledChanged"),this.ia.Gr=t,this.h("enabledChanged",i,t))});function Va(t){if((t.M&2048)!==0){var i=t.jd;if(i.reset(),!t.pc.H()||!t.ud.H()){ou(t,!1);return}i.translate(t.pc.x,t.pc.y),i.translate(-t.za.x,-t.za.y);var n=t.Ja;Ey(t,i,n.x,n.y,n.width,n.height),ou(t,!1),ms(t,!0)}(t.M&4096)!==0&&(i=t.R,i===null?(t.Zk.set(t.jd),t.Ho=t.scale,ms(t,!1)):i.rh!==null&&(n=t.Zk,n.reset(),i.Yg()?n.multiply(i.Zk):i.R!==null&&n.multiply(i.R.Zk),n.multiply(t.jd),t.Ho=t.scale*i.Ho,ms(t,!1)))}function Ey(t,i,n,e,r,o){if(t.scale!==1&&i.scale(t.scale),t.angle!==0){var h=Tt;t.yj()&&t.Gf.Zc()&&(h=t.Gf);var l=s.K();if(t instanceof L&&t.cg!==t)for(n=t.cg,e=n.Ja,l.bv(e.x,e.y,e.width,e.height,h),n.Wi.nb(l),l.offset(-n.za.x,-n.za.y),h=n.R;h!==null&&h!==t;)h.Wi.nb(l),l.offset(-h.za.x,-h.za.y),h=h.R;else l.bv(n,e,r,o,h);i.rotate(t.angle,l.x,l.y),s.v(l)}}B=N.prototype,B.I=function(t){if(t===void 0&&(t=!1),xs(this)!==!0){ne(this,!0),sh(this,!0);var i=this.R;i===null||t||i.I()}},B.gq=function(){xs(this)!==!0&&(ne(this,!0),sh(this,!0))};function xf(t){if($e(t)===!1){var i=t.R;i!==null?i.I():t.yj()&&(i=t.g,i!==null&&(i.vg.add(t),t instanceof I&&t.ag(),i.ye())),sh(t,!0)}}B.Ri=function(){(this.M&2048)===0&&(ou(this,!0),ms(this,!0))},B.RA=function(){ms(this,!0)},B.oa=function(){var t=this.W;t!==null&&t.oa()};function zr(t,i){var n=t.stretch,e=t.R;return e!==null&&e.na===Xo?wf(t,e.ee(t.Wb),e.de(t.column),i):e!==null&&e.na===wo&&e.Bd()===t?xo(t,ii,i):n===Br?e!==null?e.na===hh&&e.Bd()===t?xo(t,ii,i):(n=e.ae,n===Br?xo(t,ri,i):xo(t,n,i)):xo(t,ri,i):xo(t,n,i)}function wf(t,i,n,e){var r=t.stretch;if(r!==Br)return xo(t,r,e);var o=r=null;switch(i.stretch){case nn:o=!0;break;case ii:o=!0}switch(n.stretch){case Xi:r=!0;break;case ii:r=!0}return i=t.R.ae,r===null&&(r=i===Xi||i===ii),o===null&&(o=i===nn||i===ii),r===!0&&o===!0?xo(t,ii,e):r===!0?xo(t,Xi,e):o===!0?xo(t,nn,e):xo(t,ri,e)}function xo(t,i,n){if(n)return i;if(i===ri||(n=t.Da,n.H()))return ri;if(t=t.angle,!isNaN(n.width))if(t!==90&&t!==270){if(i===Xi)return ri;if(i===ii)return nn}else{if(i===nn)return ri;if(i===ii)return Xi}if(!isNaN(n.height))if(t!==90&&t!==270){if(i===nn)return ri;if(i===ii)return Xi}else{if(i===Xi)return ri;if(i===ii)return nn}return i}s.defineProperty(N,{Eq:"segmentOrientation"},function(){return this.fn},function(t){var i=this.fn;i!==t&&(this.fn=t,this.I(),this.h("segmentOrientation",i,t),t===ye&&(this.angle=0))}),s.defineProperty(N,{Re:"segmentIndex"},function(){return this.lt},function(t){t=Math.round(t);var i=this.lt;i!==t&&(this.lt=t,this.I(),this.h("segmentIndex",i,t))}),s.defineProperty(N,{zB:"segmentFraction"},function(){return this.dn},function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var i=this.dn;i!==t&&(this.dn=t,this.I(),this.h("segmentFraction",i,t))}),s.defineProperty(N,{AB:"segmentOffset"},function(){return this.en},function(t){var i=this.en;i.L(t)||(this.en=t=t.S(),this.I(),this.h("segmentOffset",i,t))}),s.defineProperty(N,{stretch:"stretch"},function(){return this.Fg},function(t){var i=this.Fg;i!==t&&(this.Fg=t,this.I(),this.h("stretch",i,t))}),s.defineProperty(N,{name:"name"},function(){return this.Sb},function(t){var i=this.Sb;i!==t&&(this.Sb=t,this.W!==null&&(this.W.Vm=null),this.h("name",i,t))}),s.defineProperty(N,{opacity:"opacity"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(s.j(t,"number",N,"opacity"),(0>t||1<t)&&s.Fa(t,"0 <= value <= 1",N,"opacity"),this.Dc=t,this.h("opacity",i,t),t=this.g,i=this.W,t!==null&&i!==null&&t.oa(Wh(i,i.U)))}),s.defineProperty(N,{visible:"visible"},function(){return(this.M&1)!==0},function(t){var i=(this.M&1)!==0;i!==t&&(this.M^=1,this.h("visible",i,t),i=this.R,i!==null?i.I():this.yj()&&this.Dd(t),this.oa(),Bg(this))}),s.defineProperty(N,{Ug:"pickable"},function(){return(this.M&2)!==0},function(t){var i=(this.M&2)!==0;i!==t&&(this.M^=2,this.h("pickable",i,t))}),s.defineProperty(N,{aI:"fromLinkableDuplicates"},function(){return(this.M&4)!==0},function(t){var i=(this.M&4)!==0;i!==t&&(this.M^=4,this.h("fromLinkableDuplicates",i,t))}),s.defineProperty(N,{bI:"fromLinkableSelfNode"},function(){return(this.M&8)!==0},function(t){var i=(this.M&8)!==0;i!==t&&(this.M^=8,this.h("fromLinkableSelfNode",i,t))}),s.defineProperty(N,{UJ:"toLinkableDuplicates"},function(){return(this.M&16)!==0},function(t){var i=(this.M&16)!==0;i!==t&&(this.M^=16,this.h("toLinkableDuplicates",i,t))}),s.defineProperty(N,{VJ:"toLinkableSelfNode"},function(){return(this.M&32)!==0},function(t){var i=(this.M&32)!==0;i!==t&&(this.M^=32,this.h("toLinkableSelfNode",i,t))}),s.defineProperty(N,{ff:"isPanelMain"},function(){return(this.M&64)!==0},function(t){var i=(this.M&64)!==0;i!==t&&(this.M^=64,this.I(),this.h("isPanelMain",i,t))}),s.defineProperty(N,{Kx:"isActionable"},function(){return(this.M&128)!==0},function(t){var i=(this.M&128)!==0;i!==t&&(this.M^=128,this.h("isActionable",i,t))}),s.defineProperty(N,{qn:"areaBackground"},function(){return this.cc},function(t){var i=this.cc;i!==t&&(t instanceof yt&&t.freeze(),this.cc=t,this.oa(),this.h("areaBackground",i,t))}),s.defineProperty(N,{background:"background"},function(){return this.Gb},function(t){var i=this.Gb;i!==t&&(t instanceof yt&&t.freeze(),this.Gb=t,this.oa(),this.h("background",i,t))});function Ha(t,i){t.M=i?t.M|512:t.M&-513}function Jh(t){return(t.M&1024)!==0}function Ry(t,i){t.M=i?t.M|1024:t.M&-1025}function ou(t,i){t.M=i?t.M|2048:t.M&-2049}function ms(t,i){t.M=i?t.M|4096:t.M&-4097}function xs(t){return(t.M&8192)!==0}function ne(t,i){t.M=i?t.M|8192:t.M&-8193}function $e(t){return(t.M&16384)!==0}function sh(t,i){t.M=i?t.M|16384:t.M&-16385}s.u(N,{W:"part"},function(){if(this.yj())return this;if(this.$m!==null)return this.$m;var t;for(t=this.R;t;){if(t instanceof L)return this.$m=t;t=t.R}return null}),s.u(N,{R:"panel"},function(){return this.ej}),N.prototype.qm=function(t){this.ej=t},s.u(N,{layer:"layer"},function(){var t=this.W;return t!==null?t.layer:null},{configurable:!0}),s.u(N,{g:"diagram"},function(){var t=this.W;return t!==null?t.g:null},{configurable:!0}),s.defineProperty(N,{position:"position"},function(){return this.ab},function(t){var i=t.x,n=t.y,e=this.ab,r=e.x,o=e.y;(r===i||isNaN(r)&&isNaN(i))&&(o===n||isNaN(o)&&isNaN(n))?this.HB():(t=t.S(),this.GB(t,e)&&this.h("position",e,t))}),N.prototype.HB=function(){},N.prototype.GB=function(t){return this.ab=t,xf(this),this.Ri(),!0},N.prototype.Ay=function(t,i){this.ab.m(t,i),this.Ri()},s.u(N,{U:"actualBounds"},function(){return this.pc}),s.defineProperty(N,{scale:"scale"},function(){return this.rb},function(t){var i=this.rb;i!==t&&(0>=t&&s.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.rb=t,this.Ri(),this.I(),this.h("scale",i,t))}),s.defineProperty(N,{angle:"angle"},function(){return this.mg},function(t){var i=this.mg;i!==t&&(t%=360,0>t&&(t+=360),i!==t&&(this.mg=t,Bg(this),this.I(),this.Ri(),this.h("angle",i,t)))}),s.defineProperty(N,{Da:"desiredSize"},function(){return this.Ve},function(t){var i=t.width,n=t.height,e=this.Ve,r=e.width,o=e.height;(r===i||isNaN(r)&&isNaN(i))&&(o===n||isNaN(o)&&isNaN(n))||(this.Ve=t=t.S(),this.I(),this instanceof Y&&this.fe(),this.h("desiredSize",e,t),Jh(this)&&(t=this.W,t!==null&&(oh(this,t,"width"),oh(this,t,"height"))))}),s.defineProperty(N,{width:"width"},function(){return this.Ve.width},function(t){var i=this.Ve.width;i===t||isNaN(i)&&isNaN(t)||(i=this.Ve,this.Ve=t=new lt(t,this.Ve.height).freeze(),this.I(),this instanceof Y&&this.fe(),this.h("desiredSize",i,t),Jh(this)&&(t=this.W,t!==null&&oh(this,t,"width")))}),s.defineProperty(N,{height:"height"},function(){return this.Ve.height},function(t){var i=this.Ve.height;i===t||isNaN(i)&&isNaN(t)||(i=this.Ve,this.Ve=t=new lt(this.Ve.width,t).freeze(),this.I(),this instanceof Y&&this.fe(),this.h("desiredSize",i,t),Jh(this)&&(t=this.W,t!==null&&oh(this,t,"height")))}),s.defineProperty(N,{si:"minSize"},function(){return this.$h},function(t){var i=this.$h;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.$h=t,this.I(),this.h("minSize",i,t))}),s.defineProperty(N,{Hf:"maxSize"},function(){return this.Zh},function(t){var i=this.Zh;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Zh=t,this.I(),this.h("maxSize",i,t))}),s.u(N,{za:"measuredBounds"},function(){return this.ud}),s.u(N,{Ja:"naturalBounds"},function(){return this.Nc},{configurable:!0}),s.defineProperty(N,{margin:"margin"},function(){return this.Tm},function(t){typeof t=="number"&&(t=new xt(t));var i=this.Tm;i.L(t)||(this.Tm=t=t.S(),this.I(),this.h("margin",i,t))}),s.u(N,{transform:null},function(){return(this.M&2048)!==0&&Va(this),this.jd}),s.u(N,{rh:null},function(){return(this.M&4096)!==0&&Va(this),this.Zk}),s.defineProperty(N,{alignment:"alignment"},function(){return this.me},function(t){var i=this.me;i.L(t)||(t.Ud()&&!t.ge()&&s.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.me=t=t.S(),xf(this),this.h("alignment",i,t))}),s.defineProperty(N,{column:"column"},function(){return this.gr},function(t){t=Math.round(t);var i=this.gr;i!==t&&(0>t&&s.Fa(t,">= 0",N,"column"),this.gr=t,this.I(),this.h("column",i,t))}),s.defineProperty(N,{BH:"columnSpan"},function(){return this.Fi},function(t){t=Math.round(t);var i=this.Fi;i!==t&&(1>t&&s.Fa(t,">= 1",N,"columnSpan"),this.Fi=t,this.I(),this.h("columnSpan",i,t))}),s.defineProperty(N,{Wb:"row"},function(){return this.ht},function(t){t=Math.round(t);var i=this.ht;i!==t&&(0>t&&s.Fa(t,">= 0",N,"row"),this.ht=t,this.I(),this.h("row",i,t))}),s.defineProperty(N,{rowSpan:"rowSpan"},function(){return this.gj},function(t){t=Math.round(t);var i=this.gj;i!==t&&(1>t&&s.Fa(t,">= 1",N,"rowSpan"),this.gj=t,this.I(),this.h("rowSpan",i,t))}),s.defineProperty(N,{By:"spanAllocation"},function(){return this.xt},function(t){var i=this.xt;i!==t&&(t!==null&&s.j(t,"function",N,"spanAllocation"),this.xt=t,this.I(),this.h("spanAllocation",i,t))}),s.defineProperty(N,{qh:"alignmentFocus"},function(){return this.ym},function(t){var i=this.ym;i.L(t)||(!t.Ud()||t.ge()||t.L(ki)&&this instanceof I||s.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.ym=t=t.S(),this.I(),this.h("alignmentFocus",i,t))}),s.defineProperty(N,{le:"portId"},function(){return this.Vs},function(t){var i=this.Vs;if(i!==t){var n=this.W;n===null||n instanceof I||(s.k("Cannot set portID on a Link: "+t),n=null),i!==null&&n!==null&&ac(n,this),this.Vs=t,t!==null&&n!==null&&(n.Qk=!0,S1(n,this)),this.h("portId",i,t)}});function Zo(t){var i=t.W;if(i instanceof I&&(t.le!==null||t===i.port)){var n=i.g;n===null||n.ja.lb||T1(i,t)}}function Bg(t){var i=t.g;i===null||i.ja.lb||(t instanceof A?t instanceof I?t.ag():Mf(t,t,function(n){Zo(n)}):Zo(t))}s.defineProperty(N,{Nb:"toSpot"},function(){return this.Y!==null?this.Y.zk:ki},function(t){this.Qd();var i=this.Y.zk;i.L(t)||(t=t.S(),this.Y.zk=t,this.h("toSpot",i,t),Zo(this))}),s.defineProperty(N,{wm:"toEndSegmentLength"},function(){return this.Y!==null?this.Y.xk:10},function(t){this.Qd();var i=this.Y.xk;i!==t&&(0>t&&s.Fa(t,">= 0",N,"toEndSegmentLength"),this.Y.xk=t,this.h("toEndSegmentLength",i,t),Zo(this))}),s.defineProperty(N,{ev:"toEndSegmentDirection"},function(){return this.Y!==null?this.Y.wk:yu},function(t){this.Qd();var i=this.Y.wk;i!==t&&(s.Yt("GraphObject.toEndSegmentDirection","2.0"),this.Y.wk=t,this.h("toEndSegmentDirection",i,t),Zo(this))}),s.defineProperty(N,{fv:"toShortLength"},function(){return this.Y!==null?this.Y.yk:0},function(t){this.Qd();var i=this.Y.yk;i!==t&&(this.Y.yk=t,this.h("toShortLength",i,t),Zo(this))}),s.defineProperty(N,{EG:"toLinkable"},function(){return this.Y!==null?this.Y.Et:null},function(t){this.Qd();var i=this.Y.Et;i!==t&&(this.Y.Et=t,this.h("toLinkable",i,t))}),s.defineProperty(N,{WJ:"toMaxLinks"},function(){return this.Y!==null?this.Y.Ft:1/0},function(t){this.Qd();var i=this.Y.Ft;i!==t&&(0>t&&s.Fa(t,">= 0",N,"toMaxLinks"),this.Y.Ft=t,this.h("toMaxLinks",i,t))}),s.defineProperty(N,{Mb:"fromSpot"},function(){return this.Y!==null?this.Y.$j:ki},function(t){this.Qd();var i=this.Y.$j;i.L(t)||(t=t.S(),this.Y.$j=t,this.h("fromSpot",i,t),Zo(this))}),s.defineProperty(N,{cm:"fromEndSegmentLength"},function(){return this.Y!==null?this.Y.Yj:10},function(t){this.Qd();var i=this.Y.Yj;i!==t&&(0>t&&s.Fa(t,">= 0",N,"fromEndSegmentLength"),this.Y.Yj=t,this.h("fromEndSegmentLength",i,t),Zo(this))}),s.defineProperty(N,{lu:"fromEndSegmentDirection"},function(){return this.Y!==null?this.Y.Xj:yu},function(t){this.Qd();var i=this.Y.Xj;i!==t&&(s.Yt("GraphObject.fromEndSegmentDirection","2.0"),this.Y.Xj=t,this.h("fromEndSegmentDirection",i,t),Zo(this))}),s.defineProperty(N,{mu:"fromShortLength"},function(){return this.Y!==null?this.Y.Zj:0},function(t){this.Qd();var i=this.Y.Zj;i!==t&&(this.Y.Zj=t,this.h("fromShortLength",i,t),Zo(this))}),s.defineProperty(N,{hF:"fromLinkable"},function(){return this.Y!==null?this.Y.Jr:null},function(t){this.Qd();var i=this.Y.Jr;i!==t&&(this.Y.Jr=t,this.h("fromLinkable",i,t))}),s.defineProperty(N,{GA:"fromMaxLinks"},function(){return this.Y!==null?this.Y.Kr:1/0},function(t){this.Qd();var i=this.Y.Kr;i!==t&&(0>t&&s.Fa(t,">= 0",N,"fromMaxLinks"),this.Y.Kr=t,this.h("fromMaxLinks",i,t))}),s.defineProperty(N,{cursor:"cursor"},function(){return this.pr},function(t){var i=this.pr;i!==t&&(s.j(t,"string",N,"cursor"),this.pr=t,this.h("cursor",i,t))}),s.defineProperty(N,{click:"click"},function(){return this.ia!==null?this.ia.Ei:null},function(t){ie(this);var i=this.ia.Ei;i!==t&&(t!==null&&s.j(t,"function",N,"click"),this.ia.Ei=t,this.h("click",i,t))}),s.defineProperty(N,{Zt:"doubleClick"},function(){return this.ia!==null?this.ia.Mi:null},function(t){ie(this);var i=this.ia.Mi;i!==t&&(t!==null&&s.j(t,"function",N,"doubleClick"),this.ia.Mi=t,this.h("doubleClick",i,t))}),s.defineProperty(N,{sA:"contextClick"},function(){return this.ia!==null?this.ia.Gi:null},function(t){ie(this);var i=this.ia.Gi;i!==t&&(t!==null&&s.j(t,"function",N,"contextClick"),this.ia.Gi=t,this.h("contextClick",i,t))}),s.defineProperty(N,{Ju:"mouseEnter"},function(){return this.ia!==null?this.ia.Bs:null},function(t){ie(this);var i=this.ia.Bs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseEnter"),this.ia.Bs=t,this.h("mouseEnter",i,t))}),s.defineProperty(N,{Ku:"mouseLeave"},function(){return this.ia!==null?this.ia.Cs:null},function(t){ie(this);var i=this.ia.Cs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseLeave"),this.ia.Cs=t,this.h("mouseLeave",i,t))}),s.defineProperty(N,{kB:"mouseOver"},function(){return this.ia!==null?this.ia.aj:null},function(t){ie(this);var i=this.ia.aj;i!==t&&(t!==null&&s.j(t,"function",N,"mouseOver"),this.ia.aj=t,this.h("mouseOver",i,t))}),s.defineProperty(N,{jB:"mouseHover"},function(){return this.ia!==null?this.ia.$i:null},function(t){ie(this);var i=this.ia.$i;i!==t&&(t!==null&&s.j(t,"function",N,"mouseHover"),this.ia.$i=t,this.h("mouseHover",i,t))}),s.defineProperty(N,{iB:"mouseHold"},function(){return this.ia!==null?this.ia.Zi:null},function(t){ie(this);var i=this.ia.Zi;i!==t&&(t!==null&&s.j(t,"function",N,"mouseHold"),this.ia.Zi=t,this.h("mouseHold",i,t))}),s.defineProperty(N,{bJ:"mouseDragEnter"},function(){return this.ia!==null?this.ia.zs:null},function(t){ie(this);var i=this.ia.zs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDragEnter"),this.ia.zs=t,this.h("mouseDragEnter",i,t))}),s.defineProperty(N,{cJ:"mouseDragLeave"},function(){return this.ia!==null?this.ia.As:null},function(t){ie(this);var i=this.ia.As;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDragLeave"),this.ia.As=t,this.h("mouseDragLeave",i,t))}),s.defineProperty(N,{hB:"mouseDrop"},function(){return this.ia!==null?this.ia.Yi:null},function(t){ie(this);var i=this.ia.Yi;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDrop"),this.ia.Yi=t,this.h("mouseDrop",i,t))}),s.defineProperty(N,{uE:"actionDown"},function(){return this.ia!==null?this.ia.Pq:null},function(t){ie(this);var i=this.ia.Pq;i!==t&&(t!==null&&s.j(t,"function",N,"actionDown"),this.ia.Pq=t,this.h("actionDown",i,t))}),s.defineProperty(N,{vE:"actionMove"},function(){return this.ia!==null?this.ia.Qq:null},function(t){ie(this);var i=this.ia.Qq;i!==t&&(t!==null&&s.j(t,"function",N,"actionMove"),this.ia.Qq=t,this.h("actionMove",i,t))}),s.defineProperty(N,{wE:"actionUp"},function(){return this.ia!==null?this.ia.Rq:null},function(t){ie(this);var i=this.ia.Rq;i!==t&&(t!==null&&s.j(t,"function",N,"actionUp"),this.ia.Rq=t,this.h("actionUp",i,t))}),s.defineProperty(N,{tE:"actionCancel"},function(){return this.ia!==null?this.ia.Oq:null},function(t){ie(this);var i=this.ia.Oq;i!==t&&(t!==null&&s.j(t,"function",N,"actionCancel"),this.ia.Oq=t,this.h("actionCancel",i,t))}),s.defineProperty(N,{QB:"toolTip"},function(){return this.ia!==null?this.ia.jj:null},function(t){ie(this);var i=this.ia.jj;i!==t&&(this.ia.jj=t,this.h("toolTip",i,t))}),s.defineProperty(N,{contextMenu:"contextMenu"},function(){return this.ia!==null?this.ia.Hi:null},function(t){ie(this);var i=this.ia.Hi;i!==t&&(this.ia.Hi=t,this.h("contextMenu",i,t))}),N.prototype.bind=N.prototype.bind=function(t){t.Gg=this;var i=this.bm();i!==null&&Ug(i)&&s.k("Cannot add a Binding to a template that has already been copied: "+t),this.Ac===null&&(this.Ac=new z(Pt)),this.Ac.add(t)},N.prototype.findTemplateBinder=N.prototype.bm=function(){for(var t=this instanceof A?this:this.R;t!==null;){if(t.ll!==null)return t;t=t.R}return null},N.prototype.setProperties=function(t){s.$u(this,t)};var gr;N.make=gr=function(t,i){var n=arguments,e=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var o=Ka.ka(t);typeof o=="function"?(n=s.Xl(arguments),e=o(n),s.Pa(e)||s.k('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=ke[t]}if(e===null&&(r!=null&&r.constructor||s.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),e=new r),o=1,e instanceof x&&1<n.length){var h=e,r=n[1];(typeof r=="string"||r instanceof HTMLDivElement)&&(Dy(h,r),o++)}for(;o<n.length;o++)r=n[o],r===void 0?s.k("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+e):zg(e,r);return e};function zg(t,i){if(typeof i=="string")if(t instanceof rt)t.text=i;else if(t instanceof Y)t.Fb=i;else if(t instanceof oi)t.source=i;else if(t instanceof A){var n=fo(A,i);n!==null?t.type=n:s.k("Unknown Panel type as an argument to GraphObject.make: "+i)}else t instanceof yt?(n=fo(yt,i),n!==null?t.type=n:s.k("Unknown Brush type as an argument to GraphObject.make: "+i)):t instanceof et?(n=fo(et,i),n!==null?t.type=n:s.k("Unknown Geometry type as an argument to GraphObject.make: "+i)):t instanceof mt?(n=fo(mt,i),n!==null?t.type=n:s.k("Unknown PathSegment type as an argument to GraphObject.make: "+i)):s.k("Unable to use a string as an argument to GraphObject.make: "+i);else if(i instanceof N)n=i,t instanceof A||s.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(n);else if(i instanceof Nt){var e=i,n=t,r;e.xe&&n.getRowDefinition?r=n.getRowDefinition(e.index):!e.xe&&n.getColumnDefinition?r=n.getColumnDefinition(e.index):s.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),r.Sp(e)}else if(i instanceof Je)typeof t.ic=="function"?t.ic(i):s.Lj(t,i);else if(i instanceof Pt)t instanceof N||t instanceof Nt?t.bind(i):s.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(i instanceof wi)t instanceof et?t.fc.add(i):s.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(i instanceof mt)t instanceof wi?t.yb.add(i):s.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(i instanceof wt)t instanceof x||t instanceof Z?t.Ub=i:s.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(i))for(n=0;n<i.length;n++)zg(t,i[n]);else if(typeof i=="object"&&i!==null)if(t instanceof yt){r=new Pi;for(n in i)e=parseFloat(n),isNaN(e)?r[n]=i[n]:t.addColorStop(e,i[n]);s.$u(t,r)}else if(t instanceof Nt){i.row!==void 0?(r=i.row,(r==null||r===1/0||isNaN(r)||0>r)&&s.k("Must specify non-negative integer row for RowColumnDefinition "+i+", not: "+r),t.xe=!0,t.index=r):i.column!==void 0&&(r=i.column,(r==null||r===1/0||isNaN(r)||0>r)&&s.k("Must specify non-negative integer column for RowColumnDefinition "+i+", not: "+r),t.xe=!1,t.index=r),r=new Pi;for(n in i)n!=="row"&&n!=="column"&&(r[n]=i[n]);s.$u(t,r)}else s.$u(t,i);else s.k('Unknown initializer "'+i+'" for object being constructed by GraphObject.make: '+t)}var Ka=new tt("string","function");N.getBuilders=function(){var t=new tt("string","function"),i;for(i in Ka)if(i!==i.toLowerCase()){var n=Ka.ka(i);typeof n=="function"&&t.add(i,n)}return t.freeze(),t};var Qo;N.defineBuilder=Qo=function(t,i){s.j(t,"string",N,"defineBuilder:name"),s.j(i,"function",N,"defineBuilder:func");var n=t.toLowerCase();t!==""&&n!=="none"&&t!==n||s.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Ka.add(t,i)};var Ua;N.takeBuilderArgument=Ua=function(t,i,n){n===void 0&&(n=null);var e=t[1];if(typeof n=="function"?n(e):typeof e=="string")return t.splice(1,1),e;if(i===void 0)throw Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return i},Qo("Button",function(){var t=new yt(qr);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var i=new yt(qr);return i.addColorStop(0,"white"),i.addColorStop(1,"dodgerblue"),t=gr(A,wo,{Kx:!0,YE:function(n,e){var r=n.Cd("ButtonBorder");r!==null&&(r.fill=e?n._buttonFillNormal:n._buttonFillDisabled)},_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:i,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},gr(Y,{name:"ButtonBorder",Fb:"Rectangle",A:new P(0,0,2.761423749153968,2.761423749153968),B:new P(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.Ju=function(n,e){if(e.vu()){var r=e.Cd("ButtonBorder");if(r instanceof Y){var o=e._buttonFillOver;e._buttonFillNormal=r.fill,r.fill=o,o=e._buttonStrokeOver,e._buttonStrokeNormal=r.stroke,r.stroke=o}}},t.Ku=function(n,e){if(e.vu()){var r=e.Cd("ButtonBorder");r instanceof Y&&(r.fill=e._buttonFillNormal,r.stroke=e._buttonStrokeNormal)}},t}),Qo("TreeExpanderButton",function(){var t=gr("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},gr(Y,{name:"ButtonIcon",Fb:"MinusLine",Da:_u},new Pt("figure","isTreeExpanded",function(i,n){var e=n.R;return i?e._treeExpandedFigure:e._treeCollapsedFigure}).by()),{visible:!1},new Pt("visible","isTreeLeaf",function(i){return!i}).by());return t.click=function(i,n){var e=n.W;if(e instanceof vt&&(e=e.$e),e instanceof I){var r=e.g;if(r!==null){if(r=r.pb,e.wc){if(!r.canCollapseTree(e))return}else if(!r.canExpandTree(e))return;i.vc=!0,e.wc?r.collapseTree(e):r.expandTree(e)}}},t}),Qo("SubGraphExpanderButton",function(){var t=gr("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},gr(Y,{name:"ButtonIcon",Fb:"MinusLine",Da:_u},new Pt("figure","isSubGraphExpanded",function(i,n){var e=n.R;return i?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).by()));return t.click=function(i,n){var e=n.W;if(e instanceof vt&&(e=e.$e),e instanceof Z){var r=e.g;if(r!==null){if(r=r.pb,e.$c){if(!r.canCollapseSubGraph(e))return}else if(!r.canExpandSubGraph(e))return;i.vc=!0,e.$c?r.collapseSubGraph(e):r.expandSubGraph(e)}}},t}),Qo("ToolTip",function(){var t=new vt(wo),i=new Y;return i.name="Border",i.fill="#FFFFE0",i.stroke="#CCCCCC",t.add(i),t}),Qo("ContextMenu",function(){return new vt(Oy)}),Qo("ContextMenuButton",function(){var t=gr("Button");t.stretch=Xi;var i=t.Cd("ButtonBorder");return i instanceof Y&&(i.Fb="Rectangle",i.A=new P(0,0,2,3),i.B=new P(1,1,-2,-2)),t}),Qo("PanelExpanderButton",function(t){var i=Ua(t,"COLLAPSIBLE"),n=gr("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},gr(Y,"TriangleUp",{name:"ButtonIcon",Da:new lt(6,4)},new Pt("figure","visible",function(e){return e?n._buttonExpandedFigure:n._buttonCollapsedFigure}).by(i)));return t=n.Cd("ButtonBorder"),t instanceof Y&&(t.stroke=null,t.fill="transparent"),n.click=function(e,r){var o=r.g;if(o!==null&&!o.ib){var h=r.bm();h===null&&(h=r.W),h!==null&&(h=h.Cd(i),h!==null&&(o.Ib("Collapse/Expand Panel"),h.visible=!h.visible,o.Yc("Collapse/Expand Panel")))}},n}),Qo("CheckBoxButton",function(t){var i=Ua(t);return t=gr("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},gr(Y,{name:"ButtonIcon",cI:"M0 4 L3 9 9 0",mb:2,stretch:ii,HA:ji,visible:!1},i!==""?new Pt("visible",i).RI():[])),t.click=function(n,e){var r=n.g;if(!(r===null||r.ib||i!==""&&r.$.ib)){n.vc=!0;var o=e.Cd("ButtonIcon");r.Ib("checkbox"),o.visible=!o.visible,typeof e._doClick=="function"&&e._doClick(n,e),r.Yc("checkbox")}},t}),Qo("CheckBox",function(t){t=Ua(t),t=gr("CheckBoxButton",t,{name:"Button",margin:new xt(0,1,0,0)});var i=gr(A,"Horizontal",t,{Kx:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillDisabled:t._buttonFillDisabled,Ju:t.Ju,Ku:t.Ku,click:t.click,_buttonClick:t.click});return t.Ju=null,t.Ku=null,t.click=null,i});function Gy(){this.Gr=this.Hi=this.jj=this.Oq=this.Rq=this.Qq=this.Pq=this.Yi=this.As=this.zs=this.Zi=this.$i=this.aj=this.Cs=this.Bs=this.Gi=this.Mi=this.Ei=null}Gy.prototype.copy=function(){var t=new Gy;return t.Ei=this.Ei,t.Mi=this.Mi,t.Gi=this.Gi,t.Bs=this.Bs,t.Cs=this.Cs,t.aj=this.aj,t.$i=this.$i,t.Zi=this.Zi,t.zs=this.zs,t.As=this.As,t.Yi=this.Yi,t.Pq=this.Pq,t.Qq=this.Qq,t.Rq=this.Rq,t.Oq=this.Oq,t.jj=this.jj,t.Hi=this.Hi,t.Gr=this.Gr,t};function A(t){N.call(this),t===void 0?this.na=Ja:(s.ob(t,A,A,"type"),this.na=t),this.xa=new z(N),this.lf=Wu,this.na===Yh&&(this.Kn=!0),this.tr=cn,this.Ki=Br,this.na===Xo&&Eg(this),this.Hp=ji,this.Tr=cx,this.Ur=Qs,this.Qr=0,this.Pr=100,this.Sr=10,this.Rr=0,this.ll=this.Zd=this.ak=this.Gm=this.Im=null,this.gs=NaN,this.xg=this.hk=null,this.Xo="category",this.wg=null,this.lj=new O(NaN,NaN,NaN,NaN),this.vk=this.it=this.Kl=null,this.Oj=""}s.La(A,N),s.oi(A),s.ga("Panel",A);function Eg(t){t.Tj=Wu,t.Rh=1,t.Ji=null,t.pl=null,t.Qh=1,t.Ph=null,t.ol=null,t.Xc=[],t.Vc=[],t.cn=Qh,t.Dm=Qh,t.kj=0,t.Ui=0}A.prototype.cloneProtected=function(t){if(N.prototype.cloneProtected.call(this,t),t.na=this.na,t.lf=this.lf.S(),t.tr=this.tr.S(),t.Ki=this.Ki,t.na===Xo){t.Tj=this.Tj.S(),t.Rh=this.Rh,t.Ji=this.Ji,t.pl=this.pl,t.Qh=this.Qh,t.Ph=this.Ph,t.ol=this.ol;var i=[];if(0<this.Xc.length){for(var n=this.Xc,e=n.length,r=0;r<e;r++)if(n[r]!==void 0){var o=n[r].copy();o.qm(t),i[r]=o}}if(t.Xc=i,i=[],0<this.Vc.length)for(n=this.Vc,e=n.length,r=0;r<e;r++)n[r]!==void 0&&(o=n[r].copy(),o.qm(t),i[r]=o);t.Vc=i,t.cn=this.cn,t.Dm=this.Dm,t.kj=this.kj,t.Ui=this.Ui}t.Hp=this.Hp,t.Tr=this.Tr.S(),t.Ur=this.Ur.S(),t.Qr=this.Qr,t.Pr=this.Pr,t.Sr=this.Sr,t.Rr=this.Rr,t.Im=this.Im,t.ak=this.ak,t.Zd=this.Zd,t.ll=this.ll,t.gs=this.gs,t.hk=this.hk,t.xg=this.xg,t.Xo=this.Xo,t.lj.assign(this.lj),t.Oj=this.Oj,this.it!==null&&(t.it=this.it)},A.prototype.qi=function(t){N.prototype.qi.call(this,t),t.xa=this.xa;for(var i=t.xa.n,n=i.length,e=0;e<n;e++)i[e].ej=t;t.Kl=null},A.prototype.copy=function(){var t=N.prototype.copy.call(this);if(t!==null){for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e].copy(),o=t;r.qm(o),r.$m=null;var h=o.xa,l=h.count;if(h.Rd(l,r),h=o.W,h!==null){h.Vm=null,r.le!==null&&h instanceof I&&(h.Qk=!0);var u=o.g;u!==null&&u.ja.lb||h.bd(Li,"elements",o,null,r,null,l)}}return t}return null},A.prototype.ic=function(t){t.Je===A?this.type=t:N.prototype.ic.call(this,t)},A.prototype.toString=function(){return"Panel("+this.type+")#"+s.Pd(this)};var Ja;A.Position=Ja=s.p(A,"Position",0),A.Horizontal=s.p(A,"Horizontal",1);var Oy;A.Vertical=Oy=s.p(A,"Vertical",2);var hh;A.Spot=hh=s.p(A,"Spot",3);var wo;A.Auto=wo=s.p(A,"Auto",4);var Xo;A.Table=Xo=s.p(A,"Table",5),A.Viewbox=s.p(A,"Viewbox",6);var _e;A.TableRow=_e=s.p(A,"TableRow",7);var mr;A.TableColumn=mr=s.p(A,"TableColumn",8);var Mo;A.Link=Mo=s.p(A,"Link",9);var Yh;A.Grid=Yh=s.p(A,"Grid",10);var qh;A.Graduated=qh=s.p(A,"Graduated",11),s.defineProperty(A,{type:"type"},function(){return this.na},function(t){var i=this.na;i!==t&&(i!==_e&&i!==mr||s.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.na=t,this.na===Yh?this.Kn=!0:this.na===Xo&&Eg(this),this.I(),this.h("type",i,t))}),s.u(A,{elements:"elements"},function(){return this.xa.i}),s.u(A,{Ja:"naturalBounds"},function(){return this.Nc}),s.defineProperty(A,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?(0>t&&s.Fa(t,">= 0",A,"padding"),t=new xt(t)):(s.G(t,xt,A,"padding"),0>t.left&&s.Fa(t.left,">= 0",A,"padding:value.left"),0>t.right&&s.Fa(t.right,">= 0",A,"padding:value.right"),0>t.top&&s.Fa(t.top,">= 0",A,"padding:value.top"),0>t.bottom&&s.Fa(t.bottom,">= 0",A,"padding:value.bottom"));var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.I(),this.h("padding",i,t))}),s.defineProperty(A,{am:"defaultAlignment"},function(){return this.tr},function(t){var i=this.tr;i.L(t)||(this.tr=t=t.S(),this.I(),this.h("defaultAlignment",i,t))}),s.defineProperty(A,{ae:"defaultStretch"},function(){return this.Ki},function(t){var i=this.Ki;i!==t&&(s.ob(t,N,A,"defaultStretch"),this.Ki=t,this.I(),this.h("defaultStretch",i,t))}),s.defineProperty(A,{YK:"defaultSeparatorPadding"},function(){return this.Tj===void 0?Wu:this.Tj},function(t){if(this.Tj!==void 0){typeof t=="number"&&(t=new xt(t));var i=this.Tj;i.L(t)||(this.Tj=t=t.S(),this.I(),this.h("defaultSeparatorPadding",i,t))}}),s.defineProperty(A,{WK:"defaultRowSeparatorStroke"},function(){return this.Ji===void 0?null:this.Ji},function(t){var i=this.Ji;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Ji=t,this.oa(),this.h("defaultRowSeparatorStroke",i,t))}),s.defineProperty(A,{XK:"defaultRowSeparatorStrokeWidth"},function(){return this.Rh===void 0?1:this.Rh},function(t){if(this.Rh!==void 0){var i=this.Rh;i!==t&&isFinite(t)&&0<=t&&(this.Rh=t,this.I(),this.h("defaultRowSeparatorStrokeWidth",i,t))}}),s.defineProperty(A,{VK:"defaultRowSeparatorDashArray"},function(){return this.pl===void 0?null:this.pl},function(t){if(this.pl!==void 0){var i=this.pl;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",A,"defaultRowSeparatorDashArray:value"),t!==null){for(var n=t.length,e=0,r=0;r<n;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||s.k("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),e+=o}if(e===0){if(i===null)return;t=null}}this.pl=t,this.oa(),this.h("defaultRowSeparatorDashArray",i,t)}}}),s.defineProperty(A,{QK:"defaultColumnSeparatorStroke"},function(){return this.Ph===void 0?null:this.Ph},function(t){if(this.Ph!==void 0){var i=this.Ph;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Ph=t,this.oa(),this.h("defaultColumnSeparatorStroke",i,t))}}),s.defineProperty(A,{RK:"defaultColumnSeparatorStrokeWidth"},function(){return this.Qh===void 0?1:this.Qh},function(t){if(this.Qh!==void 0){var i=this.Qh;i!==t&&isFinite(t)&&0<=t&&(this.Qh=t,this.I(),this.h("defaultColumnSeparatorStrokeWidth",i,t))}}),s.defineProperty(A,{PK:"defaultColumnSeparatorDashArray"},function(){return this.ol===void 0?null:this.ol},function(t){if(this.ol!==void 0){var i=this.ol;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",A,"defaultColumnSeparatorDashArray:value"),t!==null){for(var n=t.length,e=0,r=0;r<n;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||s.k("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),e+=o}if(e===0){if(i===null)return;t=null}}this.ol=t,this.oa(),this.h("defaultColumnSeparatorDashArray",i,t)}}}),s.defineProperty(A,{dM:"viewboxStretch"},function(){return this.Hp},function(t){var i=this.Hp;i!==t&&(s.ob(t,N,A,"viewboxStretch"),this.Hp=t,this.I(),this.h("viewboxStretch",i,t))}),s.defineProperty(A,{Jx:"gridCellSize"},function(){return this.Tr},function(t){var i=this.Tr;if(!i.L(t)){s.G(t,lt,A,"gridCellSize"),t.H()&&t.width!==0&&t.height!==0||s.k("Invalid Panel.gridCellSize: "+t),this.Tr=t.S();var n=this.g;n!==null&&this===n.Hn&&Yo(n),this.oa(),this.h("gridCellSize",i,t)}}),s.defineProperty(A,{rF:"gridOrigin"},function(){return this.Ur},function(t){var i=this.Ur;if(!i.L(t)){s.G(t,F,A,"gridOrigin"),t.H()||s.k("Invalid Panel.gridOrigin: "+t),this.Ur=t.S();var n=this.g;n!==null&&this===n.Hn&&Yo(n),this.oa(),this.h("gridOrigin",i,t)}}),s.defineProperty(A,{Pk:"graduatedMin"},function(){return this.Qr},function(t){s.Ad(t,A,"graduatedMin");var i=this.Qr;i!==t&&(this.Qr=t,this.I(),this.h("graduatedMin",i,t),Jh(this)&&(t=this.W,t!==null&&oh(this,t,"graduatedRange")))}),s.defineProperty(A,{KA:"graduatedMax"},function(){return this.Pr},function(t){s.Ad(t,A,"graduatedMax");var i=this.Pr;i!==t&&(this.Pr=t,this.I(),this.h("graduatedMax",i,t),Jh(this)&&(t=this.W,t!==null&&oh(this,t,"graduatedRange")))}),s.u(A,{ou:"graduatedRange"},function(){return this.KA-this.Pk}),s.defineProperty(A,{LA:"graduatedTickUnit"},function(){return this.Sr},function(t){s.Ad(t,A,"graduatedTickUnit");var i=this.Sr;i!==t&&0<t&&(this.Sr=t,this.I(),this.h("graduatedTickUnit",i,t))}),s.defineProperty(A,{qF:"graduatedTickBase"},function(){return this.Rr},function(t){s.Ad(t,A,"graduatedTickBase");var i=this.Rr;i!==t&&(this.Rr=t,this.I(),this.h("graduatedTickBase",i,t))}),B=A.prototype,B.Ks=function(t){N.prototype.Ks.call(this,t);for(var i=this.xa.n,n=i.length,e=0;e<n;e++)i[e].Ks(t)},B.Ik=function(t,i){if(this.na===Yh){var n=this.vj()*i.scale;0>=n&&(n=1);var r=this.Jx,e=r.width,r=r.height,h=this.Ja,o=h.width,h=h.height,l=Math.ceil(o/e),u=Math.ceil(h/r),f=this.rF;t.save(),t.beginPath(),t.rect(0,0,o,h),t.clip();for(var a=[],p=this.xa.n,y=p.length,c=0;c<y;c++){var v=p[c],d=[];if(a.push(d),v.visible)for(var v=Vy(v.Fb),g=c+1;g<y;g++){var m=p[g];m.visible&&Vy(m.Fb)===v&&(m=m.interval,2<=m&&d.push(m))}}for(p=this.xa.n,y=p.length,c=0;c<y;c++){var w=p[c];if(w.visible&&(d=w.interval,!(2>e*d*n))){if(v=w.opacity,g=1,v!==1){if(v===0)continue;g=t.globalAlpha,t.globalAlpha=g*v}var m=a[c],M=!1,k=!0,D=w.AG;if(D!==null&&(M=!0,k=t.zx(D,w.Af)),w.Fb==="LineV"&&w.stroke!==null){t.lineWidth=w.mb,Zn(this,t,w.stroke,!1,!1),t.beginPath();for(var C=Math.floor(-f.x/e),G=C;G<=C+l;G++){var H=G*e+f.x;0<=H&&H<=o&&qa(G,d,m)&&(M&&!k?ru(t,H,0,H,h,D,w.Af):(t.moveTo(H,0),t.lineTo(H,h)))}t.stroke()}else if(w.Fb==="LineH"&&w.stroke!==null){for(t.lineWidth=w.mb,Zn(this,t,w.stroke,!1,!1),t.beginPath(),G=C=Math.floor(-f.y/r);G<=C+u;G++)H=G*r+f.y,0<=H&&H<=h&&qa(G,d,m)&&(M&&!k?ru(t,0,H,o,H,D,w.Af):(t.moveTo(0,H),t.lineTo(o,H)));t.stroke()}else if(w.Fb==="BarV"&&w.fill!==null)for(Zn(this,t,w.fill,!0,!1),w=w.width,isNaN(w)&&(w=e),G=C=Math.floor(-f.x/e);G<=C+l;G++)H=G*e+f.x,0<=H&&H<=o&&qa(G,d,m)&&t.fillRect(H,0,w,h);else if(w.Fb==="BarH"&&w.fill!==null)for(Zn(this,t,w.fill,!0,!1),w=w.height,isNaN(w)&&(w=r),G=C=Math.floor(-f.y/r);G<=C+u;G++)H=G*r+f.y,0<=H&&H<=h&&qa(G,d,m)&&t.fillRect(0,H,o,w);M&&t.wx(),v!==1&&(t.globalAlpha=g)}}t.restore(),t.Ke(!1)}else if(this.na===qh){for(n=i.Km,i.Km=!0,r=this.Ja,e=r.width,r=r.height,t.save(),t.beginPath(),t.rect(-1,-1,e+1,r+1),t.clip(),e=this.Bd(),e.ve(t,i),r=this.vj()*i.scale,0>=r&&(r=1),o=e.U,h=this.xa.n,l=this.Im,u=h.length,f=0;f<u;f++)if(c=h[f],a=l[f],p=a.length,c.visible&&c!==e&&a.length!==0){if(c instanceof Y){if(!(2>this.LA*c.interval*e.of.hu/this.ou*r))for(d=c.za,v=c.mb*c.scale,g=c.qh,g.Ud()&&(g=po),y=0;y<p;y++)m=c,M=a[y][0],C=o,G=a[y][1],w=d,k=v,D=g,H=m.jd,H.reset(),H.translate(M.x+C.x,M.y+C.y),H.rotate(G+m.angle,0,0),H.translate(-w.width*D.x+D.offsetX+k/2,-w.height*D.y+D.offsetY+k/2),H.scale(m.scale,m.scale),ou(m,!1),m.Zk.set(m.jd),m.Ho=m.scale,ms(m,!1),c.ve(t,i),c.jd.reset()}else if(c instanceof rt)for(this.vk===null&&(this.vk=new rt),d=this.vk,Rg(c,d),y=0;y<p;y++)M=a[y],3<M.length&&(g=M[6],d.Ld=M[2],d.mg=M[3],d.pe=M[4],d.zf=M[5],d.Nc=M[8],d.jc(g.x,g.y,g.width,g.height),c=d,v=o,m=M[7],M=M[8],C=c.jd,C.reset(),C.translate(g.x+v.x,g.y+v.y),C.translate(-m.x,-m.y),Ey(c,C,M.x,M.y,M.width,M.height),ou(c,!1),c.Zk.set(c.jd),c.Ho=c.scale,ms(c,!1),d.ve(t,i))}i.Km=n,t.restore(),t.Ke(!0)}else{for(this.na===Xo&&(t.lineCap="butt",Ya(this,t,!0,this.Xc,!0),Ya(this,t,!1,this.Vc,!0),Gg(this,t,!0,this.Xc),Gg(this,t,!1,this.Vc),Ya(this,t,!0,this.Xc,!1),Ya(this,t,!1,this.Vc,!1)),(n=this.tu)&&t.save(),e=this.Bd(),r=this.xa.n,o=r.length,h=0;h<o;h++)l=r[h],n&&l===e&&(t.Qp=!0),l.ve(t,i),n&&l===e&&(t.Qp=!1);n&&(t.restore(),t.Ke(!0))}};function Rg(t,i){i.M=t.M|6144,i.Dc=t.Dc,i.Gb=t.Gb,i.cc=t.cc,i.Ve=t.Ve.S(),i.$h=t.$h.S(),i.Zh=t.Zh.S(),i.Wi=t.Wi.copy(),i.rb=t.rb,i.mg=t.mg,i.Fg=t.Fg,i.Tm=t.Tm.S(),i.me=t.me.S(),i.ym=t.ym.S(),i.dn=t.dn,i.en=t.en.S(),i.fn=t.fn,t.og!==null&&(i.og=t.og.copy()),i.kn=t.kn,t instanceof rt&&(i.Ld=t.Ld,i.tc=t.tc,i.qg=t.qg,i.Ll=t.Ll,i.pg=t.pg,i.Pl=t.Pl,i.Mm=t.Mm,i.gk=t.gk,i.ek=t.ek,i.cj=t.cj,i.nj=t.nj,i.zf.Wj=null,i.gi=t.gi,i.hi=t.hi,i.ih=t.ih,i.$o=t.$o,i.ug=t.ug,i.tg=t.tg,i.sg=t.sg,i.Hm=t.Hm)}function Gg(t,i,n,e){for(var r=e.length,o=t.U,h=!0,l=0;l<r;l++){var u=e[l];if(u!==void 0){if(h)h=!1;else if(u.bb!==0){if(n){if(u.position>o.height)continue}else if(u.position>o.width)continue;var f=u.Hq;isNaN(f)&&(f=n?t.Rh:t.Qh);var a=u.Gq;if(a===null&&(a=n?t.Ji:t.Ph),f!==0&&a!==null){Zn(t,i,a,!1,!1);var a=!1,p=!0,y=u.IJ;y===null&&(y=n?t.pl:t.ol),y!==null&&(a=!0,p=i.zx(y,0)),i.beginPath();var c=u.position+f;n?c>o.height&&(f-=c-o.height):c>o.width&&(f-=c-o.width),u=u.position+f/2,i.lineWidth=f,c=t.padding,n?(u+=c.top,f=c.left,c=o.width-c.right,a&&!p?ru(i,f,u,c,u,y,0):(i.moveTo(f,u),i.lineTo(c,u))):(u+=c.left,f=c.top,c=o.height-c.bottom,a&&!p?ru(i,u,f,u,c,y,0):(i.moveTo(u,f),i.lineTo(u,c))),i.stroke(),a&&i.wx()}}}}}function Ya(t,i,n,e,r){for(var o=e.length,h=t.U,l=0;l<o;l++){var u=e[l];if(u!==void 0&&u.background!==null&&u.xA!==r&&u.bb!==0){var f=n?h.height:h.width;if(!(u.position>f)){var a=u.bf(),p=u.Hq;isNaN(p)&&(p=n?t.Rh:t.Qh);var y=u.Gq;y===null&&(y=n?t.Ji:t.Ph),y===null&&(p=0),a-=p,p=u.position+p,a+=u.bb,p+a>f&&(a=f-p),0>=a||(f=t.padding,Zn(t,i,u.background,!0,!1),n?i.fillRect(f.left,p+f.top,h.width-(f.left+f.right),a):i.fillRect(p+f.left,f.top,a,h.height-(f.top+f.bottom)))}}}}function qa(t,i,n){if(t%i!==0)return!1;i=n.length;for(var e=0;e<i;e++)if(t%n[e]===0)return!1;return!0}function Vy(t){return t==="LineV"||t==="BarV"}B.Fn=function(t,i,n,e,r){var o=this.Yg(),h=this.transform,l=1/(h.m11*h.m22-h.m12*h.m21),u=h.m22*l,f=-h.m12*l,a=-h.m21*l,p=h.m11*l,y=l*(h.m21*h.dy-h.m22*h.dx),c=l*(h.m12*h.dx-h.m11*h.dy);if(this.qn!==null)return h=this.U,co(h.left,h.top,h.right,h.bottom,t,i,n,e,r);if(this.background!==null)o=t*u+i*a+y,l=t*f+i*p+c,t=n*u+e*a+y,u=n*f+e*p+c,r.m(0,0),n=this.Ja,n=co(0,0,n.width,n.height,o,l,t,u,r),r.transform(h);else{o||(u=1,a=f=0,p=1,c=y=0),l=t*u+i*a+y,t=t*f+i*p+c,u=n*u+e*a+y,e=n*f+e*p+c,r.m(u,e),f=(u-l)*(u-l)+(e-t)*(e-t),n=!1,p=this.xa.n,c=p.length,a=s.K(),y=null,i=1/0;var v=null;this.tu&&(v=s.K(),y=this.Bd(),(n=y.Fn(l,t,u,e,v))&&(i=(l-v.x)*(l-v.x)+(t-v.y)*(t-v.y)));for(var d=0;d<c;d++){var g=p[d];g.visible&&g!==y&&g.Fn(l,t,u,e,a)&&(n=!0,g=(l-a.x)*(l-a.x)+(t-a.y)*(t-a.y),g<f&&(f=g,r.set(a)))}this.tu&&(i>f&&r.set(v),s.v(v)),s.v(a),o&&r.transform(h)}return n},B.I=function(t){N.prototype.I.call(this,t),t=null,(this.na===wo||this.na===Mo)&&(t=this.Bd());for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e];if((r===t||r.ff)&&r.I(!0),!r.Da.H()){var o=zr(r,!1);(r instanceof en||r instanceof A||r instanceof rt||o!==ri)&&r.I(!0)}}},B.gq=function(){if(xs(this)===!1){ne(this,!0),sh(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].gq()}},B.Ri=function(){if((this.M&2048)===0){ou(this,!0),ms(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].RA()}},B.RA=function(){ms(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].RA()},B.Rn=function(t,i,n,e){var r=this.lj;r.width=0,r.height=0;var o=this.Da,h=this.si;n===void 0&&(n=h.width,e=h.height),n=Math.max(n,h.width),e=Math.max(e,h.height);var l=this.Hf;isNaN(o.width)||(t=Math.min(o.width,l.width)),isNaN(o.height)||(i=Math.min(o.height,l.height)),t=Math.max(n,t),i=Math.max(e,i);var u=this.padding;t=Math.max(t-u.left-u.right,0),i=Math.max(i-u.top-u.bottom,0);var f=this.xa.n;if(f.length!==0){var a=this.na.Sb;switch(a){case"Position":var p=t,y=i,c=n,v=e,d=f.length;r.x=0,r.y=0,r.width=0,r.height=0;for(var g=Po(this),m=0;m<d;m++){var w=f[m];if(w.visible||w===g){var M=w.margin,k=M.right+M.left,D=M.top+M.bottom;Gt(w,p,y,c,v);var C=w.za,G=Math.max(C.width+k,0),H=Math.max(C.height+D,0),U=w.position.x,X=w.position.y;if(isFinite(U)||(U=0),isFinite(X)||(X=0),w instanceof Y){var _=w;if(_.CF)var Mt=_.mb/2,U=U-Mt,X=X-Mt}yn(r,U,X,G,H)}}break;case"Vertical":for(var Ft=t,J=n,ht=f.length,qt=s.Za(),Bt=Po(this),Wt=0;Wt<ht;Wt++){var Ct=f[Wt];if(Ct.visible||Ct===Bt){var xh=zr(Ct,!1);if(xh!==ri&&xh!==nn)qt.push(Ct);else{var Ie=Ct.margin,ve=Ie.right+Ie.left,Co=Ie.top+Ie.bottom;Gt(Ct,Ft,1/0,J,0);var wn=Ct.za,er=Math.max(wn.width+ve,0),js=Math.max(wn.height+Co,0);r.width=Math.max(r.width,er),r.height+=js}}}var ai=qt.length;if(ai!==0){for(this.Da.width?Ft=Math.min(this.Da.width,this.Hf.width):r.width!==0&&(Ft=Math.min(r.width,this.Hf.width)),Wt=0;Wt<ai;Wt++)Ct=qt[Wt],(Ct.visible||Ct===Bt)&&(Ie=Ct.margin,ve=Ie.right+Ie.left,Co=Ie.top+Ie.bottom,Gt(Ct,Ft,1/0,J,0),wn=Ct.za,er=Math.max(wn.width+ve,0),js=Math.max(wn.height+Co,0),r.width=Math.max(r.width,er),r.height+=js);s.ra(qt)}break;case"Horizontal":for(var ni=i,ft=e,at=f.length,yi=s.Za(),Zt=Po(this),Kt=0;Kt<at;Kt++){var Ii=f[Kt];if(Ii.visible||Ii===Zt){var Fs=zr(Ii,!1);if(Fs!==ri&&Fs!==Xi)yi.push(Ii);else{var In=Ii.margin,rr=In.right+In.left,to=In.top+In.bottom;Gt(Ii,1/0,ni,0,ft);var os=Ii.za,de=Math.max(os.width+rr,0),Bi=Math.max(os.height+to,0);r.width+=de,r.height=Math.max(r.height,Bi)}}}var Mn=yi.length;if(Mn!==0){for(this.Da.height?ni=Math.min(this.Da.height,this.Hf.height):r.height!==0&&(ni=Math.min(r.height,this.Hf.height)),Kt=0;Kt<Mn;Kt++)Ii=yi[Kt],(Ii.visible||Ii===Zt)&&(In=Ii.margin,rr=In.right+In.left,to=In.top+In.bottom,Gt(Ii,1/0,ni,0,ft),os=Ii.za,de=Math.max(os.width+rr,0),Bi=Math.max(os.height+to,0),r.width+=de,r.height=Math.max(r.height,Bi));s.ra(yi)}break;case"Spot":t:{var ee=t,jo=i,Hi=n,Ki=e,or=f.length,Be=this.Bd(),li=Be.margin,Bn=0,ss=0,Ds=li.right+li.left,Er=li.top+li.bottom;Gt(Be,ee,jo,Hi,Ki);for(var si=Be.za,zi=si.width,ei=si.height,ze=Math.max(zi+Ds,0),$i=Math.max(ei+Er,0),Ls=this.tu,pi=s.lg(-li.left,-li.top,ze,$i),rn=!0,Ut=Po(this),Nn=0;Nn<or;Nn++){var xi=f[Nn];if(xi!==Be&&(xi.visible||xi===Ut)){li=xi.margin,Bn=li.right+li.left,ss=li.top+li.bottom,Gt(xi,ee,jo,0,0);var si=xi.za,ze=Math.max(si.width+Bn,0),$i=Math.max(si.height+ss,0),ci=xi.alignment;ci.ge()&&(ci=this.am),ci.Zc()||(ci=Tt);var Fi=xi.qh;Fi.ge()&&(Fi=Tt);var Ee=null;xi instanceof A&&xi.Oj!==""&&(xi.jc(0,0,si.width,si.height),Ee=xi.Cd(xi.Oj),Ee===xi&&(Ee=null));var Si,Ui;if(Ee!==null){for(var re=Ee.Ja,rl=Ee.margin,Ei=s.wb(Fi.x*re.width+Fi.offsetX-rl.left,Fi.y*re.height+Fi.offsetY-rl.top);Ee!==xi;)Ee.transform.nb(Ei),Ee=Ee.R;Si=ci.x*zi+ci.offsetX-Ei.x,Ui=ci.y*ei+ci.offsetY-Ei.y,s.v(Ei)}else Si=ci.x*zi+ci.offsetX-(Fi.x*si.width-Fi.offsetX)-li.left,Ui=ci.y*ei+ci.offsetY-(Fi.y*si.height-Fi.offsetY)-li.top;rn?(rn=!1,r.x=Si,r.y=Ui,r.width=ze,r.height=$i):yn(r,Si,Ui,ze,$i)}}rn?r.assign(pi):Ls?r.wF(pi.x,pi.y,pi.width,pi.height):yn(r,pi.x,pi.y,pi.width,pi.height),s.Bb(pi);var Ri=Be.stretch;switch(Ri===Br&&(Ri=zr(Be,!1)),Ri){case ri:break t;case ii:if(!isFinite(ee)&&!isFinite(jo))break t;break;case Xi:if(!isFinite(ee))break t;break;case nn:if(!isFinite(jo))break t}for(si=Be.za,zi=si.width,ei=si.height,ze=Math.max(zi+Ds,0),$i=Math.max(ei+Er,0),li=Be.margin,pi=s.lg(-li.left,-li.top,ze,$i),Nn=0;Nn<or;Nn++)xi=f[Nn],xi===Be||!xi.visible&&xi!==Ut||(li=xi.margin,Bn=li.right+li.left,ss=li.top+li.bottom,si=xi.za,ze=Math.max(si.width+Bn,0),$i=Math.max(si.height+ss,0),ci=xi.alignment,ci.ge()&&(ci=this.am),ci.Zc()||(ci=Tt),Fi=xi.qh,Fi.ge()&&(Fi=Tt),rn?(rn=!1,r.x=ci.x*zi+ci.offsetX-(Fi.x*si.width-Fi.offsetX)-li.left,r.y=ci.y*ei+ci.offsetY-(Fi.y*si.height-Fi.offsetY)-li.top,r.width=ze,r.height=$i):yn(r,ci.x*zi+ci.offsetX-(Fi.x*si.width-Fi.offsetX)-li.left,ci.y*ei+ci.offsetY-(Fi.y*si.height-Fi.offsetY)-li.top,ze,$i));rn?r.assign(pi):Ls?r.wF(pi.x,pi.y,pi.width,pi.height):yn(r,pi.x,pi.y,pi.width,pi.height),s.Bb(pi)}break;case"Auto":var Cn=t,Qn=i,ge=n,As=e,ol=f.length,vi=this.Bd(),Xn=vi.margin,sl=Cn,Rr=Qn,on=Xn.right+Xn.left,Mr=Xn.top+Xn.bottom;Gt(vi,Cn,Qn,ge,As);var sn=vi.za,zn=0,me=null;vi instanceof Y&&(me=vi,zn=me.mb*me.scale);var hn=Math.max(sn.width+on,0),Jt=Math.max(sn.height+Mr,0),ln=Ky(vi),hl=ln.x*hn+ln.offsetX,io=ln.y*Jt+ln.offsetY,Re=Uy(vi),Fo=Re.x*hn+Re.offsetX,wh=Re.y*Jt+Re.offsetY;isFinite(Cn)&&(sl=Math.max(Math.abs(hl-Fo)-zn,0)),isFinite(Qn)&&(Rr=Math.max(Math.abs(io-wh)-zn,0));var Ge=s.vm();Ge.m(0,0);for(var Mh=Po(this),Nu=0;Nu<ol;Nu++){var Ph=f[Nu];if(Ph!==vi&&(Ph.visible||Ph===Mh)){var Xn=Ph.margin,Qf=Xn.right+Xn.left,di=Xn.top+Xn.bottom;Gt(Ph,sl,Rr,0,0),sn=Ph.za,hn=Math.max(sn.width+Qf,0),Jt=Math.max(sn.height+di,0),Ge.m(Math.max(hn,Ge.width),Math.max(Jt,Ge.height))}}if(ol===1)r.width=hn,r.height=Jt,s.Lk(Ge);else{var ln=Ky(vi),Re=Uy(vi),sr=0,oe=0;Re.x!==ln.x&&Re.y!==ln.y&&(sr=Ge.width/Math.abs(Re.x-ln.x),oe=Ge.height/Math.abs(Re.y-ln.y)),s.Lk(Ge),zn=0,me!==null&&(zn=me.mb*me.scale,Zy(me)===ji&&(sr=oe=Math.max(sr,oe)));var sr=sr+(Math.abs(ln.offsetX)+Math.abs(Re.offsetX)+zn),oe=oe+(Math.abs(ln.offsetY)+Math.abs(Re.offsetY)+zn),Gr=vi.stretch;switch(Gr===Br&&(Gr=zr(vi,!1)),Gr){case ri:As=ge=0;break;case ii:isFinite(Cn)&&(sr=Cn),isFinite(Qn)&&(oe=Qn);break;case Xi:isFinite(Cn)&&(sr=Cn),As=0;break;case nn:ge=0,isFinite(Qn)&&(oe=Qn)}vi.gq(),Gt(vi,sr,oe,ge,As),r.width=vi.za.width+on,r.height=vi.za.height+Mr}break;case"Table":for(var ll=t,ul=i,Cu=n,ju=e,hi=f.length,Th=s.Za(),fl=s.Za(),nt=0;nt<hi;nt++){var b=f[nt],En=b instanceof A?b:null;if(En===null||En.type!==_e&&En.type!==mr||!b.visible)Th.push(b);else{fl.push(En);for(var hs=En.xa.n,Is=hs.length,Mi=0;Mi<Is;Mi++){var Bs=hs[Mi];En.type===_e?Bs.Wb=b.Wb:En.type===mr&&(Bs.column=b.column),Th.push(Bs)}}}hi=Th.length,hi===0&&(this.ee(0),this.de(0));for(var Gi=[],nt=0;nt<hi;nt++)b=Th[nt],ne(b,!0),sh(b,!0),Gi[b.Wb]||(Gi[b.Wb]=[]),Gi[b.Wb][b.column]||(Gi[b.Wb][b.column]=[]),Gi[b.Wb][b.column].push(b);s.ra(Th);for(var al=s.Za(),Do=s.Za(),kh=s.Za(),Pr={count:0},Oe={count:0},xe=ll,Ve=ul,Tr=this.Xc,hi=Tr.length,nt=0;nt<hi;nt++){var Q=Tr[nt];Q!==void 0&&(Q.bb=0)}for(Tr=this.Vc,hi=Tr.length,nt=0;nt<hi;nt++)Q=Tr[nt],Q!==void 0&&(Q.bb=0);for(var pl=Gi.length,Rn=0,nt=0;nt<pl;nt++)Gi[nt]&&(Rn=Math.max(Rn,Gi[nt].length));for(var Fu=Math.min(this.kj,pl-1),yl=Math.min(this.Ui,Rn-1),un=0,pl=Gi.length,Sh=Po(this),nt=0;nt<pl;nt++)if(Gi[nt]){for(var Rn=Gi[nt].length,bt=this.ee(nt),Mi=bt.bb=0;Mi<Rn;Mi++)if(Gi[nt][Mi]){var ui=this.de(Mi);al[Mi]===void 0&&(ui.bb=0,al[Mi]=!0);for(var Zp=Gi[nt][Mi],lv=Zp.length,kr=0;kr<lv;kr++)if(b=Zp[kr],b.visible||b===Sh){var Xf=1<b.gj||1<b.Fi;Xf&&(nt<Fu||Mi<yl||Do.push(b));var fn=b.margin,ls=fn.right+fn.left,Lo=fn.top+fn.bottom,an=wf(b,bt,ui,!1),zs=b.Da,Ao=!isNaN(zs.height),Wf=!isNaN(zs.width)&&Ao;if(Xf||an===ri||Wf||nt<Fu||Mi<yl||(Pr[Mi]!==void 0||an!==ii&&an!==Xi||(Pr[Mi]=-1,Pr.count++),Oe[nt]!==void 0||an!==ii&&an!==nn||(Oe[nt]=-1,Oe.count++),kh.push(b)),Gt(b,1/0,1/0,0,0),!(nt<Fu||Mi<yl)){var Io=b.za,no=Math.max(Io.width+ls,0),eo=Math.max(Io.height+Lo,0);if(b.gj===1&&(an===ri||an===Xi)){var Q=this.ee(nt),us=Q.bf(),un=Math.max(eo-Q.bb,0);un+us>Ve&&(un=Math.max(Ve-us,0));var Wn=Q.bb===0;Q.bb+=un,Ve=Math.max(Ve-(un+(Wn?us:0)),0)}b.Fi!==1||an!==ri&&an!==nn||(Q=this.de(Mi),us=Q.bf(),un=Math.max(no-Q.bb,0),un+us>xe&&(un=Math.max(xe-us,0)),Wn=Q.bb===0,Q.bb+=un,xe=Math.max(xe-(un+(Wn?us:0)),0)),Xf&&b.gq()}}}}s.ra(al);for(var hr=0,we=0,hi=this.Rp,nt=0;nt<hi;nt++){var Pn=this.Vc[nt];Pn!==void 0&&(hr+=Pn.Ra,Pn.Ra!==0&&(hr+=Pn.bf()))}for(hi=this.Dq,nt=0;nt<hi;nt++){var cl=this.Xc[nt];cl!==void 0&&(we+=cl.Ra,cl.Ra!==0&&(we+=cl.bf()))}for(var xe=Math.max(ll-hr,0),Du=Ve=Math.max(ul-we,0),Lu=xe,hi=kh.length,nt=0;nt<hi;nt++){var b=kh[nt],bt=this.ee(b.Wb),ui=this.de(b.column),Qp=b.za,fn=b.margin,ls=fn.right+fn.left,Lo=fn.top+fn.bottom;Pr[b.column]=ui.bb===0&&Pr[b.column]!==void 0?Math.max(Qp.width+ls,Pr[b.column]):null,Oe[b.Wb]=bt.bb===0&&Oe[b.Wb]!==void 0?Math.max(Qp.height+Lo,Oe[b.Wb]):null}var Es=0,Rs=0,Bo;for(Bo in Oe)Bo!=="count"&&(Es+=Oe[Bo]);for(Bo in Pr)Bo!=="count"&&(Rs+=Pr[Bo]);for(var Ni=s.vm(),nt=0;nt<hi;nt++)if(b=kh[nt],b.visible||b===Sh){var bt=this.ee(b.Wb),ui=this.de(b.column),Sr=0;isFinite(ui.width)?Sr=ui.width:(Sr=isFinite(xe)&&Pr[b.column]!==null?Rs===0?ui.bb+xe:Pr[b.column]/Rs*Lu:Pr[b.column]!==null?xe:ui.bb||xe,Sr=Math.max(0,Sr-ui.bf()));var He=0;switch(isFinite(bt.height)?He=bt.height:(He=isFinite(Ve)&&Oe[b.Wb]!==null?Es===0?bt.bb+Ve:Oe[b.Wb]/Es*Du:Oe[b.Wb]!==null?Ve:bt.bb||Ve,He=Math.max(0,He-bt.bf())),Ni.m(Math.max(ui.Eh,Math.min(Sr,ui.ke)),Math.max(bt.Eh,Math.min(He,bt.ke))),an=wf(b,bt,ui,!1),an){case Xi:Ni.height=Math.max(Ni.height,bt.bb+Ve);break;case nn:Ni.width=Math.max(Ni.width,ui.bb+xe)}fn=b.margin,ls=fn.right+fn.left,Lo=fn.top+fn.bottom,b.gq(),Gt(b,Ni.width,Ni.height,ui.Eh,bt.Eh),Io=b.za,no=Math.max(Io.width+ls,0),eo=Math.max(Io.height+Lo,0),isFinite(xe)&&(no=Math.min(no,Ni.width)),isFinite(Ve)&&(eo=Math.min(eo,Ni.height));var jn=0,jn=bt.bb;bt.bb=Math.max(bt.bb,eo),un=bt.bb-jn,Ve=Math.max(Ve-un,0),jn=ui.bb,ui.bb=Math.max(ui.bb,no),un=ui.bb-jn,xe=Math.max(xe-un,0)}s.ra(kh);var $n=s.vm(),hi=Do.length;if(hi!==0){for(var Me=s.Za(),ro=s.Za(),nt=0;nt<pl;nt++)if(Gi[nt])for(Rn=Gi[nt].length,bt=this.ee(nt),Me[nt]=bt.bb,Mi=0;Mi<Rn;Mi++)Gi[nt][Mi]&&(ui=this.de(Mi),ro[Mi]=ui.bb)}for(nt=0;nt<hi;nt++)if(b=Do[nt],b.visible||b===Sh){switch(bt=this.ee(b.Wb),ui=this.de(b.column),Ni.m(Math.max(ui.Eh,Math.min(ll,ui.ke)),Math.max(bt.Eh,Math.min(ul,bt.ke))),an=wf(b,bt,ui,!1),an){case ii:ro[ui.index]!==0&&(Ni.width=Math.min(Ni.width,ro[ui.index])),Me[bt.index]!==0&&(Ni.height=Math.min(Ni.height,Me[bt.index]));break;case Xi:ro[ui.index]!==0&&(Ni.width=Math.min(Ni.width,ro[ui.index]));break;case nn:Me[bt.index]!==0&&(Ni.height=Math.min(Ni.height,Me[bt.index]))}isFinite(ui.width)&&(Ni.width=ui.width),isFinite(bt.height)&&(Ni.height=bt.height),$n.m(0,0);for(var ti=1;ti<b.gj&&!(b.Wb+ti>=this.Dq);ti++)Q=this.ee(b.Wb+ti),un=an===ii||an===nn?Math.max(Q.Eh,Me[b.Wb+ti]===0?Q.ke:Math.min(Me[b.Wb+ti],Q.ke)):Math.max(Q.Eh,isNaN(Q.mf)?Q.ke:Math.min(Q.mf,Q.ke)),$n.height+=un;for(ti=1;ti<b.Fi&&!(b.column+ti>=this.Rp);ti++)Q=this.de(b.column+ti),un=an===ii||an===Xi?Math.max(Q.Eh,ro[b.column+ti]===0?Q.ke:Math.min(ro[b.column+ti],Q.ke)):Math.max(Q.Eh,isNaN(Q.mf)?Q.ke:Math.min(Q.mf,Q.ke)),$n.width+=un;Ni.width+=$n.width,Ni.height+=$n.height,fn=b.margin,ls=fn.right+fn.left,Lo=fn.top+fn.bottom,Gt(b,Ni.width,Ni.height,Cu,ju);for(var Io=b.za,no=Math.max(Io.width+ls,0),eo=Math.max(Io.height+Lo,0),zo=0,ti=0;ti<b.gj&&!(b.Wb+ti>=this.Dq);ti++)Q=this.ee(b.Wb+ti),zo+=Q.total||0;if(zo<eo){var Nr=eo-zo,Gs=eo-zo;if(b.By!==null)for(var oo=b.By,ti=0;ti<b.gj&&!(0>=Nr)&&!(b.Wb+ti>=this.Dq);ti++){var Q=this.ee(b.Wb+ti),Ji=Q.Ra||0,vl=oo(b,Q,Gs);Q.bb=Math.min(Q.ke,Ji+vl),Q.Ra!==Ji&&(Nr-=Q.Ra-Ji)}for(;0<Nr&&(Ji=Q.Ra||0,isNaN(Q.height)&&Q.ke>Ji&&(Q.bb=Math.min(Q.ke,Ji+Nr),Q.Ra!==Ji&&(Nr-=Q.Ra-Ji)),Q.index!==0);)Q=this.ee(Q.index-1)}for(var Nh=0,ti=0;ti<b.Fi&&!(b.column+ti>=this.Rp);ti++)Q=this.de(b.column+ti),Nh+=Q.total||0;if(Nh<no){if(Nr=no-Nh,Gs=no-Nh,b.By!==null)for(oo=b.By,ti=0;ti<b.Fi&&!(0>=Nr)&&!(b.column+ti>=this.Rp);ti++)Q=this.de(b.column+ti),Ji=Q.Ra||0,vl=oo(b,Q,Gs),Q.bb=Math.min(Q.ke,Ji+vl),Q.Ra!==Ji&&(Nr-=Q.Ra-Ji);for(;0<Nr&&(Ji=Q.Ra||0,isNaN(Q.width)&&Q.ke>Ji&&(Q.bb=Math.min(Q.ke,Ji+Nr),Q.Ra!==Ji&&(Nr-=Q.Ra-Ji)),Q.index!==0);)Q=this.de(Q.index-1)}}s.ra(Do),s.Lk($n),s.Lk(Ni),Me!==void 0&&s.ra(Me),ro!==void 0&&s.ra(ro);for(var Eo=0,jh=0,an=zr(this,!0),dl=this.Da,$f=this.Hf,gl=we=hr=0,Ch=0,hi=this.Rp,nt=0;nt<hi;nt++)this.Vc[nt]!==void 0&&(Q=this.de(nt),isFinite(Q.width)?(gl+=Q.width,gl+=Q.bf()):Za(Q)===Zh?(gl+=Q.Ra,gl+=Q.bf()):Q.Ra!==0&&(hr+=Q.Ra,hr+=Q.bf()));var Eo=isFinite(dl.width)?Math.min(dl.width,$f.width):an!==ri&&isFinite(ll)?ll:hr,Eo=Math.max(Eo,this.si.width),Eo=Math.max(Eo-gl,0),Or=Math.max(Eo/hr,1);for(isFinite(Or)||(Or=1),nt=0;nt<hi;nt++)this.Vc[nt]!==void 0&&(Q=this.de(nt),isFinite(Q.width)||Za(Q)===Zh||(Q.bb=Q.Ra*Or),Q.position=r.width,Q.Ra!==0&&(r.width+=Q.Ra,r.width+=Q.bf()));for(hi=this.Dq,nt=0;nt<hi;nt++)this.Xc[nt]!==void 0&&(Q=this.ee(nt),isFinite(Q.height)?(Ch+=Q.height,Ch+=Q.bf()):Za(Q)===Zh?(Ch+=Q.Ra,Ch+=Q.bf()):Q.Ra!==0&&(we+=Q.Ra,Q.Ra!==0&&(we+=Q.bf())));var jh=isFinite(dl.height)?Math.min(dl.height,$f.height):an!==ri&&isFinite(ul)?ul:we,jh=Math.max(jh,this.si.height),jh=Math.max(jh-Ch,0),Fh=Math.max(jh/we,1);for(isFinite(Fh)||(Fh=1),nt=0;nt<hi;nt++)this.Xc[nt]!==void 0&&(Q=this.ee(nt),isFinite(Q.height)||Za(Q)===Zh||(Q.bb=Q.Ra*Fh),Q.position=r.height,Q.Ra!==0&&(r.height+=Q.Ra,Q.Ra!==0&&(r.height+=Q.bf())));for(hi=fl.length,nt=0;nt<hi;nt++){var se=fl[nt];se.type===_e?(Sr=r.width,Q=this.ee(se.Wb),He=Q.bb):(Q=this.de(se.column),Sr=Q.bb,He=r.height),se.ud.m(0,0,Sr,He),ne(se,!1),Gi[se.Wb]||(Gi[se.Wb]=[]),Gi[se.Wb][se.column]||(Gi[se.Wb][se.column]=[]),Gi[se.Wb][se.column].push(se)}s.ra(fl),this.it=Gi;break;case"Viewbox":var Au=t,Xp=i,Mm=n,Pm=e;1<f.length&&s.k("Viewbox Panel cannot contain more than one GraphObject.");var Ro=f[0];Ro.rb=1,Ro.gq(),Gt(Ro,1/0,1/0,Mm,Pm);var _f=Ro.za,Wp=Ro.margin,Tm=Wp.right+Wp.left,km=Wp.top+Wp.bottom;if(isFinite(Au)||isFinite(Xp)){var tw=Ro.scale,$p=_f.width,_p=_f.height,Sm=Math.max(Au-Tm,0),Nm=Math.max(Xp-km,0),bf=1;this.Hp===ji?$p!==0&&_p!==0&&(bf=Math.min(Sm/$p,Nm/_p)):$p!==0&&_p!==0&&(bf=Math.max(Sm/$p,Nm/_p)),bf===0&&(bf=1e-4),Ro.rb*=bf,tw!==Ro.scale&&(ne(Ro,!0),Gt(Ro,1/0,1/0,Mm,Pm))}_f=Ro.za,r.width=isFinite(Au)?Au:Math.max(_f.width+Tm,0),r.height=isFinite(Xp)?Xp:Math.max(_f.height+km,0);break;case"Link":var Cm=f.length;if(this instanceof vt||this instanceof S){var ml=null;if(this instanceof S&&(ml=this),this instanceof vt&&(ml=this.$e),ml instanceof S){var ta=ml;if(Cm===0){var bp=this.Ja;Ko(bp,0,0);var Cr=this.za;Cr.m(0,0,0,0)}else{var t0=this instanceof vt?null:ml.path,Os=ml.ao,so=this.lj;so.assign(Os),so.x=0,so.y=0;var Dh=ta.points,xl=ml.qa;this.Hu(!1);var jm=Os.width,Fm=Os.height;this.Xi.m(Os.x,Os.y),this.$g===null&&(this.$g=new z(O)),this.$g.clear(),t0!==null&&(Qg(t0,jm,Fm,this),Cr=t0.za,so.Zg(Cr),this.$g.add(Cr));for(var Vs=s.Wg(),ia=s.K(),Hs=s.K(),uv=0;uv<Cm;uv++){var Oi=f[uv];if(Oi!==t0)if(Oi.ff&&Oi instanceof Y)Qg(Oi,jm,Fm,this),Cr=Oi.za,so.Zg(Cr),this.$g.add(Cr);else if(2>xl)Gt(Oi,1/0,1/0),Cr=Oi.za,so.Zg(Cr),this.$g.add(Cr);else{var Pe=Oi.Re,Dm=Oi.zB,fv=Oi.qh;fv.Ud()&&(fv=Tt);var fs=Oi.Eq,iw=Oi.AB,i0=0,n0=0,e0=0;if(Pe<-xl||Pe>=xl){var Lm=ta.SF,Go=ta.RF;fs!==ye&&(e0=ta.computeAngle(Oi,fs,Go),Oi.mg=e0),i0=Lm.x-Os.x,n0=Lm.y-Os.y}else{var Ke,ho;if(0<=Pe)Ke=Dh.fa(Pe),ho=Pe<xl-1?Dh.fa(Pe+1):Ke;else{var wl=xl+Pe;Ke=Dh.fa(wl),ho=0<wl?Dh.fa(wl-1):Ke}if(Ke.Qc(ho)){var Ml,Pl;0<=Pe?(Ml=0<Pe?Dh.fa(Pe-1):Ke,Pl=Pe<xl-2?Dh.fa(Pe+2):ho):(Ml=wl<xl-1?Dh.fa(wl+1):Ke,Pl=1<wl?Dh.fa(wl-2):ho);var Am=Ml.Cf(Ke),Im=ho.Cf(Pl),Go=Am>Im+10?0<=Pe?Ml.Qb(Ke):Ke.Qb(Ml):Im>Am+10?0<=Pe?ho.Qb(Pl):Pl.Qb(ho):0<=Pe?Ml.Qb(Pl):Pl.Qb(Ml)}else Go=0<=Pe?Ke.Qb(ho):ho.Qb(Ke);fs!==ye&&(e0=ta.computeAngle(Oi,fs,Go),Oi.mg=e0),i0=Ke.x+(ho.x-Ke.x)*Dm-Os.x,n0=Ke.y+(ho.y-Ke.y)*Dm-Os.y}Gt(Oi,1/0,1/0);var Cr=Oi.za,bp=Oi.Ja,na=0;Oi instanceof Y&&(na=Oi.mb);var Tl=bp.width+na,Iu=bp.height+na;Vs.reset(),Vs.translate(-Cr.x,-Cr.y),Vs.scale(Oi.scale,Oi.scale),Vs.rotate(fs===ye?Oi.angle:Go,Tl/2,Iu/2),fs!==Cf&&fs!==Ff||Vs.rotate(90,Tl/2,Iu/2),fs!==jf&&fs!==Df||Vs.rotate(-90,Tl/2,Iu/2),fs===fp&&(45<Go&&135>Go||225<Go&&315>Go)&&Vs.rotate(-Go,Tl/2,Iu/2);var Bu=new O(0,0,Tl,Iu);ia.bo(Bu,fv),Vs.nb(ia);var nw=-ia.x+na/2*Oi.scale,ew=-ia.y+na/2*Oi.scale;Hs.assign(iw),isNaN(Hs.x)&&(Hs.x=0<=Pe?Tl/2+3:-(Tl/2+3)),isNaN(Hs.y)&&(Hs.y=-(Iu/2+3)),Hs.rotate(Go),i0+=Hs.x,n0+=Hs.y,Bu.set(Cr),Bu.x=i0+nw,Bu.y=n0+ew,this.$g.add(Bu),so.Zg(Bu)}}if(this instanceof S)for(var Bm=this.Ff;Bm.next();)Gt(Bm.value,1/0,1/0);this.lj=so;var av=this.Xi;av.m(av.x+so.x,av.y+so.y),Ko(r,so.width||0,so.height||0),s.cf(Vs),s.v(ia),s.v(Hs)}}}break;case"Grid":break;case"Graduated":var rw=t,ow=i,sw=n,hw=e,Ks=this.Bd();this.Gm=[];var zu=Ks.margin,lw=zu.right+zu.left,uw=zu.top+zu.bottom;Gt(Ks,rw,ow,sw,hw);var zm=Ks.za,fw=zm.height,aw=Math.max(zm.width+lw,0),pw=Math.max(fw+uw,0),Em=new O(-zu.left,-zu.top,aw,pw);this.Gm.push(Em),r.assign(Em);for(var ea=Ks.of,Rm=Ks.mb,pv=ea.Hx,Eu=ea.gu,kl=ea.hu,yw=pv.length,yv=0,cv=0,Ru=s.Za(),vv=0;vv<yw;vv++){for(var dv=pv[vv],Gm=[],cv=yv=0,cw=dv.length,ra=0;ra<cw;ra+=2){var Om=dv[ra],Vm=dv[ra+1];if(ra!==0){var lr=180*Math.atan2(Vm-cv,Om-yv)/Math.PI;0>lr&&(lr+=360),Gm.push(lr)}yv=Om,cv=Vm}Ru.push(Gm)}var Hm;if(this.ak===null){for(var Km=[],gv=this.xa.n,Um=gv.length,mv=0;mv<Um;mv++){var oa=gv[mv],Jm=[];if(Km.push(Jm),oa.visible)for(var vw=oa.interval,xv=0;xv<Um;xv++){var sa=gv[xv];if(sa.visible&&oa!==sa&&!(oa instanceof Y&&!(sa instanceof Y)||oa instanceof rt&&!(sa instanceof rt))){var Ym=sa.interval;Ym>vw&&Jm.push(Ym)}}}this.ak=Km}Hm=this.ak;var qm=this.xa.n,dw=qm.length,Lh=0,Zm=0,Qm=kl;this.Im=[];for(var r0=[],o0=0;o0<dw;o0++){var Ah=qm[o0],r0=[];if(Ah.visible&&Ah!==Ks){var Xm=Ah.interval,Wm=this.LA;if(!(2>Wm*Xm*kl/this.ou)){var Vr=this.qF,$m=Hm[o0],ha=Eu[0][0],Oo=0,Te=0,Zm=kl*Ah.pF-1e-4,Qm=kl*Ah.nF+1e-4,Gu=Wm*Xm;if(Vr<this.Pk)var Sl=(this.Pk-Vr)/Gu,Sl=Sl%1===0?Sl:Math.floor(Sl+1),Vr=Vr+Sl*Gu;else Vr>this.Pk+Gu&&(Sl=Math.floor((Vr-this.Pk)/Gu),Vr-=Sl*Gu);for(;Vr<=this.KA;){var wv;t:{for(var gw=$m.length,Mv=0;Mv<gw;Mv++)if(St((Vr-this.qF)%($m[Mv]*this.LA),0)){wv=!1;break t}wv=!0}if(wv&&(Lh=(Vr-this.Pk)*kl/this.ou,Lh>kl&&(Lh=kl),Zm<=Lh&&Lh<=Qm)){for(var lr=Ru[Oo][Te],Ou=Eu[Oo][Te];Oo<Eu.length;){for(;Lh>ha&&Te<Eu[Oo].length-1;)Te++,lr=Ru[Oo][Te],Ou=Eu[Oo][Te],ha+=Ou;if(Lh<=ha)break;Oo++,Te=0,lr=Ru[Oo][Te],Ou=Eu[Oo][Te],ha+=Ou}var Ue=pv[Oo],_m=Ue[2*Te],bm=Ue[2*Te+1],s0=(Lh-(ha-Ou))/Ou,Pv=new F(_m+(Ue[2*Te+2]-_m)*s0+Rm/2-ea.eb.x,bm+(Ue[2*Te+3]-bm)*s0+Rm/2-ea.eb.y);Pv.scale(Ks.scale,Ks.scale);var Us=lr,Vu=Ru[Oo];if(1e-4>s0?0<Te?Us=Vu[Te-1]:St(Ue[0],Ue[Ue.length-2])&&St(Ue[1],Ue[Ue.length-1])&&(Us=Vu[Vu.length-1]):.9999<s0&&(Te+1<Vu.length?Us=Vu[Te+1]:St(Ue[0],Ue[Ue.length-2])&&St(Ue[1],Ue[Ue.length-1])&&(Us=Vu[0])),lr!==Us&&(180<Math.abs(lr-Us)&&(lr<Us?lr+=360:Us+=360),lr=(lr+Us)/2%360),Ah instanceof rt){var Ih="";Ah.oF!==null?(Ih=Ah.oF(Vr),Ih=Ih!=null?Ih.toString():""):Ih=(+Vr.toFixed(2)).toString(),Ih!==""&&r0.push([Pv,lr,Ih])}else r0.push([Pv,lr])}Vr+=Gu}}}this.Im.push(r0)}s.ra(Ru);for(var mw=this.Im,xw=f.length,h0=0;h0<xw;h0++){var Nl=f[h0],Tv=mw[h0];if(Nl.visible&&Nl!==Ks&&Tv.length!==0){if(Nl instanceof Y){var Bh=Nl,tx=Tv,ww=r,kv=Bh.qh;kv.Ud()&&(kv=po);var Mw=Bh.angle;Bh.mg=0,Gt(Bh,1/0,1/0),Bh.mg=Mw;var ix=Bh.za,Sv=ix.width,Nv=ix.height,nx=s.lg(0,0,Sv,Nv),ur=s.K();ur.bo(nx,kv),s.Bb(nx);for(var l0=-ur.x,u0=-ur.y,Cl=new O,Pw=tx.length,f0=0;f0<Pw;f0++)for(var Cv=tx[f0],ex=Cv[0].x,rx=Cv[0].y,ox=Cv[1],a0=0;4>a0;a0++){switch(a0){case 0:ur.m(l0,u0);break;case 1:ur.m(l0+Sv,u0);break;case 2:ur.m(l0,u0+Nv);break;case 3:ur.m(l0+Sv,u0+Nv)}ur.rotate(ox+Bh.angle),ur.offset(ex,rx),f0===0&&a0===0?Cl.m(ur.x,ur.y,0,0):Cl.yi(ur),ur.offset(-ex,-rx),ur.rotate(-ox-Bh.angle)}s.v(ur),this.Gm.push(Cl),yn(ww,Cl.x,Cl.y,Cl.width,Cl.height)}else if(Nl instanceof rt){var p0=Nl,sx=Tv,Tw=r;this.vk===null&&(this.vk=new rt);var Vo=this.vk;Rg(p0,Vo);var jv=p0.qh;jv.Ud()&&(jv=po);for(var zh=p0.Eq,kw=p0.AB,jl=null,y0=0,c0=0,Js=0,Fv=0,Sw=sx.length,v0=0;v0<Sw;v0++){var as=sx[v0],y0=as[0].x,c0=as[0].y,Js=as[1];zh!==ye&&(Fv=S.computeAngle(zh,Js),Vo.mg=Fv),Vo.text=as[2],Gt(Vo,1/0,1/0);var Eh=Vo.za,Hu=Vo.Ja,Ku=Hu.width,Uu=Hu.height,Ys=s.Wg();Ys.reset(),Ys.translate(-Eh.x,-Eh.y),Ys.scale(Vo.scale,Vo.scale),Ys.rotate(zh===ye?Vo.angle:Js,Ku/2,Uu/2),zh!==Cf&&zh!==Ff||Ys.rotate(90,Ku/2,Uu/2),zh!==jf&&zh!==Df||Ys.rotate(-90,Ku/2,Uu/2),zh===fp&&(45<Js&&135>Js||225<Js&&315>Js)&&Ys.rotate(-Js,Ku/2,Uu/2);var hx=s.lg(0,0,Ku,Uu),la=s.K();la.bo(hx,jv),Ys.nb(la);var Nw=-la.x,Cw=-la.y,qs=s.K();qs.assign(kw),isNaN(qs.x)&&(qs.x=Ku/2+3),isNaN(qs.y)&&(qs.y=-(Uu/2+3)),qs.rotate(Js);var y0=y0+(qs.x+Nw),c0=c0+(qs.y+Cw),Dv=new O(y0,c0,Eh.width,Eh.height),jw=new O(Eh.x,Eh.y,Eh.width,Eh.height),Fw=new O(Hu.x,Hu.y,Hu.width,Hu.height),lx=new fh;lx.Sp(Vo.zf),as.push(Fv),as.push(Vo.pe),as.push(lx),as.push(Dv),as.push(jw),as.push(Fw),v0===0?jl=Dv.copy():jl.Zg(Dv),s.v(qs),s.v(la),s.Bb(hx),s.cf(Ys)}this.Gm.push(jl),yn(Tw,jl.x,jl.y,jl.width,jl.height)}ne(Nl,!1)}}break;case"TableRow":case"TableColumn":s.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:s.k("Unknown panel type: "+a)}}var lo=r.width,uo=r.height,d0=this.padding,Dw=d0.top+d0.bottom,lo=lo+(d0.left+d0.right),uo=uo+Dw;isFinite(o.width)&&(lo=o.width),isFinite(o.height)&&(uo=o.height),lo=Math.min(l.width,lo),uo=Math.min(l.height,uo),lo=Math.max(h.width,lo),uo=Math.max(h.height,uo),lo=Math.max(n,lo),uo=Math.max(e,uo),r.width=lo,r.height=uo,Ko(this.Nc,lo,uo),Qr(this,0,0,lo,uo)},A.prototype.findMainElement=A.prototype.Bd=function(){if(this.Kl===null){var t=this.xa.n,i=t.length;if(i===0)return null;for(var n=0;n<i;n++){var e=t[n];if(e.ff===!0)return this.Kl=e}this.Kl=t[0]}return this.Kl};function Po(t){return t.W!==null?t.W.cg:null}A.prototype.pj=function(t,i,n,e){var r=this.lj,o=this.xa.n,h=s.lg(0,0,0,0);if(o.length===0){var l=this.U;l.x=t,l.y=i,l.width=n,l.height=e}else{if(!this.Da.H()){var u=zr(this,!0),f=this.ud,a=f.width,p=f.height,y=this.margin,c=y.left+y.right,v=y.top+y.bottom;switch(a===n&&p===e&&(u=ri),u){case ri:(a>n||p>e)&&(this.I(),Gt(this,a>n?n:a,p>e?e:p));break;case ii:this.I(!0),Gt(this,n+c,e+v,0,0);break;case Xi:this.I(!0),Gt(this,n+c,p+v,0,0);break;case nn:this.I(!0),Gt(this,a+c,e+v,0,0)}}l=this.U,l.x=t,l.y=i,l.width=n,l.height=e;var d=this.na.Sb;switch(d){case"Position":for(var g=o.length,m=r.x-this.padding.left,w=r.y-this.padding.top,M=0;M<g;M++){var k=o[M],D=k.za,C=k.margin,G=k.position.x,H=k.position.y;if(h.x=isNaN(G)?-m:G-m,h.y=isNaN(H)?-w:H-w,k instanceof Y){var U=k;if(U.CF){var X=U.mb/2;h.x-=X,h.y-=X}}h.x+=C.left,h.y+=C.top,h.width=D.width,h.height=D.height,k.visible&&k.jc(h.x,h.y,h.width,h.height)}break;case"Vertical":for(var _=o.length,Mt=this.padding.left,Ft=this.IF,J=Ft?r.height:this.padding.top,ht=0;ht<_;ht++){var qt=Mt,Bt=o[ht];if(Bt.visible){var Wt=Bt.za,Ct=Bt.margin,xh=Ct.left+Ct.right,Ie=Mt+this.padding.right,ve=Wt.width,Co=zr(Bt,!1);(isNaN(Bt.Da.width)&&Co===ii||Co===Xi)&&(ve=Math.max(r.width-xh-Ie,0));var wn=ve+xh+Ie,er=Bt.alignment;er.ge()&&(er=this.am),er.Zc()||(er=Tt),Ft&&(J-=Wt.height+Ct.bottom+Ct.top),Bt.jc(qt+er.offsetX+Ct.left+(r.width*er.x-wn*er.x),J+er.offsetY+Ct.top,ve,Wt.height),Ft||(J+=Wt.height+Ct.bottom+Ct.top)}}break;case"Horizontal":for(var js=o.length,ai=this.padding.top,ni=this.IF,ft=ni?r.width:this.padding.left,at=0;at<js;at++){var yi=ai,Zt=o[at];if(Zt.visible){var Kt=Zt.za,Ii=Zt.margin,Fs=Ii.top+Ii.bottom,In=ai+this.padding.bottom,rr=Kt.height,to=zr(Zt,!1);(isNaN(Zt.Da.height)&&to===ii||to===nn)&&(rr=Math.max(r.height-Fs-In,0));var os=rr+Fs+In,de=Zt.alignment;de.ge()&&(de=this.am),de.Zc()||(de=Tt),ni&&(ft-=Kt.width+Ii.left+Ii.right),Zt.jc(ft+de.offsetX+Ii.left,yi+de.offsetY+Ii.top+(r.height*de.y-os*de.y),Kt.width,rr),ni||(ft+=Kt.width+Ii.left+Ii.right)}}break;case"Spot":var Bi=o.length,Mn=this.Bd(),ee=Mn.za,jo=ee.width,Hi=ee.height,Ki=this.padding,or=Ki.left,Be=Ki.top;h.x=or-r.x,h.y=Be-r.y,Mn.jc(h.x,h.y,jo,Hi);for(var li=0;li<Bi;li++){var Bn=o[li];if(Bn!==Mn){var ss=Bn.za,Ds=ss.width,Er=ss.height,si=Bn.alignment;si.ge()&&(si=this.am),si.Zc()||(si=Tt);var zi=Bn.qh;zi.ge()&&(zi=Tt);var ei=null;if(Bn instanceof A&&Bn.Oj!==""&&(ei=Bn.Cd(Bn.Oj),ei===Bn&&(ei=null)),ei!==null){for(var ze=ei.Ja,$i=s.wb(zi.x*ze.width+zi.offsetX,zi.y*ze.height+zi.offsetY);ei!==Bn;)ei.transform.nb($i),ei=ei.R;h.x=si.x*jo+si.offsetX-$i.x,h.y=si.y*Hi+si.offsetY-$i.y,s.v($i)}else h.x=si.x*jo+si.offsetX-(zi.x*Ds-zi.offsetX),h.y=si.y*Hi+si.offsetY-(zi.y*Er-zi.offsetY);h.x-=r.x,h.y-=r.y,Bn.visible&&Bn.jc(or+h.x,Be+h.y,Ds,Er)}}break;case"Auto":var Ls=o.length,pi=this.Bd(),rn=pi.za,Ut=s.vf();Ut.m(0,0,1,1);var Nn=pi.margin,xi=Nn.left,ci=Nn.top,Fi=this.padding,Ee=Fi.left,Si=Fi.top;h.x=xi,h.y=ci,h.width=rn.width,h.height=rn.height,pi.jc(Ee+h.x,Si+h.y,h.width,h.height);var Ui=Ky(pi),re=Uy(pi),rl=0+Ui.y*rn.height+Ui.offsetY,Ei=0+re.x*rn.width+re.offsetX,Ri=0+re.y*rn.height+re.offsetY;Ut.x=0+Ui.x*rn.width+Ui.offsetX,Ut.y=rl,yn(Ut,Ei,Ri,0,0),Ut.x+=xi+Ee,Ut.y+=ci+Si;for(var Cn=0;Cn<Ls;Cn++){var Qn=o[Cn];if(Qn!==pi){var ge=Qn.za,Nn=Qn.margin,As=Math.max(ge.width+Nn.right+Nn.left,0),ol=Math.max(ge.height+Nn.top+Nn.bottom,0),vi=Qn.alignment;vi.ge()&&(vi=this.am),vi.Zc()||(vi=Tt),h.x=Ut.width*vi.x+vi.offsetX-As*vi.x+Nn.left+Ut.x,h.y=Ut.height*vi.y+vi.offsetY-ol*vi.y+Nn.top+Ut.y,h.width=Ut.width,h.height=Ut.height,Qn.visible&&(ao(Ut.x,Ut.y,Ut.width,Ut.height,h.x,h.y,ge.width,ge.height)?Qn.jc(h.x,h.y,ge.width,ge.height):Qn.jc(h.x,h.y,ge.width,ge.height,new O(Ut.x,Ut.y,Ut.width,Ut.height)))}}s.Bb(Ut);break;case"Table":for(var Xn=o.length,sl=this.padding,Rr=sl.left,on=sl.top,Mr=this.it,sn=0,zn=0,me=Mr.length,hn=0,Jt=0;Jt<me;Jt++)Mr[Jt]&&(hn=Math.max(hn,Mr[Jt].length));for(var ln=Math.min(this.kj,me-1);ln!==me&&(this.Xc[ln]===void 0||this.Xc[ln].Ra===0);)ln++;for(var ln=Math.min(ln,me-1),hl=-this.Xc[ln].ab,io=Math.min(this.Ui,hn-1);io!==hn&&(this.Vc[io]===void 0||this.Vc[io].Ra===0);)io++;for(var io=Math.min(io,hn-1),Re=-this.Vc[io].ab,Fo=s.vm(),Jt=0;Jt<me;Jt++)if(Mr[Jt]){var hn=Mr[Jt].length,wh=this.ee(Jt),zn=wh.ab+hl+on;wh.Ra!==0&&(zn+=wh.ME());for(var Ge=0;Ge<hn;Ge++)if(Mr[Jt][Ge]){var Mh=this.de(Ge),sn=Mh.ab+Re+Rr;Mh.Ra!==0&&(sn+=Mh.ME());for(var Nu=Mr[Jt][Ge],Ph=Nu.length,Qf=0;Qf<Ph;Qf++){var di=Nu[Qf],sr=di.za,oe=di instanceof A?di:null;if(oe===null||oe.type!==_e&&oe.type!==mr){Fo.m(0,0);for(var Gr=1;Gr<di.rowSpan&&!(Jt+Gr>=this.Dq);Gr++){var ll=this.ee(Jt+Gr);Fo.height+=ll.total}for(Gr=1;Gr<di.BH&&!(Ge+Gr>=this.Rp);Gr++){var ul=this.de(Ge+Gr);Fo.width+=ul.total}var Cu=Mh.Ra+Fo.width,ju=wh.Ra+Fo.height;h.x=sn,h.y=zn,h.width=Cu,h.height=ju;var Th=sn,fl=zn,nt=Cu,b=ju;sn+Cu>r.width&&(nt=Math.max(r.width-sn,0)),zn+ju>r.height&&(b=Math.max(r.height-zn,0));var En=di.alignment,hs=0,Is=0,Mi=0,Bs=0;if(En.ge()){En=this.am,En.Zc()||(En=Tt);var hs=En.x,Is=En.y,Mi=En.offsetX,Bs=En.offsetY,Gi=Mh.alignment,al=wh.alignment;Gi.Zc()&&(hs=Gi.x,Mi=Gi.offsetX),al.Zc()&&(Is=al.y,Bs=al.offsetY)}else hs=En.x,Is=En.y,Mi=En.offsetX,Bs=En.offsetY;(isNaN(hs)||isNaN(Is))&&(Is=hs=.5,Bs=Mi=0);var Tr=sr.width,Q=sr.height,Do=di.margin,kh=Do.left+Do.right,Pr=Do.top+Do.bottom,Oe=wf(di,wh,Mh,!1);!isNaN(di.Da.width)||Oe!==ii&&Oe!==Xi||(Tr=Math.max(Cu-kh,0)),!isNaN(di.Da.height)||Oe!==ii&&Oe!==nn||(Q=Math.max(ju-Pr,0));var xe=di.Hf,Ve=di.si,Tr=Math.min(xe.width,Tr),Q=Math.min(xe.height,Q),Tr=Math.max(Ve.width,Tr),Q=Math.max(Ve.height,Q),pl=Q+Pr;h.x+=h.width*hs-(Tr+kh)*hs+Mi+Do.left,h.y+=h.height*Is-pl*Is+Bs+Do.top,di.visible&&(ao(Th,fl,nt,b,h.x,h.y,sr.width,sr.height)?di.jc(h.x,h.y,Tr,Q):di.jc(h.x,h.y,Tr,Q,new O(Th,fl,nt,b)))}else{di.Ri(),di.pc.Qa();var Rn=di.pc,Fu=s.lg(Rn.x,Rn.y,Rn.width,Rn.height);if(Rn.x=oe.type===_e?Rr:sn,Rn.y=oe.type===mr?on:zn,Rn.width=sr.width,Rn.height=sr.height,di.pc.freeze(),sh(di,!1),!g0(Fu,Rn)){var yl=di.W;yl!==null&&(yl.Rk(),di.Ks(yl))}s.Bb(Fu)}}}}for(s.Lk(Fo),Jt=0;Jt<Xn;Jt++)di=o[Jt],oe=di instanceof A?di:null,oe===null||oe.type!==_e&&oe.type!==mr||(Rn=di.pc,di.Nc.Qa(),di.Nc.m(0,0,Rn.width,Rn.height),di.Nc.freeze());break;case"Viewbox":var un=o[0],Sh=un.za,bt=un.margin,ui=bt.top+bt.bottom,Zp=Math.max(Sh.width+(bt.right+bt.left),0),lv=Math.max(Sh.height+ui,0),kr=un.alignment;kr.ge()&&(kr=this.am),kr.Zc()||(kr=Tt),h.x=r.width*kr.x-Zp*kr.x+kr.offsetX,h.y=r.height*kr.y-lv*kr.y+kr.offsetY,h.width=Sh.width,h.height=Sh.height,un.jc(h.x,h.y,h.width,h.height);break;case"Link":var Xf=o.length;if(this instanceof vt||this instanceof S){var fn=null;this instanceof S&&(fn=this),this instanceof vt&&(fn=this.$e);var ls=fn,Lo=this instanceof vt?null:ls.path;if(this.$g!==null){var an=this.$g.n,zs=0;if(Lo!==null&&zs<this.$g.count){var Ao=an[zs];zs++,Lo.jc(Ao.x-this.lj.x,Ao.y-this.lj.y,Ao.width,Ao.height)}for(var Wf=0;Wf<Xf;Wf++){var Io=o[Wf];Io!==Lo&&zs<this.$g.count&&(Ao=an[zs],zs++,Io.jc(Ao.x-this.lj.x,Ao.y-this.lj.y,Ao.width,Ao.height))}}var no=ls.points,eo=no.count;if(2<=eo&&this instanceof S)for(var us=this.Ff;us.next();){var Wn=us.value,hr=eo,we=no,Pn=Wn.Re,cl=Wn.zB,Du=Wn.qh,Lu=Wn.Eq,Qp=Wn.AB,Es=0,Rs=0,Bo=0;if(Pn<-hr||Pn>=hr){var Ni=this.SF,Sr=this.RF;Lu!==ye&&(Bo=this.computeAngle(Wn,Lu,Sr),Wn.angle=Bo),Es=Ni.x,Rs=Ni.y}else{var jn=void 0,$n=void 0;if(0<=Pn)jn=we.n[Pn],$n=Pn<hr-1?we.n[Pn+1]:jn;else var He=hr+Pn,jn=we.n[He],$n=0<He?we.n[He-1]:jn;if(jn.Qc($n)){var hi=void 0,Me=void 0;0<=Pn?(hi=0<Pn?we.n[Pn-1]:jn,Me=Pn<hr-2?we.n[Pn+2]:$n):(hi=He<hr-1?we.n[He+1]:jn,Me=1<He?we.n[He-2]:$n);var ro=hi.Cf(jn),ti=$n.Cf(Me),Sr=ro>ti+10?0<=Pn?hi.Qb(jn):jn.Qb(hi):ti>ro+10?0<=Pn?$n.Qb(Me):Me.Qb($n):0<=Pn?hi.Qb(Me):Me.Qb(hi)}else Sr=0<=Pn?jn.Qb($n):$n.Qb(jn);Lu!==ye&&(Bo=this.computeAngle(Wn,Lu,Sr),Wn.angle=Bo),Es=jn.x+($n.x-jn.x)*cl,Rs=jn.y+($n.y-jn.y)*cl}if(Du.L(ki))Wn.location=new F(Es,Rs);else{Du.Ud()&&(Du=Tt);var zo=s.Wg();zo.reset(),zo.scale(Wn.scale,Wn.scale),zo.rotate(Wn.angle,0,0);var Nr=Wn.Ja,Gs=s.lg(0,0,Nr.width,Nr.height),oo=s.K();oo.bo(Gs,Du),zo.nb(oo);var vl=-oo.x,Nh=-oo.y,Ji=Qp.copy();isNaN(Ji.x)&&(Ji.x=0<=Pn?oo.x+3:-(oo.x+3)),isNaN(Ji.y)&&(Ji.y=-(oo.y+3)),Ji.rotate(Sr),Es+=Ji.x,Rs+=Ji.y,zo.JG(Gs);var vl=vl+Gs.x,Nh=Nh+Gs.y,dl=s.wb(Es+vl,Rs+Nh);Wn.move(dl),s.v(dl),s.v(oo),s.Bb(Gs),s.cf(zo)}}this.Hu(!1)}break;case"Grid":break;case"Graduated":if(this.Gm!==null){var $f=this.Bd(),gl=this.Im,Ch=this.Gm,Eo=0,Or=Ch[Eo];Eo++,$f.jc(Or.x-r.x,Or.y-r.y,Or.width,Or.height);for(var jh=o.length,Fh=0;Fh<jh;Fh++){var se=o[Fh],Au=gl[Fh];se.visible&&se!==$f&&Au.length!==0&&(Or=Ch[Eo],Eo++,se.jc(Or.x-r.x,Or.y-r.y,Or.width,Or.height))}this.Gm=null}break;case"TableRow":case"TableColumn":s.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:s.k("Unknown panel type: "+d)}s.Bb(h)}},A.prototype.Ek=function(t){var i=this.Ja,n=Po(this);if(ao(0,0,i.width,i.height,t.x,t.y)){for(var i=this.xa.n,e=i.length,r=s.wb(0,0);e--;){var o=i[e];if((o.visible||o===n)&&(pn(r.set(t),o.transform),o.Ia(r)))return s.v(r),!0}return s.v(r),!(this.Gb===null&&this.cc===null)}return!1},A.prototype.Dx=function(t){if(this.to===t)return this;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e].Dx(t);if(r!==null)return r}return null};function Mf(t,i,n){if(n(t,i),i instanceof A){i=i.xa.n;for(var e=i.length,r=0;r<e;r++)Mf(t,i[r],n)}}function lh(t,i){Og(t,t,i)}function Og(t,i,n){n(i),i=i.xa.n;for(var e=i.length,r=0;r<e;r++){var o=i[r];o instanceof A&&Og(t,o,n)}}A.prototype.walkVisualTree=A.prototype.cK=function(t){Vg(this,this,t)};function Vg(t,i,n){if(n(i),i instanceof A){i=i.xa.n;for(var e=i.length,r=0;r<e;r++)Vg(t,i[r],n)}}A.prototype.findInVisualTree=A.prototype.bu=function(t){return Hg(this,this,t)};function Hg(t,i,n){if(n(i))return i;if(i instanceof A){i=i.xa.n;for(var e=i.length,r=0;r<e;r++){var o=Hg(t,i[r],n);if(o!==null)return o}}return null}A.prototype.findObject=A.prototype.Cd=function(t){if(this.name===t)return this;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e];if(r.name===t)return r;if(r instanceof A){if(r.hk===null&&r.xg===null){if(r=r.Cd(t),r!==null)return r}else if(Pf(r)&&(r=r.xa.first(),r!==null&&(r=r.Cd(t),r!==null)))return r}}return null};function Kg(t){t=t.xa.n;for(var i=t.length,n=0,e=0;e<i;e++){var r=t[e];if(r instanceof A)n=Math.max(n,Kg(r));else if(r instanceof Y){t:{if(!r.Sf!==null)switch(r.Ko){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":r=0;break t}r=r.ki/2*r.ln*r.vj()}n=Math.max(n,r)}}return n}B=A.prototype,B.Yg=function(){return!(this.type===_e||this.type===mr)},B.Pe=function(t,i,n){if(this.Ug===!1||(i===void 0&&(i=null),n===void 0&&(n=null),$e(this)))return null;var e=this.Ja,r=1/this.vj(),o=this.Yg(),h=o?t:pn(s.wb(t.x,t.y),this.transform),l=this.g,u=10,f=5;if(l!==null&&(u=l.nu("extraTouchArea"),f=u/2),ao(-(f*r),-(f*r),e.width+u*r,e.height+u*r,h.x,h.y)){if(!this.Kn){var r=this.xa.n,a=r.length,l=s.K(),f=(u=this.tu)?this.Bd():null;if(u&&(f.Yg()?pn(l.set(t),f.transform):l.set(t),!f.Ia(l)))return s.v(l),o||s.v(h),null;for(var p=Po(this);a--;){var y=r[a];if((y.visible||y===p)&&(y.Yg()?pn(l.set(t),y.transform):l.set(t),!u||y!==f)){var c=null;if(y instanceof A?c=y.Pe(l,i,n):y.Ug===!0&&y.Ia(l)&&(c=y),c!==null&&(i!==null&&(c=i(c)),c!==null&&(n===null||n(c))))return s.v(l),o||s.v(h),c}}s.v(l)}return this.background===null&&this.qn===null?(o||s.v(h),null):(t=ao(0,0,e.width,e.height,h.x,h.y)?this:null,o||s.v(h),t)}return o||s.v(h),null},B.du=function(t,i,n,e){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null),e instanceof z||e instanceof R||(e=new z(N));var l=this.Ja,r=this.Yg(),o=r?t:pn(s.wb(t.x,t.y),this.transform),h=this.type===_e||this.type===mr,l=ao(0,0,l.width,l.height,o.x,o.y);if(h||l){if(!this.Kn){for(var h=this.xa.n,u=h.length,f=s.K(),a=Po(this);u--;){var p=h[u];if(p.visible||p===a){p.Yg()?pn(f.set(t),p.transform):f.set(t);var y=p,p=p instanceof A?p:null;(p!==null?p.du(f,i,n,e):y.Ia(f))&&y.Ug!==!1&&(i!==null&&(y=i(y)),y===null||n!==null&&!n(y)||e.add(y))}}s.v(f)}return r||s.v(o),l&&(this.background!==null||this.qn!==null)}return r||s.v(o),!1},B.Jk=function(t,i,n,e,r,o){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var h=o;if(o===void 0&&(h=s.Wg(),h.reset()),h.multiply(this.transform),this.vn(t,h))return Hy(this,i,n,r),o===void 0&&s.cf(h),!0;if(this.$f(t,h)){if(!this.Kn)for(var l=Po(this),u=this.xa.n,f=u.length;f--;){var a=u[f];if(a.visible||a===l){var p=a.U,y=this.Ja;p.x>y.width||p.y>y.height||0>p.x+p.width||0>p.y+p.height||(p=a,a=a instanceof A?a:null,y=s.Wg(),y.set(h),(a!==null?a.Jk(t,i,n,e,r,y):Ag(p,t,e,y))&&(i!==null&&(p=i(p)),p===null||n!==null&&!n(p)||r.add(p)),s.cf(y))}}return o===void 0&&s.cf(h),e}return o===void 0&&s.cf(h),!1};function Hy(t,i,n,e){for(var r=t.xa.n,o=r.length;o--;){var h=r[o];if(h.visible){var l=h.U,u=t.Ja;l.x>u.width||l.y>u.height||0>l.x+l.width||0>l.y+l.height||(h instanceof A&&Hy(h,i,n,e),i!==null&&(h=i(h)),h===null||n!==null&&!n(h)||e.add(h))}}}B.Bn=function(t,i,n,e,r,o){if(this.Ug===!1)return!1;n===void 0&&(n=null),e===void 0&&(e=null);var p=this.Ja,h=this.Yg(),l=h?t:pn(s.wb(t.x,t.y),this.transform),u=h?i:pn(s.wb(i.x,i.y),this.transform),f=l.Cf(u),a=0<l.x&&l.x<p.width&&0<l.y&&l.y<p.height||Tn(l.x,l.y,0,0,0,p.height)<=f||Tn(l.x,l.y,0,p.height,p.width,p.height)<=f||Tn(l.x,l.y,p.width,p.height,p.width,0)<=f||Tn(l.x,l.y,p.width,0,0,0)<=f,p=l.Xf(0,0)<=f&&l.Xf(0,p.height)<=f&&l.Xf(p.width,0)<=f&&l.Xf(p.width,p.height)<=f;if(h||(s.v(l),s.v(u)),a){if(!this.Kn){for(var l=s.K(),u=s.K(),f=Po(this),y=this.xa.n,c=y.length;c--;){var v=y[c];if(v.visible||v===f){var d=v.U,g=this.Ja;(!h||!(d.x>g.width||d.y>g.height||0>d.x+d.width||0>d.y+d.height))&&(v.Yg()?(d=v.transform,pn(l.set(t),d),pn(u.set(i),d)):(l.set(t),u.set(i)),d=v,v=v instanceof A?v:null,(v!==null?v.Bn(l,u,n,e,r,o):d.eF(l,u,r))&&(n!==null&&(d=n(d)),d===null||e!==null&&!e(d)||o.add(d)))}}s.v(l),s.v(u)}return r?a:p}return!1};function Ky(t){var i=null;return t instanceof Y&&(i=t.A,i===cn&&(i=null),t=t.of,t!==null&&i===null&&(i=t.A)),i===null&&(i=gi),i}function Uy(t){var i=null;return t instanceof Y&&(i=t.B,i===cn&&(i=null),t=t.of,t!==null&&i===null&&(i=t.B)),i===null&&(i=_i),i}A.prototype.add=A.prototype.add=function(t){s.G(t,N,A,"add:element"),this.Rd(this.xa.count,t)},A.prototype.elt=A.prototype.fa=function(t){return this.xa.fa(t)},A.prototype.insertAt=A.prototype.Rd=function(t,i){i instanceof L&&s.k("Cannot add a Part to a Panel: "+i+"; use a Panel instead"),(this===i||this.jm(i))&&(this===i&&s.k("Cannot make a Panel contain itself: "+this.toString()),s.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));var n=i.R;if(n!==null&&n!==this&&s.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==Yh||i instanceof Y||s.k("Can only add Shapes to a Grid Panel, not: "+i),this.na!==qh||i instanceof Y||i instanceof rt||s.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+i),i.qm(this),i.$m=null,this.mq!==null){var r=i.data;r!==null&&typeof r=="object"&&(this.wg===null&&(this.wg=new tt(Object,A)),this.wg.add(r,i))}var e=this.xa,r=-1;if(n===this){for(var o=-1,h=this.xa.n,l=h.length,u=0;u<l;u++)if(h[u]===i){o=u;break}if(o!==-1){if(o===t||o+1>=e.count&&t>=e.count)return;e.cd(o),r=o}else s.k("element "+i.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>e.count)&&(t=e.count),e.Rd(t,i),(t===0||i.ff)&&(this.Kl=null),xs(this)||this.I(),i.I(!1),i.le!==null?this.Qk=!0:i instanceof A&&i.Qk===!0&&(this.Qk=!0),this.ak=null,n=this.W,n!==null&&(n.Vm=null,n.lk=NaN,this.Qk&&n instanceof I&&(n.Qk=!0),n.Qk&&n instanceof I&&(n.Ie=null),e=this.g,e!==null&&e.ja.lb||(r!==-1&&n.bd(Ai,"elements",this,i,null,r,null),n.bd(Li,"elements",this,null,i,null,t),this.vu()||Yy(this,i,!1)))},s.defineProperty(A,{Qk:null},function(){return(this.M&8388608)!==0},function(t){(this.M&8388608)!==0!==t&&(this.M^=8388608)});function Jy(t,i){t.M=i?t.M|16777216:t.M&-16777217}A.prototype.remove=A.prototype.remove=function(t){s.G(t,N,A,"remove:element");for(var i=this.xa.n,n=i.length,e=-1,r=0;r<n;r++)if(i[r]===t){e=r;break}e!==-1&&this.rf(e,!0)},A.prototype.removeAt=A.prototype.cd=function(t){0<=t&&this.rf(t,!0)},A.prototype.rf=function(t,i){var n=this.xa,e=n.fa(t);if(e.$m=null,e.qm(null),this.wg!==null){var r=e.data;typeof r=="object"&&this.wg.remove(r)}n.cd(t),ne(this,!1),this.I(),this.Kl===e&&(this.Kl=null),this.ak=null;var o=this.W;o!==null&&(o.Vm=null,o.lk=NaN,o.Sd(),o instanceof I&&(e instanceof A?Mf(e,e,function(h,l){ac(o,l,i)}):ac(o,e,i)),n=this.g,n!==null&&n.ja.lb||o.bd(Ai,"elements",this,e,null,t,null))},s.u(A,{Dq:"rowCount"},function(){return this.Xc===void 0?0:this.Xc.length}),A.prototype.getRowDefinition=A.prototype.ee=function(t){0>t&&s.Fa(t,">= 0",A,"getRowDefinition:idx"),t=Math.round(t);var i=this.Xc;if(i[t]===void 0){var n=new Nt;n.qm(this),n.xe=!0,n.index=t,i[t]=n}return i[t]},A.prototype.removeRowDefinition=A.prototype.fG=function(t){0>t&&s.Fa(t,">= 0",A,"removeRowDefinition:idx"),t=Math.round(t);var i=this.Xc;this.bd(Ai,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.I()},s.u(A,{Rp:"columnCount"},function(){return this.Vc===void 0?0:this.Vc.length}),A.prototype.getColumnDefinition=A.prototype.de=function(t){0>t&&s.Fa(t,">= 0",A,"getColumnDefinition:idx"),t=Math.round(t);var i=this.Vc;if(i[t]===void 0){var n=new Nt;n.qm(this),n.xe=!1,n.index=t,i[t]=n}return i[t]},A.prototype.removeColumnDefinition=A.prototype.dG=function(t){0>t&&s.Fa(t,">= 0",A,"removeColumnDefinition:idx"),t=Math.round(t);var i=this.Vc;this.bd(Ai,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.I()},s.defineProperty(A,{CJ:"rowSizing"},function(){return this.cn===void 0?Qh:this.cn},function(t){if(this.cn!==void 0){var i=this.cn;i!==t&&(t!==Qh&&t!==Zh&&s.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.cn=t,this.I(),this.h("rowSizing",i,t))}}),s.defineProperty(A,{AH:"columnSizing"},function(){return this.Dm===void 0?Qh:this.Dm},function(t){if(this.Dm!==void 0){var i=this.Dm;i!==t&&(t!==Qh&&t!==Zh&&s.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Dm=t,this.I(),this.h("columnSizing",i,t))}}),s.defineProperty(A,{aM:"topIndex"},function(){return this.kj===void 0?0:this.kj},function(t){if(this.kj!==void 0){var i=this.kj;i!==t&&((!isFinite(t)||0>t)&&s.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.kj=t,this.I(),this.h("topIndex",i,t))}}),s.defineProperty(A,{pL:"leftIndex"},function(){return this.Ui===void 0?0:this.Ui},function(t){if(this.Ui!==void 0){var i=this.Ui;i!==t&&((!isFinite(t)||0>t)&&s.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Ui=t,this.I(),this.h("leftIndex",i,t))}}),A.prototype.findRowForLocalY=function(t){if(0>t||this.type!==Xo)return-1;for(var i=0,n=this.Xc,e=n.length,r=this.kj;r<e;r++){var o=n[r];if(o!==void 0&&(i+=o.total,t<i))break}return r},A.prototype.findColumnForLocalX=function(t){if(0>t||this.type!==Xo)return-1;for(var i=0,n=this.Vc,e=n.length,r=this.Ui;r<e;r++){var o=n[r];if(o!==void 0&&(i+=o.total,t<i))break}return r},A.prototype.graduatedPointForValue=function(t,i){if(i===void 0&&(i=new F(NaN,NaN)),this.type!==qh)return i.m(NaN,NaN),i;t=Math.min(Math.max(t,this.Pk),this.KA);var n=(t-this.Pk)/this.ou,e=this.Bd();return e.of.hI(n,i),e.transform.nb(i)},A.prototype.graduatedValueForPoint=function(t){if(this.type!==qh)return NaN;var i=this.Bd(),n=i.of;return i.transform.xh(t),n.dI(t)*this.ou+this.Pk},s.defineProperty(A,{data:"data"},function(){return this.Zd},function(t){var i=this.Zd;if(i!==t){var n=this instanceof L&&!(this instanceof vt);n&&s.j(t,"object",A,"data"),be(this),this.Zd=t;var e=this.g;e!==null&&(n?this instanceof S?(i!==null&&e.Sj.remove(i),t!==null&&e.Sj.add(t,this)):this instanceof L&&(i!==null&&e.Ii.remove(i),t!==null&&e.Ii.add(t,this)):(n=this.R,n!==null&&n.wg!==null&&(i!==null&&n.wg.remove(i),t!==null&&n.wg.add(t,this)))),this.h("data",i,t),e!==null&&e.ja.lb||t!==null&&this.Jb()}}),s.defineProperty(A,{Bu:"itemIndex"},function(){return this.gs},function(t){var i=this.gs;i!==t&&(this.gs=t,this.h("itemIndex",i,t))});function Ug(t){return t=t.ll,t!==null&&t.P}function be(t){var i=t.ll;if(i===null)t.data!==null&&s.k("Template cannot have .data be non-null: "+t),t.ll=i=new z(Pt);else if(i.P)return;var n=new z(N);Jy(t,!1),Mf(t,t,function(f,a){var p=a.Ac;if(p!==null)for(Ry(a,!1),p=p.i;p.next();){var y=p.value;y.mode===ma&&Ry(a,!0);var c=y.Kq;c!==null&&(c==="/"&&Jy(f,!0),c=sd(y,f,a),c!==null&&(n.add(c),c.tp===null&&(c.tp=new z(Pt)),c.tp.add(y))),i.add(y)}if(a instanceof A&&a.type===Xo){if(0<a.Xc.length)for(p=a.Xc,y=p.length,c=0;c<y;c++){var v=p[c];if(v!==void 0&&v.Ac!==null)for(var d=v.Ac.i;d.next();){var g=d.value;g.Gg=v,g.Bt=2,g.Cp=v.index,i.add(g)}}if(0<a.Vc.length){for(p=a.Vc,y=p.length,c=0;c<y;c++)if(v=p[c],v!==void 0&&v.Ac!==null)for(d=v.Ac.i;d.next();)g=d.value,g.Gg=v,g.Bt=1,g.Cp=v.index,i.add(g)}}});for(var e=n.i;e.next();){var r=e.value;if(r.tp!==null){Ry(r,!0);for(var o=r.tp.i;o.next();){var h=o.value;r.Ac===null&&(r.Ac=new z(Pt)),r.Ac.add(h)}}r.tp=null}for(e=i.i;e.next();)if(r=e.value,o=r.Gg,o!==null){r.Gg=null;var l=r.Cy,u=l.indexOf(".");0<u&&o instanceof A&&(h=l.substring(0,u),l=l.substr(u+1),u=o.Cd(h),u!==null?(o=u,r.Cy=l):s.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+r.toString())),o instanceof Nt?(r.um=s.Pd(o.R),o.R.to=r.um):(r.um=s.Pd(o),o.to=r.um)}i.freeze(),t instanceof L&&t.he()&&t.Ne()}A.prototype.copyTemplate=function(){var t=this.copy();return t.cK(function(i){i instanceof A&&(i.ll=null,i.Zd=null);var n=i.Ac;n!==null&&(i.Ac=null,n.each(function(e){i.bind(e.copy())}))}),t},A.prototype.updateTargetBindings=A.prototype.Jb=function(t){var i=this.ll;if(i!==null)for(t===void 0&&(t=""),i=i.i;i.next();){var n=i.value,e=n.xG;if((t===""||e===""||e===t)&&(e=n.Cy,n.GH!==null||e!=="")){var e=this.data,r=n.Kq;if(r!==null)e=r===""?this:r==="/"?this:r==="."?this:r===".."?this:this.Cd(r);else{var o=this.g;o!==null&&n.Px&&(e=o.$.Tk)}if(e!==null){var o=this,h=n.um;if(h!==-1){if(o=this.Dx(h),o===null)continue}else n.Gg!==null&&(o=n.Gg);if(r==="/"?e=o.W:r==="."?e=o:r===".."&&(e=o.R),r=n.Bt,r!==0){if(!(o instanceof A))continue;h=o,r===1?o=h.de(n.Cp):r===2&&(o=h.ee(n.Cp))}o!==void 0&&n.MG(o,e)}}}},s.defineProperty(A,{mq:"itemArray"},function(){return this.hk},function(t){var i=this.hk;if(i!==t){var n=this.g;n!==null&&i!==null&&gy(n,this),this.hk=t,n!==null&&t!==null&&dy(n,this),this.h("itemArray",i,t),n!==null&&n.ja.lb||this.tB()}});function Pf(t){return!!(t.type===hh||t.type===wo||t.type===Mo||t.type===Xo&&0<t.xa.length&&(t=t.xa.fa(0),t.ff&&t instanceof A&&(t.type===_e||t.type===mr)))}A.prototype.rebuildItemElements=A.prototype.tB=function(){var t=0;for(Pf(this)&&(t=1);this.xa.length>t;)this.rf(this.xa.length-1,!1);if(t=this.mq,t!==null)for(var i=s.cb(t),n=0;n<i;n++)Jg(this,s.Ba(t,n),n)},A.prototype.findItemPanelForData=A.prototype.YH=function(t){return t==null||this.wg===null?null:(s.j(t,"object",A,"findItemPanelForData"),this.wg.ka(t))};function Jg(t,i,n){if(!(i==null||0>n)){var e;e=Bx(t,i);var r=t.GI,o=null;r!==null&&(o=r.ka(e)),o===null&&(qg||(qg=!0,s.trace('No item template Panel found for category "'+e+'" on '+t),s.trace("  Using default item template."),e=new A,r=new rt,r.bind(new Pt("text","",We)),e.add(r),Zg=e),o=Zg),e=o,e!==null&&(be(e),e=e.copy(),(e.M&16777216)!==0&&(r=t.bm(),r!==null&&Jy(r,!0)),typeof i=="object"&&(t.wg===null&&(t.wg=new tt(Object,A)),t.wg.add(i,e)),r=n,Pf(t)&&r++,t.Rd(r,e),e.Zd=i,Yg(t,r,n),e.Zd=null,e.data=i)}}function Yg(t,i,n){for(t=t.xa;i<t.length;){var e=t.fa(i);if(e instanceof A){var r=i,o=n;e.type===_e?e.Wb=r:e.type===mr&&(e.column=r),e.Bu=o}i++,n++}}s.defineProperty(A,{nL:"itemTemplate"},function(){return this.xg===null?null:this.xg.ka("")},function(t){if(this.xg===null){if(t===null)return;this.xg=new tt("string",A)}var i=this.xg.ka("");i!==t&&(s.G(t,A,A,"itemTemplate"),(t instanceof L||t.ff)&&s.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.xg.add("",t),this.h("itemTemplate",i,t),t=this.g,t!==null&&t.ja.lb||this.tB())}),s.defineProperty(A,{GI:"itemTemplateMap"},function(){return this.xg},function(t){var i=this.xg;if(i!==t){s.G(t,tt,A,"itemTemplateMap");for(var n=t.i;n.next();){var e=n.value;(e instanceof L||e.ff)&&s.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+e)}this.xg=t,this.h("itemTemplateMap",i,t),t=this.g,t!==null&&t.ja.lb||this.tB()}}),s.defineProperty(A,{mL:"itemCategoryProperty"},function(){return this.Xo},function(t){var i=this.Xo;i!==t&&(typeof t!="string"&&typeof t!="function"&&s.Fd(t,"string or function",A,"itemCategoryProperty"),this.Xo=t,this.h("itemCategoryProperty",i,t))});function Bx(t,i){if(i===null)return"";var n=t.Xo,e="";if(typeof n=="function")e=n(i);else if(typeof n=="string"&&typeof i=="object"){if(n==="")return"";e=s.vb(i,n)}else return"";return e===void 0?"":typeof e=="string"?e:(s.k("Panel.getCategoryForItemData found a non-string category for "+i+": "+e),"")}var qg=!1,Zg=null;s.defineProperty(A,{Kn:"isAtomic"},function(){return(this.M&1048576)!==0},function(t){var i=(this.M&1048576)!==0;i!==t&&(s.j(t,"boolean",A,"isAtomic"),this.M^=1048576,this.h("isAtomic",i,t))}),s.defineProperty(A,{tu:"isClipping"},function(){return(this.M&2097152)!==0},function(t){var i=(this.M&2097152)!==0;i!==t&&(s.j(t,"boolean",A,"isClipping"),this.M^=2097152,this.I(),this.h("isClipping",i,t))}),s.defineProperty(A,{IF:"isOpposite"},function(){return(this.M&33554432)!==0},function(t){var i=(this.M&33554432)!==0;i!==t&&(s.j(t,"boolean",A,"isOpposite"),this.M^=33554432,this.I(),this.h("isOpposite",i,t))}),s.defineProperty(A,{isEnabled:"isEnabled"},function(){return(this.M&4194304)!==0},function(t){var i=(this.M&4194304)!==0;if(i!==t){s.j(t,"boolean",A,"isEnabled");var n=this.R===null||this.R.vu();this.M^=4194304,this.h("isEnabled",i,t),i=this.g,i!==null&&i.ja.lb||n&&Yy(this,this,t)}});function Yy(t,i,n){var e=i.YE;if(e!==null&&e(i,n),i instanceof A){i=i.xa.n;for(var e=i.length,r=0;r<e;r++){var o=i[r];n&&o instanceof A&&!o.isEnabled||Yy(t,o,n)}}}s.defineProperty(A,{iK:"alignmentFocusName"},function(){return this.Oj},function(t){var i=this.Oj;i!==t&&(this.Oj=t,this.I(),this.h("alignmentFocusName",i,t))});function Nt(){s.oc(this),this.ej=null,this.dw=!0,this.Bc=0,this.mf=NaN,this.nk=0,this.mk=1/0,this.me=cn,this.ab=this.Ra=0,this.Ac=null,this.ut=qy,this.Fg=Br,this.pt=this.sk=null,this.qt=NaN,this.Gb=this.bi=null,this.or=!1}s.ga("RowColumnDefinition",Nt),Nt.prototype.copy=function(){var t=new Nt;return t.dw=this.dw,t.Bc=this.Bc,t.mf=this.mf,t.nk=this.nk,t.mk=this.mk,t.me=this.me,t.Ra=this.Ra,t.ab=this.ab,t.Fg=this.Fg,t.ut=this.ut,t.sk=this.sk===null?null:this.sk.S(),t.pt=this.pt,t.qt=this.qt,t.bi=null,this.bi!==null&&(t.bi=s.Xl(this.bi)),t.Gb=this.Gb,t.or=this.or,t.Ac=this.Ac,t},Nt.prototype.Sp=function(t){s.G(t,Nt,Nt,"copyFrom:pd"),t.xe?this.height=t.height:this.width=t.width,this.Eh=t.Eh,this.ke=t.ke,this.alignment=t.alignment,this.stretch=t.stretch,this.cv=t.cv,this.sk=t.sk===null?null:t.sk.S(),this.Gq=t.Gq,this.Hq=t.Hq,this.bi=null,t.bi&&(this.bi=s.Xl(t.bi)),this.background=t.background,this.xA=t.xA,this.Ac=t.Ac},Nt.prototype.ic=function(t){t.Je===Nt?this.cv=t:s.Lj(this,t)},Nt.prototype.toString=function(){return"RowColumnDefinition "+(this.xe?"(Row ":"(Column ")+this.index+") #"+s.Pd(this)};var qy;Nt.Default=qy=s.p(Nt,"Default",0);var Zh;Nt.None=Zh=s.p(Nt,"None",1);var Qh;Nt.ProportionalExtra=Qh=s.p(Nt,"ProportionalExtra",2),Nt.prototype.qm=function(t){this.ej=t},Nt.prototype.computeEffectiveSpacingTop=Nt.prototype.ME=function(){var t=0,i=this.ej,n=0,e=this.xe;if(i!==null)for(var r=e?i.Xc.length:i.Vc.length,o=0;o<r;o++){var h=e?i.Xc[o]:i.Vc[o];if(h!==void 0){n=h.index;break}}if(this.index!==n&&(n=this.Gq,n===null&&i!==null&&(n=this.xe?i.Ji:i.Ph),n!==null&&(t=this.Hq,isNaN(t)&&(t=i!==null?this.xe?i.Rh:i.Qh:0))),n=this.rG,n===null)if(i!==null)n=i.Tj;else return t;return t+(this.xe?n.top:n.left)},Nt.prototype.computeEffectiveSpacing=Nt.prototype.bf=function(){var t=0,i=this.ej,n=0,e=this.xe;if(i!==null)for(var r=e?i.Xc.length:i.Vc.length,o=0;o<r;o++){var h=e?i.Xc[o]:i.Vc[o];if(h!==void 0){n=h.index;break}}if(this.index!==n&&(n=this.Gq,n===null&&i!==null&&(n=e?i.Ji:i.Ph),n!==null&&(t=this.Hq,isNaN(t)&&(t=i!==null?e?i.Rh:i.Qh:0))),e=this.rG,e===null)if(i!==null)e=i.Tj;else return t;return t+(this.xe?e.top+e.bottom:e.left+e.right)},Nt.prototype.hd=function(t,i,n,e,r){var o=this.ej;if(o!==null&&(o.bd(Yt,t,this,i,n,e,r),this.Ac!==null&&(i=o.g,i!==null&&!i.Se&&(o=o.bm(),o!==null&&(i=o.data,i!==null)))))for(n=this.Ac.i;n.next();)n.value.Ey(this,i,t,o)},s.u(Nt,{R:"panel"},function(){return this.ej}),s.defineProperty(Nt,{xe:"isRow"},function(){return this.dw},function(t){this.dw=t}),s.defineProperty(Nt,{index:"index"},function(){return this.Bc},function(t){this.Bc=t}),s.defineProperty(Nt,{height:"height"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"height"),this.mf=t,this.bb=this.Ra,this.R!==null&&this.R.I(),this.hd("height",i,t))}),s.defineProperty(Nt,{width:"width"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"width"),this.mf=t,this.bb=this.Ra,this.R!==null&&this.R.I(),this.hd("width",i,t))}),s.defineProperty(Nt,{Eh:"minimum"},function(){return this.nk},function(t){var i=this.nk;i!==t&&((0>t||!isFinite(t))&&s.Fa(t,">= 0",Nt,"minimum"),this.nk=t,this.bb=this.Ra,this.R!==null&&this.R.I(),this.hd("minimum",i,t))}),s.defineProperty(Nt,{ke:"maximum"},function(){return this.mk},function(t){var i=this.mk;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"maximum"),this.mk=t,this.bb=this.Ra,this.R!==null&&this.R.I(),this.hd("maximum",i,t))}),s.defineProperty(Nt,{alignment:"alignment"},function(){return this.me},function(t){var i=this.me;i.L(t)||(this.me=t.S(),this.R!==null&&this.R.I(),this.hd("alignment",i,t))}),s.defineProperty(Nt,{stretch:"stretch"},function(){return this.Fg},function(t){var i=this.Fg;i!==t&&(this.Fg=t,this.R!==null&&this.R.I(),this.hd("stretch",i,t))}),s.defineProperty(Nt,{rG:"separatorPadding"},function(){return this.sk},function(t){typeof t=="number"&&(t=new xt(t));var i=this.sk;t!==null&&i!==null&&i.L(t)||(t!==null&&(t=t.S()),this.sk=t,this.R!==null&&this.R.I(),this.hd("separatorPadding",i,t))}),s.defineProperty(Nt,{Gq:"separatorStroke"},function(){return this.pt},function(t){var i=this.pt;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.pt=t,this.R!==null&&this.R.I(),this.hd("separatorStroke",i,t))}),s.defineProperty(Nt,{Hq:"separatorStrokeWidth"},function(){return this.qt},function(t){var i=this.qt;i!==t&&(this.qt=t,this.R!==null&&this.R.I(),this.hd("separatorStrokeWidth",i,t))}),s.defineProperty(Nt,{IJ:"separatorDashArray"},function(){return this.bi},function(t){var i=this.bi;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",Nt,"separatorDashArray:value"),t!==null){for(var n=t.length,e=0,r=0;r<n;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||s.k("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),e+=o}if(e===0){if(i===null)return;t=null}}this.bi=t,this.R!==null&&this.R.oa(),this.hd("separatorDashArray",i,t)}}),s.defineProperty(Nt,{background:"background"},function(){return this.Gb},function(t){var i=this.Gb;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Gb=t,this.R!==null&&this.R.oa(),this.hd("background",i,t))}),s.defineProperty(Nt,{xA:"coversSeparators"},function(){return this.or},function(t){var i=this.or;i!==t&&(s.j(t,"boolean",Nt,"coversSeparators"),this.or=t,this.R!==null&&this.R.oa(),this.hd("coversSeparators",i,t))}),s.defineProperty(Nt,{cv:"sizing"},function(){return this.ut},function(t){var i=this.ut;i!==t&&(this.ut=t,this.R!==null&&this.R.I(),this.hd("sizing",i,t))});function Za(t){if(t.cv===qy){var i=t.ej;return t.xe?i.CJ:i.AH}return t.cv}s.defineProperty(Nt,{bb:"actual"},function(){return this.Ra},function(t){this.Ra=isNaN(this.mf)?Math.max(Math.min(this.mk,t),this.nk):Math.max(Math.min(this.mk,this.mf),this.nk)}),s.defineProperty(Nt,{total:"total"},function(){return this.Ra+this.bf()},function(t){this.Ra=isNaN(this.mf)?Math.max(Math.min(this.mk,t),this.nk):Math.max(Math.min(this.mk,this.mf),this.nk),this.Ra=Math.max(0,this.Ra-this.bf())}),s.defineProperty(Nt,{position:"position"},function(){return this.ab},function(t){this.ab=t}),Nt.prototype.bind=Nt.prototype.bind=function(t){t.Gg=this;var i=this.R;if(i!==null){var n=i.bm();n!==null&&Ug(n)&&s.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+i)}this.Ac===null&&(this.Ac=new z(Pt)),this.Ac.add(t)};function Y(){N.call(this),this.Sf=this.Sa=null,this.Ko="None",this.Mr=Br,this.tc=this.Hd="black",this.ki=1,this.xp="butt",this.zp="miter",this.ln=10,this.yp=null,this.Af=0,this.ji=this.ii=cn,this.Ss=this.Rs=NaN,this.Xr=!1,this.Us=null,this.Mo=this.Ep="None",this.ug=1,this.tg=0,this.sg=1}s.La(Y,N),s.ga("Shape",Y),Y.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.Sa=this.Sa,t.Ko=this.Ko,t.Mr=this.Mr,t.Sf=this.Sf,t.Hd=this.Hd,t.tc=this.tc,t.ki=this.ki,t.xp=this.xp,t.zp=this.zp,t.ln=this.ln,this.yp!==null&&(t.yp=s.Xl(this.yp)),t.Af=this.Af,t.ii=this.ii.S(),t.ji=this.ji.S(),t.Rs=this.Rs,t.Ss=this.Ss,t.Xr=this.Xr,t.Us=this.Us,t.Ep=this.Ep,t.Mo=this.Mo,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg},Y.prototype.ic=function(t){t===ri||t===ji||t===vf||t===Br?this.HA=t:N.prototype.ic.call(this,t)},Y.prototype.toString=function(){return"Shape("+(this.Fb!=="None"?this.Fb:this.Lq!=="None"?this.Lq:this.FA)+")#"+s.Pd(this)};function su(t,i,n,e){var r=n.length;if(!(4>r)){for(var h=e.za,o=Math.max(1,h.width),h=h.height,l=n[0],u=n[1],f=0,a=0,p=0,y=0,c=0,v=0,d=y=0,g=s.Za(),m=2;m<r;m+=2)f=n[m],a=n[m+1],p=f-l,y=a-u,p===0&&(p=.001),c=y/p,v=Math.atan2(y,p),y=Math.sqrt(p*p+y*y),g.push([p,v,c,y]),d+=y,l=f,u=a;l=n[0],u=n[1],p=e.za.width,e instanceof Y&&(p-=e.mb),1>p&&(p=1);for(var r=n=p,f=o/2,a=f!==0,m=0,y=g[m],p=y[0],v=y[1],c=y[2],y=y[3],w=0;.1<=d;){if(w===0&&(a?(r=n,r-=f,d-=f,a=!1):r=n,r===0&&(r=1)),r>d){s.ra(g);return}r>y?(w=r-y,r=y):w=0;var M=Math.sqrt(r*r/(1+c*c));if(0>p&&(M=-M),l+=M,u+=c*M,t.translate(l,u),t.rotate(v),t.translate(-(o/2),-(h/2)),w===0&&e.Ik(t,i),t.translate(o/2,h/2),t.rotate(-v),t.translate(-l,-u),d-=r,y-=r,w!==0){if(m++,m===g.length){s.ra(g);return}y=g[m],p=y[0],v=y[1],c=y[2],y=y[3],r=w}}s.ra(g)}}Y.prototype.Ik=function(t,i){if(this.tc!==null||this.Hd!==null){this.Hd!==null&&Zn(this,t,this.Hd,!0,!1),this.tc!==null&&Zn(this,t,this.tc,!1,!1);var n=this.ki;if(n===0){var o=this.W;o instanceof vt&&o.type===Mo&&o.kd==="Selection"&&o.ub instanceof Y&&o.$e.Bd()===o.ub&&(n=o.ub.mb)}t.lineWidth=n,t.lineJoin=this.zp,t.lineCap=this.xp,t.miterLimit=this.ln;var e=!1;this.W&&i.Ok("drawShadows")&&(e=this.W.lm);var r=!0;this.tc!==null&&this.Hd===null&&(r=!1);var o=!1,h=!0,l=this.AG;l!==null&&(o=!0,h=t.zx(l,this.Af));var u=this.Sa;if(u!==null){if(u.na===qi)t.beginPath(),o&&!h?ru(t,u.Ec,u.Oc,u.Ab,u.Hb,l,this.Af):(t.moveTo(u.Ec,u.Oc),t.lineTo(u.Ab,u.Hb)),this.Hd!==null&&t.Lg(this.Hd),n!==0&&this.tc!==null&&t.Kj();else if(u.na===ar){var y=u.Ec,c=u.Oc,f=u.Ab,a=u.Hb,u=Math.min(y,f),p=Math.min(c,a),y=Math.abs(f-y),c=Math.abs(a-c);if(this.Hd!==null&&(t.beginPath(),t.rect(u,p,y,c),t.Lg(this.Hd)),this.tc!==null){var v=f=0,d=0;r&&e&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),o&&!h?(h=s.Za(),h.push(u),h.push(p),h.push(u+y),h.push(p),h.push(u+y),h.push(p+c),h.push(u),h.push(p+c),h.push(u),h.push(p),t.beginPath(),Tf(t,h,l,this.Af),t.Kj(),s.ra(h)):n!==0&&(t.beginPath(),t.rect(u,p,y,c),t.Kj()),r&&e&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d)}}else if(u.na===Kr)y=u.Ec,c=u.Oc,f=u.Ab,a=u.Hb,u=Math.abs(f-y)/2,p=Math.abs(a-c)/2,y=Math.min(y,f)+u,c=Math.min(c,a)+p,t.beginPath(),t.moveTo(y,c-p),t.bezierCurveTo(y+ot*u,c-p,y+u,c-ot*p,y+u,c),t.bezierCurveTo(y+u,c+ot*p,y+ot*u,c+p,y,c+p),t.bezierCurveTo(y-ot*u,c+p,y-u,c+ot*p,y-u,c),t.bezierCurveTo(y-u,c-ot*p,y-ot*u,c-p,y,c-p),t.closePath(),this.Hd!==null&&t.Lg(this.Hd),o&&!h&&(h=s.Za(),Jn(y,c-p,y+ot*u,c-p,y+u,c-ot*p,y+u,c,.5,h),Jn(y+u,c,y+u,c+ot*p,y+ot*u,c+p,y,c+p,.5,h),Jn(y,c+p,y-ot*u,c+p,y-u,c+ot*p,y-u,c,.5,h),Jn(y-u,c,y-u,c-ot*p,y-ot*u,c-p,y,c-p,.5,h),t.beginPath(),Tf(t,h,l,this.Af),s.ra(h)),n!==0&&this.tc!==null&&(r&&e?(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Kj(),t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d):t.Kj());else if(u.na===Ye){for(p=u.Vj,c=p.length,a=0;a<c;a++){y=p.n[a],t.beginPath(),t.moveTo(y.ha,y.da);for(var f=y.yb.n,v=f.length,g=null,d=0;d<v;d++){var m=f[d];switch(m.na){case qe:t.moveTo(m.C,m.D);break;case le:t.lineTo(m.C,m.D);break;case pr:t.bezierCurveTo(m.Jd,m.Ze,m.oh,m.Dg,m.Ab,m.Hb);break;case yr:t.quadraticCurveTo(m.Jd,m.Ze,m.Ab,m.Hb);break;case Zi:if(m.radiusX===m.radiusY){var w=g!==null?g.C:y.ha,M=g!==null?g.D:y.da,g=Math.PI/180;t.arc(m.Jd,m.Ze,m.radiusX,m.Ae*g,(m.Ae+m.uf)*g,0>m.uf,w,M)}else{if(g=Ur(m,y),w=g.length,w===0){t.lineTo(m.la,m.sa);break}for(M=0;M<w;M++){var k=g[M];M===0&&t.lineTo(k[0],k[1]),t.bezierCurveTo(k[2],k[3],k[4],k[5],k[6],k[7])}}break;case Ze:if(M=w=0,g!==null&&g.type===Zi){if(g=Ur(g,y),k=g.length,k===0){t.lineTo(m.la,m.sa);break}g=g[k-1]||null,g!==null&&(w=g[6],M=g[7])}else w=g!==null?g.C:y.ha,M=g!==null?g.D:y.da;if(g=ys(m,y,w,M),w=g.length,w===0){t.lineTo(m.la,m.sa);break}for(M=0;M<w;M++)k=g[M],t.bezierCurveTo(k[2],k[3],k[4],k[5],k[6],k[7]);break;default:s.k("Segment not of valid type: "+m.na)}m.Th&&t.closePath(),g=m}e?(d=v=f=0,y.Vo?(y.Lm===!0&&this.Hd!==null?(t.Lg(this.Hd),r=!0):r=!1,n!==0&&this.tc!==null&&(r&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),o&&!h||t.Kj(),r&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d))):(r&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),y.Lm===!0&&this.Hd!==null&&t.Lg(this.Hd),n!==0&&this.tc!==null&&(o&&!h||t.Kj()),r&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d))):(y.Lm===!0&&this.Hd!==null&&t.Lg(this.Hd),n===0||this.tc===null||o&&!h||t.Kj())}if(o&&!h)for(n=r,r=u.Vj,h=r.length,u=0;u<h;u++){for(p=r.n[u],t.beginPath(),c=s.Za(),c.push(p.ha),c.push(p.da),a=p.ha,y=p.da,f=a,v=y,d=p.yb.n,m=d.length,w=0;w<m;w++){switch(M=d[w],M.na){case qe:Tf(t,c,l,this.Af),c.length=0,c.push(M.C),c.push(M.D),a=M.C,y=M.D,f=a,v=y;break;case le:c.push(M.C),c.push(M.D),a=M.C,y=M.D;break;case pr:Jn(a,y,M.Jd,M.Ze,M.oh,M.Dg,M.Ab,M.Hb,.5,c),a=M.C,y=M.D;break;case yr:Rl(a,y,M.Jd,M.Ze,M.Ab,M.Hb,.5,c),a=M.C,y=M.D;break;case Zi:if(g=Ur(M,p),k=g.length,k===0){c.push(M.la),c.push(M.sa),a=M.la,y=M.sa;break}for(var D=0;D<k;D++){var C=g[D];Jn(a,y,C[2],C[3],C[4],C[5],C[6],C[7],.5,c),a=C[6],y=C[7]}break;case Ze:if(g=ys(M,p,a,y),k=g.length,k===0){c.push(M.la),c.push(M.sa),a=M.la,y=M.sa;break}for(D=0;D<k;D++)C=g[D],Jn(a,y,C[2],C[3],C[4],C[5],C[6],C[7],.5,c),a=C[6],y=C[7];break;default:s.k("Segment not of valid type: "+M.na)}M.Th&&(c.push(f),c.push(v),Tf(t,c,l,this.Af))}Tf(t,c,l,this.Af),s.ra(c),this.tc!==null&&(a=c=p=0,n&&e&&(p=t.shadowOffsetX,c=t.shadowOffsetY,a=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Kj(),n&&e&&(t.shadowOffsetX=p,t.shadowOffsetY=c,t.shadowBlur=a))}}if(o&&t.wx(),this.hy!==null){if(o=this.hy,Gt(o,1/0,1/0),l=o.za,o.jc(0,0,l.width,l.height),n=this.of,t.save(),t.beginPath(),l=s.Za(),n.type===qi)l.push(n.ha),l.push(n.da),l.push(n.C),l.push(n.D),su(t,i,l,o);else if(n.type===Ye)for(h=n.fc.i;h.next();){for(u=h.value,l.length=0,l.push(u.ha),l.push(u.da),r=u.ha,p=u.da,c=r,a=p,y=u.yb.n,f=y.length,v=0;v<f;v++){switch(d=y[v],d.na){case qe:su(t,i,l,o),l.length=0,l.push(d.C),l.push(d.D),r=d.C,p=d.D,c=r,a=p;break;case le:l.push(d.C),l.push(d.D),r=d.C,p=d.D;break;case pr:Jn(r,p,d.Jd,d.Ze,d.oh,d.Dg,d.Ab,d.Hb,.5,l),r=d.C,p=d.D;break;case yr:Rl(r,p,d.Jd,d.Ze,d.Ab,d.Hb,.5,l),r=d.C,p=d.D;break;case Zi:if(n=Ur(d,u),e=n.length,e===0){l.push(d.la),l.push(d.sa),r=d.la,p=d.sa;break}for(m=0;m<e;m++)w=n[m],Jn(r,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),r=w[6],p=w[7];break;case Ze:if(n=ys(d,u,r,p),e=n.length,e===0){l.push(d.la),l.push(d.sa),r=d.la,p=d.sa;break}for(m=0;m<e;m++)w=n[m],Jn(r,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),r=w[6],p=w[7];break;default:s.k("Segment not of valid type: "+d.na)}d.Th&&(l.push(c),l.push(a),su(t,i,l,o))}su(t,i,l,o)}else if(n.type===ar)l.push(n.ha),l.push(n.da),l.push(n.C),l.push(n.da),l.push(n.C),l.push(n.D),l.push(n.ha),l.push(n.D),l.push(n.ha),l.push(n.da),su(t,i,l,o);else if(n.type===Kr){if(h=new wi,h.ha=n.C,h.da=(n.da+n.D)/2,r=new mt(Zi),r.Ae=0,r.uf=360,r.la=(n.ha+n.C)/2,r.sa=(n.da+n.D)/2,r.radiusX=Math.abs(n.ha-n.C)/2,r.radiusY=Math.abs(n.da-n.D)/2,h.add(r),n=Ur(r,h),e=n.length,e===0)l.push(r.la),l.push(r.sa);else for(r=h.ha,p=h.da,m=0;m<e;m++)w=n[m],Jn(r,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),r=w[6],p=w[7];su(t,i,l,o)}s.ra(l),t.restore(),t.Ke(!1)}}}};function Tf(t,i,n,e){var r=i.length;if(!(4>r)){var o=.001,h=n.length,l=i[0],u=i[1];if(r===4)ru(t,l,u,i[2],i[3],n,e);else{t.moveTo(l,u);for(var f=o=0,a=0,p=0,y=0,c=p=0,v=s.Za(),d=2;d<r;d+=2)o=i[d],f=i[d+1],a=o-l,p=f-u,a===0&&(a=.001),y=p/a,p=Math.sqrt(a*a+p*p),v.push([a,y,p]),c+=p,l=o,u=f;l=i[0],u=i[1],i=0;for(var r=!0,o=n[i%h],f=e!==0,d=0,p=v[d],a=p[0],y=p[1],p=p[2],g=0;.1<=c;){g===0&&(o=n[i%h],i++,f&&(e%=o,o-=e,f=!1)),o>c&&(o=c),o>p?(g=o-p,o=p):g=0;var m=Math.sqrt(o*o/(1+y*y));if(0>a&&(m=-m),l+=m,u+=y*m,r?t.lineTo(l,u):t.moveTo(l,u),c-=o,p-=o,g!==0){if(d++,d===v.length){s.ra(v);return}p=v[d],a=p[0],y=p[1],p=p[2],o=g}else r=!r}s.ra(v)}}}Y.prototype.getDocumentPoint=Y.prototype.Ya=function(t,i){if(i===void 0&&(i=new F),t instanceof P){t.Ud()&&s.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.Ja,e=this.mb;i.m(t.x*(n.width+e)-e/2+n.x+t.offsetX,t.y*(n.height+e)-e/2+n.y+t.offsetY)}else i.set(t);return this.rh.nb(i),i},Y.prototype.Ek=function(t,i){var n=this.of;if(n===null||this.fill===null&&this.stroke===null)return!1;var e=n.eb,r=this.mb/2;n.type!==qi||i||(r+=2);var o=s.vf();if(o.assign(e),o.Zf(r+2,r+2),!o.Ia(t))return s.Bb(o),!1;if(e=r+1e-4,n.type===qi)return this.stroke===null||(e=(n.C-n.ha)*(t.x-n.ha)+(n.D-n.da)*(t.y-n.da),0>(n.ha-n.C)*(t.x-n.C)+(n.da-n.D)*(t.y-n.D)||0>e)?!1:(s.Bb(o),kn(n.ha,n.da,n.C,n.D,r,t.x,t.y));if(n.type===ar){var h=n.ha,l=n.da,u=n.C,n=n.D;if(o.x=Math.min(h,u),o.y=Math.min(l,n),o.width=Math.abs(u-h),o.height=Math.abs(n-l),this.fill===null){if(o.Zf(-e,-e),o.Ia(t))return s.Bb(o),!1;o.Zf(e,e)}return this.stroke!==null&&o.Zf(r,r),e=o.Ia(t),s.Bb(o),e}if(n.type===Kr){var h=n.ha,l=n.da,u=n.C,n=n.D,r=Math.min(h,u),f=Math.min(l,n),h=Math.abs(u-h)/2,l=Math.abs(n-l)/2,r=t.x-(r+h),f=t.y-(f+l);if(this.fill===null){if(h-=e,l-=e,0>=h||0>=l||1>=r*r/(h*h)+f*f/(l*l))return s.Bb(o),!1;h+=e,l+=e}return this.stroke!==null&&(h+=e,l+=e),s.Bb(o),0>=h||0>=l?!1:1>=r*r/(h*h)+f*f/(l*l)}return n.type===Ye?(s.Bb(o),this.fill===null?$v(n,t.x,t.y,r):n.Ia(t,r,1<this.mb,i)):(s.k("Unknown Geometry type: "+n.type),!1)},Y.prototype.Rn=function(t,i,n,e){var r=this.Da,o=this.ki;t=Math.max(t,0),i=Math.max(i,0);var h;if(this.Sf!==null)h=this.of.eb;else{var l=this.Fb,u=B0[l];if(u===void 0){var f=xr[l];typeof f=="string"&&(f=xr[f]),typeof f=="function"?(u=f(null,100,100),B0[l]=u):s.k("Unsupported Figure: "+l)}h=u.eb}var l=h.width,u=h.height,f=h.width,a=h.height;switch(zr(this,!0)){case ri:e=n=0;break;case ii:f=Math.max(t-o,0),a=Math.max(i-o,0);break;case Xi:f=Math.max(t-o,0),e=0;break;case nn:n=0,a=Math.max(i-o,0)}switch(isFinite(r.width)&&(f=r.width),isFinite(r.height)&&(a=r.height),r=this.Hf,h=this.si,n=Math.max(n-o,h.width),e=Math.max(e-o,h.height),f=Math.min(r.width,f),a=Math.min(r.height,a),f=isFinite(f)?Math.max(n,f):Math.max(l,n),a=isFinite(a)?Math.max(e,a):Math.max(u,e),n=Zy(this),n){case ri:break;case ii:l=f,u=a;break;case ji:n=Math.min(f/l,a/u),isFinite(n)||(n=1),l*=n,u*=n;break;default:s.k(n+" is not a valid geometryStretch.")}this.Sf!==null?(l=Math.max(l,.01),u=Math.max(u,.01),h=this.Sf!==null?this.Sf:this.Sa,r=l,e=u,n=h.copy(),h=h.eb,r/=h.width,e/=h.height,isFinite(r)||(r=1),isFinite(e)||(e=1),r===1&&e===1||n.scale(r,e),this.Sa=n):this.Sa!==null&&St(this.Sa.Uo,t-o)&&St(this.Sa.So,i-o)||(this.Sa=Y.makeGeometry(this,l,u)),h=this.Sa.eb,t===1/0||i===1/0?Qr(this,h.x-o/2,h.y-o/2,t===0&&l===0?0:h.width+o,i===0&&u===0?0:h.height+o):Qr(this,-(o/2),-(o/2),f+o,a+o)};function Qg(t,i,n,e){if(xs(t)!==!1){t.ud.Qa();var r=t.ki;r===0&&e instanceof vt&&e.ub instanceof Y&&(r=e.ub.mb),r*=t.rb,e instanceof S&&e.Sa!==null?(i=e.Sa.eb,Qr(t,i.x-r/2,i.y-r/2,i.width+r,i.height+r)):e instanceof vt&&e.$e.Sa!==null?(i=e.$e.Sa.eb,Qr(t,i.x-r/2,i.y-r/2,i.width+r,i.height+r)):Qr(t,-(r/2),-(r/2),i+r,n+r),t.ud.freeze(),t.ud.H()||s.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),ne(t,!1)}}function Zy(t){var i=t.HA;return t.Sf!==null?i===Br?ii:i:i===Br?B0[t.Fb].ae:i}Y.prototype.pj=function(t,i,n,e){Oa(this,t,i,n,e)},Y.prototype.getNearestIntersectionPoint=Y.prototype.lF=function(t,i,n){return this.Fn(t.x,t.y,i.x,i.y,n)},Y.prototype.Fn=function(t,i,n,e,r){var l=this.transform,u=1/(l.m11*l.m22-l.m12*l.m21),f=l.m22*u,a=-l.m12*u,p=-l.m21*u,o=l.m11*u,y=u*(l.m21*l.dy-l.m22*l.dx),h=u*(l.m12*l.dx-l.m11*l.dy),l=t*f+i*p+y,u=t*a+i*o+h,f=n*f+e*p+y,a=n*a+e*o+h,p=this.mb/2,y=this.Sa;if(y===null&&(Gt(this,1/0,1/0),y=this.Sa),h=y.eb,o=!1,y.type===qi)if(1.5>=this.mb)o=yo(y.Ec,y.Oc,y.Ab,y.Hb,l,u,f,a,r);else{var c=0,v=0;if(y.Ec===y.Ab?(c=p,v=0):(i=(y.Hb-y.Oc)/(y.Ab-y.Ec),v=p/Math.sqrt(1+i*i),c=v*i),e=s.Za(),i=new F,yo(y.Ec+c,y.Oc+v,y.Ab+c,y.Hb+v,l,u,f,a,i)&&e.push(i),i=new F,yo(y.Ec-c,y.Oc-v,y.Ab-c,y.Hb-v,l,u,f,a,i)&&e.push(i),i=new F,yo(y.Ec+c,y.Oc+v,y.Ec-c,y.Oc-v,l,u,f,a,i)&&e.push(i),i=new F,yo(y.Ab+c,y.Hb+v,y.Ab-c,y.Hb-v,l,u,f,a,i)&&e.push(i),i=e.length,i===0)return s.ra(e),!1;for(o=!0,v=1/0,c=0;c<i;c++){var f=e[c],d=(f.x-l)*(f.x-l)+(f.y-u)*(f.y-u);d<v&&(v=d,r.x=f.x,r.y=f.y)}s.ra(e)}else if(y.type===ar)i=h.x-p,o=co(i,h.y-p,h.x+h.width+p,h.y+h.height+p,l,u,f,a,r);else if(y.type===Kr)t:if(i=h.copy().Zf(p,p),i.width===0)o=yo(i.x,i.y,i.x,i.y+i.height,l,u,f,a,r);else if(i.height===0)o=yo(i.x,i.y,i.x+i.width,i.y,l,u,f,a,r);else{t=i.width/2;var g=i.height/2;if(e=i.x+t,i=i.y+g,n=9999,l!==f&&(n=(u-a)/(l-f)),9999>Math.abs(n)){if(o=u-i-n*(l-e),0>t*t*n*n+g*g-o*o){r.x=NaN,r.y=NaN,o=!1;break t}p=Math.sqrt(t*t*n*n+g*g-o*o),f=(-(t*t*n*o)+t*g*p)/(g*g+t*t*n*n)+e,t=(-(t*t*n*o)-t*g*p)/(g*g+t*t*n*n)+e,a=n*(f-e)+o+i,i=n*(t-e)+o+i,e=Math.abs((l-f)*(l-f))+Math.abs((u-a)*(u-a)),u=Math.abs((l-t)*(l-t))+Math.abs((u-i)*(u-i)),e<u?(r.x=f,r.y=a):(r.x=t,r.y=i)}else{if(f=g*g,a=l-e,f-=f/(t*t)*a*a,0>f){r.x=NaN,r.y=NaN,o=!1;break t}p=Math.sqrt(f),a=i+p,i-=p,e=Math.abs(a-u),u=Math.abs(i-u),e<u?(r.x=l,r.y=a):(r.x=l,r.y=i)}o=!0}else if(y.type===Ye){var m=0,w=0,M=d=0,h=s.K(),c=f-l,v=a-u,v=c*c+v*v;for(r.x=f,r.y=a,c=0;c<y.fc.count;c++)for(var k=y.fc.n[c],D=k.yb,m=k.ha,w=k.da,C=m,G=w,H=0;H<D.count;H++){var U=D.n[H],X=U.type,d=U.C,M=U.D,_=!1;switch(X){case qe:C=d,G=M;break;case le:_=Xa(m,w,d,M,l,u,f,a,h);break;case pr:var _=U.xc,X=U.Sc,Mt=U.Fh,Ft=U.Gh,_=bu(m,w,_,X,Mt,Ft,d,M,l,u,f,a,.5,h);break;case yr:_=(m+2*U.xc)/3,X=(w+2*U.Sc)/3,Mt=(2*U.xc+d)/3,Ft=(2*U.xc+d)/3,_=bu(m,w,_,X,Mt,Ft,d,M,l,u,f,a,.5,h);break;case Zi:case Ze:if(X=U.type===Zi?Ur(U,k):ys(U,k,m,w),Mt=X.length,Mt===0){_=Xa(m,w,U.la,U.sa,l,u,f,a,h);break}for(M=0;M<Mt;M++)g=X[M],M===0&&Xa(m,w,g[0],g[1],l,u,f,a,h)&&(d=Qa(l,u,h,v,r),d<v&&(v=d,o=!0)),bu(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],l,u,f,a,.5,h)&&(d=Qa(l,u,h,v,r),d<v&&(v=d,o=!0));d=g[6],M=g[7];break;default:s.k("Unknown Segment type: "+X)}m=d,w=M,_&&(d=Qa(l,u,h,v,r),d<v&&(v=d,o=!0)),U.Lx&&(d=C,M=G,Xa(m,w,d,M,l,u,f,a,h)&&(d=Qa(l,u,h,v,r),d<v&&(v=d,o=!0)))}l=n-t,u=e-i,i=Math.sqrt(l*l+u*u),i!==0&&(l/=i,u/=i),r.x-=l*p,r.y-=u*p,s.v(h)}else s.k("Unknown Geometry type: "+y.type);return o?(this.transform.nb(r),!0):!1};function Qa(t,i,n,e,r){return t=n.x-t,i=n.y-i,i=t*t+i*i,i<e?(r.x=n.x,r.y=n.y,i):e}function Xa(t,i,n,e,r,o,h,l,u){var f=!1,a=(r-h)*(i-e)-(o-l)*(t-n);return a===0?!1:(u.x=((r*l-o*h)*(t-n)-(r-h)*(t*e-i*n))/a,u.y=((r*l-o*h)*(i-e)-(o-l)*(t*e-i*n))/a,(t>n?t-n:n-t)<(i>e?i-e:e-i)?(r=i<e?i:e,t=i<e?e:i,(u.y>r||St(u.y,r))&&(u.y<t||St(u.y,t))&&(f=!0)):(r=t<n?t:n,t=t<n?n:t,(u.x>r||St(u.x,r))&&(u.x<t||St(u.x,t))&&(f=!0)),f)}Y.prototype.containedInRect=Y.prototype.vn=function(t,i){if(i===void 0)return t.Fk(this.U);var n=this.Sa;n===null&&(Gt(this,1/0,1/0),n=this.Sa);var n=n.eb,e=this.mb/2,r=!1,o=s.K();return o.m(n.x-e,n.y-e),t.Ia(i.nb(o))&&(o.m(n.x-e,n.bottom+e),t.Ia(i.nb(o))&&(o.m(n.right+e,n.bottom+e),t.Ia(i.nb(o))&&(o.m(n.right+e,n.y-e),t.Ia(i.nb(o))&&(r=!0)))),s.v(o),r},Y.prototype.intersectsRect=Y.prototype.$f=function(t,i){if(this.vn(t,i)||i===void 0&&(i=this.transform,t.Fk(this.U)))return!0;var n=s.Wg();n.set(i),n.TA();var e=t.left,r=t.right,o=t.top,h=t.bottom,l=s.K();if(l.m(e,o),n.nb(l),this.Ek(l,!0)||(l.m(r,o),n.nb(l),this.Ek(l,!0))||(l.m(e,h),n.nb(l),this.Ek(l,!0))||(l.m(r,h),n.nb(l),this.Ek(l,!0)))return s.v(l),!0;var u=s.K(),f=s.K();n.set(i),n.UF(this.transform),n.TA(),u.x=r,u.y=o,u.transform(n),l.x=e,l.y=o,l.transform(n);var a=!1;return uh(this,l,u,f)?a=!0:(l.x=r,l.y=h,l.transform(n),uh(this,l,u,f)?a=!0:(u.x=e,u.y=h,u.transform(n),uh(this,l,u,f)?a=!0:(l.x=e,l.y=o,l.transform(n),uh(this,l,u,f)&&(a=!0)))),s.v(l),s.cf(n),s.v(u),s.v(f),a};function uh(t,i,n,e){if(!t.lF(i,n,e))return!1;t=i.x,i=i.y;var r=n.x;n=n.y;var o=e.x;if(e=e.y,t===r){var h=0;return t=0,i<n?(h=i,t=n):(h=n,t=i),e>=h&&e<=t}return t<r?(h=t,t=r):h=r,o>=h&&o<=t}Y.prototype.eF=function(t,i,n){function e(d,g){for(var m=d.length,w=0;w<m;w+=2)if(g.Xf(d[w],d[w+1])>r)return!0;return!1}if(n&&this.fill!==null&&this.Ek(t,!0))return!0;var r=t.Cf(i);i=r,1.5<this.mb&&(r=this.mb/2+Math.sqrt(r),r*=r);var o=this.Sa;if(o===null&&(Gt(this,1/0,1/0),o=this.Sa,o===null))return!1;if(!n){var f=o.eb,h=f.x,l=f.y,u=f.x+f.width,f=f.y+f.height;if(Ho(t.x,t.y,h,l)<=r&&Ho(t.x,t.y,u,l)<=r&&Ho(t.x,t.y,h,f)<=r&&Ho(t.x,t.y,u,f)<=r)return!0}if(h=o.Ec,l=o.Oc,u=o.Ab,f=o.Hb,o.type===qi){if(n=Tn(t.x,t.y,h,l,u,f),o=(h-u)*(t.x-u)+(l-f)*(t.y-f),n<=(0<=(u-h)*(t.x-h)+(f-l)*(t.y-l)&&0<=o?r:i))return!0}else{if(o.type===ar)return i=!1,n&&(i=Tn(t.x,t.y,h,l,h,f)<=r||Tn(t.x,t.y,h,l,u,l)<=r||Tn(t.x,t.y,u,l,u,f)<=r||Tn(t.x,t.y,h,f,u,f)<=r),i;if(o.type===Kr){i=t.x-(h+u)/2;var o=t.y-(l+f)/2,a=Math.abs(u-h)/2,p=Math.abs(f-l)/2;if(a===0||p===0)return n=Tn(t.x,t.y,h,l,u,f),n<=r;if(n){if(t=mx(a,p,i,o),t*t<=r)return!0}else return!(Ho(i,o,-a,0)>=r||Ho(i,o,0,-p)>=r||Ho(i,o,0,p)>=r||Ho(i,o,a,0)>=r)}else if(o.type===Ye){if(f=o.eb,h=f.x,l=f.y,u=f.x+f.width,f=f.y+f.height,t.x>u&&t.x<h&&t.y>f&&t.y<l&&Tn(t.x,t.y,h,l,h,f)>r&&Tn(t.x,t.y,h,l,u,l)>r&&Tn(t.x,t.y,u,f,h,f)>r&&Tn(t.x,t.y,u,f,u,l)>r)return!1;if(i=Math.sqrt(r),n){if(this.fill===null?$v(o,t.x,t.y,i):o.Ia(t,i,!0))return!0}else{for(n=o.fc,i=0;i<n.count;i++){if(h=n.n[i],a=h.ha,p=h.da,t.Xf(a,p)>r)return!1;for(l=h.yb.n,u=l.length,f=0;f<u;f++){var y=l[f];switch(y.type){case qe:case le:if(a=y.C,p=y.D,t.Xf(a,p)>r)return!1;break;case pr:if(o=s.Za(),Jn(a,p,y.xc,y.Sc,y.Fh,y.Gh,y.C,y.D,.8,o),a=e(o,t),s.ra(o),a||(a=y.C,p=y.D,t.Xf(a,p)>r))return!1;break;case yr:if(o=s.Za(),Rl(a,p,y.xc,y.Sc,y.C,y.D,.8,o),a=e(o,t),s.ra(o),a||(a=y.C,p=y.D,t.Xf(a,p)>r))return!1;break;case Zi:case Ze:var c=y.type===Zi?Ur(y,h):ys(y,h,a,p),v=c.length;if(v===0){if(a=y.la,p=y.sa,t.Xf(a,p)>r)return!1;break}for(y=null,o=s.Za(),i=0;i<v;i++)if(y=c[i],o.length=0,Jn(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.8,o),e(o,t))return s.ra(o),!1;s.ra(o),y!==null&&(a=y[6],p=y[7]);break;default:s.k("Unknown Segment type: "+y.type)}}}return!0}}}return!1},s.defineProperty(Y,{of:"geometry"},function(){return this.Sa!==null?this.Sa:this.Sf},function(t){var i=this.Sa;if(i!==t){this.Sf=t!==null?this.Sa=t.freeze():this.Sa=null;var n=this.W;n!==null&&(n.lk=NaN),this.I(),this.h("geometry",i,t),Jh(this)&&(t=this.W,t!==null&&oh(this,t,"geometryString"))}}),s.defineProperty(Y,{cI:"geometryString"},function(){return this.of===null?"":this.of.toString()},function(t){t=Gl(t);var i=t.normalize();this.of=t,this.position=t=s.wb(-i.x,-i.y),s.v(t)}),s.defineProperty(Y,{CF:"isGeometryPositioned"},function(){return this.Xr},function(t){var i=this.Xr;i!==t&&(this.Xr=t,this.I(),this.h("isGeometryPositioned",i,t))}),Y.prototype.fe=function(){this.Sa=null},s.defineProperty(Y,{fill:"fill"},function(){return this.Hd},function(t){var i=this.Hd;i!==t&&(t instanceof yt&&t.freeze(),this.Hd=t,this.oa(),this.h("fill",i,t))}),s.defineProperty(Y,{stroke:"stroke"},function(){return this.tc},function(t){var i=this.tc;i!==t&&(t instanceof yt&&t.freeze(),this.tc=t,this.oa(),this.h("stroke",i,t))}),s.defineProperty(Y,{mb:"strokeWidth"},function(){return this.ki},function(t){var i=this.ki;if(i!==t)if(0<=t){this.ki=t,this.I();var n=this.W;n!==null&&(n.lk=NaN),this.h("strokeWidth",i,t)}else s.Fa(t,"value >= 0",Y,"strokeWidth:value")}),s.defineProperty(Y,{UL:"strokeCap"},function(){return this.xp},function(t){var i=this.xp;i!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?s.Fa(t,'"butt", "round", or "square"',Y,"strokeCap"):(this.xp=t,this.oa(),this.h("strokeCap",i,t)))}),s.defineProperty(Y,{WL:"strokeJoin"},function(){return this.zp},function(t){var i=this.zp;i!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?s.Fa(t,'"miter", "bevel", or "round"',Y,"strokeJoin"):(this.zp=t,this.oa(),this.h("strokeJoin",i,t)))}),s.defineProperty(Y,{XL:"strokeMiterLimit"},function(){return this.ln},function(t){var i=this.ln;if(i!==t)if(1<=t){this.ln=t,this.oa();var n=this.W;n!==null&&(n.lk=NaN),this.h("strokeMiterLimit",i,t)}else s.Fa(t,"value >= 1",Y,"strokeWidth:value")}),s.defineProperty(Y,{AG:"strokeDashArray"},function(){return this.yp},function(t){var i=this.yp;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",Y,"strokeDashArray:value"),t!==null){for(var n=t.length,e=0,r=0;r<n;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||s.k("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),e+=o}if(e===0){if(i===null)return;t=null}}this.yp=t,this.oa(),this.h("strokeDashArray",i,t)}}),s.defineProperty(Y,{VL:"strokeDashOffset"},function(){return this.Af},function(t){var i=this.Af;i!==t&&0<=t&&(this.Af=t,this.oa(),this.h("strokeDashOffset",i,t))}),s.defineProperty(Y,{Fb:"figure"},function(){return this.Ko},function(t){var i=this.Ko;if(i!==t){var n=xr[t];typeof n=="function"?n=t:(n=xr[t.toLowerCase()])||s.k("Unknown Shape.figure: "+t),i!==n&&(t=this.W,t!==null&&(t.lk=NaN),this.Ko=n,this.Sf=null,this.fe(),this.I(),this.h("figure",i,n))}}),s.defineProperty(Y,{Lq:"toArrow"},function(){return this.Ep},function(t){var i=this.Ep;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){var n=f1(t);n===null?s.k("Unknown Shape.toArrow: "+t):i!==n&&(this.Ep=n,this.Sf=null,this.fe(),this.I(),Xg(this),this.h("toArrow",i,n))}}),s.defineProperty(Y,{FA:"fromArrow"},function(){return this.Mo},function(t){var i=this.Mo;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){var n=f1(t);n===null?s.k("Unknown Shape.fromArrow: "+t):i!==n&&(this.Mo=n,this.Sf=null,this.fe(),this.I(),Xg(this),this.h("fromArrow",i,n))}});function Xg(t){var i=t.g;i!==null&&i.ja.lb||(t.Eq=up,t.Ep!=="None"?(t.Re=-1,t.qh=Un):t.Mo!=="None"&&(t.Re=0,t.qh=new P(1-Un.x,Un.y)))}s.defineProperty(Y,{A:"spot1"},function(){return this.ii},function(t){s.G(t,P,Y,"spot1");var i=this.ii;i.L(t)||(this.ii=t=t.S(),this.I(),this.h("spot1",i,t))}),s.defineProperty(Y,{B:"spot2"},function(){return this.ji},function(t){s.G(t,P,Y,"spot2");var i=this.ji;i.L(t)||(this.ji=t=t.S(),this.I(),this.h("spot2",i,t))}),s.defineProperty(Y,{Jc:"parameter1"},function(){return this.Rs},function(t){var i=this.Rs;i!==t&&(this.Rs=t,this.fe(),this.I(),this.h("parameter1",i,t))}),s.defineProperty(Y,{Qu:"parameter2"},function(){return this.Ss},function(t){var i=this.Ss;i!==t&&(this.Ss=t,this.fe(),this.I(),this.h("parameter2",i,t))}),s.u(Y,{Ja:"naturalBounds"},function(){if(this.Sa!==null)return this.Nc.assign(this.Sa.eb),this.Nc;var t=this.Da;return new O(0,0,t.width,t.height)}),s.defineProperty(Y,{hy:"pathPattern"},function(){return this.Us},function(t){var i=this.Us;i!==t&&(this.Us=t,this.oa(),this.h("pathPattern",i,t))}),s.defineProperty(Y,{LL:"pathObject"},function(){return this.hy},function(t){this.hy=t}),s.defineProperty(Y,{HA:"geometryStretch"},function(){return this.Mr},function(t){var i=this.Mr;i!==t&&(s.ob(t,N,Y,"geometryStretch"),this.Mr=t,this.h("geometryStretch",i,t))}),s.defineProperty(Y,{interval:"interval"},function(){return this.ug},function(t){var i=this.ug;if(t=Math.floor(t),i!==t&&0<=t){this.ug=t;var n=this.g;n!==null&&this.R===n.Hn&&Yo(n),this.I(),n=this.R,n!==null&&n.type===qh&&(n.ak=null),this.h("interval",i,t)}}),s.defineProperty(Y,{pF:"graduatedStart"},function(){return this.tg},function(t){var i=this.tg;i!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.I(),this.h("graduatedStart",i,t))}),s.defineProperty(Y,{nF:"graduatedEnd"},function(){return this.sg},function(t){var i=this.sg;i!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.I(),this.h("graduatedEnd",i,t))}),Y.makeGeometry=function(t,i,n){var e=null;if(t.Lq!=="None")e=jr[t.Lq];else if(t.FA!=="None")e=jr[t.FA];else{var r=xr[t.Fb];typeof r=="string"&&(r=xr[r]),r===void 0&&s.k("Unknown Shape.figure: "+t.Fb),e=r(t,i,n),e.Uo=i,e.So=n}return e===null&&(r=xr.Rectangle,typeof r=="function"&&(e=r(t,i,n))),e},Y.getFigureGenerators=function(){var t=new tt,i;for(i in xr)i!==i.toLowerCase()&&t.add(i,xr[i]);return t.freeze(),t},Y.defineFigureGenerator=function(t,i){s.j(t,"string",Y,"defineFigureGenerator:name"),typeof i=="string"?i!==""&&xr[i]||s.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+i):s.j(i,"function",Y,"defineFigureGenerator:func");var n=t.toLowerCase();t!==""&&n!=="none"&&t!==n||s.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),xr[t]=i,xr[n]=t},Y.getArrowheadGeometries=function(){var t=new tt("string",et),i;for(i in ip)if(jr[i]===void 0){var n=Gl(ip[i],!1);jr[i]=n,n=i.toLowerCase(),n!==i&&(jr[n]=i)}for(i in jr)i!==i.toLowerCase()&&(n=jr[i],n instanceof et&&t.add(i,n));return t.freeze(),t},Y.defineArrowheadGeometry=function(t,i){s.j(t,"string",Y,"defineArrowheadGeometry:name");var n=null;typeof i=="string"?(s.j(i,"string",Y,"defineArrowheadGeometry:pathstr"),n=Gl(i,!1)):(s.G(i,et,Y,"defineArrowheadGeometry:pathstr"),n=i);var e=t.toLowerCase();t!==""&&e!=="none"&&t!==e||s.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),jr[t]=n,jr[e]=t};function rt(){N.call(this),this.Ld="",this.tc="black",this.qg="13px sans-serif",this.Ll="start",this.pg=ri,this.Pl=m0,this.Mm=!0,this.ek=this.gk=!1,this.cj=i1,this.nj=bg,this.nw=this.pe=0,this.Fz=this.Gz=null,this.zf=new fh,this.Fr=!1,this.Xe=this.er=this.Ct=this.Ml=this.Dt=null,this.hi=this.gi=0,this.ih=1/0,this.$o=0,this.ug=1,this.tg=0,this.sg=1,this.Hm=null}s.La(rt,N),s.ga("TextBlock",rt);var Wg=/[ \u200b\u00ad]/;rt.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.Ld=this.Ld,t.tc=this.tc,t.qg=this.qg,t.Ll=this.Ll,t.pg=this.pg,t.Pl=this.Pl,t.Mm=this.Mm,t.gk=this.gk,t.ek=this.ek,t.cj=this.cj,t.nj=this.nj,t.pe=this.pe,t.nw=this.nw,t.Gz=this.Gz,t.Fz=this.Fz,t.zf.Sp(this.zf),t.Fr=this.Fr,t.Dt=this.Dt,t.Ml=this.Ml,t.Ct=this.Ct,t.er=this.er,t.Xe=this.Xe,t.gi=this.gi,t.hi=this.hi,t.ih=this.ih,t.$o=this.$o,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg,t.Hm=this.Hm},rt.prototype.ic=function(t){t.Je===rt?this.OG=t:N.prototype.ic.call(this,t)},rt.prototype.toString=function(){return 22<this.Ld.length?'TextBlock("'+this.Ld.substring(0,20)+'"...)':'TextBlock("'+this.Ld+'")'};var Qy=new Pi,$g=0,Wa=new Pi,Xy=0,kf="...",hu="",Fe=new Hr(null).Gk;rt.getEllipsis=function(){return kf},rt.setEllipsis=function(t){kf=t,Wa=new Pi,Xy=0};var Wy;rt.None=Wy=s.p(rt,"None",0);var _g;rt.WrapFit=_g=s.p(rt,"WrapFit",1);var bg;rt.WrapDesiredSize=bg=s.p(rt,"WrapDesiredSize",2);var t1;rt.WrapBreakAll=t1=s.p(rt,"WrapBreakAll",3);var i1;rt.OverflowClip=i1=s.p(rt,"OverflowClip",0);var $a;rt.OverflowEllipsis=$a=s.p(rt,"OverflowEllipsis",1),rt.prototype.I=function(){N.prototype.I.call(this),this.Fz=this.Gz=null},s.defineProperty(rt,{font:"font"},function(){return this.qg},function(t){var i=this.qg;i!==t&&(this.qg=t,this.zf.Wj=null,this.I(),this.h("font",i,t))}),rt.isValidFont=function(t){var i=Fe.font;if(t===i||t==="10px sans-serif")return!0;Fe.font="10px sans-serif";var n;Fe.font=t;var e=Fe.font;return e!=="10px sans-serif"?(Fe.font=i,!0):(Fe.font="19px serif",n=Fe.font,Fe.font=t,e=Fe.font,Fe.font=i,e!==n)},s.defineProperty(rt,{text:"text"},function(){return this.Ld},function(t){var i=this.Ld;t=t!=null?t.toString():"",i!==t&&(this.Ld=t,this.I(),this.h("text",i,t))}),s.defineProperty(rt,{textAlign:"textAlign"},function(){return this.Ll},function(t){var i=this.Ll;i!==t&&(t==="start"||t==="end"||t==="left"||t==="right"||t==="center"?(this.Ll=t,this.oa(),this.h("textAlign",i,t)):s.Fa(t,'"start", "end", "left", "right", or "center"',rt,"textAlign"))}),s.defineProperty(rt,{iu:"flip"},function(){return this.pg},function(t){var i=this.pg;i!==t&&(s.ob(t,N,rt,"flip"),this.pg=t,this.oa(),this.h("flip",i,t))}),s.defineProperty(rt,{cM:"verticalAlignment"},function(){return this.Pl},function(t){var i=this.Pl;i.L(t)||(t.Ud()&&s.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+t),this.Pl=t=t.S(),xf(this),this.h("verticalAlignment",i,t))}),s.u(rt,{Ja:"naturalBounds"},function(){if(!this.Nc.H()){var t=$y(this,this.Ld,this.zf,999999).width,i=e1(this,t,this.zf),n=this.Da;isNaN(n.width)||(t=n.width),isNaN(n.height)||(i=n.height),Ko(this.Nc,t,i)}return this.Nc}),s.defineProperty(rt,{Ox:"isMultiline"},function(){return this.Mm},function(t){var i=this.Mm;i!==t&&(this.Mm=t,this.I(),this.h("isMultiline",i,t))}),s.defineProperty(rt,{lL:"isUnderline"},function(){return this.gk},function(t){var i=this.gk;i!==t&&(this.gk=t,this.oa(),this.h("isUnderline",i,t))}),s.defineProperty(rt,{kL:"isStrikethrough"},function(){return this.ek},function(t){var i=this.ek;i!==t&&(this.ek=t,this.oa(),this.h("isStrikethrough",i,t))}),s.defineProperty(rt,{OG:"wrap"},function(){return this.nj},function(t){var i=this.nj;i!==t&&(this.nj=t,this.I(),this.h("wrap",i,t))}),s.defineProperty(rt,{overflow:"overflow"},function(){return this.cj},function(t){var i=this.cj;i!==t&&(this.cj=t,this.I(),this.h("overflow",i,t))}),s.defineProperty(rt,{stroke:"stroke"},function(){return this.tc},function(t){var i=this.tc;i!==t&&(t instanceof yt&&t.freeze(),this.tc=t,this.oa(),this.h("stroke",i,t))}),s.u(rt,{Vx:"lineCount"},function(){return this.pe}),s.defineProperty(rt,{BA:"editable"},function(){return this.Fr},function(t){var i=this.Fr;i!==t&&(this.Fr=t,this.h("editable",i,t))}),s.defineProperty(rt,{DG:"textEditor"},function(){return this.Dt},function(t){var i=this.Dt;i!==t&&(this.Dt=t,this.h("textEditor",i,t))}),s.defineProperty(rt,{CA:"errorFunction"},function(){return this.Xe},function(t){var i=this.Xe;i!==t&&(t!==null&&s.j(t,"function",rt,"errorFunction"),this.Xe=t,this.h("errorFunction",i,t))}),s.defineProperty(rt,{interval:"interval"},function(){return this.ug},function(t){var i=this.ug;if(t=Math.floor(t),i!==t&&0<=t){this.ug=t,this.I();var n=this.R;n!==null&&n.type===qh&&(n.ak=null),this.h("interval",i,t)}}),s.defineProperty(rt,{pF:"graduatedStart"},function(){return this.tg},function(t){var i=this.tg;i!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.I(),this.h("graduatedStart",i,t))}),s.defineProperty(rt,{nF:"graduatedEnd"},function(){return this.sg},function(t){var i=this.sg;i!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.I(),this.h("graduatedEnd",i,t))}),s.defineProperty(rt,{oF:"graduatedFunction"},function(){return this.Hm},function(t){var i=this.Hm;i!==t&&(t!==null&&s.j(t,"function",rt,"graduatedFunction"),this.Hm=t,this.I(),this.h("graduatedFunction",i,t))}),rt.prototype.Ik=function(t,i){if(this.tc!==null&&this.Ld.length!==0&&this.qg!==null){var n=this.Ja.width,e=this.Ja.height,r=_a(this),o=t.textAlign=this.Ll,l=i.as;o==="start"&&(o=l?"right":"left"),o==="end"&&(o=l?"left":"right"),Zn(this,t,this.tc,!0,!1),(this.gk||this.ek)&&Zn(this,t,this.tc,!1,!1);var h=0,l=!1,u=s.wb(0,0);this.rh.nb(u);var a=s.wb(0,r);this.rh.nb(a);var f=u.Cf(a);switch(s.v(u),s.v(a),u=i.scale,8>f*u*u&&(l=!0),i.hf!==t&&(l=!1),i.Ok("textGreeking")===!1&&(l=!1),f=this.gi,u=this.hi,this.iu){case gf:t.translate(n,0),t.scale(-1,1);break;case df:t.translate(0,e),t.scale(1,-1);break;case mf:t.translate(n,e),t.scale(-1,-1)}var a=this.pe,p=(f+r+u)*a;e>p&&(h=this.Pl,h=h.y*e-h.y*p+h.offsetY);for(var p=this.zf,y=0;y<a;y++){var c=p.xf[y],d=p.Ue[y];c>n&&(c=n);var h=h+f,v=d,d=t,g=h,m=n,w=r,M=o,k=0;l?(M==="left"?k=0:M==="right"?k=m-c:M==="center"&&(k=(m-c)/2),d.fillRect(0+k,g+.25*w,c,1)):(M==="left"?k=0:M==="right"?k=m:M==="center"&&(k=m/2),d.fillText(v,0+k,g+w-.25*w),v=w/20|0,v===0&&(v=1),M==="right"?k-=c:M==="center"&&(k-=c/2),this.gk&&(d.beginPath(),d.lineWidth=v,d.moveTo(0+k,g+w-.2*w),d.lineTo(0+k+c,g+w-.2*w),d.stroke()),this.ek&&(d.beginPath(),d.lineWidth=v,g=g+w-w/2.2|0,v%2!==0&&(g+=.5),d.moveTo(0+k,g),d.lineTo(0+k+c,g),d.stroke())),h+=r+u}switch(this.iu){case gf:t.scale(-1,1),t.translate(-n,0);break;case df:t.scale(1,-1),t.translate(0,-e);break;case mf:t.scale(-1,-1),t.translate(-n,-e)}}},rt.prototype.Rn=function(t,i,n,e){this.$o=t;var r=this.zf;r.reset();var o=0,h=0;if(isNaN(this.Da.width)){if(o=this.Ld.replace(/\r\n/g,`
`).replace(/\r/g,`
`),o.length===0)o=0;else if(this.Ox){for(var l=h=0,u=!1;!u;){var f=o.indexOf(`
`,l);f===-1&&(f=o.length,u=!0),l=tr(o.substr(l,f-l).replace(/^\s+|\s+$/g,""),this.qg),l>h&&(h=l),l=f+1}o=h}else h=o.indexOf(`
`,0),0<=h&&(o=o.substr(0,h)),o=l=tr(o,this.qg);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.Da.width;if(this.R!==null&&(o=Math.min(o,this.R.Hf.width)),h=e1(this,o,r),f=h=isNaN(this.Da.height)?Math.min(h,i/this.scale):this.Da.height,r.Ge!==0&&r.Ue.length!==1&&this.cj===$a&&(i=this.qg,u=this.cj===$a?n1(i):0,l=this.gi+this.hi,l=Math.max(0,_a(this)+l),f=Math.min(this.TI-1,Math.max(Math.floor(f/l+.01)-1,0)),!(f+1>=r.Ue.length))){for(l=r.Ue[f],u=Math.max(1,t-u);tr(l,i)>u&&1<l.length;)l=l.substr(0,l.length-1);l+=kf,i=tr(l,i),r.Ue[f]=l,r.Ue=r.Ue.slice(0,f+1),r.xf[f]=i,r.xf=r.xf.slice(0,f+1),r.mj=r.Ue.length,r.Ge=Math.max(r.Ge,i),this.pe=r.mj}(this.OG===_g||isNaN(this.Da.width))&&(o=isNaN(t)?r.Ge:Math.min(t,r.Ge),isNaN(this.Da.width)&&(o=Math.max(8,o))),o=Math.max(n,o),h=Math.max(e,h),Ko(this.Nc,o,h),Qr(this,0,0,o,h)},rt.prototype.pj=function(t,i,n,e){Oa(this,t,i,n,e)};function $y(t,i,n,e){i=i.replace(/^\s+|\s+$/g,"");var r=0,h=0,u=0,o=t.qg,h=t.gi+t.hi,l=Math.max(0,_a(t)+h),u=t.cj===$a?n1(o):0;if(t.pe>=t.ih)return new lt(0,l);if(t.nj===Wy){if(n.mj=1,h=tr(i,o),u===0||h<=e)return n.Ge=Math.max(n.Ge,h),n.xf.push(n.Ge),n.Ue.push(i),new lt(h,l);var f=lu(t,i);i=i.substr(f.length);for(var a=lu(t,i),h=tr(f+a,o);0<a.length&&h<=e;)f+=a,i=i.substr(a.length),a=lu(t,i),h=tr((f+a).replace(/^\s+|\s+$/g,""),o);for(f+=a.replace(/^\s+|\s+$/g,""),e=Math.max(1,e-u);tr(f,o)>e&&1<f.length;)f=f.substr(0,f.length-1);return f+=kf,u=tr(f,o),n.xf.push(u),n.Ge=u,n.Ue.push(f),new lt(u,l)}var p=0;for(i.length===0&&(p=1,n.xf.push(0),n.Ue.push(i));0<i.length;){for(f=lu(t,i),i=i.substr(f.length);tr(f,o)>e;){for(a=1,h=tr(f.substr(0,a),o),u=0;h<=e;)a++,u=h,h=tr(f.substr(0,a),o);if(a===1?(n.xf[t.pe+p]=h,r=Math.max(r,h)):(n.xf[t.pe+p]=u,r=Math.max(r,u)),a--,1>a&&(a=1),n.Ue[t.pe+p]=f.substr(0,a),p++,f=f.substr(a),t.pe+p>t.ih)break}for(a=lu(t,i),h=tr(f+a,o);0<a.length&&h<=e;)f+=a,i=i.substr(a.length),a=lu(t,i),h=tr((f+a).replace(/^\s+|\s+$/g,""),o);if(f=f.replace(/^\s+|\s+$/g,""),f!==""&&(f[f.length-1]==="\xAD"&&(f=f.substring(0,f.length-1)+"\u2010"),a.length===0?(n.xf.push(h),r=Math.max(r,h)):(u=tr(f,o),n.xf.push(u),r=Math.max(r,u)),n.Ue.push(f),p++,t.pe+p>t.ih))break}return n.mj=Math.min(t.ih,p),n.Ge=Math.max(n.Ge,r),new lt(n.Ge,l*n.mj)}function lu(t,i){if(t.nj===t1)return i.substr(0,1);for(var n=i.length,e=0;e<n&&!Wg.test(i.charAt(e));)e++;for(;e<n&&Wg.test(i.charAt(e));)e++;return e>=n?i:i.substr(0,e)}function tr(t,i){return hu!==i&&(hu=Fe.font=i),Fe.measureText(t).width}function _a(t){if(t.zf.Wj!==null)return t.zf.Wj;var i=t.qg;hu!==i&&(hu=Fe.font=i);var n=0;return Qy[i]!==void 0&&5e3>$g?n=Qy[i]:(n=1.3*Fe.measureText("M").width,Qy[i]=n,$g++),t.zf.Wj=n}function n1(t){hu!==t&&(hu=Fe.font=t);var i=0;return Wa[t]!==void 0&&5e3>Xy?i=Wa[t]:(i=Fe.measureText(kf).width,Wa[t]=i,Xy++),i}function e1(t,i,n){var e=t.Ld.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r=t.gi+t.hi,r=Math.max(0,_a(t)+r);if(e.length===0)return n.Ge=0,t.pe=1,r;if(!t.Ox){var o=e.indexOf(`
`,0);0<=o&&(e=e.substr(0,o))}for(var o=0,h=t.pe=0,l=-1,u=!1;!u;)l=e.indexOf(`
`,h),l===-1&&(l=e.length,u=!0),h<=l&&(h=e.substr(h,l-h),t.nj!==Wy?(n.mj=0,h=$y(t,h,n,i),o+=h.height,t.pe+=n.mj):($y(t,h,n,i),o+=r,t.pe++),t.pe===t.ih&&(u=!0)),h=l+1;return t.nw=o}s.defineProperty(rt,{OB:"textValidation"},function(){return this.Ml},function(t){var i=this.Ml;i!==t&&(t!==null&&s.j(t,"function",rt,"textValidation"),this.Ml=t,this.h("textValidation",i,t))}),s.defineProperty(rt,{CG:"textEdited"},function(){return this.Ct},function(t){var i=this.Ct;i!==t&&(t!==null&&s.j(t,"function",rt,"textEdited"),this.Ct=t,this.h("textEdited",i,t))}),s.defineProperty(rt,{RL:"spacingAbove"},function(){return this.gi},function(t){var i=this.gi;i!==t&&(this.gi=t,this.h("spacingAbove",i,t))}),s.defineProperty(rt,{SL:"spacingBelow"},function(){return this.hi},function(t){var i=this.hi;i!==t&&(this.hi=t,this.h("spacingBelow",i,t))}),s.defineProperty(rt,{TI:"maxLines"},function(){return this.ih},function(t){var i=this.ih;i!==t&&(t=Math.floor(t),0>=t&&s.Fa(t,"> 0",rt,"maxLines"),this.ih=t,this.h("maxLines",i,t),this.I())}),s.u(rt,{xL:"metrics"},function(){return this.zf}),s.defineProperty(rt,{IK:"choices"},function(){return this.er},function(t){var i=this.er;i!==t&&(t===null||Array.isArray(t)||s.Fd(t,"Array",rt,"choices:value"),this.er=t,this.h("choices",i,t))});function fh(){this.Ge=this.mj=0,this.xf=[],this.Ue=[],this.Wj=null}fh.prototype.reset=function(){this.Ge=this.mj=0,this.Wj=null,this.xf=[],this.Ue=[]},fh.prototype.Sp=function(t){this.mj=t.mj,this.Wj=t.Wj,this.Ge=t.Ge,this.xf=s.Xl(t.xf),this.Ue=s.Xl(t.Ue)},s.u(fh,{EK:"arrSize"},function(){return this.xf}),s.u(fh,{FK:"arrText"},function(){return this.Ue}),s.u(fh,{wL:"maxLineWidth"},function(){return this.Ge}),s.u(fh,{eL:"fontHeight"},function(){return this.Wj});function oi(){N.call(this),this.We=null,this.wt="",this.tk=gx,this.Po=ii,this.li=this.Xe=null,this.Oo=Tt,this.pg=ri,this.Ap=null,this.Bz=!1,this.Pv=!0,this.lw=!1,this.rp=null}s.La(oi,N),s.ga("Picture",oi),oi.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.element=this.We,t.wt=this.wt,t.tk=this.tk.S(),t.Po=this.Po,t.pg=this.pg,t.Xe=this.Xe,t.li=this.li,t.Oo=this.Oo.S(),t.Pv=this.Pv,t.rp=this.rp},oi.prototype.ic=function(t){t===ri||t===ji||t===vf?this.sI=t:N.prototype.ic.call(this,t)},oi.prototype.toString=function(){return"Picture("+this.source+")#"+s.Pd(this)};var uu=new Pi,ba=0,_y=[];function r1(){var t=_y;if(t.length===0)for(var i=q.document.getElementsByTagName("canvas"),n=i.length,e=0;e<n;e++){var r=i[e];r.parentElement&&r.parentElement.aa&&t.push(r.parentElement.aa)}return t}var by;oi.clearCache=by=function(t){t===void 0&&(t=""),s.j(t,"string",oi,"clearCache:url"),t!==""?uu[t]&&(delete uu[t],ba--):(uu=new Pi,ba=0)},s.defineProperty(oi,{element:"element"},function(){return this.We},function(t){var i=this.We;if(i!==t){if(t===null||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||s.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.Bz=t instanceof HTMLCanvasElement,this.We=t,t!==null)if(t instanceof HTMLCanvasElement||t.complete===!0)t.No instanceof Event&&this.Xe!==null&&this.Xe(this,t.No),t.Zr===!0&&this.li!==null&&this.li(this,t.Qz),t.Zr=!0,this.Da.H()||(ne(this,!1),this.I());else{var n=this;t.cD||(t.addEventListener("load",function(e){o1(t,e),n.Da.H()||(ne(n,!1),n.I())}),t.addEventListener("error",function(e){s1(t,e)}),t.cD=!0)}this.h("element",i,t),this.oa()}}),s.defineProperty(oi,{source:"source"},function(){return this.wt},function(t){var i=this.wt;if(i!==t){s.j(t,"string",oi,"source"),this.wt=t;var n=uu,e=this.g;if(n[t]!==void 0)var r=n[t].Lp[0].source;else{30<ba&&(by(),n=uu);var r=s.createElement("img"),o=this;r.addEventListener("load",function(u){o1(r,u),o.Da.H()||(ne(o,!1),o.I())}),r.addEventListener("error",function(u){s1(r,u)}),r.cD=!0;var h=this.rp;h!==null&&(r.crossOrigin=h(this)),r.src=t,n[t]=new zx(r),ba++}e!==null&&xy(e,this),this.element=r,e!==null&&my(e,this),this.I(),this.oa(),this.h("source",i,t)}});function o1(t,i){t.Zr=!0,t.No=!1;for(var n=null,e=r1(),r=e.length,o=0;o<r;o++){var h=e[o],l=h.kp.ka(t.src);if(l!==null)for(var u=l.length,f=0;f<u;f++)n=l[f],h.Mz.add(n),h.ye(),t.Qz===null&&(t.Qz=i,n.li!==null&&n.li(n,i))}}function s1(t,i){t.No=i;for(var n=null,e=r1(),r=e.length,o=0;o<r;o++)if(n=e[o].kp.ka(t.src),n!==null){for(var h=n.length,l=s.Za(),u=0;u<h;u++)l.push(n[u]);for(u=0;u<h;u++)n=l[u],n.Xe!==null&&n.Xe(n,i);s.ra(l)}}s.defineProperty(oi,{QL:"sourceCrossOrigin"},function(){return this.rp},function(t){if(this.rp!==t&&(t!==null&&s.j(t,"function",oi,"sourceCrossOrigin"),this.rp=t,this.element!==null)){var i=this.element.src;t===null&&typeof i=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=i}}),s.defineProperty(oi,{Jj:"sourceRect"},function(){return this.tk},function(t){var i=this.tk;i.L(t)||(s.G(t,O,oi,"sourceRect"),this.tk=t=t.S(),this.oa(),this.h("sourceRect",i,t))}),s.defineProperty(oi,{sI:"imageStretch"},function(){return this.Po},function(t){var i=this.Po;i!==t&&(s.ob(t,N,oi,"imageStretch"),this.Po=t,this.oa(),this.h("imageStretch",i,t))}),s.defineProperty(oi,{iu:"flip"},function(){return this.pg},function(t){var i=this.pg;i!==t&&(s.ob(t,N,oi,"flip"),this.pg=t,this.oa(),this.h("flip",i,t))}),s.defineProperty(oi,{gL:"imageAlignment"},function(){return this.Oo},function(t){s.G(t,P,oi,"imageAlignment");var i=this.Oo;i.L(t)||(this.Oo=t=t.S(),this.I(),this.h("imageAlignment",i,t))}),s.defineProperty(oi,{CA:"errorFunction"},function(){return this.Xe},function(t){var i=this.Xe;i!==t&&(t!==null&&s.j(t,"function",oi,"errorFunction"),this.Xe=t,this.h("errorFunction",i,t))}),s.defineProperty(oi,{$L:"successFunction"},function(){return this.li},function(t){var i=this.li;i!==t&&(t!==null&&s.j(t,"function",oi,"successFunction"),this.li=t,this.h("successFunction",i,t))}),oi.prototype.Ik=function(t,i){var n=this.We;if(n!==null){var e=n.src;if(e!==null&&e!==""||s.k('Element has no source ("src") attribute: '+n),!(n.No instanceof Event)&&n.Zr!==!1){var e=this.Ja,r=0,o=0,l=this.Bz,h=l?+n.width:n.naturalWidth,l=l?+n.height:n.naturalHeight;if(h===void 0&&n.videoWidth&&(h=n.videoWidth),l===void 0&&n.videoHeight&&(l=n.videoHeight),h=h||e.width,l=l||e.height,h!==0&&l!==0){var u=h,f=l;this.Jj.H()&&(r=this.tk.x,o=this.tk.y,h=this.tk.width,l=this.tk.height);var a=h,p=l,d=this.Po,y=this.Oo;switch(d){case ri:if(this.Jj.H())break;a>=e.width&&(r=r+y.offsetX+(a*y.x-e.width*y.x)),p>=e.height&&(o=o+y.offsetY+(p*y.y-e.height*y.y)),h=Math.min(e.width,a),l=Math.min(e.height,p);break;case ii:a=e.width,p=e.height;break;case ji:case vf:var v=0;d===ji?(v=Math.min(e.height/p,e.width/a),a*=v,p*=v):d===vf&&(v=Math.max(e.height/p,e.width/a),a*=v,p*=v,a>=e.width&&(r=(r+y.offsetX+(a*y.x-e.width*y.x)/a)*h),p>=e.height&&(o=(o+y.offsetY+(p*y.y-e.height*y.y)/p)*l),h*=1/(a/e.width),l*=1/(p/e.height),a=e.width,p=e.height)}var d=this.vj()*i.scale,c=h*l/(a*d*p*d),v=uu[this.source],d=null;if(n.Zr&&v!==void 0&&16<c){2>v.Lp.length&&(h1(v,4,u,f),h1(v,16,u,f));for(var u=v.Lp,f=u.length,d=u[0],g=0;g<f&&u[g].xq*u[g].xq<c;g++)d=u[g]}if(!i.Cr){if(this.Ap===null)if(this.We===null)this.Ap=!1;else{u=new Hr(null).Gk,u.drawImage(this.We,0,0);try{u.getImageData(0,0,1,1).data[3]&&(this.Ap=!1),this.Ap=!1}catch{this.Ap=!0}}if(this.Ap)return}switch(u=0,a<e.width&&(u=y.offsetX+(e.width*y.x-a*y.x)),f=0,p<e.height&&(f=y.offsetY+(e.height*y.y-p*y.y)),this.iu){case gf:t.translate(Math.min(e.width,a),0),t.scale(-1,1);break;case df:t.translate(0,Math.min(e.height,p)),t.scale(1,-1);break;case mf:t.translate(Math.min(e.width,a),Math.min(e.height,p)),t.scale(-1,-1)}if(i.Ok("pictureRatioOptimization")&&!i.Km&&v!==void 0&&d!==null&&d.xq!==1){t.save(),v=d.xq;try{t.drawImage(d.source,r/v,o/v,Math.min(d.source.width,h/v),Math.min(d.source.height,l/v),u,f,Math.min(e.width,a),Math.min(e.height,p))}catch{this.Pv=!1}t.restore()}else try{t.drawImage(n,r,o,h,l,u,f,Math.min(e.width,a),Math.min(e.height,p))}catch{this.Pv=!1}switch(this.iu){case gf:t.scale(-1,1),t.translate(-Math.min(e.width,a),0);break;case df:t.scale(1,-1),t.translate(0,-Math.min(e.height,p));break;case mf:t.scale(-1,-1),t.translate(-Math.min(e.width,a),-Math.min(e.height,p))}}}}},s.u(oi,{Ja:"naturalBounds"},function(){return this.Nc}),oi.prototype.Rn=function(t,i,n,e){var r=this.Da,o=zr(this,!0),h=this.We,l=this.Bz;(l||!this.lw&&h&&h.complete)&&(this.lw=!0),h===null&&(isFinite(r.width)||(t=0),isFinite(r.height)||(i=0)),isFinite(r.width)||o===ii||o===Xi?(isFinite(t)||(t=this.Jj.H()?this.Jj.width:l?+h.width:h.naturalWidth),n=0):h!==null&&this.lw!==!1&&(t=this.Jj.H()?this.Jj.width:l?+h.width:h.naturalWidth),isFinite(r.height)||o===ii||o===nn?(isFinite(i)||(i=this.Jj.H()?this.Jj.height:l?+h.height:h.naturalHeight),e=0):h!==null&&this.lw!==!1&&(i=this.Jj.H()?this.Jj.height:l?+h.height:h.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(i=r.height),r=this.Hf,o=this.si,n=Math.max(n,o.width),e=Math.max(e,o.height),t=Math.min(r.width,t),i=Math.min(r.height,i),t=Math.max(n,t),i=Math.max(e,i),h===null||h.complete||(isFinite(t)||(t=0),isFinite(i)||(i=0)),Ko(this.Nc,t,i),Qr(this,0,0,t,i)},oi.prototype.pj=function(t,i,n,e){Oa(this,t,i,n,e)};function zx(t){this.Lp=[new l1(t,1)]}function h1(t,i,n,e){var r=new Hr(null),o=r.Gk,h=1/i;r.width=n/i,r.height=e/i,i=new l1(r.Od,i),n=t.Lp[t.Lp.length-1],o.setTransform(h*n.xq,0,0,h*n.xq,0,0),o.drawImage(n.source,0,0),t.Lp.push(i)}function l1(t,i){this.source=t,this.xq=i}function u1(){this.o=new et,this.Yb=null}B=u1.prototype,B.reset=function(){this.o=new et,this.Yb=null};function j(t,i,n,e,r,o){t.o===null&&s.k("StreamGeometryContext has been closed"),r!==void 0&&r===!0?(t.Yb===null&&s.k("Need to call beginFigure first"),e=new mt(qe),e.C=i,e.D=n,t.Yb.yb.add(e)):(t.Yb=new wi,t.Yb.ha=i,t.Yb.da=n,t.Yb.wu=e,t.o.fc.add(t.Yb)),o!==void 0&&(t.Yb.Vo=o)}function W(t){t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var i=t.Yb.yb.length;0<i&&t.Yb.yb.fa(i-1).close()}function Ex(t){t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first"),0<t.Yb.yb.length&&(t.Yb.wu=!0)}B.fb=function(t){this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first"),this.Yb.lm=t},B.moveTo=function(t,i,n){n===void 0&&(n=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var e=new mt(qe);e.C=t,e.D=i,n&&e.close(),this.Yb.yb.add(e)},B.lineTo=function(t,i,n){n===void 0&&(n=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var e=new mt(le);e.C=t,e.D=i,n&&e.close(),this.Yb.yb.add(e)};function T(t,i,n,e,r,o,h,l){l===void 0&&(l=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var u=new mt(pr);u.xc=i,u.Sc=n,u.Fh=e,u.Gh=r,u.C=o,u.D=h,l&&u.close(),t.Yb.yb.add(u)}function tp(t,i,n,e,r){var o;o===void 0&&(o=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var h=new mt(yr);h.xc=i,h.Sc=n,h.C=e,h.D=r,o&&h.close(),t.Yb.yb.add(h)}B.arcTo=function(t,i,n,e,r,o,h){o===void 0&&(o=0),h===void 0&&(h=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var l=new mt(Zi);l.Ae=t,l.uf=i,l.la=n,l.sa=e,l.radiusX=r,l.radiusY=o!==0?o:r,h&&l.close(),this.Yb.yb.add(l)};function Rx(t,i,n,e,r,o,h,l){var u;u===void 0&&(u=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first"),i=new mt(Ze,h,l,i,n,e,r,o),u&&i.close(),t.Yb.yb.add(i)}function fu(t){t=Xh(t);var i=s.Za();i[0]=t[0];for(var n=1,e=1;e<t.length;)i[n]=t[e],i[n+1]=t[e],i[n+2]=t[e+1],e+=2,n+=3;return s.ra(t),i}function Xh(t){var i=ah(t),n=s.Za(),e=Math.floor(i.length/2),r=i.length-1;t=t%2===0?2:1;for(var o=0;o<r;o++){var h=i[o],l=i[o+1],u=i[(e+o-1)%r],f=i[(e+o+t)%r];n[2*o]=h,n[2*o+1]=$s(h.x,h.y,u.x,u.y,l.x,l.y,f.x,f.y,new F)}return n[n.length]=n[0],s.ra(i),n}function ah(t){for(var i=s.Za(),n=1.5*Math.PI,e=0,r=0;r<t;r++)e=2*Math.PI/t*r+n,i[r]=new F(.5+.5*Math.cos(e),.5+.5*Math.sin(e));return i.push(i[0]),i}var xr={None:"Rectangle",Rectangle:function(t,i,n){return t=new et,t.type=ar,t.ha=0,t.da=0,t.C=i,t.D=n,t},Square:function(t,i,n){return t=new et,t.ae=ji,t.type=ar,t.ha=0,t.da=0,t.C=Math.min(i,n),t.D=Math.min(i,n),t},Ellipse:function(t,i,n){return t=new et,t.type=Kr,t.ha=0,t.da=0,t.C=i,t.D=n,t.A=Kv,t.B=Uv,t},Circle:function(t,i,n){return t=new et,t.ae=ji,t.type=Kr,t.ha=0,t.da=0,t.C=Math.min(i,n),t.D=Math.min(i,n),t.A=Kv,t.B=Uv,t},Connector:"Ellipse",TriangleRight:function(t,i,n){t=new et;var e=new wi,r=new mt;return r.C=i,r.D=.5*n,e.yb.add(r),i=new mt,i.C=0,i.D=n,e.yb.add(i.close()),t.fc.add(e),t.A=new P(0,.25),t.B=new P(.5,.75),t},TriangleDown:function(t,i,n){t=new et;var e=new wi,r=new mt;return r.C=i,r.D=0,e.yb.add(r),r=new mt,r.C=.5*i,r.D=n,e.yb.add(r.close()),t.fc.add(e),t.A=new P(.25,0),t.B=new P(.75,.5),t},TriangleLeft:function(t,i,n){t=new et;var e=new wi;e.ha=i,e.da=n;var r=new mt;return r.C=0,r.D=.5*n,e.yb.add(r),n=new mt,n.C=i,n.D=0,e.yb.add(n.close()),t.fc.add(e),t.A=new P(.5,.25),t.B=new P(1,.75),t},TriangleUp:function(t,i,n){t=new et;var e=new wi;e.ha=i,e.da=n;var r=new mt;return r.C=0,r.D=n,e.yb.add(r),n=new mt,n.C=.5*i,n.D=0,e.yb.add(n.close()),t.fc.add(e),t.A=new P(.25,.5),t.B=new P(.75,1),t},Line1:function(t,i,n){return t=new et,t.type=qi,t.ha=0,t.da=0,t.C=i,t.D=n,t},Line2:function(t,i,n){return t=new et,t.type=qi,t.ha=i,t.da=0,t.C=0,t.D=n,t},MinusLine:"LineH",LineH:function(t,i,n){return t=new et,t.type=qi,t.ha=0,t.da=n/2,t.C=i,t.D=n/2,t},LineV:function(t,i,n){return t=new et,t.type=qi,t.ha=i/2,t.da=0,t.C=i/2,t.D=n,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,i,n){return t=s.s(),j(t,0,0,!1),T(t,ot*i,0,1*i,(1-ot)*n,i,n),i=t.o,s.q(t),i},Curve2:function(t,i,n){return t=s.s(),j(t,0,0,!1),T(t,0,ot*n,(1-ot)*i,n,i,n),i=t.o,s.q(t),i},Curve3:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),T(t,1*i,ot*n,ot*i,1*n,0,1*n),i=t.o,s.q(t),i},Curve4:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),T(t,(1-ot)*i,0,0,(1-ot)*n,0,1*n),i=t.o,s.q(t),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,i,n){return t=s.s(),j(t,.5*i,0*n,!0),t.lineTo(0*i,1*n),t.lineTo(1*i,1*n,!0),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,1),s.q(t),i},Decision:"Diamond",Diamond:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(0,.5*n),t.lineTo(.5*i,1*n),t.lineTo(1*i,.5*n,!0),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.75),s.q(t),i},Pentagon:function(t,i,n){var e=ah(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;5>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.2,.22),i.B=new P(.8,.9),s.q(t),i},DataTransmission:"Hexagon",Hexagon:function(t,i,n){var e=ah(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;6>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.07,.25),i.B=new P(.93,.75),s.q(t),i},Heptagon:function(t,i,n){var e=ah(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;7>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.2,.15),i.B=new P(.8,.85),s.q(t),i},Octagon:function(t,i,n){var e=ah(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;8>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.15,.15),i.B=new P(.85,.85),s.q(t),i},Nonagon:function(t,i,n){var e=ah(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;9>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.13),i.B=new P(.82,.82),s.q(t),i},Decagon:function(t,i,n){var e=ah(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;10>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.16,.16),i.B=new P(.84,.84),s.q(t),i},Dodecagon:function(t,i,n){var e=ah(12);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;12>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.16,.16),i.B=new P(.84,.84),s.q(t),i},FivePointedStar:function(t,i,n){var e=Xh(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;10>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.312,.383),i.B=new P(.693,.765),s.q(t),i},SixPointedStar:function(t,i,n){var e=Xh(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;12>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.251),i.B=new P(.833,.755),s.q(t),i},SevenPointedStar:function(t,i,n){var e=Xh(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;14>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.363,.361),i.B=new P(.641,.709),s.q(t),i},EightPointedStar:function(t,i,n){var e=Xh(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;16>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.252,.255),i.B=new P(.75,.75),s.q(t),i},NinePointedStar:function(t,i,n){var e=Xh(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;18>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.355,.361),i.B=new P(.645,.651),s.q(t),i},TenPointedStar:function(t,i,n){var e=Xh(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;20>r;r++)t.lineTo(e[r].x*i,e[r].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.281,.261),i.B=new P(.723,.748),s.q(t),i},FivePointedBurst:function(t,i,n){var e=fu(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.312,.383),i.B=new P(.693,.765),s.q(t),i},SixPointedBurst:function(t,i,n){var e=fu(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.251),i.B=new P(.833,.755),s.q(t),i},SevenPointedBurst:function(t,i,n){var e=fu(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.363,.361),i.B=new P(.641,.709),s.q(t),i},EightPointedBurst:function(t,i,n){var e=fu(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.252,.255),i.B=new P(.75,.75),s.q(t),i},NinePointedBurst:function(t,i,n){var e=fu(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.355,.361),i.B=new P(.645,.651),s.q(t),i},TenPointedBurst:function(t,i,n){var e=fu(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var r=1;r<e.length;r+=3)T(t,e[r].x*i,e[r].y*n,e[r+1].x*i,e[r+1].y*n,e[r+2].x*i,e[r+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.281,.261),i.B=new P(.723,.748),s.q(t),i},Cloud:function(t,i,n){return t=s.s(),j(t,.08034461*i,.1944299*n,!0),T(t,-.09239631*i,.07836421*n,.1406031*i,-.0542823*n,.2008615*i,.05349299*n),T(t,.2450511*i,-.00697547*n,.3776197*i,-.01112067*n,.4338609*i,.074219*n),T(t,.4539471*i,0,.6066018*i,-.02526587*n,.6558228*i,.07004196*n),T(t,.6914277*i,-.01904177*n,.8921095*i,-.01220843*n,.8921095*i,.08370865*n),T(t,1.036446*i,.04105738*n,1.020377*i,.3022052*n,.9147671*i,.3194596*n),T(t,1.04448*i,.360238*n,.992256*i,.5219009*n,.9082935*i,.562044*n),T(t,1.032337*i,.5771781*n,1.018411*i,.8120651*n,.9212406*i,.8217117*n),T(t,1.028411*i,.9571472*n,.8556702*i,1.052487*n,.7592566*i,.9156953*n),T(t,.7431877*i,1.009325*n,.5624123*i,1.021761*n,.5101666*i,.9310455*n),T(t,.4820677*i,1.031761*n,.3030112*i,1.002796*n,.2609328*i,.9344623*n),T(t,.2329994*i,1.01518*n,.03213784*i,1.01518*n,.08034461*i,.870098*n),T(t,-.02812061*i,.9032597*n,-.01205169*i,.6835638*n,.06829292*i,.6545475*n),T(t,-.01812061*i,.6089503*n,-.00606892*i,.4555777*n,.06427569*i,.4265613*n),T(t,-.01606892*i,.3892545*n,-.01205169*i,.1944299*n,.08034461*i,.1944299*n),W(t),i=t.o,i.A=new P(.1,.1),i.B=new P(.9,.9),s.q(t),i},Gate:"Crescent",Crescent:function(t,i,n){return t=s.s(),j(t,0,0,!0),T(t,1*i,0,1*i,1*n,0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.511,.19),i.B=new P(.776,.76),s.q(t),i},FramedRectangle:function(t,i,n){var e=s.s(),r=t?t.Jc:NaN;return t=t?t.Qu:NaN,isNaN(r)&&(r=.1),isNaN(t)&&(t=.1),j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n,!0),j(e,r*i,t*n,!1,!0),e.lineTo(r*i,(1-t)*n),e.lineTo((1-r)*i,(1-t)*n),e.lineTo((1-r)*i,t*n,!0),i=e.o,i.A=new P(r,t),i.B=new P(1-r,1-t),s.q(e),i},Delay:"HalfEllipse",HalfEllipse:function(t,i,n){return t=s.s(),j(t,0,0,!0),T(t,ot*i,0,1*i,(.5-ot/2)*n,1*i,.5*n),T(t,1*i,(.5+ot/2)*n,ot*i,1*n,0,1*n),W(t),i=t.o,i.A=new P(0,.2),i.B=new P(.75,.8),s.q(t),i},Heart:function(t,i,n){return t=s.s(),j(t,.5*i,1*n,!0),T(t,.1*i,.8*n,0,.5*n,0*i,.3*n),T(t,0*i,0,.45*i,0,.5*i,.3*n),T(t,.55*i,0,1*i,0,1*i,.3*n),T(t,i,.5*n,.9*i,.8*n,.5*i,1*n),W(t),i=t.o,i.A=new P(.15,.29),i.B=new P(.86,.68),s.q(t),i},Spade:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(.51*i,.01*n),T(t,.6*i,.2*n,i,.25*n,i,.5*n),T(t,i,.8*n,.6*i,.8*n,.55*i,.7*n),T(t,.5*i,.75*n,.55*i,.95*n,.75*i,n),t.lineTo(.25*i,n),T(t,.45*i,.95*n,.5*i,.75*n,.45*i,.7*n),T(t,.4*i,.8*n,0,.8*n,0,.5*n),T(t,0,.25*n,.4*i,.2*n,.49*i,.01*n),W(t),i=t.o,i.A=new P(.19,.26),i.B=new P(.8,.68),s.q(t),i},Club:function(t,i,n){t=s.s(),j(t,.4*i,.6*n,!0),T(t,.5*i,.75*n,.45*i,.95*n,.15*i,1*n),t.lineTo(.85*i,n),T(t,.55*i,.95*n,.5*i,.75*n,.6*i,.6*n);var e=.2,r=.3,o=0,h=4*(Math.SQRT2-1)/3*e;return T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r+.05)*i,(.5-h+o-.02)*n,.65*i,.36771243*n),e=.2,r=0,o=-.3,h=4*(Math.SQRT2-1)/3*e,T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,.35*i,.36771243*n),e=.2,r=-.3,o=0,h=4*(Math.SQRT2-1)/3*e,T(t,(.5+e+r-.05)*i,(.5-h+o-.02)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,.4*i,.6*n),W(t),i=t.o,i.A=new P(.06,.39),i.B=new P(.93,.58),s.q(t),i},Ring:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,i,.5*n,!0),T(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),T(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),T(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),T(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,j(t,.5*i,.1*n,!0,!0),T(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),T(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),T(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),T(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=ji,s.q(t),i},YinYang:function(t,i,n){var e=.5;t=s.s(),e=.5,j(t,.5*i,0,!0),t.arcTo(270,180,.5*i,.5*i,.5*i),T(t,1*i,e*n,0,e*n,e*i,0,!0);var e=.1,r=.25;return j(t,(.5+e)*i,r*n,!0,!0),t.arcTo(0,-360,.5*i,n*r,e*i),W(t),j(t,.5*i,0,!1),t.arcTo(270,-180,.5*i,.5*i,.5*i),t.fb(!1),r=.75,j(t,(.5+e)*i,r*n,!0),t.arcTo(0,360,.5*i,n*r,e*i),W(t),i=t.o,i.ae=ji,s.q(t),i},Peace:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;j(t,i,.5*n,!0),T(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),T(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),T(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),T(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,j(t,.5*i,.1*n,!0,!0),T(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),T(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),T(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),T(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n);var e=.07,r=0,o=-.707*.11,h=4*(Math.SQRT2-1)/3*e;return j(t,(.5+e+r)*i,(.5+o)*n,!0),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),e=.07,r=-.707*.11,o=.707*.11,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+r)*i,(.5+o)*n,!0),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),e=.07,r=.707*.11,o=.707*.11,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+r)*i,(.5+o)*n,!0),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=ji,s.q(t),i},NotAllowed:function(t,i,n){var r=.5*ot,e=.5;t=s.s(),j(t,.5*i,(.5-e)*n,!0),T(t,(.5-r)*i,(.5-e)*n,(.5-e)*i,(.5-r)*n,(.5-e)*i,.5*n),T(t,(.5-e)*i,(.5+r)*n,(.5-r)*i,(.5+e)*n,.5*i,(.5+e)*n),T(t,(.5+r)*i,(.5+e)*n,(.5+e)*i,(.5+r)*n,(.5+e)*i,.5*n),T(t,(.5+e)*i,(.5-r)*n,(.5+r)*i,(.5-e)*n,.5*i,(.5-e)*n);var e=.4,r=.4*ot,o=s.K(),h=s.K(),l=s.K(),u=s.K();Uo(.5,.5-e,.5+r,.5-e,.5+e,.5-r,.5+e,.5,.42,o,h,l,u,u);var f=s.K(),a=s.K(),p=s.K();Uo(.5,.5-e,.5+r,.5-e,.5+e,.5-r,.5+e,.5,.58,u,u,p,f,a);var y=s.K(),c=s.K(),v=s.K();Uo(.5,.5+e,.5-r,.5+e,.5-e,.5+r,.5-e,.5,.42,y,c,v,u,u);var d=s.K(),g=s.K(),m=s.K();return Uo(.5,.5+e,.5-r,.5+e,.5-e,.5+r,.5-e,.5,.58,u,u,m,d,g),j(t,m.x*i,m.y*n,!0,!0),T(t,d.x*i,d.y*n,g.x*i,g.y*n,(.5-e)*i,.5*n),T(t,(.5-e)*i,(.5-r)*n,(.5-r)*i,(.5-e)*n,.5*i,(.5-e)*n),T(t,o.x*i,o.y*n,h.x*i,h.y*n,l.x*i,l.y*n),t.lineTo(m.x*i,m.y*n),W(t),j(t,v.x*i,v.y*n,!0,!0),t.lineTo(p.x*i,p.y*n),T(t,f.x*i,f.y*n,a.x*i,a.y*n,(.5+e)*i,.5*n),T(t,(.5+e)*i,(.5+r)*n,(.5+r)*i,(.5+e)*n,.5*i,(.5+e)*n),T(t,y.x*i,y.y*n,c.x*i,c.y*n,v.x*i,v.y*n),W(t),s.v(o),s.v(h),s.v(l),s.v(u),s.v(f),s.v(a),s.v(p),s.v(y),s.v(c),s.v(v),s.v(d),s.v(g),s.v(m),i=t.o,s.q(t),i.ae=ji,i},Fragile:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.25*i,0),t.lineTo(.2*i,.15*n),t.lineTo(.3*i,.25*n),t.lineTo(.29*i,.33*n),t.lineTo(.35*i,.25*n),t.lineTo(.3*i,.15*n),t.lineTo(.4*i,0),t.lineTo(1*i,0),T(t,1*i,.25*n,.75*i,.5*n,.55*i,.5*n),t.lineTo(.55*i,.9*n),t.lineTo(.7*i,.9*n),t.lineTo(.7*i,1*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.9*n),t.lineTo(.45*i,.9*n),t.lineTo(.45*i,.5*n),T(t,.25*i,.5*n,0,.25*n,0,0),W(t),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.4),s.q(t),i},HourGlass:function(t,i,n){return t=s.s(),j(t,.65*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.35*i,.5*n),t.lineTo(0,0),t.lineTo(1*i,0),W(t),i=t.o,s.q(t),i},Lightning:function(t,i,n){return t=s.s(),j(t,0*i,.55*n,!0),t.lineTo(.75*i,0),t.lineTo(.25*i,.45*n),t.lineTo(.9*i,.48*n),t.lineTo(.4*i,1*n),t.lineTo(.65*i,.55*n),W(t),i=t.o,s.q(t),i},Parallelogram1:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},Input:"Output",Output:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(.1*i,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),W(t),i=t.o,i.A=new P(.1,0),i.B=new P(.9,1),s.q(t),i},Parallelogram2:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},ThickCross:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,(.5-t/2)*i,0,!0),e.lineTo((.5+t/2)*i,0),e.lineTo((.5+t/2)*i,(.5-t/2)*n),e.lineTo(1*i,(.5-t/2)*n),e.lineTo(1*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,1*n),e.lineTo((.5-t/2)*i,1*n),e.lineTo((.5-t/2)*i,(.5+t/2)*n),e.lineTo(0,(.5+t/2)*n),e.lineTo(0,(.5-t/2)*n),e.lineTo((.5-t/2)*i,(.5-t/2)*n),W(e),i=e.o,i.A=new P(.5-t/2,.5-t/2),i.B=new P(.5+t/2,.5+t/2),s.q(e),i},ThickX:function(t,i,n){t=.25/Math.SQRT2;var e=s.s();return j(e,.3*i,0,!0),e.lineTo(.5*i,.2*n),e.lineTo(.7*i,0),e.lineTo(1*i,.3*n),e.lineTo(.8*i,.5*n),e.lineTo(1*i,.7*n),e.lineTo(.7*i,1*n),e.lineTo(.5*i,.8*n),e.lineTo(.3*i,1*n),e.lineTo(0,.7*n),e.lineTo(.2*i,.5*n),e.lineTo(0,.3*n),W(e),i=e.o,i.A=new P(.5-t,.5-t),i.B=new P(.5+t,.5+t),s.q(e),i},ThinCross:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.1),t=s.s(),j(t,(.5-e/2)*i,0,!0),t.lineTo((.5+e/2)*i,0),t.lineTo((.5+e/2)*i,(.5-e/2)*n),t.lineTo(1*i,(.5-e/2)*n),t.lineTo(1*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,1*n),t.lineTo((.5-e/2)*i,1*n),t.lineTo((.5-e/2)*i,(.5+e/2)*n),t.lineTo(0,(.5+e/2)*n),t.lineTo(0,(.5-e/2)*n),t.lineTo((.5-e/2)*i,(.5-e/2)*n),W(t),i=t.o,s.q(t),i},ThinX:function(t,i,n){return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.5*i,.4*n),t.lineTo(.9*i,0),t.lineTo(1*i,.1*n),t.lineTo(.6*i,.5*n),t.lineTo(1*i,.9*n),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.6*n),t.lineTo(.1*i,1*n),t.lineTo(0,.9*n),t.lineTo(.4*i,.5*n),t.lineTo(0,.1*n),W(t),i=t.o,s.q(t),i},RightTriangle:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.5),i.B=new P(.5,1),s.q(t),i},RoundedIBeam:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),T(t,.5*i,.25*n,.5*i,.75*n,1*i,1*n),t.lineTo(0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,s.q(t),i},RoundedRectangle:function(t,i,n){var e=t?t.Jc:NaN;isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=e*ot;var r=s.s();return j(r,e,0,!0),r.lineTo(i-e,0),T(r,i-t,0,i,t,i,e),r.lineTo(i,n-e),T(r,i,n-t,i-t,n,i-e,n),r.lineTo(e,n),T(r,t,n,0,n-t,0,n-e),r.lineTo(0,e),T(r,0,t,t,0,e,0),W(r),i=r.o,1<t?(i.A=new P(0,0,t,t),i.B=new P(1,1,-t,-t)):(i.A=gi,i.B=_i),s.q(r),i},Border:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=s.s(),j(t,e,0,!0),t.lineTo(i-e,0),T(t,i-0,0,i,0,i,e),t.lineTo(i,n-e),T(t,i,n-0,i-0,n,i-e,n),t.lineTo(e,n),T(t,0,n,0,n-0,0,n-e),t.lineTo(0,e),T(t,0,0,0,0,e,0),W(t),i=t.o,i.A=gi,i.B=_i,s.q(t),i},SquareIBeam:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,e*n),t.lineTo((.5+e/2)*i,e*n),t.lineTo((.5+e/2)*i,(1-e)*n),t.lineTo(1*i,(1-e)*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,(1-e)*n),t.lineTo((.5-e/2)*i,(1-e)*n),t.lineTo((.5-e/2)*i,e*n),t.lineTo(0,e*n),W(t),i=t.o,s.q(t),i},Trapezoid:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.2);var e=s.s();return j(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},ManualLoop:"ManualOperation",ManualOperation:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=0),t=s.s(),j(t,e,0,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),W(t),i=t.o,i.A=new P(.1,0),i.B=new P(.9,1),s.q(t),i},GenderMale:function(t,i,n){t=s.s();var e=.4*ot,r=.4,o=s.K(),h=s.K(),l=s.K(),u=s.K();j(t,(.5-r)*i,.5*n,!0),T(t,(.5-r)*i,(.5-e)*n,(.5-e)*i,(.5-r)*n,.5*i,(.5-r)*n),Uo(.5,.5-r,.5+e,.5-r,.5+r,.5-e,.5+r,.5,.44,l,u,h,o,o),T(t,l.x*i,l.y*n,u.x*i,u.y*n,h.x*i,h.y*n);var f=s.wb(h.x,h.y);Uo(.5,.5-r,.5+e,.5-r,.5+r,.5-e,.5+r,.5,.56,o,o,h,l,u);var a=s.wb(h.x,h.y);return t.lineTo((.1*f.x+.855)*i,.1*f.y*n),t.lineTo(.85*i,.1*f.y*n),t.lineTo(.85*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.15*n),t.lineTo((.1*a.x+.9)*i,.15*n),t.lineTo((.1*a.x+.9)*i,(.1*a.y+.05*.9)*n),t.lineTo(a.x*i,a.y*n),T(t,l.x*i,l.y*n,u.x*i,u.y*n,(.5+r)*i,.5*n),T(t,(.5+r)*i,(.5+e)*n,(.5+e)*i,(.5+r)*n,.5*i,(.5+r)*n),T(t,(.5-e)*i,(.5+r)*n,(.5-r)*i,(.5+e)*n,(.5-r)*i,.5*n),r=.35,e=.35*ot,j(t,.5*i,(.5-r)*n,!0,!0),T(t,(.5-e)*i,(.5-r)*n,(.5-r)*i,(.5-e)*n,(.5-r)*i,.5*n),T(t,(.5-r)*i,(.5+e)*n,(.5-e)*i,(.5+r)*n,.5*i,(.5+r)*n),T(t,(.5+e)*i,(.5+r)*n,(.5+r)*i,(.5+e)*n,(.5+r)*i,.5*n),T(t,(.5+r)*i,(.5-e)*n,(.5+e)*i,(.5-r)*n,.5*i,(.5-r)*n),j(t,(.5-r)*i,.5*n,!0),s.v(o),s.v(h),s.v(l),s.v(u),s.v(f),s.v(a),i=t.o,i.A=new P(.202,.257),i.B=new P(.692,.839),i.ae=ji,s.q(t),i},GenderFemale:function(t,i,n){t=s.s();var e=.375,r=0,o=-.125,h=4*(Math.SQRT2-1)/3*e;return j(t,(.525+r)*i,(.5+e+o)*n,!0),T(t,(.5+h+r)*i,(.5+e+o)*n,(.5+e+r)*i,(.5+h+o)*n,(.5+e+r)*i,(.5+o)*n),T(t,(.5+e+r)*i,(.5-h+o)*n,(.5+h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5-h+r)*i,(.5-e+o)*n,(.5-e+r)*i,(.5-h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5+h+o)*n,(.5-h+r)*i,(.5+e+o)*n,(.475+r)*i,(.5+e+o)*n),t.lineTo(.475*i,.85*n),t.lineTo(.425*i,.85*n),t.lineTo(.425*i,.9*n),t.lineTo(.475*i,.9*n),t.lineTo(.475*i,1*n),t.lineTo(.525*i,1*n),t.lineTo(.525*i,.9*n),t.lineTo(.575*i,.9*n),t.lineTo(.575*i,.85*n),t.lineTo(.525*i,.85*n),W(t),e=.325,r=0,o=-.125,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+r)*i,(.5+o)*n,!0,!0),T(t,(.5+e+r)*i,(.5+h+o)*n,(.5+h+r)*i,(.5+e+o)*n,(.5+r)*i,(.5+e+o)*n),T(t,(.5-h+r)*i,(.5+e+o)*n,(.5-e+r)*i,(.5+h+o)*n,(.5-e+r)*i,(.5+o)*n),T(t,(.5-e+r)*i,(.5-h+o)*n,(.5-h+r)*i,(.5-e+o)*n,(.5+r)*i,(.5-e+o)*n),T(t,(.5+h+r)*i,(.5-e+o)*n,(.5+e+r)*i,(.5-h+o)*n,(.5+e+r)*i,(.5+o)*n),j(t,(.525+r)*i,(.5+e+o)*n,!0),i=t.o,i.A=new P(.232,.136),i.B=new P(.782,.611),i.ae=ji,s.q(t),i},PlusLine:function(t,i,n){return t=s.s(),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},XLine:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(1*i,0),t.moveTo(0,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},AsteriskLine:function(t,i,n){t=s.s();var e=.2/Math.SQRT2;return j(t,e*i,(1-e)*n,!1),t.lineTo((1-e)*i,e*n),t.moveTo(e*i,e*n),t.lineTo((1-e)*i,(1-e)*n),t.moveTo(0*i,.5*n),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0*n),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},CircleLine:function(t,i,n){var e=.5*ot;return t=s.s(),j(t,1*i,.5*n,!1),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=ji,s.q(t),i},Pie:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*n,!0),T(t,.7*i,0*n,.5*i,0*n,.5*i,0*n),T(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),T(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.5*i,1*n),T(t,(.5+e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},PiePiece:function(t,i,n){var e=ot/Math.SQRT2*.5,r=Math.SQRT2/2,o=1-Math.SQRT2/2;return t=s.s(),j(t,i,n,!0),T(t,i,(1-e)*n,(r+e)*i,(o+e)*n,r*i,o*n),t.lineTo(0,n),W(t),i=t.o,s.q(t),i},StopSign:function(t,i,n){t=1/(Math.SQRT2+2);var e=s.s();return j(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,t*n),e.lineTo(1*i,(1-t)*n),e.lineTo((1-t)*i,1*n),e.lineTo(t*i,1*n),e.lineTo(0,(1-t)*n),e.lineTo(0,t*n),W(e),i=e.o,i.A=new P(t/2,t/2),i.B=new P(1-t/2,1-t/2),s.q(e),i},LogicImplies:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),i=t.o,i.A=gi,i.B=new P(.8,.5),s.q(t),i},LogicIff:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(e*i,0),t.lineTo(0,.5*n),t.lineTo(e*i,n),i=t.o,i.A=new P(.2,0),i.B=new P(.8,.5),s.q(t),i},LogicNot:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},LogicAnd:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(.5*i,0),t.lineTo(1*i,1*n),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,1),s.q(t),i},LogicOr:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),i=t.o,i.A=new P(.219,0),i.B=new P(.78,.409),s.q(t),i},LogicXor:function(t,i,n){t=s.s(),j(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n);var e=.5*ot;return T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.ae=ji,s.q(t),i},LogicTruth:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},LogicFalsity:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(1*i,1*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),i=t.o,s.q(t),i},LogicThereExists:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,.5*n),t.lineTo(0,.5*n),t.moveTo(1*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),i=t.o,s.q(t),i},LogicForAll:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),t.moveTo(.25*i,.5*n),t.lineTo(.75*i,.5*n),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.5),s.q(t),i},LogicIsDefinedAs:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(i,0),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(0,n),t.lineTo(i,n),i=t.o,i.A=new P(.01,.01),i.B=new P(.99,.49),s.q(t),i},LogicIntersect:function(t,i,n){var e=.5*ot;return t=s.s(),j(t,0,1*n,!1),t.lineTo(0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),t.lineTo(1*i,1*n),i=t.o,i.A=new P(0,.5),i.B=_i,s.q(t),i},LogicUnion:function(t,i,n){var e=.5*ot;return t=s.s(),j(t,1*i,0,!1),t.lineTo(1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),t.lineTo(0,0),i=t.o,i.A=gi,i.B=new P(1,.5),s.q(t),i},Arrow:function(t,i,n){var e=t?t.Jc:NaN,r=t?t.Qu:NaN;return isNaN(e)&&(e=.3),isNaN(r)&&(r=.3),t=s.s(),j(t,0,(.5-r/2)*n,!0),t.lineTo((1-e)*i,(.5-r/2)*n),t.lineTo((1-e)*i,0),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,1*n),t.lineTo((1-e)*i,(.5+r/2)*n),t.lineTo(0,(.5+r/2)*n),W(t),i=t.o,i.A=new P(0,.5-r/2),e=$s(0,.5+r/2,1,.5+r/2,1-e,1,1,.5,s.K()),i.B=new P(e.x,e.y),s.v(e),s.q(t),i},ISOProcess:"Chevron",Chevron:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},DoubleArrow:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.3*i,.214*n),t.lineTo(.3*i,0),t.lineTo(1*i,.5*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.786*n),t.lineTo(0,1*n),W(t),j(t,.3*i,.214*n,!1),t.lineTo(.3*i,.786*n),t.fb(!1),i=t.o,s.q(t),i},DoubleEndArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.3*i,.7*n),t.lineTo(.3*i,1*n),t.lineTo(0,.5*n),t.lineTo(.3*i,0),t.lineTo(.3*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,n=$s(0,.5,.3,0,0,.3,.3,.3,s.K()),i.A=new P(n.x,n.y),n=$s(.7,1,1,.5,.7,.7,1,.7,n),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},IBeamArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.2*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.2*i,0),t.lineTo(.2*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,i.A=new P(0,.3),n=$s(.7,1,1,.5,.7,.7,1,.7,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},Pointer:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(.2*i,.5*n),t.lineTo(0,0),W(t),i=t.o,i.A=new P(.2,.35),n=$s(.2,.65,1,.65,0,1,1,.5,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},RoundedPointer:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.4,.35),n=$s(.2,.65,1,.65,0,1,1,.5,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},SplitEndArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(0,.7*n),t.lineTo(.2*i,.5*n),t.lineTo(0,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,i.A=new P(.2,.3),n=$s(.7,1,1,.5,.7,.7,1,.7,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},MessageToUser:"SquareArrow",SquareArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.7*i,0),W(t),i=t.o,i.A=gi,i.B=new P(.7,1),s.q(t),i},Cone1:function(t,i,n){var e=.5*ot,r=.1*ot;return t=s.s(),j(t,0,.9*n,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+r)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+r)*n,0,.9*n),W(t),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.97),s.q(t),i},Cone2:function(t,i,n){return t=s.s(),j(t,0,.9*n,!0),T(t,(1-.85/.9)*i,1*n,.85/.9*i,1*n,1*i,.9*n),t.lineTo(.5*i,0),t.lineTo(0,.9*n),W(t),j(t,0,.9*n,!1),T(t,(1-.85/.9)*i,.8*n,.85/.9*i,.8*n,1*i,.9*n),t.fb(!1),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.82),s.q(t),i},Cube1:function(t,i,n){return t=s.s(),j(t,.5*i,1*n,!0),t.lineTo(1*i,.85*n),t.lineTo(1*i,.15*n),t.lineTo(.5*i,0*n),t.lineTo(0*i,.15*n),t.lineTo(0*i,.85*n),W(t),j(t,.5*i,1*n,!1),t.lineTo(.5*i,.3*n),t.lineTo(0,.15*n),t.moveTo(.5*i,.3*n),t.lineTo(1*i,.15*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(.5,.85),s.q(t),i},Cube2:function(t,i,n){return t=s.s(),j(t,0,.3*n,!0),t.lineTo(0*i,1*n),t.lineTo(.7*i,n),t.lineTo(1*i,.7*n),t.lineTo(1*i,0*n),t.lineTo(.3*i,0*n),W(t),j(t,0,.3*n,!1),t.lineTo(.7*i,.3*n),t.lineTo(1*i,0*n),t.moveTo(.7*i,.3*n),t.lineTo(.7*i,1*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(.7,1),s.q(t),i},MagneticData:"Cylinder1",Cylinder1:function(t,i,n){var e=.5*ot,r=.1*ot;return t=s.s(),j(t,0,.1*n,!0),T(t,0,(.1-r)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-r)*n,1*i,.1*n),t.lineTo(i,.9*n),T(t,1*i,(.9+r)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+r)*n,0,.9*n),t.lineTo(0,.1*n),j(t,0,.1*n,!1),T(t,0,(.1+r)*n,(.5-e)*i,.2*n,.5*i,.2*n),T(t,(.5+e)*i,.2*n,1*i,(.1+r)*n,1*i,.1*n),t.fb(!1),i=t.o,i.A=new P(0,.2),i.B=new P(1,.9),s.q(t),i},Cylinder2:function(t,i,n){var e=.5*ot,r=.1*ot;return t=s.s(),j(t,0,.9*n,!0),t.lineTo(0,.1*n),T(t,0,(.1-r)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-r)*n,1*i,.1*n),t.lineTo(1*i,.9*n),T(t,1*i,(.9+r)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+r)*n,0,.9*n),j(t,0,.9*n,!1),T(t,0,(.9-r)*n,(.5-e)*i,.8*n,.5*i,.8*n),T(t,(.5+e)*i,.8*n,1*i,(.9-r)*n,1*i,.9*n),t.fb(!1),i=t.o,i.A=new P(0,.1),i.B=new P(1,.8),s.q(t),i},Cylinder3:function(t,i,n){var e=.1*ot,r=.5*ot;return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.9*i,0),T(t,(.9+e)*i,0,1*i,(.5-r)*n,1*i,.5*n),T(t,1*i,(.5+r)*n,(.9+e)*i,1*n,.9*i,1*n),t.lineTo(.1*i,1*n),T(t,(.1-e)*i,1*n,0,(.5+r)*n,0,.5*n),T(t,0,(.5-r)*n,(.1-e)*i,0,.1*i,0),j(t,.1*i,0,!1),T(t,(.1+e)*i,0,.2*i,(.5-r)*n,.2*i,.5*n),T(t,.2*i,(.5+r)*n,(.1+e)*i,1*n,.1*i,1*n),t.fb(!1),i=t.o,i.A=new P(.2,0),i.B=new P(.9,1),s.q(t),i},DirectData:"Cylinder4",Cylinder4:function(t,i,n){var e=.1*ot,r=.5*ot;return t=s.s(),j(t,.9*i,0,!0),T(t,(.9+e)*i,0,1*i,(.5-r)*n,1*i,.5*n),T(t,1*i,(.5+r)*n,(.9+e)*i,1*n,.9*i,1*n),t.lineTo(.1*i,1*n),T(t,(.1-e)*i,1*n,0,(.5+r)*n,0,.5*n),T(t,0,(.5-r)*n,(.1-e)*i,0,.1*i,0),t.lineTo(.9*i,0),j(t,.9*i,0,!1),T(t,(.9-e)*i,0,.8*i,(.5-r)*n,.8*i,.5*n),T(t,.8*i,(.5+r)*n,(.9-e)*i,1*n,.9*i,1*n),t.fb(!1),i=t.o,i.A=new P(.1,0),i.B=new P(.8,1),s.q(t),i},Prism1:function(t,i,n){return t=s.s(),j(t,.25*i,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(i,.5*n),t.lineTo(.5*i,n),t.lineTo(0,n),W(t),j(t,.25*i,.25*n,!1),t.lineTo(.5*i,n),t.fb(!1),i=t.o,i.A=new P(.408,.172),i.B=new P(.833,.662),s.q(t),i},Prism2:function(t,i,n){return t=s.s(),j(t,0,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),W(t),j(t,0,n,!1),t.lineTo(.25*i,.5*n),t.lineTo(i,.25*n),t.moveTo(0,.25*n),t.lineTo(.25*i,.5*n),t.fb(!1),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.75),s.q(t),i},Pyramid1:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(i,.75*n),t.lineTo(.5*i,1*n),t.lineTo(0,.75*n),W(t),j(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.fb(!1),i=t.o,i.A=new P(.25,.367),i.B=new P(.75,.875),s.q(t),i},Pyramid2:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(i,.85*n),t.lineTo(.5*i,1*n),t.lineTo(0,.85*n),W(t),j(t,.5*i,0,!1),t.lineTo(.5*i,.7*n),t.lineTo(0,.85*n),t.moveTo(.5*i,.7*n),t.lineTo(1*i,.85*n),t.fb(!1),i=t.o,i.A=new P(.25,.367),i.B=new P(.75,.875),s.q(t),i},Actor:function(t,i,n){var e=.2*ot,r=.1*ot,o=.5,h=.1;return t=s.s(),j(t,o*i,(h+.1)*n,!0),T(t,(o-e)*i,(h+.1)*n,(o-.2)*i,(h+r)*n,(o-.2)*i,h*n),T(t,(o-.2)*i,(h-r)*n,(o-e)*i,(h-.1)*n,o*i,(h-.1)*n),T(t,(o+e)*i,(h-.1)*n,(o+.2)*i,(h-r)*n,(o+.2)*i,h*n),T(t,(o+.2)*i,(h+r)*n,(o+e)*i,(h+.1)*n,o*i,(h+.1)*n),e=.05,r=ot*e,j(t,.5*i,.2*n,!0),t.lineTo(.95*i,.2*n),o=.95,h=.25,T(t,(o+r)*i,(h-e)*n,(o+e)*i,(h-r)*n,(o+e)*i,h*n),t.lineTo(1*i,.6*n),t.lineTo(.85*i,.6*n),t.lineTo(.85*i,.35*n),e=.025,r=ot*e,o=.825,h=.35,T(t,(o+e)*i,(h-r)*n,(o+r)*i,(h-e)*n,o*i,(h-e)*n),T(t,(o-r)*i,(h-e)*n,(o-e)*i,(h-r)*n,(o-e)*i,h*n),t.lineTo(.8*i,1*n),t.lineTo(.55*i,1*n),t.lineTo(.55*i,.7*n),e=.05,r=ot*e,o=.5,h=.7,T(t,(o+e)*i,(h-r)*n,(o+r)*i,(h-e)*n,o*i,(h-e)*n),T(t,(o-r)*i,(h-e)*n,(o-e)*i,(h-r)*n,(o-e)*i,h*n),t.lineTo(.45*i,1*n),t.lineTo(.2*i,1*n),t.lineTo(.2*i,.35*n),e=.025,r=ot*e,o=.175,h=.35,T(t,(o+e)*i,(h-r)*n,(o+r)*i,(h-e)*n,o*i,(h-e)*n),T(t,(o-r)*i,(h-e)*n,(o-e)*i,(h-r)*n,(o-e)*i,h*n),t.lineTo(.15*i,.6*n),t.lineTo(0*i,.6*n),t.lineTo(0*i,.25*n),e=.05,r=ot*e,o=.05,h=.25,T(t,(o-e)*i,(h-r)*n,(o-r)*i,(h-e)*n,o*i,(h-e)*n),t.lineTo(.5*i,.2*n),i=t.o,i.A=new P(.2,.2),i.B=new P(.8,.65),s.q(t),i},Card:function(t,i,n){return t=s.s(),j(t,1*i,0*n,!0),t.lineTo(1*i,1*n),t.lineTo(0*i,1*n),t.lineTo(0*i,.2*n),t.lineTo(.2*i,0*n),W(t),i=t.o,i.A=new P(0,.2),i.B=_i,s.q(t),i},Collate:function(t,i,n){return t=s.s(),j(t,.5*i,.5*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),j(t,.5*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.25),s.q(t),i},CreateRequest:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.moveTo(0,(1-t)*n),e.lineTo(1*i,(1-t)*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},Database:function(t,i,n){t=s.s();var e=.5*ot,r=.1*ot;return j(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+r)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+r)*n,0,.9*n),t.lineTo(0,.1*n),T(t,0,(.1-r)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-r)*n,1*i,.1*n),j(t,1*i,.1*n,!1),T(t,1*i,(.1+r)*n,(.5+e)*i,.2*n,.5*i,.2*n),T(t,(.5-e)*i,.2*n,0,(.1+r)*n,0,.1*n),t.moveTo(1*i,.2*n),T(t,1*i,(.2+r)*n,(.5+e)*i,.3*n,.5*i,.3*n),T(t,(.5-e)*i,.3*n,0,(.2+r)*n,0,.2*n),t.moveTo(1*i,.3*n),T(t,1*i,(.3+r)*n,(.5+e)*i,.4*n,.5*i,.4*n),T(t,(.5-e)*i,.4*n,0,(.3+r)*n,0,.3*n),t.fb(!1),i=t.o,i.A=new P(0,.4),i.B=new P(1,.9),s.q(t),i},StoredData:"DataStorage",DataStorage:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),T(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(0,1*n),T(t,.25*i,.9*n,.25*i,.1*n,0,0),W(t),i=t.o,i.A=new P(.226,0),i.B=new P(.81,1),s.q(t),i},DiskStorage:function(t,i,n){t=s.s();var e=.5*ot,r=.1*ot;return j(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+r)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+r)*n,0,.9*n),t.lineTo(0,.1*n),T(t,0,(.1-r)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-r)*n,1*i,.1*n),j(t,1*i,.1*n,!1),T(t,1*i,(.1+r)*n,(.5+e)*i,.2*n,.5*i,.2*n),T(t,(.5-e)*i,.2*n,0,(.1+r)*n,0,.1*n),t.moveTo(1*i,.2*n),T(t,1*i,(.2+r)*n,(.5+e)*i,.3*n,.5*i,.3*n),T(t,(.5-e)*i,.3*n,0,(.2+r)*n,0,.2*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(1,.9),s.q(t),i},Display:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),t.lineTo(.75*i,0),T(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(.25*i,1*n),t.lineTo(0,.5*n),W(t),i=t.o,i.A=new P(.25,0),i.B=new P(.75,1),s.q(t),i},DividedEvent:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)?t=.2:.15>t&&(t=.15);var e=s.s(),r=.2*ot;return j(e,0,.2*n,!0),T(e,0,(.2-r)*n,(.2-r)*i,0,.2*i,0),e.lineTo(.8*i,0),T(e,(.8+r)*i,0,1*i,(.2-r)*n,1*i,.2*n),e.lineTo(1*i,.8*n),T(e,1*i,(.8+r)*n,(.8+r)*i,1*n,.8*i,1*n),e.lineTo(.2*i,1*n),T(e,(.2-r)*i,1*n,0,(.8+r)*n,0,.8*n),e.lineTo(0,.2*n),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},DividedProcess:function(t,i,n){t=t?t.Jc:NaN,(isNaN(t)||.1>t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=_i,s.q(e),i},Document:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),i=t.o,i.A=gi,i.B=new P(1,.6),s.q(t),i},ExternalOrganization:function(t,i,n){t=t?t.Jc:NaN,(isNaN(t)||.2>t)&&(t=.2);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,t*i,0,!1),e.lineTo(0,t*n),e.moveTo(1*i,t*n),e.lineTo((1-t)*i,0),e.moveTo(0,(1-t)*n),e.lineTo(t*i,1*n),e.moveTo((1-t)*i,1*n),e.lineTo(1*i,(1-t)*n),e.fb(!1),i=e.o,i.A=new P(t/2,t/2),i.B=new P(1-t/2,1-t/2),s.q(e),i},ExternalProcess:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),W(t),j(t,.1*i,.4*n,!1),t.lineTo(.1*i,.6*n),t.moveTo(.9*i,.6*n),t.lineTo(.9*i,.4*n),t.moveTo(.6*i,.1*n),t.lineTo(.4*i,.1*n),t.moveTo(.4*i,.9*n),t.lineTo(.6*i,.9*n),t.fb(!1),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.75),s.q(t),i},File:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),W(t),j(t,.75*i,0,!1),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.25*n),t.fb(!1),i=t.o,i.A=new P(0,.25),i.B=_i,s.q(t),i},Interrupt:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,1*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,0),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},InternalStorage:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.1);var r=s.s();return j(r,0,0,!0),r.lineTo(1*i,0),r.lineTo(1*i,1*n),r.lineTo(0,1*n),W(r),j(r,e*i,0,!1),r.lineTo(e*i,1*n),r.moveTo(0,t*n),r.lineTo(1*i,t*n),r.fb(!1),i=r.o,i.A=new P(e,t),i.B=_i,s.q(r),i},Junction:function(t,i,n){t=s.s();var e=1/Math.SQRT2,r=(1-1/Math.SQRT2)/2,o=.5*ot;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+o)*n,(.5+o)*i,1*n,.5*i,1*n),T(t,(.5-o)*i,1*n,0,(.5+o)*n,0,.5*n),T(t,0,(.5-o)*n,(.5-o)*i,0,.5*i,0),T(t,(.5+o)*i,0,1*i,(.5-o)*n,1*i,.5*n),j(t,(r+e)*i,(r+e)*n,!1),t.lineTo(r*i,r*n),t.moveTo(r*i,(r+e)*n),t.lineTo((r+e)*i,r*n),t.fb(!1),i=t.o,i.ae=ji,s.q(t),i},LinedDocument:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),j(t,.1*i,0,!1),t.lineTo(.1*i,.75*n),t.fb(!1),i=t.o,i.A=new P(.1,0),i.B=new P(1,.6),s.q(t),i},LoopLimit:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(0,.25*n),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=_i,s.q(t),i},SequentialData:"MagneticTape",MagneticTape:function(t,i,n){t=s.s();var e=.5*ot;return j(t,.5*i,1*n,!0),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,.9*n,.6*i,.9*n),t.lineTo(1*i,.9*n),t.lineTo(1*i,1*n),t.lineTo(.5*i,1*n),i=t.o,i.A=new P(.15,.15),i.B=new P(.85,.8),s.q(t),i},ManualInput:function(t,i,n){return t=s.s(),j(t,1*i,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.25*n),W(t),i=t.o,i.A=new P(0,.25),i.B=_i,s.q(t),i},MessageFromUser:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.7);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(t*i,.5*n),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=gi,i.B=new P(t,1),s.q(e),i},MicroformProcessing:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,0,0,!0),e.lineTo(.5*i,t*n),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.5*i,(1-t)*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},MicroformRecording:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.15*n),t.lineTo(1*i,.85*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=new P(1,.75),s.q(t),i},MultiDocument:function(t,i,n){return n/=.8,t=s.s(),j(t,i,0,!0),t.lineTo(i,.5*n),T(t,.96*i,.47*n,.93*i,.45*n,.9*i,.44*n),t.lineTo(.9*i,.6*n),T(t,.86*i,.57*n,.83*i,.55*n,.8*i,.54*n),t.lineTo(.8*i,.7*n),T(t,.4*i,.4*n,.4*i,1*n,0,.7*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),t.lineTo(.1*i,.1*n),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),W(t),j(t,.1*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.54*n),t.moveTo(.2*i,.1*n),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.44*n),t.fb(!1),i=t.o,i.A=new P(0,.25),i.B=new P(.8,.77),s.q(t),i},MultiProcess:function(t,i,n){return t=s.s(),j(t,.1*i,.1*n,!0),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.8*n),t.lineTo(.9*i,.8*n),t.lineTo(.9*i,.9*n),t.lineTo(.8*i,.9*n),t.lineTo(.8*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),W(t),j(t,.2*i,.1*n,!1),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.8*n),t.moveTo(.1*i,.2*n),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.9*n),t.fb(!1),i=t.o,i.A=new P(0,.2),i.B=new P(.8,1),s.q(t),i},OfflineStorage:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=1-t,r=s.s();return j(r,0,0,!0),r.lineTo(1*i,0),r.lineTo(.5*i,1*n),W(r),j(r,.5*t*i,t*n,!1),r.lineTo((1-.5*t)*i,t*n),r.fb(!1),i=r.o,i.A=new P(e/4+.5*t,t),i.B=new P(3*e/4+.5*t,t+.5*e),s.q(r),i},OffPageConnector:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.5*n),t.lineTo(.75*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=gi,i.B=new P(.75,1),s.q(t),i},Or:function(t,i,n){t=s.s();var e=.5*ot;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(0,.5*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),t.fb(!1),i=t.o,i.ae=ji,s.q(t),i},PaperTape:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,.3*n),T(t,.5*i,.6*n,.5*i,0,1*i,.3*n),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),i=t.o,i.A=new P(0,.49),i.B=new P(1,.75),s.q(t),i},PrimitiveFromCall:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var r=s.s();return j(r,0,0,!0),r.lineTo(1*i,0),r.lineTo((1-t)*i,.5*n),r.lineTo(1*i,1*n),r.lineTo(0,1*n),W(r),i=r.o,i.A=new P(e,0),i.B=new P(1-t,1),s.q(r),i},PrimitiveToCall:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var r=s.s();return j(r,0,0,!0),r.lineTo((1-t)*i,0),r.lineTo(1*i,.5*n),r.lineTo((1-t)*i,1*n),r.lineTo(0,1*n),W(r),i=r.o,i.A=new P(e,0),i.B=new P(1-t,1),s.q(r),i},Subroutine:"Procedure",Procedure:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,(1-t)*i,0,!1),e.lineTo((1-t)*i,1*n),e.moveTo(t*i,0),e.lineTo(t*i,1*n),e.fb(!1),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},Process:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,t*i,0,!1),e.lineTo(t*i,1*n),e.fb(!1),i=e.o,i.A=new P(t,0),i.B=_i,s.q(e),i},Sort:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),W(t),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.fb(!1),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.5),s.q(t),i},Start:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),j(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),j(t,.25*i,0,!1),t.lineTo(.25*i,1*n),t.moveTo(.75*i,0),t.lineTo(.75*i,1*n),t.fb(!1),i=t.o,i.A=new P(.25,0),i.B=new P(.75,1),s.q(t),i},Terminator:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),i=t.o,i.A=new P(.23,0),i.B=new P(.77,1),s.q(t),i},TransmittalTape:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.75*i,(1-t)*n),e.lineTo(0,(1-t)*n),W(e),i=e.o,i.A=gi,i.B=new P(1,1-t),s.q(e),i},AndGate:function(t,i,n){t=s.s();var e=.5*ot;return j(t,0,0,!0),t.lineTo(.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=gi,i.B=new P(.55,1),s.q(t),i},Buffer:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},Clock:function(t,i,n){t=s.s();var e=.5*ot;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,.5*n),j(t,.8*i,.75*n,!1),t.lineTo(.8*i,.25*n),t.lineTo(.6*i,.25*n),t.lineTo(.6*i,.75*n),t.lineTo(.4*i,.75*n),t.lineTo(.4*i,.25*n),t.lineTo(.2*i,.25*n),t.lineTo(.2*i,.75*n),t.fb(!1),i=t.o,i.ae=ji,s.q(t),i},Ground:function(t,i,n){return t=s.s(),j(t,.5*i,0,!1),t.lineTo(.5*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.3*i,.8*n),t.lineTo(.7*i,.8*n),t.moveTo(.4*i,1*n),t.lineTo(.6*i,1*n),i=t.o,s.q(t),i},Inverter:function(t,i,n){t=s.s();var e=.1*ot;return j(t,.8*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.8*i,.5*n),j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.9+e)*i,.6*n,.9*i,.6*n),T(t,(.9-e)*i,.6*n,.8*i,(.5+e)*n,.8*i,.5*n),T(t,.8*i,(.5-e)*n,(.9-e)*i,.4*n,.9*i,.4*n),T(t,(.9+e)*i,.4*n,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.A=new P(0,.25),i.B=new P(.4,.75),s.q(t),i},NandGate:function(t,i,n){t=s.s();var e=.5*ot,r=.4*ot,o=.1*ot;return j(t,.8*i,.5*n,!0),T(t,.8*i,(.5+r)*n,(.4+e)*i,1*n,.4*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.4*i,0),T(t,(.4+e)*i,0,.8*i,(.5-r)*n,.8*i,.5*n),j(t,1*i,.5*n,!0),T(t,1*i,(.5+o)*n,(.9+o)*i,.6*n,.9*i,.6*n),T(t,(.9-o)*i,.6*n,.8*i,(.5+o)*n,.8*i,.5*n),T(t,.8*i,(.5-o)*n,(.9-o)*i,.4*n,.9*i,.4*n),T(t,(.9+o)*i,.4*n,1*i,(.5-o)*n,1*i,.5*n),i=t.o,i.A=new P(0,.05),i.B=new P(.55,.95),s.q(t),i},NorGate:function(t,i,n){t=s.s();var e=.5,r=ot*e,o=0,h=.5;return j(t,.8*i,.5*n,!0),T(t,.7*i,(h+r)*n,(o+r)*i,(h+e)*n,0,1*n),T(t,.25*i,.75*n,.25*i,.25*n,0,0),T(t,(o+r)*i,(h-e)*n,.7*i,(h-r)*n,.8*i,.5*n),e=.1,r=.1*ot,o=.9,h=.5,j(t,(o-e)*i,h*n,!0),T(t,(o-e)*i,(h-r)*n,(o-r)*i,(h-e)*n,o*i,(h-e)*n),T(t,(o+r)*i,(h-e)*n,(o+e)*i,(h-r)*n,(o+e)*i,h*n),T(t,(o+e)*i,(h+r)*n,(o+r)*i,(h+e)*n,o*i,(h+e)*n),T(t,(o-r)*i,(h+e)*n,(o-e)*i,(h+r)*n,(o-e)*i,h*n),i=t.o,i.A=new P(.2,.25),i.B=new P(.6,.75),s.q(t),i},OrGate:function(t,i,n){t=s.s();var e=.5*ot;return j(t,0,0,!0),T(t,(0+e+e)*i,0*n,.8*i,(.5-e)*n,1*i,.5*n),T(t,.8*i,(.5+e)*n,(0+e+e)*i,1*n,0,1*n),T(t,.25*i,.75*n,.25*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.2,.25),i.B=new P(.75,.75),s.q(t),i},XnorGate:function(t,i,n){t=s.s();var e=.5,r=ot*e,o=.2,h=.5;return j(t,.1*i,0,!1),T(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),j(t,.8*i,.5*n,!0),T(t,.7*i,(h+r)*n,(o+r)*i,(h+e)*n,.2*i,1*n),T(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),T(t,(o+r)*i,(h-e)*n,.7*i,(h-r)*n,.8*i,.5*n),e=.1,r=.1*ot,o=.9,h=.5,j(t,(o-e)*i,h*n,!0),T(t,(o-e)*i,(h-r)*n,(o-r)*i,(h-e)*n,o*i,(h-e)*n),T(t,(o+r)*i,(h-e)*n,(o+e)*i,(h-r)*n,(o+e)*i,h*n),T(t,(o+e)*i,(h+r)*n,(o+r)*i,(h+e)*n,o*i,(h+e)*n),T(t,(o-r)*i,(h+e)*n,(o-e)*i,(h+r)*n,(o-e)*i,h*n),i=t.o,i.A=new P(.4,.25),i.B=new P(.65,.75),s.q(t),i},XorGate:function(t,i,n){t=s.s();var e=.5*ot;return j(t,.1*i,0,!1),T(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),j(t,.2*i,0,!0),T(t,(.2+e)*i,0*n,.9*i,(.5-e)*n,1*i,.5*n),T(t,.9*i,(.5+e)*n,(.2+e)*i,1*n,.2*i,1*n),T(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),W(t),i=t.o,i.A=new P(.4,.25),i.B=new P(.8,.75),s.q(t),i},Capacitor:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},Resistor:function(t,i,n){return t=s.s(),j(t,0,.5*n,!1),t.lineTo(.1*i,0),t.lineTo(.2*i,1*n),t.lineTo(.3*i,0),t.lineTo(.4*i,1*n),t.lineTo(.5*i,0),t.lineTo(.6*i,1*n),t.lineTo(.7*i,.5*n),i=t.o,s.q(t),i},Inductor:function(t,i,n){t=s.s();var e=.1*ot,r=.1;return j(t,(r-.5*e)*i,n,!1),T(t,(r-e)*i,n,(r-.1)*i,0,(r+.1)*i,0),r=.3,T(t,(r+.1)*i,0,(r+e)*i,n,r*i,n),T(t,(r-e)*i,n,(r-.1)*i,0,(r+.1)*i,0),r=.5,T(t,(r+.1)*i,0,(r+e)*i,n,r*i,n),T(t,(r-e)*i,n,(r-.1)*i,0,(r+.1)*i,0),r=.7,T(t,(r+.1)*i,0,(r+e)*i,n,r*i,n),T(t,(r-e)*i,n,(r-.1)*i,0,(r+.1)*i,0),r=.9,T(t,(r+.1)*i,0,(r+e)*i,n,(r+.5*e)*i,n),i=t.o,s.q(t),i},ACvoltageSource:function(t,i,n){t=s.s();var e=.5*ot;return j(t,0*i,.5*n,!1),T(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),T(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n),t.moveTo(.1*i,.5*n),T(t,.5*i,0*n,.5*i,1*n,.9*i,.5*n),i=t.o,i.ae=ji,s.q(t),i},DCvoltageSource:function(t,i,n){return t=s.s(),j(t,0,.75*n,!1),t.lineTo(0,.25*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},Diode:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),t.lineTo(1*i,1*n),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},Wifi:function(t,i,n){var l=i,u=n;i*=.38,n*=.6,t=s.s();var e=.8*ot,r=.8,o=0,h=.5,l=(l-i)/2,u=(u-n)/2;return j(t,o*i+l,(h+r)*n+u,!0),T(t,(o-e)*i+l,(h+r)*n+u,(o-r)*i+l,(h+e)*n+u,(o-r)*i+l,h*n+u),T(t,(o-r)*i+l,(h-e)*n+u,(o-e)*i+l,(h-r)*n+u,o*i+l,(h-r)*n+u),T(t,o*i+l,(h-r)*n+u,(o-r+.5*e)*i+l,(h-e)*n+u,(o-r+.5*e)*i+l,h*n+u),T(t,(o-r+.5*e)*i+l,(h+e)*n+u,o*i+l,(h+r)*n+u,o*i+l,(h+r)*n+u),W(t),e=.4*ot,r=.4,o=.2,h=.5,j(t,o*i+l,(h+r)*n+u,!0),T(t,(o-e)*i+l,(h+r)*n+u,(o-r)*i+l,(h+e)*n+u,(o-r)*i+l,h*n+u),T(t,(o-r)*i+l,(h-e)*n+u,(o-e)*i+l,(h-r)*n+u,o*i+l,(h-r)*n+u),T(t,o*i+l,(h-r)*n+u,(o-r+.5*e)*i+l,(h-e)*n+u,(o-r+.5*e)*i+l,h*n+u),T(t,(o-r+.5*e)*i+l,(h+e)*n+u,o*i+l,(h+r)*n+u,o*i+l,(h+r)*n+u),W(t),e=.2*ot,r=.2,h=o=.5,j(t,(o-r)*i+l,h*n+u,!0),T(t,(o-r)*i+l,(h-e)*n+u,(o-e)*i+l,(h-r)*n+u,o*i+l,(h-r)*n+u),T(t,(o+e)*i+l,(h-r)*n+u,(o+r)*i+l,(h-e)*n+u,(o+r)*i+l,h*n+u),T(t,(o+r)*i+l,(h+e)*n+u,(o+e)*i+l,(h+r)*n+u,o*i+l,(h+r)*n+u),T(t,(o-e)*i+l,(h+r)*n+u,(o-r)*i+l,(h+e)*n+u,(o-r)*i+l,h*n+u),e=.4*ot,r=.4,o=.8,h=.5,j(t,o*i+l,(h-r)*n+u,!0),T(t,(o+e)*i+l,(h-r)*n+u,(o+r)*i+l,(h-e)*n+u,(o+r)*i+l,h*n+u),T(t,(o+r)*i+l,(h+e)*n+u,(o+e)*i+l,(h+r)*n+u,o*i+l,(h+r)*n+u),T(t,o*i+l,(h+r)*n+u,(o+r-.5*e)*i+l,(h+e)*n+u,(o+r-.5*e)*i+l,h*n+u),T(t,(o+r-.5*e)*i+l,(h-e)*n+u,o*i+l,(h-r)*n+u,o*i+l,(h-r)*n+u),W(t),e=.8*ot,r=.8,o=1,h=.5,j(t,o*i+l,(h-r)*n+u,!0),T(t,(o+e)*i+l,(h-r)*n+u,(o+r)*i+l,(h-e)*n+u,(o+r)*i+l,h*n+u),T(t,(o+r)*i+l,(h+e)*n+u,(o+e)*i+l,(h+r)*n+u,o*i+l,(h+r)*n+u),T(t,o*i+l,(h+r)*n+u,(o+r-.5*e)*i+l,(h+e)*n+u,(o+r-.5*e)*i+l,h*n+u),T(t,(o+r-.5*e)*i+l,(h-e)*n+u,o*i+l,(h-r)*n+u,o*i+l,(h-r)*n+u),W(t),i=t.o,s.q(t),i},Email:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),W(t),j(t,0,0,!1),t.lineTo(.5*i,.6*n),t.lineTo(1*i,0),t.moveTo(0,1*n),t.lineTo(.45*i,.54*n),t.moveTo(1*i,1*n),t.lineTo(.55*i,.54*n),t.fb(!1),i=t.o,s.q(t),i},Ethernet:function(t,i,n){return t=s.s(),j(t,.35*i,0,!0),t.lineTo(.65*i,0),t.lineTo(.65*i,.4*n),t.lineTo(.35*i,.4*n),t.lineTo(.35*i,0),W(t),j(t,.1*i,1*n,!0,!0),t.lineTo(.4*i,1*n),t.lineTo(.4*i,.6*n),t.lineTo(.1*i,.6*n),t.lineTo(.1*i,1*n),W(t),j(t,.6*i,1*n,!0,!0),t.lineTo(.9*i,1*n),t.lineTo(.9*i,.6*n),t.lineTo(.6*i,.6*n),t.lineTo(.6*i,1*n),W(t),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.5*i,.4*n),t.moveTo(.75*i,.5*n),t.lineTo(.75*i,.6*n),t.moveTo(.25*i,.5*n),t.lineTo(.25*i,.6*n),t.fb(!1),i=t.o,s.q(t),i},Power:function(t,i,n){t=s.s();var e=.4*ot,r=.4,o=s.K(),h=s.K(),l=s.K(),u=s.K();Uo(.5,.5-r,.5+e,.5-r,.5+r,.5-e,.5+r,.5,.5,o,o,h,l,u);var f=s.wb(h.x,h.y);return j(t,h.x*i,h.y*n,!0),T(t,l.x*i,l.y*n,u.x*i,u.y*n,(.5+r)*i,.5*n),T(t,(.5+r)*i,(.5+e)*n,(.5+e)*i,(.5+r)*n,.5*i,(.5+r)*n),T(t,(.5-e)*i,(.5+r)*n,(.5-r)*i,(.5+e)*n,(.5-r)*i,.5*n),Uo(.5-r,.5,.5-r,.5-e,.5-e,.5-r,.5,.5-r,.5,l,u,h,o,o),T(t,l.x*i,l.y*n,u.x*i,u.y*n,h.x*i,h.y*n),e=.3*ot,r=.3,Uo(.5-r,.5,.5-r,.5-e,.5-e,.5-r,.5,.5-r,.5,l,u,h,o,o),t.lineTo(h.x*i,h.y*n),T(t,u.x*i,u.y*n,l.x*i,l.y*n,(.5-r)*i,.5*n),T(t,(.5-r)*i,(.5+e)*n,(.5-e)*i,(.5+r)*n,.5*i,(.5+r)*n),T(t,(.5+e)*i,(.5+r)*n,(.5+r)*i,(.5+e)*n,(.5+r)*i,.5*n),Uo(.5,.5-r,.5+e,.5-r,.5+r,.5-e,.5+r,.5,.5,o,o,h,l,u),T(t,u.x*i,u.y*n,l.x*i,l.y*n,h.x*i,h.y*n),W(t),j(t,.45*i,0,!0),t.lineTo(.45*i,.5*n),t.lineTo(.55*i,.5*n),t.lineTo(.55*i,0),W(t),s.v(o),s.v(h),s.v(l),s.v(u),s.v(f),i=t.o,i.A=new P(.25,.55),i.B=new P(.75,.8),s.q(t),i},Fallout:function(t,i,n){t=s.s();var e=.5*ot;j(t,0*i,.5*n,!0),T(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),T(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n);var r=e=0;return j(t,(.3+e)*i,(.8+r)*n,!0,!0),t.lineTo((.5+e)*i,(.5+r)*n),t.lineTo((.1+e)*i,(.5+r)*n),t.lineTo((.3+e)*i,(.8+r)*n),e=.4,r=0,W(t),j(t,(.3+e)*i,(.8+r)*n,!0,!0),t.lineTo((.5+e)*i,(.5+r)*n),t.lineTo((.1+e)*i,(.5+r)*n),t.lineTo((.3+e)*i,(.8+r)*n),e=.2,r=-.3,W(t),j(t,(.3+e)*i,(.8+r)*n,!0,!0),t.lineTo((.5+e)*i,(.5+r)*n),t.lineTo((.1+e)*i,(.5+r)*n),t.lineTo((.3+e)*i,(.8+r)*n),W(t),i=t.o,i.ae=ji,s.q(t),i},IrritationHazard:function(t,i,n){return t=s.s(),j(t,.2*i,0*n,!0),t.lineTo(.5*i,.3*n),t.lineTo(.8*i,0*n),t.lineTo(1*i,.2*n),t.lineTo(.7*i,.5*n),t.lineTo(1*i,.8*n),t.lineTo(.8*i,1*n),t.lineTo(.5*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0*i,.8*n),t.lineTo(.3*i,.5*n),t.lineTo(0*i,.2*n),W(t),i=t.o,i.A=new P(.3,.3),i.B=new P(.7,.7),s.q(t),i},ElectricalHazard:function(t,i,n){return t=s.s(),j(t,.37*i,0*n,!0),t.lineTo(.5*i,.11*n),t.lineTo(.77*i,.04*n),t.lineTo(.33*i,.49*n),t.lineTo(1*i,.37*n),t.lineTo(.63*i,.86*n),t.lineTo(.77*i,.91*n),t.lineTo(.34*i,1*n),t.lineTo(.34*i,.78*n),t.lineTo(.44*i,.8*n),t.lineTo(.65*i,.56*n),t.lineTo(0*i,.68*n),W(t),i=t.o,s.q(t),i},FireHazard:function(t,i,n){return t=s.s(),j(t,.1*i,1*n,!0),T(t,-.25*i,.63*n,.45*i,.44*n,.29*i,0*n),T(t,.48*i,.17*n,.54*i,.35*n,.51*i,.42*n),T(t,.59*i,.29*n,.58*i,.28*n,.59*i,.18*n),T(t,.8*i,.34*n,.88*i,.43*n,.75*i,.6*n),T(t,.87*i,.48*n,.88*i,.43*n,.88*i,.31*n),T(t,1.17*i,.76*n,.82*i,.8*n,.9*i,1*n),W(t),i=t.o,i.A=new P(.05,.645),i.B=new P(.884,.908),s.q(t),i},BpmnActivityLoop:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,.65*i,1*n,!1),T(t,(1-e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),T(t,1*i,(.5-e+0)*n,(.5+e+0)*i,0*n,.5*i,0*n),T(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),T(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.35*i,.98*n),t.moveTo(.25*i,.8*n),t.lineTo(.35*i,1*n),t.lineTo(.1*i,1*n),i=t.o,s.q(t),i},BpmnActivityParallel:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},BpmnActivitySequential:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n),t.moveTo(0,1*n),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},BpmnActivityAdHoc:function(t,i,n){return t=s.s(),j(t,0,0,!1),j(t,1*i,1*n,!1),j(t,0,.5*n,!1),T(t,.2*i,.35*n,.3*i,.35*n,.5*i,.5*n),T(t,.7*i,.65*n,.8*i,.65*n,1*i,.5*n),i=t.o,s.q(t),i},BpmnActivityCompensation:function(t,i,n){return t=s.s(),j(t,0,.5*n,!0),t.lineTo(.5*i,0),t.lineTo(.5*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),t.lineTo(.5*i,1*n),W(t),i=t.o,s.q(t),i},BpmnTaskMessage:function(t,i,n){return t=s.s(),j(t,0,.2*n,!0),t.lineTo(1*i,.2*n),t.lineTo(1*i,.8*n),t.lineTo(0,.8*n),t.lineTo(0,.8*n),W(t),j(t,0,.2*n,!1),t.lineTo(.5*i,.5*n),t.lineTo(1*i,.2*n),t.fb(!1),i=t.o,s.q(t),i},BpmnTaskScript:function(t,i,n){return t=s.s(),j(t,.7*i,1*n,!0),t.lineTo(.3*i,1*n),T(t,.6*i,.5*n,0,.5*n,.3*i,0),t.lineTo(.7*i,0),T(t,.4*i,.5*n,1*i,.5*n,.7*i,1*n),W(t),j(t,.45*i,.73*n,!1),t.lineTo(.7*i,.73*n),t.moveTo(.38*i,.5*n),t.lineTo(.63*i,.5*n),t.moveTo(.31*i,.27*n),t.lineTo(.56*i,.27*n),t.fb(!1),i=t.o,s.q(t),i},BpmnTaskUser:function(t,i,n){t=s.s(),j(t,0,0,!1),j(t,.335*i,(1-.555)*n,!0),t.lineTo(.335*i,.595*n),t.lineTo(.665*i,.595*n),t.lineTo(.665*i,(1-.555)*n),T(t,.88*i,.46*n,.98*i,.54*n,1*i,.68*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.68*n),T(t,.02*i,.54*n,.12*i,.46*n,.335*i,(1-.555)*n),t.lineTo(.365*i,.405*n);var e=.5-.285,r=Math.PI/4,o=4*(1-Math.cos(r))/(3*Math.sin(r)),r=o*e,o=o*e;return T(t,(.5-(r+e)/2)*i,(e+(e+o)/2)*n,(.5-e)*i,(e+o)*n,(.5-e)*i,e*n),T(t,(.5-e)*i,(e-o)*n,(.5-r)*i,(e-e)*n,.5*i,(e-e)*n),T(t,(.5+r)*i,(e-e)*n,(.5+e)*i,(e-o)*n,(.5+e)*i,e*n),T(t,(.5+e)*i,(e+o)*n,(.5+(r+e)/2)*i,(e+(e+o)/2)*n,.635*i,.405*n),t.lineTo(.635*i,.405*n),t.lineTo(.665*i,(1-.555)*n),t.lineTo(.665*i,.595*n),t.lineTo(.335*i,.595*n),j(t,.2*i,1*n,!1),t.lineTo(.2*i,.8*n),j(t,.8*i,1*n,!1),t.lineTo(.8*i,.8*n),i=t.o,s.q(t),i},BpmnEventConditional:function(t,i,n){return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.9*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),W(t),j(t,.2*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.moveTo(.2*i,.4*n),t.lineTo(.8*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.2*i,.8*n),t.lineTo(.8*i,.8*n),t.fb(!1),i=t.o,s.q(t),i},BpmnEventError:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(.33*i,0),t.lineTo(.66*i,.5*n),t.lineTo(1*i,0),t.lineTo(.66*i,1*n),t.lineTo(.33*i,.5*n),W(t),i=t.o,s.q(t),i},BpmnEventEscalation:function(t,i,n){return t=s.s(),j(t,0,0,!1),j(t,1*i,1*n,!1),j(t,.1*i,1*n,!0),t.lineTo(.5*i,0),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},BpmnEventTimer:function(t,i,n){t=s.s();var e=.5*ot;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,.5*i,0,!1),t.lineTo(.5*i,.15*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,.85*n),t.moveTo(0,.5*n),t.lineTo(.15*i,.5*n),t.moveTo(1*i,.5*n),t.lineTo(.85*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.58*i,.1*n),t.moveTo(.5*i,.5*n),t.lineTo(.78*i,.54*n),t.fb(!1),i=t.o,i.ae=ji,s.q(t),i}},tc;for(tc in xr)xr[tc.toLowerCase()]=tc;var ip={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function f1(t){var i=jr[t];if(i===void 0){var n=t.toLowerCase();if(n==="none")return"None";if(i=jr[n],i===void 0){var e=null,r;for(r in ip)if(r.toLowerCase()===n){e=r;break}if(e!==null)return t=Gl(ip[e],!1),jr[e]=t,n!==e&&(jr[n]=e),e}}return typeof i=="string"?i:i instanceof et?t:null}function L(t){A.call(this,t),this.Q=2408959,this.Bl=this.Ci="",this.dt=this.at=this.mt=this.js=null,this.ot="",this.Ai=this.Vr=this.nt=this.gn=null,this.ct="",this.np=null,this.bt=Hv,this.et="",this.op=null,this.Ld="",this.iw=this.hr=this.ml=null,this.Xi=new F(NaN,NaN).freeze(),this.os="",this.El=null,this.ps=gi,this.xs=px,this.qs=yx,this.Br=null,this.ks=a1,this.jn=ax,this.hn="gray",this.Eg=4,this.uD=-1,this.Mt=NaN,this.UG=new O,this.Vm=null,this.lk=NaN}s.La(L,A),s.ga("Part",L),L.prototype.cloneProtected=function(t){A.prototype.cloneProtected.call(this,t),t.Q=this.Q&-4097|49152,t.Ci=this.Ci,t.Bl=this.Bl,t.js=this.js,t.mt=this.mt,t.at=this.at,t.dt=this.dt,t.ot=this.ot,t.nt=this.nt,t.Vr=this.Vr,t.Ai=null,t.ct=this.ct,t.bt=this.bt.S(),t.et=this.et,t.Ld=this.Ld,t.hr=this.hr,t.Xi.assign(this.Xi),t.os=this.os,t.ps=this.ps.S(),t.xs=this.xs.S(),t.qs=this.qs.S(),t.Br=this.Br,t.ks=this.ks,t.jn=this.jn.S(),t.hn=this.hn,t.Eg=this.Eg,t.Mt=this.Mt},L.prototype.qi=function(t){A.prototype.qi.call(this,t),t.Rk(),t.gn=null,t.np=null,t.op=null,t.El=null,t.Vm=null},L.prototype.toString=function(){var t=s.pf(Object.getPrototypeOf(this))+"#"+s.Pd(this);return this.data!==null&&(t+="("+We(this.data)+")"),t},L.LayoutNone=0;var au;L.LayoutAdded=au=1;var pu;L.LayoutRemoved=pu=2,L.LayoutShown=4,L.LayoutHidden=8,L.LayoutNodeSized=16;var ic;L.LayoutGroupLayout=ic=32,L.LayoutNodeReplaced=64;var a1;L.LayoutStandard=a1=au|pu|28|ic|64,L.LayoutAll=16777215,L.prototype.$n=function(t,i,n,e,r,o,h){var l=this.g;l!==null&&(t===Li&&i==="elements"?r instanceof A?lh(r,function(u){dy(l,u),hg(l,u)}):r instanceof oi&&my(l,r):t===Ai&&i==="elements"&&(r instanceof A?lh(r,function(u){gy(l,u),lg(l,u)}):r instanceof oi&&xy(l,r)),l.bd(t,i,n,e,r,o,h))},L.prototype.updateTargetBindings=L.prototype.Jb=function(t){if(A.prototype.Jb.call(this,t),this.data!==null){t=this.xa.n;for(var i=t.length,n=0;n<i;n++){var e=t[n];e instanceof A&&lh(e,function(r){r.data!==null&&r.Jb()})}}},L.prototype.updateRelationshipsFromData=function(){var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;n instanceof K&&(t=n.En(t),i=i.ZH(t),i===null||i instanceof Z)&&(this.Ca=i)}}},s.u(L,{key:"key"},function(){var t=this.g;return t===null?void 0:t.$.qb(this.data)},{configurable:!0}),s.u(L,{ex:"adornments"},function(){return this.Ai===null?fr:this.Ai.MF}),L.prototype.findAdornment=L.prototype.Yp=function(t){var i=this.Ai;return i===null?null:i.ka(t)},L.prototype.addAdornment=L.prototype.Ql=function(t,i){if(i!==null){var n=null,e=this.Ai;if(e!==null&&(n=e.ka(t)),n!==i){if(n!==null){var r=n.g;r!==null&&r.remove(n)}e===null&&(this.Ai=e=new tt("string",vt)),i.Ci!==t&&(i.kd=t),e.add(t,i),n=this.g,n!==null&&(n.add(i),i.data=this.data)}}},L.prototype.removeAdornment=L.prototype.Ij=function(t){var i=this.Ai;if(i!==null){var n=i.ka(t);if(n!==null){var e=n.g;e!==null&&e.remove(n)}i.remove(t),i.count===0&&(this.Ai=null)}},L.prototype.clearAdornments=L.prototype.Ut=function(){var t=this.Ai;if(t!==null){for(var i=s.Za(),t=t.i;t.next();)i.push(t.key);for(var t=i.length,n=0;n<t;n++)this.Ij(i[n]);s.ra(i)}},L.prototype.updateAdornments=function(){var t=this.g;if(t!==null){t:{if(this.jb&&this.FJ){var i=this.Fq;if(i!==null&&this.U.H()&&this.isVisible()&&i.Cj()&&i.U.H()){var n=this.Yp("Selection");if(n===null){if(n=this.GJ,n===null&&(n=this instanceof S?t.OI:this instanceof Z?t.mI:t.hJ),!(n instanceof vt))break t;be(n),n=n.copy(),n!==null&&(this instanceof S&&this.Fq===this.path&&(n.type=Mo),n.ub=i)}if(n!==null){var e=n.placeholder;if(e!==null){var r=i.vj(),o=0;i instanceof Y&&(o=i.mb);var h=s.vm();h.m((i.Ja.width+o)*r,(i.Ja.height+o)*r),e.Da=h,s.Lk(h)}n.angle=i.dm(),n.type!==Mo&&(e=s.K(),n.location=i.Ya(gi,e),s.v(e)),this.Ql("Selection",n);break t}}}this.Ij("Selection")}for(Gx(this,t),t=this.ex;t.next();)i=t.value,i.Jb(),i.I()}};function Gx(t,i){i.Va.gf.each(function(n){n.isEnabled&&n.updateAdornments(t)}),i.Va.updateAdornments(t)}s.u(L,{layer:"layer"},function(){return this.iw}),s.u(L,{g:"diagram"},function(){var t=this.iw;return t!==null?t.g:null}),s.defineProperty(L,{bg:"layerName"},function(){return this.Bl},function(t){var i=this.Bl;if(i!==t){s.j(t,"string",L,"layerName");var n=this.g;if((n===null||n.cu(t)!==null&&!n.Sq)&&(this.Bl=t,n!==null&&n.Gc(),this.h("layerName",i,t),i=this.layer,i!==null&&i.name!==t&&(n=i.g,n!==null&&(t=n.cu(t),t!==null&&t!==i)))){var e=i.rf(-1,this,!0);if(0<=e&&n.bd(Ai,"parts",i,this,null,e,!0),e=t.eq(99999999,this,!0),i.visible!==t.visible&&this.Dd(t.visible),0<=e&&n.bd(Li,"parts",t,null,this,!0,e),e=this.Tx,e!==null){var r=n.Ua;n.Ua=!0,e(this,i,t),n.Ua=r}}}}),s.defineProperty(L,{Tx:"layerChanged"},function(){return this.js},function(t){var i=this.js;i!==t&&(t!==null&&s.j(t,"function",L,"layerChanged"),this.js=t,this.h("layerChanged",i,t))}),s.defineProperty(L,{mo:"zOrder"},function(){return this.Mt},function(t){var i=this.Mt;if(i!==t){s.j(t,"number",L,"zOrder"),this.Mt=t;var n=this.layer;n!==null&&Na(n,-1,this),this.h("zOrder",i,t),t=this.g,t!==null&&t.oa()}}),L.prototype.invalidateAdornments=L.prototype.Sd=function(){var t=this.g;t!==null&&(ds(t),(this.Q&16384)===0&&(ec(this,!0),t.ye()))};function np(t){if(ws(t)===!1){var i=t.g;i!==null&&(i.vg.add(t),i.ye()),rc(t,!0),t.Ri()}}function p1(t){if(t.Q|=2097152,ws(t)!==!1){var i=t.position,n=t.location;n.H()&&i.H()||c1(t,i,n);var n=t.pc,e=n.copy();n.Qa(),n.x=i.x,n.y=i.y,n.freeze(),t.ey(e,n),rc(t,!1)}}s.u(L,{cg:"locationObject"},function(){if(this.El===null){var t=this.cB;t!==""?(t=this.Cd(t),this.El=t!==null?t:this):this.El=this instanceof vt?this.type!==Mo&&this.placeholder!==null?this.placeholder:this:this}return this.El.visible?this.El:this}),s.defineProperty(L,{$I:"minLocation"},function(){return this.xs},function(t){var i=this.xs;i.L(t)||(this.xs=t=t.S(),this.h("minLocation",i,t))}),s.defineProperty(L,{UI:"maxLocation"},function(){return this.qs},function(t){var i=this.qs;i.L(t)||(this.qs=t=t.S(),this.h("maxLocation",i,t))}),s.defineProperty(L,{cB:"locationObjectName"},function(){return this.os},function(t){var i=this.os;i!==t&&(this.os=t,this.El=null,this.I(),this.h("locationObjectName",i,t))}),s.defineProperty(L,{Gf:"locationSpot"},function(){return this.ps},function(t){var i=this.ps;i.L(t)||(this.ps=t=t.S(),this.I(),this.h("locationSpot",i,t))}),L.prototype.move=function(t){this.position=t},L.prototype.moveTo=L.prototype.moveTo=function(t,i){var n=s.wb(t,i);this.move(n),s.v(n)},L.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return t!==null&&!t.visible?!1:(t=this.g,t!==null&&(t=t.Ka,t.Qe&&(t=t.Xm.ka(this),t!==null&&t.ny))?!0:(t=this.Ca,!!(t===null||t.$c&&t.isVisible())))},L.prototype.Dd=function(t){var i=this.g;t?(this.J(4),this.Sd(),i!==null&&i.vg.add(this)):(this.J(8),this.Ut()),this.Rk(),i!==null&&(i.Gc(),i.oa())},L.prototype.findObject=L.prototype.Cd=function(t){if(this.name===t)return this;var i=this.Vm;if(i===null&&(this.Vm=i=new Pi),i[t]!==void 0)return i[t];for(var n=this.xa.n,e=n.length,r=0;r<e;r++){var o=n[r];if(o.name===t)return i[t]=o;if(o instanceof A){if(o.hk===null&&o.xg===null){if(o=o.Cd(t),o!==null)return i[t]=o}else if(Pf(o)&&(o=o.xa.first(),o!==null&&o.name===t))return i[t]=o}}return i[t]=null};function Wo(t,i,n,e){e===void 0&&(e=new F),n=n.Ud()?Tt:n;var r=i.Ja;if(e.m(r.width*n.x+n.offsetX,r.height*n.y+n.offsetY),i===null||i===t)return e;for(i.transform.nb(e),i=i.R;i!==null&&i!==t;)i.transform.nb(e),i=i.R;return t.Wi.nb(e),e.offset(-t.ud.x,-t.ud.y),e}L.prototype.ensureBounds=L.prototype.Ne=function(){xs(this)===!0&&(this instanceof Z&&this.hc.each(function(t){t.Ne()}),Gt(this,1/0,1/0)),this.jc()};function Wh(t,i){var n=t.UG,e;isNaN(t.lk)&&(t.lk=Kg(t)),e=t.lk;var r=2*e;if(!t.lm)return n.m(i.x-1-e,i.y-1-e,i.width+2+r,i.height+2+r),n;e=i.x;var r=i.y,l=i.width,u=i.height,o=t.shadowBlur,h=t.LJ,l=l+o,u=u+o;return e-=o/2,r-=o/2,0<h.x?l+=h.x:(e+=h.x,l-=h.x),0<h.y?u+=h.y:(r+=h.y,u-=h.y),n.m(e-1,r-1,l+2,u+2),n}L.prototype.jc=function(){if(this.Ri(),$e(this)===!1)p1(this);else{var t=this.pc,i=s.vf();i.assign(t),t.Qa();var n=To(this);this.pj(0,0,this.ud.width,this.ud.height);var e=this.position;c1(this,e,this.location),t.x=e.x,t.y=e.y,t.freeze(),this.ey(i,t),sh(this,!1),i.L(t)?this.If(n):!this.he()||$(i.width,t.width)&&$(i.height,t.height)||0<=this.uD&&this.J(16),s.Bb(i),rc(this,!1)}},L.prototype.ey=function(t,i){var n=this.g;if(n!==null){var e=!1;if(n.ck===!1&&t.H()){var r=s.vf();r.assign(n.Nd),r.BG(n.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&i.x>r.x&&i.y>r.y&&i.right<r.right&&i.bottom<r.bottom&&(e=!0),s.Bb(r)}(this.Q&65536)===0&&t.L(i)||g1(this,e,n),n.oa(),g0(t,i)||(this instanceof I&&!n.ja.lb&&this.ag(),this.Rk())}},s.defineProperty(L,{location:"location"},function(){return this.Xi},function(t){var i=t.x,n=t.y,e=this.Xi,r=e.x,o=e.y;(r===i||isNaN(r)&&isNaN(i))&&(o===n||isNaN(o)&&isNaN(n))||(t=t.S(),i=t,this instanceof S?i=!1:(this.Xi=i,this.Q|=2097152,$e(this)===!1&&(np(this),n=this.ab,n.H()&&(r=n.copy(),n.m(n.x+(i.x-e.x),n.y+(i.y-e.y)),y1(this,this.g,n,r),this.h("position",r,n))),i=!0),i&&this.h("location",e,t))}),B=L.prototype,B.GB=function(t,i){if(this instanceof S||!t.H())return!1;var n=this.g;if(n!==null&&(y1(this,n,t,i),n.ja.lb===!0))return!0;if(this.ab=t,this.Q&=-2097153,n=this.Xi,n.H()){var e=n.copy();n.m(n.x+(t.x-i.x),n.y+(t.y-i.y)),this.h("location",e,n)}return ws(this)===!1&&$e(this)===!1&&(np(this),p1(this)),!0};function y1(t,i,n,e){i===null||t instanceof vt||(i=i.Ka,i.sc&&ih(i,t,"position",e.copy(),n.copy(),!1))}B.Ay=function(t,i){var n=this.Xi,e=this.ab;ws(this)||$e(this)?n.m(NaN,NaN):n.m(n.x+t-e.x,n.y+i-e.y),e.m(t,i),np(this)},B.HB=function(){this.Q&=-2097153,np(this)};function c1(t,i,n){var e=s.K(),r=t.Gf,o=t.cg;r.Ud()&&s.k("determineOffset: Part's locationSpot must be real: "+r.toString());var h=o.Ja,l=o instanceof Y?o.mb:0;if(e.bv(0,0,h.width+l,h.height+l,r),o!==t)for(e.offset(-l/2,-l/2),o.transform.nb(e),r=o.R;r!==null&&r!==t;)r.transform.nb(e),r=r.R;t.Wi.nb(e),e.offset(-t.ud.x,-t.ud.y),r=t.g,o=n.H(),h=i.H(),o&&h?(t.Q&2097152)!==0?v1(t,i,n,r,e):d1(t,i,n,r,e):o?v1(t,i,n,r,e):h&&d1(t,i,n,r,e),t.Q|=2097152,s.v(e),t.Ri()}function v1(t,i,n,e,r){var o=i.x,h=i.y;i.m(n.x-r.x,n.y-r.y),e!==null&&(n=e.Ka,(r=n.dk)||!n.sc||t instanceof vt||ih(n,t,"position",new F(o,h),i,!1),r||i.x===o&&i.y===h||(n=e.gb,e.gb=!0,t.h("position",new F(o,h),i),e.gb=n))}function d1(t,i,n,e,r){var o=n.copy();n.m(i.x+r.x,i.y+r.y),n.L(o)||e===null||(i=e.gb,e.gb=!0,t.h("location",o,n),e.gb=i)}function g1(t,i,n){oc(t,!1),t instanceof I&&n.SA(t),t.layer.Hc||i||n.Gc(),i=t.pc;var e=n.sb;e.H()?To(t)?(Bv(i,e)||t.If(!1),t.updateAdornments()):i.$f(e)?(t.If(!0),t.updateAdornments()):t.Sd():n.xl=!0}B.km=function(){return!0};function Sf(t,i){var n=t.pc;if(n.width!==0&&n.height!==0&&!isNaN(n.x)&&!isNaN(n.y)&&t.isVisible()){var e=t.transform;t.cc!==null&&(Zn(t,i,t.cc,!0,!0),i.fillRect(n.x,n.y,n.width,n.height)),t.cc===null&&t.Gb===null&&(Zn(t,i,"rgba(0,0,0,0.4)",!0,!1),i.fillRect(n.x,n.y,n.width,n.height)),t.Gb!==null&&(e.yu()||i.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.Ja,Zn(t,i,t.Gb,!0,!1),i.fillRect(0,0,n.width,n.height),e.yu()||(n=1/(e.m11*e.m22-e.m12*e.m21),i.transform(e.m22*n,-e.m12*n,-e.m21*n,e.m11*n,n*(e.m21*e.dy-e.m22*e.dx),n*(e.m12*e.dx-e.m11*e.dy))))}}B.he=function(){return!0},B.yj=function(){return!0},s.defineProperty(L,{kd:"category"},function(){return this.Ci},function(t){var i=this.Ci;if(i!==t){s.j(t,"string",L,"category");var n=this.g,e=this.data,r=null;if(n!==null&&e!==null&&!(this instanceof vt)){var o=n.$.ja;o.isEnabled&&!o.lb&&(r=this.clone(),r.xa.Pc(this.xa))}this.Ci=t,this.h("category",i,t),n===null||e===null||this instanceof vt?this instanceof vt&&(r=this.$e,r!==null&&(t=r.Ai,t!==null&&t.remove(i),r.Ql(this.kd,this))):(o=n.$,o.ja.lb||(this instanceof S?(o instanceof K?o.sG(e,t):o instanceof Lt&&o.JJ(e,t),n=Ba(n,t),n!==null&&(be(n),n=n.copy(),n!==null&&nc(this,n,i,t))):(o!==null&&o.xy(e,t),n=pg(n,e,t),n!==null&&(be(n),n=n.copy(),n===null||n instanceof S||(n.location=this.location,nc(this,n,i,t)))),r!==null&&(i=this.clone(),i.xa.Pc(this.xa),this.h("self",r,i))))}}),s.defineProperty(L,{self:"self"},function(){return this},function(t){nc(this,t,this.kd,t.kd)});var m1=!1;function nc(t,i,n,e){i.constructor===t.constructor||m1||(m1=!0,s.trace('Should not change the class of the Part when changing category from "'+n+'" to "'+e+'"'),s.trace("  Old class: "+s.pf(t)+", new class: "+s.pf(i)+", part: "+t.toString())),t.Ut();var r=t.data;n=t.bg;var o=t.jb,h=t.Og,u=!0,f=!0,a=!1;if(t instanceof I)var l=t,u=l.Bj,f=l.wc,a=l.Mq;i.qi(t),i.cloneProtected(t),t.Ci=e,t.I(),t.oa(),i=t.g,e=!0,i!==null&&(e=i.gb,i.gb=!0),t.Zd=r,r!==null&&t.Jb(),i!==null&&(i.gb=e),r=t.bg,r!==n&&(t.Bl=n,t.bg=r),t instanceof I&&(l=t,l.Bj=u,l.wc=f,l.Mq=a,l.he()&&l.J(64)),t.jb=o,t.Og=h}L.prototype.canCopy=function(){if(!this.LH)return!1;var t=this.layer;return t===null?!0:t.Ck?(t=t.g,t===null?!0:!!t.Ck):!1},L.prototype.canDelete=function(){if(!this.PH)return!1;var t=this.layer;return t===null?!0:t.on?(t=t.g,t===null?!0:!!t.on):!1},L.prototype.canEdit=function(){if(!this.RJ)return!1;var t=this.layer;return t===null?!0:t.jx?(t=t.g,t===null?!0:!!t.jx):!1},L.prototype.canGroup=function(){if(!this.nI)return!1;var t=this.layer;return t===null?!0:t.gx?(t=t.g,t===null?!0:!!t.gx):!1},L.prototype.canMove=function(){if(!this.eJ)return!1;var t=this.layer;return t===null?!0:t.Tl?(t=t.g,t===null?!0:!!t.Tl):!1},L.prototype.canReshape=function(){if(!this.tJ)return!1;var t=this.layer;return t===null?!0:t.hx?(t=t.g,t===null?!0:!!t.hx):!1},L.prototype.canResize=function(){if(!this.uJ)return!1;var t=this.layer;return t===null?!0:t.Tt?(t=t.g,t===null?!0:!!t.Tt):!1},L.prototype.canRotate=function(){if(!this.xJ)return!1;var t=this.layer;return t===null?!0:t.ix?(t=t.g,t===null?!0:!!t.ix):!1},L.prototype.canSelect=function(){if(!this.pm)return!1;var t=this.layer;return t===null?!0:t.Bf?(t=t.g,t===null?!0:!!t.Bf):!1},s.defineProperty(L,{LH:"copyable"},function(){return(this.Q&1)!==0},function(t){var i=(this.Q&1)!==0;i!==t&&(this.Q^=1,this.h("copyable",i,t))}),s.defineProperty(L,{PH:"deletable"},function(){return(this.Q&2)!==0},function(t){var i=(this.Q&2)!==0;i!==t&&(this.Q^=2,this.h("deletable",i,t))}),s.defineProperty(L,{RJ:"textEditable"},function(){return(this.Q&4)!==0},function(t){var i=(this.Q&4)!==0;i!==t&&(this.Q^=4,this.h("textEditable",i,t),this.Sd())}),s.defineProperty(L,{nI:"groupable"},function(){return(this.Q&8)!==0},function(t){var i=(this.Q&8)!==0;i!==t&&(this.Q^=8,this.h("groupable",i,t))}),s.defineProperty(L,{eJ:"movable"},function(){return(this.Q&16)!==0},function(t){var i=(this.Q&16)!==0;i!==t&&(this.Q^=16,this.h("movable",i,t))}),s.defineProperty(L,{FJ:"selectionAdorned"},function(){return(this.Q&32)!==0},function(t){var i=(this.Q&32)!==0;i!==t&&(this.Q^=32,this.h("selectionAdorned",i,t),this.Sd())}),s.defineProperty(L,{XA:"isInDocumentBounds"},function(){return(this.Q&64)!==0},function(t){var i=(this.Q&64)!==0;if(i!==t){this.Q^=64;var n=this.g;n!==null&&n.Gc(),this.h("isInDocumentBounds",i,t)}}),s.defineProperty(L,{HF:"isLayoutPositioned"},function(){return(this.Q&128)!==0},function(t){var i=(this.Q&128)!==0;i!==t&&(this.Q^=128,this.h("isLayoutPositioned",i,t),this.J(t?4:8))}),s.defineProperty(L,{pm:"selectable"},function(){return(this.Q&256)!==0},function(t){var i=(this.Q&256)!==0;i!==t&&(this.Q^=256,this.h("selectable",i,t),this.Sd())}),s.defineProperty(L,{tJ:"reshapable"},function(){return(this.Q&512)!==0},function(t){var i=(this.Q&512)!==0;i!==t&&(this.Q^=512,this.h("reshapable",i,t),this.Sd())}),s.defineProperty(L,{uJ:"resizable"},function(){return(this.Q&1024)!==0},function(t){var i=(this.Q&1024)!==0;i!==t&&(this.Q^=1024,this.h("resizable",i,t),this.Sd())}),s.defineProperty(L,{xJ:"rotatable"},function(){return(this.Q&2048)!==0},function(t){var i=(this.Q&2048)!==0;i!==t&&(this.Q^=2048,this.h("rotatable",i,t),this.Sd())}),s.defineProperty(L,{jb:"isSelected"},function(){return(this.Q&4096)!==0},function(t){var i=(this.Q&4096)!==0;if(i!==t){var n=this.g;if(!t||this.canSelect()&&!(n!==null&&n.selection.count>=n.VI)){this.Q^=4096;var e=!1;if(n!==null){e=n.gb,n.gb=!0;var r=n.selection;r.Qa(),t?r.add(this):r.remove(this),r.freeze()}this.h("isSelected",i,t),this.Sd(),t=this.HJ,t!==null&&t(this),n!==null&&(n.ye(),n.gb=e)}}}),s.defineProperty(L,{Og:"isHighlighted"},function(){return(this.Q&524288)!==0},function(t){var i=(this.Q&524288)!==0;if(i!==t){this.Q^=524288;var n=this.g;n!==null&&(n=n.gm,n.Qa(),t?n.add(this):n.remove(this),n.freeze()),this.h("isHighlighted",i,t),this.oa(),t=this.qI,t!==null&&t(this)}}),s.defineProperty(L,{lm:"isShadowed"},function(){return(this.Q&8192)!==0},function(t){var i=(this.Q&8192)!==0;i!==t&&(this.Q^=8192,this.h("isShadowed",i,t),this.oa())});function ec(t,i){t.Q=i?t.Q|16384:t.Q&-16385}function ws(t){return(t.Q&32768)!==0}function rc(t,i){t.Q=i?t.Q|32768:t.Q&-32769}function oc(t,i){t.Q=i?t.Q|65536:t.Q&-65537}function To(t){return(t.Q&131072)!==0}L.prototype.If=function(t){this.Q=t?this.Q|131072:this.Q&-131073};function ep(t,i){t.Q=i?t.Q|1048576:t.Q&-1048577}s.defineProperty(L,{zF:"isAnimated"},function(){return(this.Q&262144)!==0},function(t){var i=(this.Q&262144)!==0;i!==t&&(this.Q^=262144,this.h("isAnimated",i,t))}),s.defineProperty(L,{qI:"highlightedChanged"},function(){return this.Vr},function(t){var i=this.Vr;i!==t&&(t!==null&&s.j(t,"function",L,"highlightedChanged"),this.Vr=t,this.h("highlightedChanged",i,t))}),s.defineProperty(L,{BB:"selectionObjectName"},function(){return this.ot},function(t){var i=this.ot;i!==t&&(this.ot=t,this.gn=null,this.h("selectionObjectName",i,t))}),s.defineProperty(L,{GJ:"selectionAdornmentTemplate"},function(){return this.mt},function(t){var i=this.mt;i!==t&&(this.mt=t,this.h("selectionAdornmentTemplate",i,t))}),s.u(L,{Fq:"selectionObject"},function(){if(this.gn===null){var t=this.BB;t!==null&&t!==""?(t=this.Cd(t),this.gn=t!==null?t:this):this instanceof S?(t=this.path,this.gn=t!==null?t:this):this.gn=this}return this.gn}),s.defineProperty(L,{HJ:"selectionChanged"},function(){return this.nt},function(t){var i=this.nt;i!==t&&(t!==null&&s.j(t,"function",L,"selectionChanged"),this.nt=t,this.h("selectionChanged",i,t))}),s.defineProperty(L,{iG:"resizeAdornmentTemplate"},function(){return this.at},function(t){var i=this.at;i!==t&&(this.at=t,this.h("resizeAdornmentTemplate",i,t))}),s.defineProperty(L,{kG:"resizeObjectName"},function(){return this.ct},function(t){var i=this.ct;i!==t&&(this.ct=t,this.np=null,this.h("resizeObjectName",i,t))}),s.u(L,{jG:"resizeObject"},function(){if(this.np===null){var t=this.kG;t!==null&&t!==""?(t=this.Cd(t),this.np=t!==null?t:this):this.np=this}return this.np}),s.defineProperty(L,{vJ:"resizeCellSize"},function(){return this.bt},function(t){var i=this.bt;i.L(t)||(this.bt=t=t.S(),this.h("resizeCellSize",i,t))}),s.defineProperty(L,{yJ:"rotateAdornmentTemplate"},function(){return this.dt},function(t){var i=this.dt;i!==t&&(this.dt=t,this.h("rotateAdornmentTemplate",i,t))}),s.defineProperty(L,{zJ:"rotateObjectName"},function(){return this.et},function(t){var i=this.et;i!==t&&(this.et=t,this.op=null,this.h("rotateObjectName",i,t))}),s.u(L,{xB:"rotateObject"},function(){if(this.op===null){var t=this.zJ;t!==null&&t!==""?(t=this.Cd(t),this.op=t!==null?t:this):this.op=this}return this.op}),s.defineProperty(L,{text:"text"},function(){return this.Ld},function(t){var i=this.Ld;i!==t&&(this.Ld=t,this.h("text",i,t))}),s.defineProperty(L,{Ca:"containingGroup"},function(){return this.ml},function(t){if(this.he()){var i=this.ml;if(i!==t){t===null||this!==t&&!t.Ah(this)||(this===t&&s.k("Cannot make a Group a member of itself: "+this.toString()),s.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.J(pu);var n=this.g;if(i!==null?Sc(i,this):this instanceof Z&&n!==null&&n.Nl.remove(this),this.ml=t,t!==null?kc(t,this):this instanceof Z&&n!==null&&n.Nl.add(this),this.J(au),n!==null){var e=this.data,r=n.$;e!==null&&r instanceof K&&r.EB(e,r.qb(t!==null?t.data:null))}if(e=this.NE,e!==null&&(r=!0,n!==null&&(r=n.Ua,n.Ua=!0),e(this,i,t),n!==null&&(n.Ua=r)),this instanceof Z){for(n=new R(L),cs(n,this,!0,0,!0),n=n.i;n.next();)if(e=n.value,e instanceof I)for(e=e.je;e.next();)vu(e.value)}if(this instanceof I){for(e=this.je;e.next();)vu(e.value);n=this.Xb,n!==null&&vu(n)}this.h("containingGroup",i,t),t!==null&&(i=t.layer,i!==null&&Na(i,-1,t))}}else s.k("cannot set the Part.containingGroup of a Link or Adornment")}),B=L.prototype,B.Rk=function(){var t=this.Ca;t!==null&&(t.I(),t.Lb!==null&&t.Lb.I(),t.ag())},B.oa=function(){var t=this.g;t!==null&&!$e(this)&&!ws(this)&&this.isVisible()&&this.pc.H()&&t.oa(Wh(this,this.pc))},B.I=function(){A.prototype.I.call(this);var t=this.g;t!==null&&(t.vg.add(this),this instanceof I&&this.Xb!==null&&xf(this.Xb),t.ye(!0))},B.qu=function(t){t||(t=this.ml,t!==null&&kc(t,this))},B.ru=function(t){t||(t=this.ml,t!==null&&Sc(t,this))},B.An=function(){var t=this.data;if(t!==null){var i=this.g;i!==null&&(i=i.$,i!==null&&i.qy(t))}},s.defineProperty(L,{NE:"containingGroupChanged"},function(){return this.hr},function(t){var i=this.hr;i!==t&&(t!==null&&s.j(t,"function",L,"containingGroupChanged"),this.hr=t,this.h("containingGroupChanged",i,t))}),L.prototype.findSubGraphLevel=function(){return sc(this,this)};function sc(t,i){var n=i.Ca;return n!==null?1+sc(t,n):i instanceof I&&(n=i.Xb,n!==null)?sc(t,n):0}L.prototype.findTopLevelPart=function(){return hc(this,this)};function hc(t,i){var n=i.Ca;return n!==null||i instanceof I&&(n=i.Xb,n!==null)?hc(t,n):i}s.u(L,{jq:"isTopLevel"},function(){return!(this.Ca!==null||this instanceof I&&this.Xb!==null)}),L.prototype.isMemberOf=L.prototype.Ah=function(t){return t instanceof Z?lc(this,this,t):!1};function lc(t,i,n){if(i===n||n===null)return!1;var e=i.Ca;return e===null||e!==n&&!lc(t,e,n)?i instanceof I&&(i=i.Xb,i!==null)?lc(t,i,n):!1:!0}L.prototype.findCommonContainingGroup=L.prototype.XH=function(t){if(t===null)return null;if(this===t)return this.Ca;for(var i=this;i!==null;){if(i instanceof Z&&ep(i,!0),i instanceof I){var n=i.Xb;n!==null&&(i=n)}i=i.Ca}for(var e=null,i=t;i!==null;){if((i.Q&1048576)!==0){e=i;break}i instanceof I&&(n=i.Xb,n!==null&&(i=n)),i=i.Ca}for(i=this;i!==null;)i instanceof Z&&ep(i,!1),i instanceof I&&(n=i.Xb,n!==null&&(i=n)),i=i.Ca;return e},s.defineProperty(L,{KI:"layoutConditions"},function(){return this.ks},function(t){var i=this.ks;i!==t&&(this.ks=t,this.h("layoutConditions",i,t))}),L.prototype.canLayout=function(){if(!this.HF||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.Hc||this instanceof I&&this.Df)},L.prototype.invalidateLayout=L.prototype.J=function(t){t===void 0&&(t=16777215);var i;if(this.HF&&(t&this.KI)!==0?(i=this.layer,i!==null&&i.Hc||this instanceof I&&this.Df?i=!1:(i=this.g,i=!(i!==null&&i.ja.lb))):i=!1,i)if(i=this.ml,i!==null){var n=i.Ub;n!==null?n.J():i.J(t)}else t=this.g,t!==null&&(n=t.Ub,n!==null&&n.J())};function x1(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.Hc)):!1}s.defineProperty(L,{xx:"dragComputation"},function(){return this.Br},function(t){var i=this.Br;i!==t&&(t!==null&&s.j(t,"function",L,"dragComputation"),this.Br=t,this.h("dragComputation",i,t))}),s.defineProperty(L,{LJ:"shadowOffset"},function(){return this.jn},function(t){var i=this.jn;i.L(t)||(this.jn=t=t.S(),this.oa(),this.h("shadowOffset",i,t))}),s.defineProperty(L,{shadowColor:"shadowColor"},function(){return this.hn},function(t){var i=this.hn;i!==t&&(this.hn=t,this.oa(),this.h("shadowColor",i,t))}),s.defineProperty(L,{shadowBlur:"shadowBlur"},function(){return this.Eg},function(t){var i=this.Eg;i!==t&&(this.Eg=t,this.oa(),this.h("shadowBlur",i,t))});function vt(t){arguments.length===0?L.call(this,Ja):L.call(this,t),this.Q&=-257,this.Bl="Adornment",this.Kc=null,this.ED=0,this.rE=!1,this.Lb=this.$g=null}s.La(vt,L),s.ga("Adornment",vt),vt.prototype.toString=function(){var t=this.$e;return"Adornment("+this.kd+")"+(t!==null?t.toString():"")},vt.prototype.updateRelationshipsFromData=function(){},vt.prototype.Hu=function(t){var i=this.ub.W,n=this.ub;if(i instanceof S&&n instanceof Y){var e=i.path,n=e.of;for(i.Hu(t),n=e.of,t=this.xa.n,i=t.length,e=0;e<i;e++){var r=t[e];r.ff&&r instanceof Y&&(r.Sa=n)}}},s.u(vt,{placeholder:"placeholder"},function(){return this.Lb}),s.defineProperty(vt,{ub:"adornedObject"},function(){return this.Kc},function(t){var i=this.$e,n=null;t!==null&&(n=t.W),i===null||t!==null&&i===n||i.Ij(this.kd),this.Kc=t,n!==null&&n.Ql(this.kd,this)}),s.u(vt,{$e:"adornedPart"},function(){var t=this.Kc;return t!==null?t.W:null}),vt.prototype.km=function(){var t=this.Kc;return t===null?!0:(t=t.W,t===null||!$e(t))},vt.prototype.he=function(){return!1},s.u(vt,{Ca:"containingGroup"},function(){return null}),vt.prototype.$n=function(t,i,n,e,r,o,h){if(t===Li&&i==="elements")if(r instanceof en){var l=r;this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else r instanceof A&&(l=r.bu(function(u){return u instanceof en}),l instanceof en&&(this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else t===Ai&&i==="elements"&&this.Lb!==null&&(e===this.Lb?this.Lb=null:e instanceof A&&this.Lb.jm(e)&&(this.Lb=null));L.prototype.$n.call(this,t,i,n,e,r,o,h)},vt.prototype.updateAdornments=function(){},vt.prototype.An=function(){};function I(t){L.call(this,t),this.ya=13,this.rc=new z(S),this.Ht=this.Yo=this.Dl=this.ms=this.ls=null,this.ar=fx,this.Ie=this.Mh=null,this.Xs=uc,this.Ak=!1}s.La(I,L),s.ga("Node",I),I.prototype.cloneProtected=function(t){L.prototype.cloneProtected.call(this,t),t.ya=this.ya,t.ya=this.ya&-17,t.ls=this.ls,t.ms=this.ms,t.Dl=this.Dl,t.Ht=this.Ht,t.ar=this.ar.S(),t.Xs=this.Xs},I.prototype.qi=function(t){L.prototype.qi.call(this,t),t.ag(),t.Mh=this.Mh,t.Ie=null};var $h;I.DirectionDefault=$h=s.p(I,"DirectionDefault",0),I.DirectionAbsolute=s.p(I,"DirectionAbsolute",1);var w1;I.DirectionRotatedNode=w1=s.p(I,"DirectionRotatedNode",2);var yu;I.DirectionRotatedNodeOrthogonal=yu=s.p(I,"DirectionRotatedNodeOrthogonal",3),I.SpreadingNone=s.p(I,"SpreadingNone",10);var uc;I.SpreadingEvenly=uc=s.p(I,"SpreadingEvenly",11);var fc;I.SpreadingPacked=fc=s.p(I,"SpreadingPacked",12);function M1(t,i){i!==null&&(t.Mh===null&&(t.Mh=new R(du)),t.Mh.add(i))}function P1(t,i,n,e){if(i===null||t.Mh===null)return null;for(var r=t.Mh.i;r.next();){var o=r.value;if(o.qq===t&&o.Mu===i&&o.iy===n&&o.jy===e||o.qq===i&&o.Mu===t&&o.iy===e&&o.jy===n)return o}return null}I.prototype.invalidateLinkBundle=function(t,i,n){i==null&&(i=""),n==null&&(n=""),t=P1(this,t,i,n),t!==null&&t.fq()},I.prototype.$n=function(t,i,n,e,r,o,h){t===Li&&i==="elements"?this.Ie=null:t===Ai&&i==="elements"&&(this.Ie=null),L.prototype.$n.call(this,t,i,n,e,r,o,h)},I.prototype.invalidateConnectedLinks=I.prototype.ag=function(t){t===void 0&&(t=null);for(var i=this.je;i.next();){var n=i.value;t!==null&&t.contains(n)||(pe(this,n.gc),pe(this,n.zc),n.Tb())}};function T1(t,i){for(var n=t.je;n.next();){var e=n.value;(e.gc===i||e.zc===i)&&(pe(t,e.gc),pe(t,e.zc),e.Tb())}}function pe(t,i){if(i!==null){var n=i.Ws;n!==null&&n.fq(),n=t.Ca,n===null||n.$c||pe(n,n.port)}}I.prototype.km=function(){return!0},s.defineProperty(I,{mJ:"portSpreading"},function(){return this.Xs},function(t){var i=this.Xs;i!==t&&(this.Xs=t,this.h("portSpreading",i,t),t=this.g,t!==null&&t.ja.lb||this.ag())}),s.defineProperty(I,{lA:"avoidable"},function(){return(this.ya&8)!==0},function(t){var i=(this.ya&8)!==0;if(i!==t){this.ya^=8;var n=this.g;n!==null&&n.SA(this),this.h("avoidable",i,t)}}),s.defineProperty(I,{uH:"avoidableMargin"},function(){return this.ar},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,I,"avoidableMargin");var i=this.ar;if(!i.L(t)){this.ar=t=t.S();var n=this.g;n!==null&&n.SA(this),this.h("avoidableMargin",i,t)}}),I.prototype.getAvoidableRect=function(t){return t.set(this.U),t.bx(this.uH),t},I.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.Ca;return t},I.prototype.isVisible=function(){if(!L.prototype.isVisible.call(this))return!1;var t=!0,i=rh,n=this.g;if(n!==null){if(t=n.Ka,t.Qe&&(t=t.Xm.ka(this),t!==null&&t.ny))return!0;t=n.Vd,i=n.VB}if(i===rh){if(n=this.Kk(),n!==null&&!n.wc)return!1}else if(i===yy){if(n=t?this.cF():this.dF(),0<n.count&&n.all(function(e){return!e.wc}))return!1}else if(i===cy&&(n=t?this.cF():this.dF(),0<n.count&&n.any(function(e){return!e.wc})))return!1;return n=this.Xb,n!==null?n.isVisible():!0},I.prototype.Dd=function(t){L.prototype.Dd.call(this,t);for(var i=this.je;i.next();)i.value.Dd(t)},s.u(I,{je:"linksConnected"},function(){return this.rc.i}),I.prototype.findLinksConnected=I.prototype.aF=function(t){if(t===void 0&&(t=null),t===null)return this.rc.i;var i=new Di(this.rc),n=this;return i.wq=function(e){return e.V===n&&e.Ng===t||e.Z===n&&e.Kh===t},i},I.prototype.findLinksOutOf=I.prototype.Ex=function(t){t===void 0&&(t=null);var i=new Di(this.rc),n=this;return i.wq=function(e){return e.V!==n?!1:t===null?!0:e.Ng===t},i},I.prototype.findLinksInto=I.prototype.Mg=function(t){t===void 0&&(t=null);var i=new Di(this.rc),n=this;return i.wq=function(e){return e.Z!==n?!1:t===null?!0:e.Kh===t},i},I.prototype.findNodesConnected=I.prototype.bF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var r=e.value;r.V===this?(t===null||r.Ng===t)&&(r=r.Z,i!==null?i.add(r):n!==null&&n!==r?(i=new R(I),i.add(n),i.add(r)):n=r):r.Z!==this||t!==null&&r.Kh!==t||(r=r.V,i!==null?i.add(r):n!==null&&n!==r?(i=new R(I),i.add(n),i.add(r)):n=r)}return i!==null?i.i:n!==null?new Yi(n):fr},I.prototype.findNodesOutOf=I.prototype.dF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var r=e.value;r.V!==this||t!==null&&r.Ng!==t||(r=r.Z,i!==null?i.add(r):n!==null&&n!==r?(i=new R(I),i.add(n),i.add(r)):n=r)}return i!==null?i.i:n!==null?new Yi(n):fr},I.prototype.findNodesInto=I.prototype.cF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var r=e.value;r.Z!==this||t!==null&&r.Kh!==t||(r=r.V,i!==null?i.add(r):n!==null&&n!==r?(i=new R(I),i.add(n),i.add(r)):n=r)}return i!==null?i.i:n!==null?new Yi(n):fr},I.prototype.findLinksBetween=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);var e=new Di(this.rc),r=this;return e.wq=function(o){return!((o.V!==r||o.Z!==t||i!==null&&o.Ng!==i||n!==null&&o.Kh!==n)&&(o.V!==t||o.Z!==r||n!==null&&o.Ng!==n||i!==null&&o.Kh!==i))},e},I.prototype.findLinksTo=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);var e=new Di(this.rc),r=this;return e.wq=function(o){return!(o.V!==r||o.Z!==t||i!==null&&o.Ng!==i||n!==null&&o.Kh!==n)},e},s.defineProperty(I,{LI:"linkConnected"},function(){return this.ls},function(t){var i=this.ls;i!==t&&(t!==null&&s.j(t,"function",I,"linkConnected"),this.ls=t,this.h("linkConnected",i,t))}),s.defineProperty(I,{MI:"linkDisconnected"},function(){return this.ms},function(t){var i=this.ms;i!==t&&(t!==null&&s.j(t,"function",I,"linkDisconnected"),this.ms=t,this.h("linkDisconnected",i,t))}),s.defineProperty(I,{Xx:"linkValidation"},function(){return this.Dl},function(t){var i=this.Dl;i!==t&&(t!==null&&s.j(t,"function",I,"linkValidation"),this.Dl=t,this.h("linkValidation",i,t))});function rp(t,i,n){pe(t,n);var e=t.rc.contains(i);if(e||t.rc.add(i),!e||i.V===i.Z){var r=t.LI;if(r!==null){var o=!0,h=t.g;h!==null&&(o=h.Ua,h.Ua=!0),r(t,i,n),h!==null&&(h.Ua=o)}}!e&&i.bc&&(n=i.V,i=i.Z,n!==null&&i!==null&&n!==i&&(e=!0,h=t.g,h!==null&&(e=h.Vd),t=e?i:n,r=e?n:i,t.Ak||(t.Ak=r),!r.Bj||h!==null&&h.ja.lb||(e?n===r&&(r.Bj=!1):i===r&&(r.Bj=!1))))}function op(t,i,n){pe(t,n);var e=t.rc.remove(i);if(e||i.Z===i.V){var r=t.MI,o=t.g;if(r!==null){var h=!0;o!==null&&(h=o.Ua,o.Ua=!0),r(t,i,n),o!==null&&(o.Ua=h)}}e&&i.bc&&(n=!0,o!==null&&(n=o.Vd),t=n?i.Z:i.V,i=n?i.V:i.Z,t!==null&&(t.Ak=!1),i===null||i.Bj||(i.rc.count===0?(i.Ak=null,o!==null&&o.ja.lb||(i.Bj=!0)):Nf(i)))}function Nf(t){if(t.Ak=!1,t.rc.count!==0){var i=!0,n=t.g;if(n===null||!n.ja.lb){for(n!==null&&(i=n.Vd),n=t.rc.i;n.next();){var e=n.value;if(e.bc){if(i){if(e.V===t){t.Bj=!1;return}}else if(e.Z===t){t.Bj=!1;return}}}t.Bj=!0}}}I.prototype.updateRelationshipsFromData=function(){L.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;n instanceof Lt&&(t=n.Gn(t),t=i.Oe(t),n=this.Kk(),t!==n&&(n=this.Cn(),t!==null?n!==null?i.Vd?n.V=t:n.Z=t:Ia(i,t,this):n!==null&&ay(i,n,!1)))}}},I.prototype.qu=function(t){L.prototype.qu.call(this,t),t||(Nf(this),t=this.Yo,t!==null&&L1(t,this))},I.prototype.ru=function(t){L.prototype.ru.call(this,t),t||(t=this.Yo,t!==null&&t.yf!==null&&(t.yf.remove(this),t.I()))},I.prototype.An=function(){if(0<this.rc.count){var t=this.g;if(t!==null)for(var i=t.pb.WE,n=this.rc.copy().i;n.next();){var e=n.value;i?t.remove(e):(e.V===this&&(e.V=null),e.Z===this&&(e.Z=null))}}this.Xb=null,L.prototype.An.call(this)},s.u(I,{Df:"isLinkLabel"},function(){return this.Yo!==null}),s.defineProperty(I,{Xb:"labeledLink"},function(){return this.Yo},function(t){var i=this.Yo;if(i!==t){var n=this.g,e=this.data;if(i!==null){if(i.yf!==null&&(i.yf.remove(this),i.I()),n!==null&&e!==null&&!n.ja.lb){var r=i.data,o=n.$;if(r!==null&&o instanceof K){var h=o.qb(e);h!==void 0&&o.rJ(r,h)}}this.Ca=null}this.Yo=t,t!==null&&(L1(t,this),n===null||e===null||n.ja.lb||(r=t.data,o=n.$,r!==null&&o instanceof K&&(h=o.qb(e),h!==void 0&&o.yE(r,h))),this.Ca=t.Ca),xf(this),this.h("labeledLink",i,t)}}),I.prototype.findPort=I.prototype.EA=function(t){if(this.Ie===null){if(t===""&&this.Qk===!1)return this;k1(this)}var i=this.Ie.ka(t);return i!==null||t!==""&&(i=this.Ie.ka(""),i!==null)?i:this},s.u(I,{port:"port"},function(){return this.EA("")}),s.u(I,{ports:"ports"},function(){return this.Ie===null&&k1(this),this.Ie.MF});function k1(t){t.Ie===null?t.Ie=new tt("string",N):t.Ie.clear(),Mf(t,t,function(i,n){S1(i,n)}),t.Ie.count===0&&t.Ie.add("",t)}function S1(t,i){var n=i.le;n!==null&&t.Ie!==null&&t.Ie.add(n,i)}function ac(t,i,n){var e=i.le;if(e!==null&&(t.Ie!==null&&t.Ie.remove(e),i=t.g,i!==null&&n)){for(n=null,e=t.aF(e);e.next();)t=e.value,n===null&&(n=s.Za()),n.push(t);if(n!==null){for(e=0;e<n.length;e++)t=n[e],i.remove(t);s.ra(n)}}}I.prototype.isInTreeOf=function(t){if(t===null||t===this)return!1;var i=!0,n=this.g;if(n!==null&&(i=n.Vd),n=this,i)for(;n!==t;){for(var i=null,e=n.rc.i;e.next();){var r=e.value;if(r.bc&&(i=r.V,i!==n&&i!==this))break}if(i===this||i===null||i===n)return!1;n=i}else for(;n!==t;){for(i=null,e=n.rc.i;e.next()&&(r=e.value,!r.bc||(i=r.Z,i===n||i===this)););if(i===this||i===null||i===n)return!1;n=i}return!0},I.prototype.findTreeRoot=function(){var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this,t)for(;;){for(var t=null,n=i.rc.i;n.next();){var e=n.value;if(e.bc&&(t=e.V,t!==i&&t!==this))break}if(t===this)return this;if(t===null||t===i)return i;i=t}else for(;;){for(t=null,n=i.rc.i;n.next()&&(e=n.value,!e.bc||(t=e.Z,t===i||t===this)););if(t===this)return this;if(t===null||t===i)return i;i=t}},I.prototype.findCommonTreeParent=function(t){if(t===null)return null;if(this===t)return this;for(var i=this;i!==null;)ep(i,!0),i=i.Kk();for(var n=null,i=t;i!==null;){if((i.Q&1048576)!==0){n=i;break}i=i.Kk()}for(i=this;i!==null;)ep(i,!1),i=i.Kk();return n},I.prototype.findTreeParentLink=I.prototype.Cn=function(){var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this.rc.i,t){for(;i.next();)if(t=i.value,t.bc&&t.V!==this)return t}else for(;i.next();)if(t=i.value,t.bc&&t.Z!==this)return t;return null},I.prototype.findTreeParentNode=I.prototype.Kk=function(){var i=this.Ak;if(i===null)return null;if(i instanceof I)return i;var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this.rc.i,t){for(;i.next();)if(t=i.value,t.bc&&(t=t.V,t!==this))return this.Ak=t}else for(;i.next();)if(t=i.value,t.bc&&(t=t.Z,t!==this))return this.Ak=t;return this.Ak=null},I.prototype.findTreeParentChain=function(){function t(n,e){if(n!==null){e.add(n);var r=n.Cn();r!==null&&(e.add(r),t(n.Kk(),e))}}var i=new R(L);return t(this,i),i},I.prototype.findTreeLevel=function(){return N1(this,this)};function N1(t,i){var n=i.Kk();return n===null?0:1+N1(t,n)}I.prototype.findTreeChildrenLinks=I.prototype.Gx=function(){var t=!0,i=this.g;i!==null&&(t=i.Vd);var i=new Di(this.rc),n=this;return i.wq=t?function(e){return!!(e.bc&&e.V===n)}:function(e){return!!(e.bc&&e.Z===n)},i},I.prototype.findTreeChildrenNodes=I.prototype.fF=function(){var t=!0,i=this.g;i!==null&&(t=i.Vd);var n=i=null,e=this.rc.i;if(t)for(;e.next();)t=e.value,t.bc&&t.V===this&&(t=t.Z,i!==null?i.add(t):n!==null&&n!==t?(i=new z(I),i.add(n),i.add(t)):n=t);else for(;e.next();)t=e.value,t.bc&&t.Z===this&&(t=t.V,i!==null?i.add(t):n!==null&&n!==t?(i=new z(I),i.add(n),i.add(t)):n=t);return i!==null?i.i:n!==null?new Yi(n):fr},I.prototype.findTreeParts=function(t){t===void 0&&(t=1/0),s.j(t,"number",I,"findTreeParts:level");var i=new R(L);return cs(i,this,!1,t,!0),i},I.prototype.collapseTree=I.prototype.collapseTree=function(t){t===void 0&&(t=1),s.Ad(t,I,"collapseTree:level"),1>t&&(t=1);var i=this.g;if(i!==null&&!i.yh){i.yh=!0;var n=new R(I);n.add(this),C1(this,n,i.Vd,t,i.Ka,this,i.VB===rh),i.yh=!1}};function C1(t,i,n,e,r,o,h){if(1<e)for(var l=n?t.Ex():t.Mg();l.next();){var u=l.value;u.bc&&(u=u.JA(t),u===null||u===t||i.contains(u)||(i.add(u),C1(u,i,n,e-1,r,o,h)))}else j1(t,i,n,r,o,h)}function j1(t,i,n,e,r,o){for(var h=r===t?!0:t.wc,l=n?t.Ex():t.Mg();l.next();){var u=l.value;if(u.bc&&(u=u.JA(t),u!==null&&u!==t)){var f=i.contains(u);f||i.add(u),h&&(o&&ry(e,u,r),u.Rk(),u.Dd(!1)),u.wc&&(u.Mq=u.wc,f||j1(u,i,n,e,r,o))}}t.wc=!1}I.prototype.expandTree=I.prototype.expandTree=function(t){t===void 0&&(t=2),s.Ad(t,I,"expandTree:level"),2>t&&(t=2);var i=this.g;if(i!==null&&!i.yh){i.yh=!0;var n=new R(I);n.add(this),F1(this,n,i.Vd,t,i.Ka,this,i.VB===rh),i.yh=!1}};function F1(t,i,n,e,r,o,h){for(var l=o===t?!1:t.wc,u=n?t.Ex():t.Mg();u.next();){var f=u.value;f.bc&&(l||f.Mf||f.Tb(),f=f.JA(t),f!==null&&f!==t&&!i.contains(f)&&(i.add(f),l||(f.Dd(!0),f.Rk(),h&&ey(r,f,o)),2<e||f.Mq))&&(f.Mq=!1,F1(f,i,n,e-1,r,o,h))}t.wc=!0}s.defineProperty(I,{wc:"isTreeExpanded"},function(){return(this.ya&1)!==0},function(t){var i=(this.ya&1)!==0;if(i!==t){this.ya^=1;var n=this.g;if(this.h("isTreeExpanded",i,t),i=this.YJ,i!==null){var e=!0;n!==null&&(e=n.Ua,n.Ua=!0),i(this),n!==null&&(n.Ua=e)}n!==null&&n.ja.lb?this.Dd(t):t?this.expandTree():this.collapseTree()}}),s.defineProperty(I,{Mq:"wasTreeExpanded"},function(){return(this.ya&2)!==0},function(t){var i=(this.ya&2)!==0;i!==t&&(this.ya^=2,this.h("wasTreeExpanded",i,t))}),s.defineProperty(I,{YJ:"treeExpandedChanged"},function(){return this.Ht},function(t){var i=this.Ht;i!==t&&(t!==null&&s.j(t,"function",I,"treeExpandedChanged"),this.Ht=t,this.h("treeExpandedChanged",i,t))}),s.defineProperty(I,{Bj:"isTreeLeaf"},function(){return(this.ya&4)!==0},function(t){var i=(this.ya&4)!==0;i!==t&&(this.ya^=4,this.h("isTreeLeaf",i,t))});function S(){L.call(this,Mo),this.Zb=8,this.rg=null,this.Sh="",this.Hg=this.Lr=null,this.mi="",this.Gt=null,this.Tq=ye,this.nr=0,this.qr=ye,this.rr=NaN,this.bn=pc,this.vt=.5,this.yf=null,this.gd=new z(F).freeze(),this.$g=this.QC=this.KC=this.Bi=this.Oi=this.Sa=this.Dw=this.pp=this.Ye=null,this.Yz=new F,this.Y=this.eE=this.dE=null}s.La(S,L),s.ga("Link",S),S.prototype.cloneProtected=function(t){L.prototype.cloneProtected.call(this,t),t.Zb=this.Zb&-113,t.Sh=this.Sh,t.Lr=this.Lr,t.mi=this.mi,t.Gt=this.Gt,t.Tq=this.Tq,t.nr=this.nr,t.qr=this.qr,t.rr=this.rr,t.bn=this.bn,t.vt=this.vt,this.Y!==null&&(t.Y=this.Y.copy())},S.prototype.qi=function(t){L.prototype.qi.call(this,t),this.Sh=t.Sh,this.mi=t.mi,t.Ye=null,t.Tb(),t.Bi=this.Bi;var i=t.gc;i!==null&&pe(t.V,i),i=t.zc,i!==null&&pe(t.Z,i)},S.prototype.ic=function(t){t.Je===S?(t.value&2)===2?this.sy=t:t===De||t===$o||t===cu?this.nf=t:t===sp||t===hp||t===lp?this.Jp=t:t!==pc&&t!==ye&&s.k("Unknown Link enum value for a Link property: "+t):L.prototype.ic.call(this,t)};var pc;S.Normal=pc=s.p(S,"Normal",1),S.Orthogonal=s.p(S,"Orthogonal",2),S.AvoidsNodes=s.p(S,"AvoidsNodes",6);var D1;S.AvoidsNodesStraight=D1=s.p(S,"AvoidsNodesStraight",7);var ye;S.None=ye=s.p(S,"None",0);var De;S.Bezier=De=s.p(S,"Bezier",9);var $o;S.JumpGap=$o=s.p(S,"JumpGap",10);var cu;S.JumpOver=cu=s.p(S,"JumpOver",11);var sp;S.End=sp=s.p(S,"End",17);var hp;S.Scale=hp=s.p(S,"Scale",18);var lp;S.Stretch=lp=s.p(S,"Stretch",19);var up;S.OrientAlong=up=s.p(S,"OrientAlong",21);var Cf;S.OrientPlus90=Cf=s.p(S,"OrientPlus90",22);var jf;S.OrientMinus90=jf=s.p(S,"OrientMinus90",23);var yc;S.OrientOpposite=yc=s.p(S,"OrientOpposite",24);var cc;S.OrientUpright=cc=s.p(S,"OrientUpright",25);var Ff;S.OrientPlus90Upright=Ff=s.p(S,"OrientPlus90Upright",26);var Df;S.OrientMinus90Upright=Df=s.p(S,"OrientMinus90Upright",27);var fp;S.OrientUpright45=fp=s.p(S,"OrientUpright45",28),B=S.prototype,B.Qd=function(){this.Y===null&&(this.Y=new gp)},B.km=function(){var t=this.V;if(t!==null){var i=t.findVisibleNode();if(i!==null&&(t=i),$e(t)||ws(t))return!1}return t=this.Z,!(t!==null&&(i=t.findVisibleNode(),i!==null&&(t=i),$e(t)||ws(t)))},B.GB=function(){return!1},B.HB=function(){},B.he=function(){return!1},S.prototype.computeAngle=function(t,i,n){return S.computeAngle(i,n)},S.computeAngle=function(t,i){var n=0;switch(t){default:case ye:n=0;break;case up:n=i;break;case Cf:n=i+90;break;case jf:n=i-90;break;case yc:n=i+180;break;case cc:n=nf(i),90<n&&270>n&&(n-=180);break;case Ff:n=nf(i+90),90<n&&270>n&&(n-=180);break;case Df:n=nf(i-90),90<n&&270>n&&(n-=180);break;case fp:if(n=nf(i),45<n&&135>n||225<n&&315>n)return 0;90<n&&270>n&&(n-=180)}return nf(n)},s.defineProperty(S,{V:"fromNode"},function(){return this.rg},function(t){var i=this.rg;if(i!==t){var n=this.gc;i!==null&&(this.Hg!==i&&op(i,this,n),Af(this),this.J(pu)),this.rg=t,t!==null&&this.Dd(t.isVisible()),this.Oi=null,this.Tb();var e=this.g;if(e!==null){var r=this.data,o=e.$;if(r!==null)if(o instanceof K){var h=t!==null?t.data:null;o.CB(r,o.qb(h))}else o instanceof Lt&&(h=t!==null?t.data:null,e.Vd?o.ti(r,o.qb(h)):(r=e.rk,e.rk=this,i!==null&&o.ti(i.data,void 0),o.ti(h,o.qb(this.Hg!==null?this.Hg.data:null)),e.rk=r))}o=this.gc,h=this.iF,h!==null&&(r=!0,e!==null&&(r=e.Ua,e.Ua=!0),h(this,n,o),e!==null&&(e.Ua=r)),t!==null&&(this.Hg!==t&&rp(t,this,o),Lf(this),this.J(au)),this.h("fromNode",i,t),vu(this)}}),s.defineProperty(S,{Ng:"fromPortId"},function(){return this.Sh},function(t){var i=this.Sh;if(i!==t){var n=this.V,e=this.gc;e!==null&&pe(n,e),Af(this),this.Sh=t;var r=this.gc;if(r!==null&&pe(n,r),n=this.g,n!==null){var o=this.data,h=n.$;o!==null&&h instanceof K&&h.DB(o,t)}e!==r&&(this.Oi=null,this.Tb(),o=this.iF,o!==null&&(h=!0,n!==null&&(h=n.Ua,n.Ua=!0),o(this,e,r),n!==null&&(n.Ua=h))),Lf(this),this.h("fromPortId",i,t)}}),s.u(S,{gc:"fromPort"},function(){var t=this.rg;return t===null?null:t.EA(this.Sh)}),s.defineProperty(S,{iF:"fromPortChanged"},function(){return this.Lr},function(t){var i=this.Lr;i!==t&&(t!==null&&s.j(t,"function",S,"fromPortChanged"),this.Lr=t,this.h("fromPortChanged",i,t))}),s.defineProperty(S,{Z:"toNode"},function(){return this.Hg},function(t){var i=this.Hg;if(i!==t){var n=this.zc;i!==null&&(this.rg!==i&&op(i,this,n),Af(this),this.J(pu)),this.Hg=t,t!==null&&this.Dd(t.isVisible()),this.Oi=null,this.Tb();var e=this.g;if(e!==null){var r=this.data,o=e.$;if(r!==null)if(o instanceof K){var h=t!==null?t.data:null;o.IB(r,o.qb(h))}else o instanceof Lt&&(h=t!==null?t.data:null,e.Vd?(r=e.rk,e.rk=this,i!==null&&o.ti(i.data,void 0),o.ti(h,o.qb(this.rg!==null?this.rg.data:null)),e.rk=r):o.ti(r,o.qb(h)))}o=this.zc,h=this.FG,h!==null&&(r=!0,e!==null&&(r=e.Ua,e.Ua=!0),h(this,n,o),e!==null&&(e.Ua=r)),t!==null&&(this.rg!==t&&rp(t,this,o),Lf(this),this.J(au)),this.h("toNode",i,t),vu(this)}}),s.defineProperty(S,{Kh:"toPortId"},function(){return this.mi},function(t){var i=this.mi;if(i!==t){var n=this.Z,e=this.zc;e!==null&&pe(n,e),Af(this),this.mi=t;var r=this.zc;if(r!==null&&pe(n,r),n=this.g,n!==null){var o=this.data,h=n.$;o!==null&&h instanceof K&&h.JB(o,t)}e!==r&&(this.Oi=null,this.Tb(),o=this.FG,o!==null&&(h=!0,n!==null&&(h=n.Ua,n.Ua=!0),o(this,e,r),n!==null&&(n.Ua=h))),Lf(this),this.h("toPortId",i,t)}}),s.u(S,{zc:"toPort"},function(){var t=this.Hg;return t===null?null:t.EA(this.mi)}),s.defineProperty(S,{FG:"toPortChanged"},function(){return this.Gt},function(t){var i=this.Gt;i!==t&&(t!==null&&s.j(t,"function",S,"toPortChanged"),this.Gt=t,this.h("toPortChanged",i,t))}),s.defineProperty(S,{Mb:"fromSpot"},function(){return this.Y!==null?this.Y.$j:cn},function(t){this.Qd();var i=this.Y.$j;i.L(t)||(t=t.S(),this.Y.$j=t,this.h("fromSpot",i,t),this.Tb())}),s.defineProperty(S,{cm:"fromEndSegmentLength"},function(){return this.Y!==null?this.Y.Yj:NaN},function(t){this.Qd();var i=this.Y.Yj;i!==t&&(0>t&&s.Fa(t,">= 0",S,"fromEndSegmentLength"),this.Y.Yj=t,this.h("fromEndSegmentLength",i,t),this.Tb())}),s.defineProperty(S,{lu:"fromEndSegmentDirection"},function(){return this.Y!==null?this.Y.Xj:$h},function(t){this.Qd();var i=this.Y.Xj;i!==t&&(s.Yt("Link.fromEndSegmentDirection","2.0"),this.Y.Xj=t,this.h("fromEndSegmentDirection",i,t),this.Tb())}),s.defineProperty(S,{mu:"fromShortLength"},function(){return this.Y!==null?this.Y.Zj:NaN},function(t){this.Qd();var i=this.Y.Zj;i!==t&&(this.Y.Zj=t,this.h("fromShortLength",i,t),this.Tb(),this.fe())}),s.defineProperty(S,{Nb:"toSpot"},function(){return this.Y!==null?this.Y.zk:cn},function(t){this.Qd();var i=this.Y.zk;i.L(t)||(t=t.S(),this.Y.zk=t,this.h("toSpot",i,t),this.Tb())}),s.defineProperty(S,{wm:"toEndSegmentLength"},function(){return this.Y!==null?this.Y.xk:NaN},function(t){this.Qd();var i=this.Y.xk;i!==t&&(0>t&&s.Fa(t,">= 0",S,"toEndSegmentLength"),this.Y.xk=t,this.h("toEndSegmentLength",i,t),this.Tb())}),s.defineProperty(S,{ev:"toEndSegmentDirection"},function(){return this.Y!==null?this.Y.wk:$h},function(t){this.Qd();var i=this.Y.wk;i!==t&&(s.Yt("Link.toEndSegmentDirection","2.0"),this.Y.wk=t,this.h("toEndSegmentDirection",i,t),this.Tb())}),s.defineProperty(S,{fv:"toShortLength"},function(){return this.Y!==null?this.Y.yk:NaN},function(t){this.Qd();var i=this.Y.yk;i!==t&&(this.Y.yk=t,this.h("toShortLength",i,t),this.Tb(),this.fe())});function vu(t){var n=t.V,e=t.Z,i=null,n=i=n!==null?e!==null?n.XH(e):n.Ca:e!==null?e.Ca:null,e=t.ml;if(e!==n){e!==null&&Sc(e,t),t.ml=n,n!==null&&kc(n,t);var r=t.NE;if(r!==null){var o=!0,h=t.g;h!==null&&(o=h.Ua,h.Ua=!0),r(t,e,n),h!==null&&(h.Ua=o)}!t.Mf||t.dE!==e&&t.eE!==e||t.Tb()}if(t.AI)for(t=t.Ff;t.next();)t.value.Ca=i}S.prototype.Rk=function(){var t=this.Ca;t!==null&&this.V!==t&&this.Z!==t&&t.nx&&L.prototype.Rk.call(this)},S.prototype.getOtherNode=S.prototype.JA=function(t){var i=this.V;return t===i?this.Z:i},S.prototype.getOtherPort=function(t){var i=this.gc;return t===i?this.zc:i},s.u(S,{AI:"isLabeledLink"},function(){return this.yf===null?!1:0<this.yf.count}),s.u(S,{Ff:"labelNodes"},function(){return this.yf===null?fr:this.yf.i});function L1(t,i){t.yf===null&&(t.yf=new R(I)),t.yf.add(i),t.I()}S.prototype.qu=function(t){if(L.prototype.qu.call(this,t),ph(this)&&yp(this,this.U),!t){t=this.rg;var i=null;t!==null&&(i=this.gc,rp(t,this,i));var n=this.Hg,e=null;n!==null&&(e=this.zc,n===t&&e===i||rp(n,this,e)),Lf(this)}},S.prototype.ru=function(t){if(L.prototype.ru.call(this,t),ph(this)&&yp(this,this.U),!t){t=this.rg;var i=null;t!==null&&(i=this.gc,op(t,this,i));var n=this.Hg,e=null;n!==null&&(e=this.zc,n===t&&e===i||op(n,this,e)),Af(this)}},S.prototype.An=function(){if(this.Mf=!0,this.yf!==null){var t=this.g;if(t!==null)for(var i=this.yf.copy().i;i.next();)t.remove(i.value)}i=this.data,i!==null&&(t=this.g,t!==null&&(t=t.$,t instanceof K?t.py(i):t instanceof Lt&&t.ti(i,void 0)))},S.prototype.updateRelationshipsFromData=function(){var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;if(n instanceof K){var e=n.em(t);if(this.V=e=i.Oe(e),e=n.fm(t),this.Z=e=i.Oe(e),t=n.Nk(t),0<t.length||0<this.Ff.count){if(t.length===1&&this.Ff.count===1){var e=t[0],r=this.Ff.first();if(n.qb(r.data)===e)return}var e=new R().Pc(t),o=new R;if(this.Ff.each(function(u){u.data!==null&&(u=n.qb(u.data),u!==void 0&&o.add(u))}),t=o.copy(),t.oy(e),e=e.copy(),e.oy(o),0<t.count||0<e.count){var h=this;t.each(function(u){u=i.Oe(u),u!==null&&u.Xb===h&&(u.Xb=null)}),e.each(function(u){u=i.Oe(u),u!==null&&u.Xb!==h&&(u.Xb=h)})}}}}}},S.prototype.move=function(t){var i=this.position,n=i.x;for(isNaN(n)&&(n=0),i=i.y,isNaN(i)&&(i=0),n=t.x-n,i=t.y-i,L.prototype.move.call(this,t),this.Ej(n,i),t=this.Ff;t.next();){var e=t.value,r=e.position;e.moveTo(r.x+n,r.y+i)}},s.defineProperty(S,{pJ:"relinkableFrom"},function(){return(this.Zb&1)!==0},function(t){var i=(this.Zb&1)!==0;i!==t&&(this.Zb^=1,this.h("relinkableFrom",i,t),this.Sd())}),s.defineProperty(S,{qJ:"relinkableTo"},function(){return(this.Zb&2)!==0},function(t){var i=(this.Zb&2)!==0;i!==t&&(this.Zb^=2,this.h("relinkableTo",i,t),this.Sd())}),S.prototype.canRelinkFrom=function(){if(!this.pJ)return!1;var t=this.layer;return t===null?!0:t.pn?(t=t.g,!!(t===null||t.pn)):!1},S.prototype.canRelinkTo=function(){if(!this.qJ)return!1;var t=this.layer;return t===null?!0:t.pn?(t=t.g,!!(t===null||t.pn)):!1},s.defineProperty(S,{Vu:"resegmentable"},function(){return(this.Zb&4)!==0},function(t){var i=(this.Zb&4)!==0;i!==t&&(this.Zb^=4,this.h("resegmentable",i,t),this.Sd())}),s.defineProperty(S,{bc:"isTreeLink"},function(){return(this.Zb&8)!==0},function(t){var i=(this.Zb&8)!==0;i!==t&&(this.Zb^=8,this.h("isTreeLink",i,t),this.V!==null&&Nf(this.V),this.Z!==null&&Nf(this.Z))}),s.u(S,{path:"path"},function(){var t=this.Bd();return t instanceof Y?t:null}),s.u(S,{ao:"routeBounds"},function(){this.jo();var t=new O,i=1/0,n=1/0,e=this.qa;if(e===0)t.m(NaN,NaN,0,0);else{if(e===1)e=this.l(0),i=Math.min(e.x,i),n=Math.min(e.y,n),t.m(e.x,e.y,0,0);else if(e===2){var r=this.l(0),o=this.l(1),i=Math.min(r.x,o.x),n=Math.min(r.y,o.y);t.m(r.x,r.y,0,0),t.yi(o)}else if(this.computeCurve()===De&&3<=e&&!this.ac)if(r=this.l(0),i=r.x,n=r.y,t.m(i,n,0,0),e===3)e=this.l(1),i=Math.min(e.x,i),n=Math.min(e.y,n),o=this.l(2),i=Math.min(o.x,i),n=Math.min(o.y,n),El(r.x,r.y,e.x,e.y,e.x,e.y,o.x,o.y,.5,t);else for(var h=3;h<e;h+=3){var l=this.l(h-2);h+3>=e&&(h=e-1);var u=this.l(h-1),o=this.l(h);El(r.x,r.y,l.x,l.y,u.x,u.y,o.x,o.y,.5,t),i=Math.min(o.x,i),n=Math.min(o.y,n),r=o}else for(r=this.l(0),o=this.l(1),i=Math.min(r.x,o.x),n=Math.min(r.y,o.y),t.m(r.x,r.y,0,0),t.yi(o),h=2;h<e;h++)r=this.l(h),i=Math.min(r.x,i),n=Math.min(r.y,n),t.yi(r);this.Yz.m(i-t.x,n-t.y)}return this.Dw=t}),s.u(S,{SF:"midPoint"},function(){return this.jo(),this.computeMidPoint(new F)}),S.prototype.computeMidPoint=function(t){var i=this.qa;if(i===0)return t.assign(dx),t;if(i===1)return t.assign(this.l(0)),t;if(i===2){var n=this.l(0),e=this.l(1);return t.m((n.x+e.x)/2,(n.y+e.y)/2),t}if(this.computeCurve()===De&&3<=i&&!this.ac){if(i===3)return this.l(1);var n=(i-1)/3|0,r=3*(n/2|0);if(n%2===1){var n=this.l(r),e=this.l(r+1),o=this.l(r+2),r=this.l(r+3),i=e.x,l=e.y,e=o.x,u=o.y,o=(i+e)/2,h=(l+u)/2,l=((n.y+l)/2+h)/2,u=(h+(u+r.y)/2)/2;t.x=(((n.x+i)/2+o)/2+(o+(e+r.x)/2)/2)/2,t.y=(l+u)/2}else t.assign(this.l(r));return t}for(r=0,o=s.Za(),l=0;l<i-1;l++)n=0,n=this.l(l),e=this.l(l+1),St(n.x,e.x)?(n=e.y-n.y,0>n&&(n=-n)):St(n.y,e.y)?(n=e.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Cf(e)),o.push(n),r+=n;for(e=l=n=0;n<r/2&&l<i&&(e=o[l],!(n+e>r/2));)n+=e,l++;return s.ra(o),i=this.l(l),o=this.l(l+1),i.x===o.x?i.y>o.y?t.m(i.x,i.y-(r/2-n)):t.m(i.x,i.y+(r/2-n)):i.y===o.y?i.x>o.x?t.m(i.x-(r/2-n),i.y):t.m(i.x+(r/2-n),i.y):(n=(r/2-n)/e,t.m(i.x+n*(o.x-i.x),i.y+n*(o.y-i.y))),t},s.u(S,{RF:"midAngle"},function(){return this.jo(),this.computeMidAngle()}),S.prototype.computeMidAngle=function(){var t=this.qa;if(2>t)return NaN;if(this.computeCurve()===De&&4<=t&&!this.ac){var i=(t-1)/3|0,n=3*(i/2|0);if(i%2===1){var n=Math.floor(n),i=this.l(n),r=this.l(n+1),t=this.l(n+2),n=this.l(n+3),e=r.x,r=r.y,o=t.x,t=t.y,h=(e+o)/2,l=(r+t)/2;return Av(((i.x+e)/2+h)/2,((i.y+r)/2+l)/2,(h+(o+n.x)/2)/2,(l+(t+n.y)/2)/2)}if(0<n&&n+1<t)return i=this.l(n-1),r=this.l(n+1),i.Qb(r)}return n=t/2|0,t%2===0?(i=this.l(n-1),r=this.l(n),4<=t&&i.Qc(r)?(i=this.l(n-2),t=this.l(n+1),n=i.Cf(r),e=r.Cf(t),n>e+10?i.Qb(r):e>n+10?r.Qb(t):i.Qb(t)):this.Sa===null||this.ac?i.Qb(r):this.Sa.jF(.5)):this.Sa!==null&&!this.ac?this.Sa.jF(.5):(i=this.l(n-1),r=this.l(n),t=this.l(n+1),n=i.Cf(r),e=r.Cf(t),n>e+10?i.Qb(r):e>n+10?r.Qb(t):i.Qb(t))},s.defineProperty(S,{points:"points"},function(){return this.gd},function(t){var i=this.gd;if(i!==t){var n=null;if(Array.isArray(t)){var e=t.length%2===0;if(e){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){e=!1;break}}if(e)for(n=new z(F),e=0;e<t.length/2;e++)r=new F(t[2*e],t[2*e+1]).freeze(),n.add(r);else{for(r=!0,e=0;e<t.length;e++){var o=t[e];if(!s.Pa(o)||typeof o.x!="number"||isNaN(o.x)||typeof o.y!="number"||isNaN(o.y)){r=!1;break}}if(r)for(n=new z(F),e=0;e<t.length;e++)r=t[e],n.add(new F(r.x,r.y).freeze());else s.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof z)for(n=t.copy(),t=n.i;t.next();)t.value.freeze();else s.k("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.gd=n,this.fe(),this.I(),vc(this),t=this.g,t!==null&&(t.Ln||t.ja.lb||t.Yx.add(this),t.Ka.sc&&(this.pp=n)),this.h("points",i,n)}}),s.u(S,{qa:"pointsCount"},function(){return this.gd.count}),S.prototype.getPoint=S.prototype.l=function(t){return this.gd.n[t]},S.prototype.setPoint=S.prototype.Vg=function(t,i){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.kg(t,i)},S.prototype.setPointAt=S.prototype.ca=function(t,i,n){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.kg(t,new F(i,n))},S.prototype.insertPoint=function(t,i){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.Rd(t,i)},S.prototype.insertPointAt=S.prototype.w=function(t,i,n){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.Rd(t,new F(i,n))},S.prototype.addPoint=S.prototype.ni=function(t){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.add(t)},S.prototype.addPointAt=S.prototype.oj=function(t,i){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.add(new F(t,i))},S.prototype.removePoint=S.prototype.eG=function(t){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.cd(t)},S.prototype.clearPoints=S.prototype.Pp=function(){this.Ye===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.clear()},S.prototype.movePoints=S.prototype.Ej=function(t,i){if(t!==0||i!==0){for(var n=this.Mf,e=new z(F),r=this.gd.i;r.next();){var o=r.value;e.add(new F(o.x+t,o.y+i).freeze())}e.freeze(),r=this.gd,this.gd=e,this.I(),n&&vc(this),n=this.g,n!==null&&n.Ka.sc&&(this.pp=e),this.h("points",r,e)}},S.prototype.startRoute=S.prototype.tm=function(){this.Ye===null&&(this.Ye=this.gd,this.gd=this.gd.copy())},S.prototype.commitRoute=S.prototype.qj=function(){if(this.Ye!==null){for(var t=this.Ye,i=this.gd,h=1/0,l=1/0,n=t.n,e=n.length,r=0;r<e;r++)var o=n[r],h=Math.min(o.x,h),l=Math.min(o.y,l);for(var u=1/0,f=1/0,a=i.n,p=a.length,r=0;r<p;r++)o=a[r],u=Math.min(o.x,u),f=Math.min(o.y,f),o.freeze();if(i.freeze(),p===e){for(r=0;r<p;r++)if(e=n[r],o=a[r],e.x-h!==o.x-u||e.y-l!==o.y-f){this.I(),this.fe();break}}else this.I(),this.fe();this.Ye=null,h=this.g,h!==null&&h.Ka.sc&&(this.pp=i),vc(this),this.h("points",t,i)}},S.prototype.rollbackRoute=S.prototype.wJ=function(){this.Ye!==null&&(this.gd=this.Ye,this.Ye=null)};function vc(t){t.gd.count===0?t.Mf=!1:(t.Mf=!0,t.Up=t.l(0),t.Vp=t.l(t.qa-1),wc(t,!1))}S.prototype.invalidateRoute=S.prototype.Tb=function(){if(!this.vi){var t=this.g;t&&(t.Yx.contains(this)||t.ja.lb||t.Ka.FI&&!t.Ka.Qe)||(t=this.path,t!==null&&(this.Mf=!1,this.I(),t.I()))}},s.defineProperty(S,{Mf:null},function(){return(this.Zb&16)!==0},function(t){(this.Zb&16)!==0!==t&&(this.Zb^=16)}),s.defineProperty(S,{vi:"suspendsRouting"},function(){return(this.Zb&32)!==0},function(t){(this.Zb&32)!==0!==t&&(this.Zb^=32)}),s.defineProperty(S,{qA:null},function(){return(this.Zb&64)!==0},function(t){(this.Zb&64)!==0!==t&&(this.Zb^=64)}),s.defineProperty(S,{Up:"defaultFromPoint"},function(){return this.KC},function(t){this.KC=t.copy()}),s.defineProperty(S,{Vp:"defaultToPoint"},function(){return this.QC},function(t){this.QC=t.copy()}),S.prototype.updateRoute=S.prototype.jo=function(){if(!this.Mf&&!this.qA){var t=!0;try{this.qA=!0,this.tm(),t=this.computePoints()}finally{this.qA=!1,t?this.qj():this.wJ()}}},S.prototype.computePoints=function(){var h=this.g;if(h===null)return!1;var t=this.V,i=null;if(t===null?(h.Il||(h.ft=new Y,h.ft.Da=$u,h.ft.mb=0,h.Il=new I,h.Il.add(h.ft),h.Il.Ne()),this.Up&&(h.Il.position=h.Il.location=this.Up,h.Il.Ne(),t=h.Il,i=h.ft)):i=this.gc,i!==null&&!t.isVisible()){var o=t.findVisibleNode();o!==null&&o!==t?(t=o,i=o.port):t=o}if(this.dE=t,t===null||!t.location.H())return!1;for(;!(i===null||i.U.H()&&i.Cj());)i=i.R;if(i===null)return!1;var n=this.Z,e=null;if(n===null?(h.Jl||(h.gt=new Y,h.gt.Da=$u,h.gt.mb=0,h.Jl=new I,h.Jl.add(h.gt),h.Jl.Ne()),this.Vp&&(h.Jl.position=h.Jl.location=this.Vp,h.Jl.Ne(),n=h.Jl,e=h.gt)):e=this.zc,e===null||n.isVisible()||(h=n.findVisibleNode(),h!==null&&h!==n?(n=h,e=h.port):n=h),this.eE=n,n===null||!n.location.H())return!1;for(;!(e===null||e.U.H()&&e.Cj());)e=e.R;if(e===null)return!1;var r=this.qa,o=this.computeSpot(!0,i),h=this.computeSpot(!1,e),l=o===ki,u=h===ki,f=i===e&&i!==null,a=this.ac,p=this.nf===De;this.Oi=f&&!a?p=!0:!1;var y=this.Jp===ye||f;if(!a&&!f&&l&&u){if(l=!1,!y&&3<=r&&(y=this.getLinkPoint(t,i,o,!0,!1,n,e),u=this.getLinkPoint(n,e,h,!1,!1,t,i),l=this.adjustPoints(0,y,r-1,u))&&(y=this.getLinkPoint(t,i,o,!0,!1,n,e),u=this.getLinkPoint(n,e,h,!1,!1,t,i),this.adjustPoints(0,y,r-1,u)),!l)if(this.Pp(),p){var r=this.getLinkPoint(t,i,o,!0,!1,n,e),y=this.getLinkPoint(n,e,h,!1,!1,t,i),l=y.x-r.x,u=y.y-r.y,f=this.computeCurviness(),p=a=0,d=r.x+l/3,g=r.y+u/3,c=d,v=g;$(u,0)?v=0<l?v-f:v+f:(a=-l/u,p=Math.sqrt(f*f/(a*a+1)),0>f&&(p=-p),c=(0>u?-1:1)*p+d,v=a*(c-d)+g);var d=r.x+2*l/3,g=r.y+2*u/3,m=d,w=g;$(u,0)?w=0<l?w-f:w+f:(m=(0>u?-1:1)*p+d,w=a*(m-d)+g),this.Pp(),this.ni(r),this.oj(c,v),this.oj(m,w),this.ni(y),this.Vg(0,this.getLinkPoint(t,i,o,!0,!1,n,e)),this.Vg(3,this.getLinkPoint(n,e,h,!1,!1,t,i))}else o=this.getLinkPoint(t,i,o,!0,!1,n,e),h=this.getLinkPoint(n,e,h,!1,!1,t,i),this.hasCurviness()?(y=h.x-o.x,n=h.y-o.y,e=this.computeCurviness(),t=o.x+y/2,i=o.y+n/2,r=t,l=i,$(n,0)?l=0<y?l-e:l+e:(y=-y/n,r=Math.sqrt(e*e/(y*y+1)),0>e&&(r=-r),r=(0>n?-1:1)*r+t,l=y*(r-t)+i),this.ni(o),this.oj(r,l)):this.ni(o),this.ni(h)}else{p=this.hm,y&&(a&&p||f)&&this.Pp();var M=f?this.computeCurviness():0,p=this.getLinkPoint(t,i,o,!0,a,n,e),d=c=g=0;if((a||!l||f)&&(v=this.computeEndSegmentLength(t,i,o,!0),d=this.getLinkDirection(t,i,p,o,!0,a,n,e),f&&(l||o.L(h)||!a&&o.x+h.x===1&&o.y+h.y===1)&&(d-=a?90:30,0>M&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),f&&(v+=Math.abs(M)*(a?1:2)),d===0?g=v:d===90?c=v:d===180?g=-v:d===270?c=-v:(g=v*Math.cos(d*Math.PI/180),c=v*Math.sin(d*Math.PI/180)),o.Ud()&&f)){var k=i.Ya(Tt,s.K()),D=s.wb(k.x+1e3*g,k.y+1e3*c);this.getLinkPointFromPoint(t,i,k,D,!0,p),s.v(k),s.v(D)}var v=this.getLinkPoint(n,e,h,!1,a,t,i),C=w=m=0;(a||!u||f)&&(k=this.computeEndSegmentLength(n,e,h,!1),C=this.getLinkDirection(n,e,v,h,!1,a,t,i),f&&(u||o.L(h)||!a&&o.x+h.x===1&&o.y+h.y===1)&&(C+=a?0:30,0>M&&(C+=180)),0>C?C+=360:360<=C&&(C-=360),f&&(k+=Math.abs(M)*(a?1:2)),C===0?m=k:C===90?w=k:C===180?m=-k:C===270?w=-k:(m=k*Math.cos(C*Math.PI/180),w=k*Math.sin(C*Math.PI/180)),h.Ud()&&f&&(k=e.Ya(Tt,s.K()),D=s.wb(k.x+1e3*m,k.y+1e3*w),this.getLinkPointFromPoint(n,e,k,D,!1,v),s.v(k),s.v(D))),h=p,(a||!l||f)&&(h=new F(p.x+g,p.y+c)),o=v,(a||!u||f)&&(o=new F(v.x+m,v.y+w)),!y&&!a&&l&&3<r&&this.adjustPoints(0,p,r-2,o)?this.Vg(r-1,v):!y&&!a&&u&&3<r&&this.adjustPoints(1,h,r-1,v)?this.Vg(0,p):!y&&(a?6<=r:4<r)&&this.adjustPoints(1,h,r-2,o)?(this.Vg(0,p),this.Vg(r-1,v)):(this.Pp(),this.ni(p),(a||!l||f)&&this.ni(h),a&&this.addOrthoPoints(h,d,o,C,t,n),(a||!u||f)&&this.ni(o),this.ni(v))}return!0};function dc(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x=i.x>=t.x?t.x+9e9:t.x-9e9,i.y=t.y):(i.y=i.y>=t.y?t.y+9e9:t.y-9e9,i.x=t.x),i}S.prototype.getLinkPointFromPoint=function(t,i,n,e,r,o){if(o===void 0&&(o=new F),t===null||i===null)return o.assign(n),o;t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(i=r.port));var h=r=0,l=0,u=0;if(t=null,r=i.R,r===null||r.Yg()||(r=r.R),r===null)r=e.x,h=e.y,l=n.x,u=n.y;else{t=r.rh,r=1/(t.m11*t.m22-t.m12*t.m21);var l=t.m22*r,u=-t.m12*r,f=-t.m21*r,a=t.m11*r,p=r*(t.m21*t.dy-t.m22*t.dx),y=r*(t.m12*t.dx-t.m11*t.dy);r=e.x*l+e.y*f+p,h=e.x*u+e.y*a+y,l=n.x*l+n.y*f+p,u=n.x*u+n.y*a+y}return i.Fn(r,h,l,u,o),t!==null&&o.transform(t),o};function ap(t,i){var n=i.Ws;return n===null&&(n=new il,n.port=i,n.Rc=i.W,i.Ws=n),I1(n,t)}S.prototype.getLinkPoint=function(t,i,n,e,r,o,h,l){if(l===void 0&&(l=new F),n.Zc())return i.Ya(n,l),l;if(n.zj()){var u=ap(this,i);if(u!==null){if(l.assign(u.nq),r&&this.sy===D1){var f=ap(this,h);if(f!==null&&u.yn<f.yn){var u=s.K(),f=s.K(),a=new O(i.Ya(gi,u),i.Ya(_i,f)),p=this.computeSpot(!e,h);t=this.getLinkPoint(o,h,p,!e,r,t,i,f),(n.xj(Il)||n.xj(Bl))&&t.y>=a.y&&t.y<=a.y+a.height?l.y=t.y:(n.xj(Al)||n.xj(zl))&&t.x>=a.x&&t.x<=a.x+a.width&&(l.x=t.x),s.v(u),s.v(f)}}return l}}return n=i.Ya(Tt,s.K()),u=o=null,this.qa>(r?6:2)?(u=e?this.l(1):this.l(this.qa-2),r&&(u=dc(n,u.copy()))):(o=s.K(),u=h.Ya(Tt,o),r&&(u=dc(n,u)),s.v(o)),this.getLinkPointFromPoint(t,i,n,u,e,l),s.v(n),l},S.prototype.getLinkDirection=function(t,i,n,e,r,o,h,l){t:if(e.Zc())n=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:.5>e.x?225:.5<e.x?45:0;else{if(e.zj()){var u=ap(this,i);if(u!==null)switch(u.ze){case s.od:n=270;break t;case s.Uc:n=180;break t;default:case s.ed:n=0;break t;case s.dd:n=90;break t}}var u=i.Ya(Tt,s.K()),f=null,a=null;this.qa>(o?6:2)?(a=r?this.l(1):this.l(this.qa-2),a=o?dc(u,a.copy()):n):(f=s.K(),a=l.Ya(Tt,f),s.v(f)),n=0,n=Math.abs(a.x-u.x)>Math.abs(a.y-u.y)?a.x>=u.x?0:180:a.y>=u.y?90:270,s.v(u)}switch(e.Ud()&&h.Ah(t)&&(n+=180,360<=n&&(n-=360)),t=$h,t=r?this.lu:this.ev,t===$h&&(t=r?i.lu:i.ev),t){case w1:i=i.dm(),n+=i,360<=n&&(n-=360);break;case $h:case yu:if(e.ZA()||(i=i.dm(),i===0))break;45<=i&&135>i?n+=90:135<=i&&225>i?n+=180:225<=i&&315>i&&(n+=270),360<=n&&(n-=360)}return n},S.prototype.computeEndSegmentLength=function(t,i,n,e){return i!==null&&n.zj()&&(t=ap(this,i),t!==null)?t.Ax:(t=NaN,t=e?this.cm:this.wm,i!==null&&isNaN(t)&&(t=e?i.cm:i.wm),isNaN(t)&&(t=10),t)},S.prototype.computeSpot=function(t,i){var n;if(t)if(n=i||this.gc,n===null)n=Tt;else{var e=this.Mb;e.ge()&&n!==null&&(e=n.Mb),n=e===cn?ki:e}else n=i||this.zc,n===null?n=Tt:(e=this.Nb,e.ge()&&n!==null&&(e=n.Nb),n=e===cn?ki:e);return n},S.prototype.computeOtherPoint=function(t,i){var n=i.Ya(Tt),e;return e=i.Ws,e=e!==null?I1(e,this):null,e!==null&&(n=e.nq),n},S.prototype.computeShortLength=function(t){if(t){if(t=this.mu,isNaN(t)){var i=this.gc;i!==null&&(t=i.mu)}}else t=this.fv,isNaN(t)&&(i=this.zc,i!==null&&(t=i.fv));return isNaN(t)?0:t},S.prototype.Jk=function(t,i,n,e,r,o){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var h=o;if(o===void 0&&(h=s.Wg(),h.reset()),h.multiply(this.transform),this.vn(t,h))return Hy(this,i,n,r),o===void 0&&s.cf(h),!0;if(this.$f(t,h)){var l=!1;if(!this.Kn)for(var u=this.xa.n,f=u.length;f--;){var a=u[f];if(a.visible||a===this.cg){var p=a.U,y=this.Ja;if(!(p.x>y.width||p.y>y.height||0>p.x+p.width||0>p.y+p.height)){if(p=s.Wg(),p.set(h),a instanceof A)l=a.Jk(t,i,n,e,r,p);else if(this.path===a){if(a instanceof Y){var l=a,c=t,v=e,y=p;if(l.Ug===!1)l=!1;else if(y.multiply(l.transform),v)t:{var d=c,g=y;if(l.vn(d,g))l=!0;else{if(g===void 0&&(g=l.transform,d.Fk(l.U))){l=!0;break t}var y=d.left,c=d.right,v=d.top,d=d.bottom,m=s.K(),w=s.K(),M=s.K(),k=s.Wg();k.set(g),k.UF(l.transform),k.TA(),w.x=c,w.y=v,w.transform(k),m.x=y,m.y=v,m.transform(k),g=!1,uh(l,m,w,M)?g=!0:(m.x=c,m.y=d,m.transform(k),uh(l,m,w,M)?g=!0:(w.x=y,w.y=d,w.transform(k),uh(l,m,w,M)?g=!0:(m.x=y,m.y=v,m.transform(k),uh(l,m,w,M)&&(g=!0)))),s.cf(k),s.v(m),s.v(w),s.v(M),l=g}}else l=l.vn(c,y)}}else l=Ag(a,t,e,p);l&&(i!==null&&(a=i(a)),a&&(n===null||n(a))&&(r instanceof R&&r.add(a),r instanceof z&&r.add(a))),s.cf(p)}}}return o===void 0&&s.cf(h),l||this.background!==null||this.qn!==null}return o===void 0&&s.cf(h),!1},s.u(S,{ac:"isOrthogonal"},function(){return(this.bn.value&2)===2}),s.u(S,{hm:"isAvoiding"},function(){return(this.bn.value&4)===4}),S.prototype.computeCurve=function(){if(this.Oi===null){var t=this.gc,i=this.ac;this.Oi=t!==null&&t===this.zc&&!i}return this.Oi?De:this.nf},S.prototype.computeCorner=function(){if(this.nf===De)return 0;var t=this.wA;return(isNaN(t)||0>t)&&(t=10),t},S.prototype.findMidLabel=function(){for(var t=this.path,i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e];if(r!==t&&!r.ff&&(r.Re===-1/0||isNaN(r.Re)))return r}for(t=this.Ff;t.next();)if(i=t.value,i.Re===-1/0||isNaN(i.Re))return i;return null},S.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t;t=Math.max(14,this.computeThickness());var i=this.gc,n=this.zc;if(i!==null&&n!==null){var e=this.findMidLabel();if(e!==null){var h=e.Ja,r=e.margin,o=isNaN(h.width)?30:h.width*e.scale+r.left+r.right,h=isNaN(h.height)?14:h.height*e.scale+r.top+r.bottom,e=e.Eq;e===up||e===cc||e===yc?t=Math.max(t,h):e===jf||e===Df||e===Cf||e===Ff?t=Math.max(t,o):(i=i.Ya(Tt).Qb(n.Ya(Tt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(i)*o)+Math.abs(Math.cos(i)*h)+1)),this.nf===De&&(t*=1.333)}}return t},S.prototype.arrangeBundledLinks=function(t,i){if(i)for(var n=0;n<t.length;n++){var e=t[n];e.Jp===ye&&e.Tb()}},S.prototype.computeCurviness=function(){var t=this.sx;if(isNaN(t)){var t=16,i=this.Bi;if(i!==null){for(var n=s.Za(),e=0,r=i.links,o=0;o<r.length;o++){var h=r[o],h=h.computeSpacing();n.push(h),e+=h}for(e=-e/2,o=0;o<r.length;o++){if(h=r[o],h===this){t=e+n[o]/2;break}e+=n[o]}i.qq===this.V&&(t=-t),s.ra(n)}}return t},S.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.mb,1):1},S.prototype.hasCurviness=function(){return!isNaN(this.sx)||this.Bi!==null},S.prototype.adjustPoints=function(t,i,n,e){var r=this.Jp;if(this.ac){if(r===hp)return!1;r===lp&&(r=sp)}switch(r){case hp:var o=this.l(t),h=this.l(n);if(!o.Qc(i)||!h.Qc(e)){var r=o.x,o=o.y,l=h.x-r,u=h.y-o,f=Math.sqrt(l*l+u*u);if(!St(f,0)){var a=0;St(l,0)?a=0>u?-Math.PI/2:Math.PI/2:(a=Math.atan(u/Math.abs(l)),0>l&&(a=Math.PI-a));var h=i.x,p=i.y,u=e.x-h,y=e.y-p,c=Math.sqrt(u*u+y*y),l=0;for(St(u,0)?l=0>y?-Math.PI/2:Math.PI/2:(l=Math.atan(y/Math.abs(u)),0>u&&(l=Math.PI-l)),f=c/f,a=l-a,this.Vg(t,i),t+=1;t<n;t++)i=this.l(t),l=i.x-r,u=i.y-o,i=Math.sqrt(l*l+u*u),St(i,0)||(y=0,St(l,0)?y=0>u?-Math.PI/2:Math.PI/2:(y=Math.atan(u/Math.abs(l)),0>l&&(y=Math.PI-y)),l=y+a,i*=f,this.ca(t,h+i*Math.cos(l),p+i*Math.sin(l)));this.Vg(n,e)}}return!0;case lp:if(o=this.l(t),p=this.l(n),!o.Qc(i)||!p.Qc(e)){var r=o.x,o=o.y,h=p.x,p=p.y,f=(h-r)*(h-r)+(p-o)*(p-o),l=i.x,a=i.y,u=e.x,y=e.y,c=0,v=1;for(u-l!==0?(c=(y-a)/(u-l),v=Math.sqrt(1+1/(c*c))):c=9e9,this.Vg(t,i),t+=1;t<n;t++){i=this.l(t);var d=i.x,g=i.y,m=.5;f!==0&&(m=((r-d)*(r-h)+(o-g)*(o-p))/f);var w=r+m*(h-r),M=o+m*(p-o);i=Math.sqrt((d-w)*(d-w)+(g-M)*(g-M)),g<c*(d-w)+M&&(i=-i),0<c&&(i=-i),d=l+m*(u-l),m=a+m*(y-a),c!==0?(i=d+i/v,this.ca(t,i,m-(i-d)/c)):this.ca(t,d,m+i)}this.Vg(n,e)}return!0;case sp:t:{if(this.ac&&(r=this.l(t),o=this.l(t+1),h=this.l(t+2),l=o.x,a=o.y,p=l,f=a,$(r.y,o.y)?$(o.x,h.x)?a=i.y:$(o.y,h.y)&&(l=i.x):$(r.x,o.x)&&($(o.y,h.y)?l=i.x:$(o.x,h.x)&&(a=i.y)),this.ca(t+1,l,a),r=this.l(n),o=this.l(n-1),h=this.l(n-2),l=o.x,a=o.y,u=l,y=a,$(r.y,o.y)?$(o.x,h.x)?a=e.y:$(o.y,h.y)&&(l=e.x):$(r.x,o.x)&&($(o.y,h.y)?l=e.x:$(o.x,h.x)&&(a=e.y)),this.ca(n-1,l,a),gc(this))){this.ca(t+1,p,f),this.ca(n-1,u,y),n=!1;break t}this.Vg(t,i),this.Vg(n,e),n=!0}return n;default:return!1}},S.prototype.addOrthoPoints=function(t,i,n,e,r,o){i=-45<=i&&45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270,e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270;var h=r.U.copy(),l=o.U.copy();if(h.H()&&l.H()){h.Zf(8,8),l.Zf(8,8),h.yi(t),l.yi(n);var u,f;i===0?n.x>t.x||e===270&&n.y<t.y&&l.right>t.x||e===90&&n.y>t.y&&l.right>t.x?(u=new F(n.x,t.y),f=new F(n.x,(t.y+n.y)/2),e===180?(u.x=this.computeMidOrthoPosition(t.x,n.x,!1),f.x=u.x,f.y=n.y):e===270&&n.y<t.y||e===90&&n.y>t.y?(u.x=t.x<l.left?this.computeMidOrthoPosition(t.x,l.left,!1):t.x<l.right&&(e===270&&t.y<l.top||e===90&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):l.right,f.x=u.x,f.y=n.y):e===0&&t.x<l.left&&t.y>l.top&&t.y<l.bottom&&(u.x=t.x,u.y=t.y<n.y?Math.min(n.y,l.top):Math.max(n.y,l.bottom),f.y=u.y)):(u=new F(t.x,n.y),f=new F((t.x+n.x)/2,n.y),(e===180||e===90&&n.y<h.top||e===270&&n.y>h.bottom)&&(e===180&&(l.Ia(t)||h.Ia(n))?u.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(e===180||e===90)?u.y=this.computeMidOrthoPosition(h.top,Math.max(n.y,l.bottom),!0):n.y>t.y&&(e===180||e===270)&&(u.y=this.computeMidOrthoPosition(h.bottom,Math.min(n.y,l.top),!0)),f.x=n.x,f.y=u.y),u.y>h.top&&u.y<h.bottom&&(n.x>=h.left&&n.x<=t.x||t.x<=l.right&&t.x>=n.x?(e===90||e===270)&&(u=new F(Math.max((t.x+n.x)/2,t.x),t.y),f=new F(u.x,n.y)):(u.y=e===270||(e===0||e===180)&&n.y<t.y?Math.min(n.y,e===0?h.top:Math.min(h.top,l.top)):Math.max(n.y,e===0?h.bottom:Math.max(h.bottom,l.bottom)),f.x=n.x,f.y=u.y))):i===180?n.x<t.x||e===270&&n.y<t.y&&l.left<t.x||e===90&&n.y>t.y&&l.left<t.x?(u=new F(n.x,t.y),f=new F(n.x,(t.y+n.y)/2),e===0?(u.x=this.computeMidOrthoPosition(t.x,n.x,!1),f.x=u.x,f.y=n.y):e===270&&n.y<t.y||e===90&&n.y>t.y?(u.x=t.x>l.right?this.computeMidOrthoPosition(t.x,l.right,!1):t.x>l.left&&(e===270&&t.y<l.top||e===90&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):l.left,f.x=u.x,f.y=n.y):e===180&&t.x>l.right&&t.y>l.top&&t.y<l.bottom&&(u.x=t.x,u.y=t.y<n.y?Math.min(n.y,l.top):Math.max(n.y,l.bottom),f.y=u.y)):(u=new F(t.x,n.y),f=new F((t.x+n.x)/2,n.y),(e===0||e===90&&n.y<h.top||e===270&&n.y>h.bottom)&&(e===0&&(l.Ia(t)||h.Ia(n))?u.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(e===0||e===90)?u.y=this.computeMidOrthoPosition(h.top,Math.max(n.y,l.bottom),!0):n.y>t.y&&(e===0||e===270)&&(u.y=this.computeMidOrthoPosition(h.bottom,Math.min(n.y,l.top),!0)),f.x=n.x,f.y=u.y),u.y>h.top&&u.y<h.bottom&&(n.x<=h.right&&n.x>=t.x||t.x>=l.left&&t.x<=n.x?(e===90||e===270)&&(u=new F(Math.min((t.x+n.x)/2,t.x),t.y),f=new F(u.x,n.y)):(u.y=e===270||(e===0||e===180)&&n.y<t.y?Math.min(n.y,e===180?h.top:Math.min(h.top,l.top)):Math.max(n.y,e===180?h.bottom:Math.max(h.bottom,l.bottom)),f.x=n.x,f.y=u.y))):i===90?n.y>t.y||e===180&&n.x<t.x&&l.bottom>t.y||e===0&&n.x>t.x&&l.bottom>t.y?(u=new F(t.x,n.y),f=new F((t.x+n.x)/2,n.y),e===270?(u.y=this.computeMidOrthoPosition(t.y,n.y,!0),f.x=n.x,f.y=u.y):e===180&&n.x<t.x||e===0&&n.x>t.x?(u.y=t.y<l.top?this.computeMidOrthoPosition(t.y,l.top,!0):t.y<l.bottom&&(e===180&&t.x<l.left||e===0&&t.x>l.right)?this.computeMidOrthoPosition(t.y,n.y,!0):l.bottom,f.x=n.x,f.y=u.y):e===90&&t.y<l.top&&t.x>l.left&&t.x<l.right&&(u.x=t.x<n.x?Math.min(n.x,l.left):Math.max(n.x,l.right),u.y=t.y,f.x=u.x)):(u=new F(n.x,t.y),f=new F(n.x,(t.y+n.y)/2),(e===270||e===0&&n.x<h.left||e===180&&n.x>h.right)&&(e===270&&(l.Ia(t)||h.Ia(n))?u.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(e===270||e===0)?u.x=this.computeMidOrthoPosition(h.left,Math.max(n.x,l.right),!1):n.x>t.x&&(e===270||e===180)&&(u.x=this.computeMidOrthoPosition(h.right,Math.min(n.x,l.left),!1)),f.x=u.x,f.y=n.y),u.x>h.left&&u.x<h.right&&(n.y>=h.top&&n.y<=t.y||t.y<=l.bottom&&t.y>=n.y?(e===0||e===180)&&(u=new F(t.x,Math.max((t.y+n.y)/2,t.y)),f=new F(n.x,u.y)):(u.x=e===180||(e===90||e===270)&&n.x<t.x?Math.min(n.x,e===90?h.left:Math.min(h.left,l.left)):Math.max(n.x,e===90?h.right:Math.max(h.right,l.right)),f.x=u.x,f.y=n.y))):n.y<t.y||e===180&&n.x<t.x&&l.top<t.y||e===0&&n.x>t.x&&l.top<t.y?(u=new F(t.x,n.y),f=new F((t.x+n.x)/2,n.y),e===90?(u.y=this.computeMidOrthoPosition(t.y,n.y,!0),f.x=n.x,f.y=u.y):e===180&&n.x<t.x||e===0&&n.x>=t.x?(u.y=t.y>l.bottom?this.computeMidOrthoPosition(t.y,l.bottom,!0):t.y>l.top&&(e===180&&t.x<l.left||e===0&&t.x>l.right)?this.computeMidOrthoPosition(t.y,n.y,!0):l.top,f.x=n.x,f.y=u.y):e===270&&t.y>l.bottom&&t.x>l.left&&t.x<l.right&&(u.x=t.x<n.x?Math.min(n.x,l.left):Math.max(n.x,l.right),u.y=t.y,f.x=u.x)):(u=new F(n.x,t.y),f=new F(n.x,(t.y+n.y)/2),(e===90||e===0&&n.x<h.left||e===180&&n.x>h.right)&&(e===90&&(l.Ia(t)||h.Ia(n))?u.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(e===90||e===0)?u.x=this.computeMidOrthoPosition(h.left,Math.max(n.x,l.right),!1):n.x>t.x&&(e===90||e===180)&&(u.x=this.computeMidOrthoPosition(h.right,Math.min(n.x,l.left),!1)),f.x=u.x,f.y=n.y),u.x>h.left&&u.x<h.right&&(n.y<=h.bottom&&n.y>=t.y||t.y>=l.top&&t.y<=n.y?(e===0||e===180)&&(u=new F(t.x,Math.min((t.y+n.y)/2,t.y)),f=new F(n.x,u.y)):(u.x=e===180||(e===90||e===270)&&n.x<t.x?Math.min(n.x,e===270?h.left:Math.min(h.left,l.left)):Math.max(n.x,e===270?h.right:Math.max(h.right,l.right)),f.x=u.x,f.y=n.y)));var a=u,p=f,y=n;if(this.hm){var c=this.g;if(c===null||!Mg(c)||h.Ia(y)&&!o.Ah(r)||l.Ia(t)&&!r.Ah(o)||r===o||this.layer.Hc)i=!1;else{var v=Cy(c,!0,this.Ca,null);if(v.lq(Math.min(t.x,a.x),Math.min(t.y,a.y),Math.abs(t.x-a.x),Math.abs(t.y-a.y))&&v.lq(Math.min(a.x,p.x),Math.min(a.y,p.y),Math.abs(a.x-p.x),Math.abs(a.y-p.y))&&v.lq(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y)))i=!1;else{r=t,o=y;var d=n=null;if(c.$A){c=v.eb.copy(),c.Zf(-v.Op,-v.Mp);var g=s.K();gu(v,t.x,t.y)||(co(c.x,c.y,c.x+c.width,c.y+c.height,t.x,t.y,a.x,a.y,g)?(n=t=g.copy(),i=g.Qb(a)):co(c.x,c.y,c.x+c.width,c.y+c.height,a.x,a.y,p.x,p.y,g)?(n=t=g.copy(),i=g.Qb(p)):co(c.x,c.y,c.x+c.width,c.y+c.height,p.x,p.y,y.x,y.y,g)&&(n=t=g.copy(),i=g.Qb(y))),gu(v,y.x,y.y)||(co(c.x,c.y,c.x+c.width,c.y+c.height,y.x,y.y,p.x,p.y,g)?(d=y=g.copy(),e=p.Qb(g)):co(c.x,c.y,c.x+c.width,c.y+c.height,p.x,p.y,a.x,a.y,g)?(d=y=g.copy(),e=a.Qb(g)):co(c.x,c.y,c.x+c.width,c.y+c.height,a.x,a.y,t.x,t.y,g)&&(d=y=g.copy(),e=t.Qb(g))),s.v(g)}h=h.copy().Zg(l),l=v.wG,h.Zf(v.Op*l,v.Mp*l),Pc(v,t,i,y,e,h),l=yh(v,y.x,y.y),!v.abort&&999999<=l&&(Mc(v),l=v.NF,h.Zf(v.Op*l,v.Mp*l),Pc(v,t,i,y,e,h),l=yh(v,y.x,y.y)),!v.abort&&999999<=l&&v.NG&&(Mc(v),Pc(v,t,i,y,e,v.eb),l=yh(v,y.x,y.y)),!v.abort&&999999>l&&yh(v,y.x,y.y)!==0?(mc(this,v,y.x,y.y,e,!0),h=this.l(2),4>this.qa?(i===0||i===180?(h.x=t.x,h.y=y.y):(h.x=y.x,h.y=t.y),this.ca(2,h.x,h.y),this.w(3,h.x,h.y)):(y=this.l(3),i===0||i===180?$(h.x,y.x)?(h=i===0?Math.max(h.x,t.x):Math.min(h.x,t.x),this.ca(2,h,t.y),this.ca(3,h,y.y)):$(h.y,y.y)?(Math.abs(t.y-h.y)<=v.Mp/2&&(this.ca(2,h.x,t.y),this.ca(3,y.x,t.y)),this.w(2,h.x,t.y)):this.ca(2,t.x,h.y):(i===90||i===270)&&($(h.y,y.y)?(h=i===90?Math.max(h.y,t.y):Math.min(h.y,t.y),this.ca(2,t.x,h),this.ca(3,y.x,h)):$(h.x,y.x)?(Math.abs(t.x-h.x)<=v.Op/2&&(this.ca(2,t.x,h.y),this.ca(3,t.x,y.y)),this.w(2,t.x,h.y)):this.ca(2,h.x,t.y))),n!==null&&(t=this.l(1),y=this.l(2),t.x!==y.x&&t.y!==y.y?i===0||i===180?this.w(2,t.x,y.y):this.w(2,y.x,t.y):i===0||i===180?this.w(2,r.x,n.y):this.w(2,n.x,r.y)),d!==null&&(e===0||e===180?this.oj(o.x,d.y):this.oj(d.x,o.y)),i=!0):i=!1}}}else i=!1;i||(this.ni(u),this.ni(f))}},S.prototype.computeMidOrthoPosition=function(t,i){if(this.hasCurviness()){var n=this.computeCurviness();return(t+i)/2+n}return(t+i)/2};function gc(t){if(t.g===null||!t.hm||!Mg(t.g))return!1;var i=t.points.n,n=i.length;if(4>n)return!1;t=Cy(t.g,!0,t.Ca,null);for(var e=1;e<n-2;e++){var r=i[e],o=i[e+1];if(!t.lq(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function mc(t,i,n,e,r,o){var h=i.Op,l=i.Mp,u=yh(i,n,e),f=n,a=e;for(r===0?f+=h:r===90?a+=l:r===180?f-=h:a-=l;1<u&&yh(i,f,a)===u-1;)n=f,e=a,r===0?f+=h:r===90?a+=l:r===180?f-=h:a-=l,u-=1;o?1<u&&(r===180||r===0?n=Math.floor(n/h)*h+h/2:(r===90||r===270)&&(e=Math.floor(e/l)*l+l/2)):(n=Math.floor(n/h)*h+h/2,e=Math.floor(e/l)*l+l/2),1<u&&(o=r,f=n,a=e,r===0?(o=90,a+=l):r===90?(o=180,f-=h):r===180?(o=270,a-=l):r===270&&(o=0,f+=h),yh(i,f,a)===u-1?mc(t,i,f,a,o,!1):(f=n,a=e,r===0?(o=270,a-=l):r===90?(o=0,f+=h):r===180?(o=90,a+=l):r===270&&(o=180,f-=h),yh(i,f,a)===u-1&&mc(t,i,f,a,o,!1))),t.oj(n,e)}S.prototype.findClosestSegment=function(t){var i=t.x;t=t.y;for(var n=this.l(0),e=this.l(1),r=Tn(i,t,n.x,n.y,e.x,e.y),o=0,h=1;h<this.qa-1;h++){var n=this.l(h+1),l=Tn(i,t,e.x,e.y,n.x,n.y),e=n;l<r&&(o=h,r=l)}return o},S.prototype.fe=function(){this.Sa=null},s.u(S,{of:"geometry"},function(){return this.Sa===null&&(this.jo(),this.Sa=this.makeGeometry()),this.Sa}),S.prototype.Hu=function(t){if(!(!t&&(this.Mf===!1||(t=this.Bd(),this.Sa!==null&&(t===null||t.of!==null))))&&(this.Sa=this.makeGeometry(),t=this.path,t!==null)){t.Sa=this.Sa;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var r=i[e];r!==t&&r.ff&&r instanceof Y&&(r.Sa=this.Sa)}}},S.prototype.makeGeometry=function(){var t=this.qa;if(2>t)return new et(qi);var i=!1,h=this.g;h!==null&&ph(this)&&h.ql.contains(this)&&this.Dw!==null&&(i=!0);var l=h=0,n=this.l(0).copy(),e=n.copy(),h=this.gd.n,r=this.computeCurve();if(r===De&&3<=t&&!St(this.Iq,0))if(t===3)var o=this.l(1),h=Math.min(n.x,o.x),l=Math.min(n.y,o.y),o=this.l(2),h=Math.min(h,o.x),l=Math.min(l,o.y);else{if(this.ac)for(o=0;o<t;o++)l=h[o],e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);else for(o=3;o<t;o+=3)o+3>=t&&(o=t-1),h=this.l(o),e.x=Math.min(h.x,e.x),e.y=Math.min(h.y,e.y);h=e.x,l=e.y}else{for(o=0;o<t;o++)l=h[o],e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);h=e.x,l=e.y}if(h-=this.Yz.x,l-=this.Yz.y,n.x-=h,n.y-=l,t!==2||ph(this)){var u=s.s();if(this.computeShortLength(!0)!==0&&(n=_h(this,n,!0,e)),j(u,n.x,n.y,!1,!1),r===De&&3<=t&&!St(this.Iq,0))if(t===3)o=this.l(1),t=o.x-h,i=o.y-l,o=this.l(2).copy(),o.x-=h,o.y-=l,this.computeShortLength(!1)!==0&&(o=_h(this,o,!1,e)),T(u,t,i,t,i,o.x,o.y);else if(this.ac){for(var e=new F(h,l),n=this.l(1).copy(),r=new F(h,l),t=new F(h,l),i=this.l(0),f=null,a=this.Iq/3,o=1;o<this.qa-1;o++){var f=this.l(o),p=i,y=f,c=this.l(xc(this,f,o,!1));if((!St(p.x,y.x)||!St(y.x,c.x))&&(!St(p.y,y.y)||!St(y.y,c.y))){var k=a,v=r,d=t;isNaN(k)&&(k=this.Iq/3);var g=p.x,p=p.y,m=y.x,y=y.y,w=c.x,c=c.y,M=k*pp(g,p,m,y),k=k*pp(m,y,w,c);St(p,y)&&St(m,w)&&(m>g?c>y?(v.x=m-M,v.y=y-M,d.x=m+k,d.y=y+k):(v.x=m-M,v.y=y+M,d.x=m+k,d.y=y-k):c>y?(v.x=m+M,v.y=y-M,d.x=m-k,d.y=y+k):(v.x=m+M,v.y=y+M,d.x=m-k,d.y=y-k)),St(g,m)&&St(y,c)&&(y>p?(w>m?(v.x=m-M,v.y=y-M,d.x=m+k):(v.x=m+M,v.y=y-M,d.x=m-k),d.y=y+k):(w>m?(v.x=m-M,v.y=y+M,d.x=m+k):(v.x=m+M,v.y=y+M,d.x=m-k),d.y=y-k)),(St(g,m)&&St(m,w)||St(p,y)&&St(y,c))&&(g=.5*(g+w),p=.5*(p+c),v.x=g,v.y=p,d.x=g,d.y=p),(o===1||o===2&&St(i.x,this.l(0).x)&&St(i.y,this.l(0).y))&&(n.x=.5*(i.x+f.x),n.y=.5*(i.y+f.y)),T(u,n.x-h,n.y-l,r.x-h,r.y-l,f.x-h,f.y-l),e.set(r),n.set(t),i=f}}o=i.x,i=i.y,e=this.l(this.qa-1),this.computeShortLength(!1)!==0&&(e=_h(this,e.copy(),!1,Qs)),o=.5*(o+e.x),i=.5*(i+e.y),T(u,t.x-h,t.y-l,o-h,i-l,e.x-h,e.y-l)}else for(o=3;o<t;o+=3)i=this.l(o-2),o+3>=t&&(o=t-1),e=this.l(o-1),n=this.l(o),o===t-1&&this.computeShortLength(!1)!==0&&(n=_h(this,n.copy(),!1,Qs)),T(u,i.x-h,i.y-l,e.x-h,e.y-l,n.x-h,n.y-l);else{for(e=s.K(),e.assign(this.l(0)),o=1,n=0;o<t;){if(o=xc(this,e,o,1<o),v=this.l(o),o>=t-1){if(!e.L(v))this.computeShortLength(!1)!==0&&(v=_h(this,v.copy(),!1,Qs)),bh(this,u,-h,-l,e,v,i);else if(n===0)for(o=1;o<t;)v=this.l(o++),bh(this,u,-h,-l,e,v,i),e.assign(v);break}n=xc(this,v,o+1,o<t-3),o=u,r=-h,f=-l,a=e,d=this.l(n),g=e,p=i,$(a.y,v.y)&&$(v.x,d.x)?(k=this.computeCorner(),k=Math.min(k,Math.abs(v.x-a.x)/2),k=m=Math.min(k,Math.abs(d.y-v.y)/2),$(k,0)?(bh(this,o,r,f,a,v,p),g.assign(v)):(y=v.x,w=v.y,c=y,M=w,y=v.x>a.x?v.x-k:v.x+k,M=d.y>v.y?v.y+m:v.y-m,bh(this,o,r,f,a,new F(y,w),p),tp(o,v.x+r,v.y+f,c+r,M+f),g.m(c,M))):$(a.x,v.x)&&$(v.y,d.y)?(k=this.computeCorner(),m=Math.min(k,Math.abs(v.y-a.y)/2),m=k=Math.min(m,Math.abs(d.x-v.x)/2),$(k,0)?(bh(this,o,r,f,a,v,p),g.assign(v)):(y=v.x,M=w=v.y,w=v.y>a.y?v.y-m:v.y+m,c=d.x>v.x?v.x+k:v.x-k,bh(this,o,r,f,a,new F(y,w),p),tp(o,v.x+r,v.y+f,c+r,M+f),g.m(c,M))):(bh(this,o,r,f,a,v,p),g.assign(v)),o=n}s.v(e)}h=u.o,s.q(u)}else u=this.l(1).copy(),u.x-=h,u.y-=l,this.computeShortLength(!0)!==0&&(n=_h(this,n,!0,e)),this.computeShortLength(!1)!==0&&(u=_h(this,u,!1,e)),h=new et(qi),h.ha=n.x,h.da=n.y,h.C=u.x,h.D=u.y;return h};function pp(t,i,n,e){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),i=e-i,isNaN(i)||i===1/0||i===-1/0?NaN:(0>i&&(i=-i),St(t,0)?i:St(i,0)?t:Math.sqrt(t*t+i*i)))}function _h(t,i,n,e){var r=t.qa;if(2>r)return i;if(n){var o=t.l(1);if(n=o.x-e.x,e=o.y-e.y,o=pp(i.x,i.y,n,e),o===0)return i;r=r===2?.5*o:o,t=t.computeShortLength(!0),t>r&&(t=r),n=t*(n-i.x)/o,t=t*(e-i.y)/o,i.x+=n,i.y+=t}else{if(o=t.l(r-2),n=o.x-e.x,e=o.y-e.y,o=pp(i.x,i.y,n,e),o===0)return i;r=r===2?.5*o:o,t=t.computeShortLength(!1),t>r&&(t=r),n=t*(i.x-n)/o,t=t*(i.y-e)/o,i.x-=n,i.y-=t}return i}function xc(t,i,n,e){for(var r=t.qa,o=i;St(i.x,o.x)&&St(i.y,o.y);){if(n>=r)return r-1;o=t.l(n++)}if(!St(i.x,o.x)&&!St(i.y,o.y))return n-1;for(var h=o;St(i.x,o.x)&&St(o.x,h.x)&&(!e||(i.y>=o.y?o.y>=h.y:o.y<=h.y))||St(i.y,o.y)&&St(o.y,h.y)&&(!e||(i.x>=o.x?o.x>=h.x:o.x<=h.x));){if(n>=r)return r-1;h=t.l(n++)}return n-2}function bh(t,i,n,e,r,o,h){if(!h&&ph(t)){h=[];var l=0;t.isVisible()&&(l=Ox(t,r,o,h));var u=r.x,u=r.y;if(0<l){if($(r.y,o.y))if(r.x<o.x)for(var f=0;f<l;){var a=Math.max(r.x,Math.min(h[f++]-5,o.x-10));i.lineTo(a+n,o.y+e);for(var u=a+n,p=Math.min(a+10,o.x);f<l;){var y=h[f];if(y<p+10)f++,p=Math.min(y+5,o.x);else break}y=(a+p)/2+n,y=o.y-10+e,a=p+n,p=o.y+e,t.nf===$o?j(i,a,p,!1,!1):T(i,u,y,a,y,a,p)}else for(f=l-1;0<=f;){for(a=Math.min(r.x,Math.max(h[f--]+5,o.x+10)),i.lineTo(a+n,o.y+e),u=a+n,p=Math.max(a-10,o.x);0<=f&&(y=h[f],y>p-10);)f--,p=Math.max(y-5,o.x);y=o.y-10+e,a=p+n,p=o.y+e,t.nf===$o?j(i,a,p,!1,!1):T(i,u,y,a,y,a,p)}else if($(r.x,o.x))if(r.y<o.y)for(f=0;f<l;){for(a=Math.max(r.y,Math.min(h[f++]-5,o.y-10)),i.lineTo(o.x+n,a+e),u=a+e,p=Math.min(a+10,o.y);f<l&&(y=h[f],y<p+10);)f++,p=Math.min(y+5,o.y);y=o.x-10+n,a=o.x+n,p+=e,t.nf===$o?j(i,a,p,!1,!1):T(i,y,u,y,p,a,p)}else for(f=l-1;0<=f;){for(a=Math.min(r.y,Math.max(h[f--]+5,o.y+10)),i.lineTo(o.x+n,a+e),u=a+e,p=Math.max(a-10,o.y);0<=f&&(y=h[f],y>p-10);)f--,p=Math.max(y-5,o.y);y=o.x-10+n,a=o.x+n,p+=e,t.nf===$o?j(i,a,p,!1,!1):T(i,y,u,y,p,a,p)}}}i.lineTo(o.x+n,o.y+e)}function Ox(t,i,n,e){var r=t.g;if(r===null||i.L(n))return 0;for(r=r.Ux;r.next();){var o=r.value;if(o!==null&&o.visible)for(var o=o.xb.n,h=o.length,l=0;l<h;l++){var u=o[l];if(u instanceof S){if(u===t)return 0<e.length&&e.sort(function(p,y){return p-y}),e.length;if(u.isVisible()&&ph(u)){var f=u.ao;f.H()&&t.ao.$f(f)&&!t.usesSamePort(u)&&(f=u.path,f!==null&&f.Cj()&&Vx(i,n,e,u))}}}}return 0<e.length&&e.sort(function(a,p){return a-p}),e.length}function Vx(t,i,n,e){for(var r=$(t.y,i.y),o=e.qa,h=e.l(0),l=s.K(),u=1;u<o;u++){var f=e.l(u);if(u<o-1){var a=e.l(u+1);h.y===f.y&&f.y===a.y?(f.x>h.x&&a.x>f.x||f.x<h.x&&a.x<f.x)&&(f=a,u++):h.x===f.x&&f.x===a.x&&(f.y>h.y&&a.y>f.y||f.y<h.y&&a.y<f.y)&&(f=a,u++)}t:{var a=l,p=t.x,y=t.y,c=i.x,v=i.y,d=h.x,h=h.y,g=f.x,m=f.y;if($(p,c)){if(!$(y,v)&&$(h,m)&&Math.min(y,v)<h&&Math.max(y,v)>h&&Math.min(d,g)<p&&Math.max(d,g)>p&&!$(d,g)){a.x=p,a.y=h,a=!0;break t}}else if($(y,v)&&$(d,g)&&Math.min(p,c)<d&&Math.max(p,c)>d&&Math.min(h,m)<y&&Math.max(h,m)>y&&!$(h,m)){a.x=d,a.y=y,a=!0;break t}a.x=0,a.y=0,a=!1}a&&(r?n.push(l.x):n.push(l.y)),h=f}s.v(l)}s.u(S,{fu:"firstPickIndex"},function(){var t;return 2>=this.qa?t=0:((t=this.ac)||(t=this.computeSpot(!0)!==ki),t=t?1:0),t}),s.u(S,{Sx:"lastPickIndex"},function(){var t=this.qa;if(t===0)t=0;else if(2>=t)t-=1;else{var i;(i=this.ac)||(i=this.computeSpot(!1)!==ki),t=i?t-2:t-1}return t});function ph(t){return t=t.nf,t===cu||t===$o}function wc(t,i){if(i||ph(t)){var n=t.g;n===null||n.sm||n.ql.contains(t)||t.Dw===null||n.ql.add(t,t.Dw)}}function yp(t,i){var n=t.layer;if(n!==null&&n.visible&&!n.Hc){var e=n.g;if(e!==null&&!e.Ka.Qe)for(var r=!1,e=e.Ux;e.next();){var o=e.value;if(o.visible){if(o===n)for(var r=!0,h=!1,o=o.xb.n,l=o.length,u=0;u<l;u++){var f=o[u];f instanceof S&&(f===t?h=!0:h&&A1(t,f,i))}else if(r)for(o=o.xb.n,l=o.length,u=0;u<l;u++)f=o[u],f instanceof S&&A1(t,f,i)}}}}function A1(t,i,n){if(i!==null&&i.Sa!==null&&ph(i)){var e=i.ao;e.H()&&(t.ao.$f(e)||n.$f(e))&&(t.usesSamePort(i)||i.fe())}}S.prototype.usesSamePort=function(t){var i=this.qa,n=t.qa;if(0<i&&0<n){var e=this.l(0),r=t.l(0);if(e.Qc(r)||(i=this.l(i-1),t=t.l(n-1),i.Qc(t)||e.Qc(t)||i.Qc(r)))return!0}else if(this.V===t.V||this.Z===t.Z||this.V===t.Z||this.Z===t.V)return!0;return!1},S.prototype.isVisible=function(){if(!L.prototype.isVisible.call(this))return!1;var t=this.Ca,i=!0,n=this.g;n!==null&&(i=n.Vd);var e=this.V;if(e!==null){if(this.bc&&i&&!e.wc)return!1;if(e===t)return!0;for(n=e;n!==null;){if(n.Xb===this)return!0;n=n.Ca}if(n=e.findVisibleNode(),n===null||n===t)return!1}if(e=this.Z,e!==null){if(this.bc&&!i&&!e.wc)return!1;if(e===t)return!0;for(n=e;n!==null;){if(n.Xb===this)return!0;n=n.Ca}if(i=e.findVisibleNode(),i===null||i===t)return!1}return!0},S.prototype.Dd=function(t){if(L.prototype.Dd.call(this,t),this.Bi!==null&&this.Bi.fq(),this.yf!==null)for(var i=this.yf.i;i.next();)i.value.Dd(t)},s.defineProperty(S,{Jp:"adjusting"},function(){return this.Tq},function(t){var i=this.Tq;i!==t&&(this.Tq=t,this.h("adjusting",i,t))}),s.defineProperty(S,{wA:"corner"},function(){return this.nr},function(t){var i=this.nr;i!==t&&(this.nr=t,this.fe(),this.h("corner",i,t))}),s.defineProperty(S,{nf:"curve"},function(){return this.qr},function(t){var i=this.qr;i!==t&&(this.qr=t,this.Tb(),this.fe(),wc(this,i===$o||i===cu||t===$o||t===cu),this.h("curve",i,t))}),s.defineProperty(S,{sx:"curviness"},function(){return this.rr},function(t){var i=this.rr;i!==t&&(this.rr=t,this.Tb(),this.fe(),this.h("curviness",i,t))}),s.defineProperty(S,{sy:"routing"},function(){return this.bn},function(t){var i=this.bn;i!==t&&(this.bn=t,this.Oi=null,this.Tb(),wc(this,(i.value&2)===2||(t.value&2)===2),this.h("routing",i,t))}),s.defineProperty(S,{Iq:"smoothness"},function(){return this.vt},function(t){var i=this.vt;i!==t&&(this.vt=t,this.fe(),this.h("smoothness",i,t))});function Lf(t){var i=t.rg;if(i!==null){var n=t.Hg;if(n!==null){var e=t.Sh;t=t.mi;for(var r=null,o=null,h=i.rc.n,l=h.length,u=0;u<l;u++){var f=h[u];(f.rg===i&&f.Sh===e&&f.Hg===n&&f.mi===t||f.rg===n&&f.Sh===t&&f.Hg===i&&f.mi===e)&&(o===null?o=f:(r===null&&(r=[],r.push(o)),r.push(f)))}if(r!==null){for(o=P1(i,n,e,t),o===null&&(o=new du,o.qq=i,o.iy=e,o.Mu=n,o.jy=t,M1(i,o),M1(n,o)),o.links=r,u=0;u<r.length;u++)f=r[u],f.Bi=o;o.fq()}}}}function Af(t){var i=t.Bi;i!==null&&(t.Bi=null,t=i.links.indexOf(t),0<=t&&(s.Jg(i.links,t),i.fq()))}s.u(S,{key:"key"},function(){var t=this.g;return t!==null&&t.$ instanceof K?t.$.df(this.data):void 0},{configurable:!0});function du(){s.oc(this),this.gh=this.aw=!1,this.jy=this.Mu=this.iy=this.qq=null,this.links=[]}du.prototype.fq=function(){if(!this.aw){var t=this.links;0<t.length&&(t=t[0].g,t!==null&&(t.fD.add(this),this.gh=t.ja.lb))}this.aw=!0},du.prototype.XB=function(){if(this.aw){this.aw=!1;var t=this.links;if(0<t.length){var i=t[0],n=i.g,n=n===null||n.Ln&&!this.gh;this.gh=!1,i.arrangeBundledLinks(t,n),t.length===1&&(i.Bi=null,t.length=0)}t.length===0&&(t=this.qq,this!==null&&t.Mh!==null&&t.Mh.remove(this),t=this.Mu,this!==null&&t.Mh!==null&&t.Mh.remove(this))}},s.be(du,{qq:!0,iy:!0,Mu:!0,jy:!0,links:!0,spacing:!0});function tl(){s.oc(this),this.LB=this.group=null,this.su=!0,this.abort=!1,this.Bg=this.Ag=1,this.ss=this.rs=-1,this.Ee=this.De=8,this.qd=null,this.NG=!1,this.wG=22,this.NF=111}s.be(tl,{group:!0,LB:!0,su:!0,abort:!0,NG:!0,wG:!0,NF:!0}),tl.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var i=t.y,n=t.x+t.width,e=t.y+t.height;if(this.Ag=Math.floor((t.x-this.De)/this.De)*this.De,this.Bg=Math.floor((i-this.Ee)/this.Ee)*this.Ee,this.rs=Math.ceil((n+2*this.De)/this.De)*this.De,this.ss=Math.ceil((e+2*this.Ee)/this.Ee)*this.Ee,t=1+(Math.ceil((this.rs-this.Ag)/this.De)|0),i=1+(Math.ceil((this.ss-this.Bg)/this.Ee)|0),this.qd===null||this.Fp<t-1||this.Gp<i-1){for(n=[],e=0;e<=t;e++)n[e]=[];this.qd=n,this.Fp=t-1,this.Gp=i-1}if(this.qd!==null)for(t=0;t<=this.Fp;t++)for(i=0;i<=this.Gp;i++)this.qd[t][i]=1e6}},s.u(tl,{eb:null},function(){return new O(this.Ag,this.Bg,this.rs-this.Ag,this.ss-this.Bg)}),s.defineProperty(tl,{Op:null},function(){return this.De},function(t){0<t&&t!==this.De&&(this.De=t,this.initialize(this.eb))}),s.defineProperty(tl,{Mp:null},function(){return this.Ee},function(t){0<t&&t!==this.Ee&&(this.Ee=t,this.initialize(this.eb))});function gu(t,i,n){return t.Ag<=i&&i<=t.rs&&t.Bg<=n&&n<=t.ss}function yh(t,i,n){return gu(t,i,n)?(i-=t.Ag,i/=t.De,n-=t.Bg,n/=t.Ee,t.qd[i|0][n|0]):1e6}function cp(t,i,n){gu(t,i,n)&&(i-=t.Ag,i/=t.De,n-=t.Bg,n/=t.Ee,t.qd[i|0][n|0]=0)}function Mc(t){if(t.qd!==null)for(var i=0;i<=t.Fp;i++)for(var n=0;n<=t.Gp;n++)1<=t.qd[i][n]&&(t.qd[i][n]=1e6)}tl.prototype.lq=function(t,i,n,e){if(t>this.rs||t+n<this.Ag||i>this.ss||i+e<this.Bg)return!0;t=(t-this.Ag)/this.De|0,i=(i-this.Bg)/this.Ee|0,n=Math.max(0,n)/this.De+1|0;var r=Math.max(0,e)/this.Ee+1|0;if(0>t&&(n+=t,t=0),0>i&&(r+=i,i=0),0>n||0>r)return!0;for(e=Math.min(t+n-1,this.Fp)|0,n=Math.min(i+r-1,this.Gp)|0;t<=e;t++)for(r=i;r<=n;r++)if(this.qd[t][r]===0)return!1;return!0};function Xr(t,i,n,e,r,o,h,l,u){if(!(i<o||i>h||n<l||n>u)){var f,a;f=i|0,a=n|0;var p=t.qd[f][a];if(1<=p&&999999>p)for(r?a+=e:f+=e,p+=1;o<=f&&f<=h&&l<=a&&a<=u&&!(p>=t.qd[f][a]);)t.qd[f][a]=p,p+=1,r?a+=e:f+=e;if(f=r?a:f,r)if(0<e)for(n+=e;n<f;n+=e)Xr(t,i,n,1,!r,o,h,l,u),Xr(t,i,n,-1,!r,o,h,l,u);else for(n+=e;n>f;n+=e)Xr(t,i,n,1,!r,o,h,l,u),Xr(t,i,n,-1,!r,o,h,l,u);else if(0<e)for(i+=e;i<f;i+=e)Xr(t,i,n,1,!r,o,h,l,u),Xr(t,i,n,-1,!r,o,h,l,u);else for(i+=e;i>f;i+=e)Xr(t,i,n,1,!r,o,h,l,u),Xr(t,i,n,-1,!r,o,h,l,u)}}function vp(t,i,n,e,r,o,h,l,u){i|=0,n|=0;var f=0,a=1;for(t.qd[i][n]=a;f===0&&i>o&&i<h&&n>l&&n<u;)a+=1,t.qd[i][n]=a,r?n+=e:i+=e,f=t.qd[i][n]}function dp(t,i,n,e,r,o,h,l,u){i|=0,n|=0;var f=0;for(t.qd[i][n]=999999;f===0&&i>o&&i<h&&n>l&&n<u;)t.qd[i][n]=999999,r?n+=e:i+=e,f=t.qd[i][n]}function Pc(t,i,n,e,r,o){if(t.qd!==null){t.abort=!1;var h=i.x,l=i.y;if(gu(t,h,l)&&(h-=t.Ag,h/=t.De,l-=t.Bg,l/=t.Ee,i=e.x,e=e.y,gu(t,i,e)))if(i-=t.Ag,i/=t.De,e-=t.Bg,e/=t.Ee,1>=Math.abs(h-i)&&1>=Math.abs(l-e))t.abort=!0;else{var u=o.x,f=o.y,a=o.x+o.width,p=o.y+o.height,u=u-t.Ag,u=u/t.De,f=f-t.Bg,f=f/t.Ee,a=a-t.Ag,a=a/t.De,p=p-t.Bg,p=p/t.Ee;o=Math.max(0,Math.min(t.Fp,u|0)),a=Math.min(t.Fp,Math.max(0,a|0)),f=Math.max(0,Math.min(t.Gp,f|0)),p=Math.min(t.Gp,Math.max(0,p|0)),h|=0,l|=0,i|=0,e|=0,u=n===0||n===90?1:-1,n=n===90||n===270,t.qd[h][l]===0?(vp(t,h,l,u,n,o,a,f,p),vp(t,h,l,1,!n,o,a,f,p),vp(t,h,l,-1,!n,o,a,f,p)):vp(t,h,l,u,n,h,l,h,l),t.qd[i][e]===0?(dp(t,i,e,r===0||r===90?1:-1,r===90||r===270,o,a,f,p),dp(t,i,e,1,!(r===90||r===270),o,a,f,p),dp(t,i,e,-1,!(r===90||r===270),o,a,f,p)):dp(t,i,e,u,n,i,e,i,e),t.abort||(Xr(t,h,l,1,!1,o,a,f,p),Xr(t,h,l,-1,!1,o,a,f,p),Xr(t,h,l,1,!0,o,a,f,p),Xr(t,h,l,-1,!0,o,a,f,p))}}}function il(){s.oc(this),this.port=this.Rc=null,this.gg=[],this.pq=!1}s.be(il,{Rc:!0,port:!0,gg:!0,pq:!0}),il.prototype.toString=function(){for(var t=this.gg,i=this.Rc.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var e=t[n];e!==null&&(i+=`
  `+e.toString())}return i};function Hx(t,i,n,e){switch(i=i.offsetY,i){case s.dd:return 90;case s.Uc:return 180;case s.od:return 270;case s.ed:return 0}switch(i){case s.dd|s.od:return 180<n?270:90;case s.Uc|s.ed:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,i){case s.Uc|s.od:return n>t&&n<=180+t?180:270;case s.od|s.ed:return n>180-t&&n<=360-t?270:0;case s.ed|s.dd:return n>t&&n<=180+t?90:0;case s.dd|s.Uc:return n>180-t&&n<=360-t?180:90;case s.Uc|s.od|s.ed:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case s.od|s.ed|s.dd:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case s.ed|s.dd|s.Uc:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case s.dd|s.Uc|s.od:return n>180-t&&n<=180+t?180:n>180+t?270:90}return e&&i!==(s.Uc|s.od|s.ed|s.dd)&&(n-=15,0>n&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}il.prototype.fq=function(){this.gg.length=0};function I1(t,i){var n=t.gg;if(n.length===0){t:if(!t.pq){n=t.pq,t.pq=!0;var e,r=null,u=t.Rc,u=u instanceof Z?u:null;if(u===null||u.$c)e=t.Rc.aF(t.port.le);else{if(!u.U.H()){t.pq=n;break t}r=u,e=r.$E()}var o=t.gg.length=0,h=t.port.Ya(gi,s.K()),l=t.port.Ya(_i,s.K()),u=s.lg(h.x,h.y,0,0);for(u.yi(l),s.v(h),s.v(l),h=s.wb(u.x+u.width/2,u.y+u.height/2),l=t.port.dm(),e=e.i;e.next();){var f=e.value;if(f.isVisible()&&f.gc!==f.zc){var a=f.gc===t.port||f.V!==null&&f.V.Ah(r),p=f.computeSpot(a,t.port);if(p.zj()&&(a=a?f.zc:f.gc,a!==null)){var y=a.W;if(y!==null){var c=y.findVisibleNode();c!==null&&c!==y&&(y=c,a=y.port),a=f.computeOtherPoint(y,a),y=h.Qb(a),y-=l,0>y&&(y+=360),p=Hx(u,p,y,f.ac),c=0,p===0?(c=s.ed,180<y&&(y-=360)):c=p===90?s.dd:p===180?s.Uc:s.od,p=t.gg[o],p===void 0?(p=new Tc(f,y,c),t.gg[o]=p):(p.link=f,p.angle=y,p.ze=c),p.gy.set(a),o++}}}}for(s.v(h),t.gg.sort(il.prototype.gJ),r=t.gg.length,h=-1,o=l=0;o<r;o++)p=t.gg[o],p!==void 0&&(p.ze!==h&&(h=p.ze,l=0),p.dq=l,l++);for(h=-1,l=0,o=r-1;0<=o;o--)p=t.gg[o],p!==void 0&&(p.ze!==h&&(h=p.ze,l=p.dq+1),p.yn=l);if(o=t.gg,p=t.port,r=t.Rc.mJ,h=s.K(),l=s.K(),e=s.K(),f=s.K(),p.Ya(gi,h),p.Ya(Dl,l),p.Ya(_i,e),p.Ya(Ll,f),c=y=a=p=0,r===fc)for(var v=0;v<o.length;v++){var d=o[v];if(d!==null){var g=d.link.computeThickness();switch(d.ze){case s.dd:y+=g;break;case s.Uc:c+=g;break;case s.od:p+=g;break;default:case s.ed:a+=g}}}for(var m=0,w=0,M=1,v=0;v<o.length;v++)if(d=o[v],d!==null){var k,D;if(m!==d.ze){switch(m=d.ze,m){case s.dd:k=e,D=f;break;case s.Uc:k=f,D=h;break;case s.od:k=h,D=l;break;default:case s.ed:k=l,D=e}var C=D.x-k.x;switch(D=D.y-k.y,m){case s.dd:y>Math.abs(C)?(M=Math.abs(C)/y,y=Math.abs(C)):M=1;break;case s.Uc:c>Math.abs(D)?(M=Math.abs(D)/c,c=Math.abs(D)):M=1;break;case s.od:p>Math.abs(C)?(M=Math.abs(C)/p,p=Math.abs(C)):M=1;break;default:case s.ed:a>Math.abs(D)?(M=Math.abs(D)/a,a=Math.abs(D)):M=1}w=0}var G=d.nq;if(r===fc){switch(g=d.link.computeThickness(),g*=M,G.set(k),m){case s.dd:G.x=k.x+C/2+y/2-w-g/2;break;case s.Uc:G.y=k.y+D/2+c/2-w-g/2;break;case s.od:G.x=k.x+C/2-p/2+w+g/2;break;default:case s.ed:G.y=k.y+D/2-a/2+w+g/2}w+=g}else g=.5,r===uc&&(g=(d.dq+1)/(d.yn+1)),G.x=k.x+C*g,G.y=k.y+D*g}for(s.v(h),s.v(l),s.v(e),s.v(f),k=t.gg,C=0;C<k.length;C++)D=k[C],D!==null&&(D.Ax=t.computeEndSegmentLength(D));t.pq=n,s.Bb(u)}n=t.gg}for(u=0;u<n.length;u++)if(k=n[u],k!==null&&k.link===i)return k;return null}il.prototype.gJ=function(t,i){return t===i?0:t===null?-1:i===null?1:t.ze<i.ze?-1:t.ze>i.ze?1:t.angle<i.angle?-1:t.angle>i.angle?1:0},il.prototype.computeEndSegmentLength=function(t){var r=t.link,i=r.computeEndSegmentLength(this.Rc,this.port,ki,r.gc===this.port),n=t.dq;if(0>n)return i;var e=t.yn;if(1>=e||!r.ac)return i;var r=t.gy,o=t.nq;return(t.ze===s.Uc||t.ze===s.dd)&&(n=e-1-n),((t=t.ze===s.Uc||t.ze===s.ed)?r.y<o.y:r.x<o.x)?i+8*n:(t?r.y===o.y:r.x===o.x)?i:i+8*(e-1-n)};function Tc(t,i,n){this.link=t,this.angle=i,this.ze=n,this.gy=new F,this.yn=this.dq=0,this.nq=new F,this.Ax=0}s.be(Tc,{link:!0,angle:!0,ze:!0,gy:!0,dq:!0,yn:!0,nq:!0,Ax:!0}),Tc.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ze.toString()+":"+this.dq.toString()+"/"+this.yn.toString()+" "+this.nq.toString()+" "+this.Ax.toString()+" "+this.gy.toString()};function gp(){this.zk=this.$j=cn,this.xk=this.Yj=NaN,this.wk=this.Xj=$h,this.yk=this.Zj=NaN,this.Et=this.Jr=null,this.Ft=this.Kr=1/0}gp.prototype.copy=function(){var t=new gp;return t.$j=this.$j.S(),t.zk=this.zk.S(),t.Yj=this.Yj,t.xk=this.xk,t.Xj=this.Xj,t.wk=this.wk,t.Zj=this.Zj,t.yk=this.yk,t.Jr=this.Jr,t.Et=this.Et,t.Kr=this.Kr,t.Ft=this.Ft,t};function Z(t){I.call(this,t),this.ya|=4608,this.us=new R(L),this.fp=new R(Z),this.Lb=this.zt=this.Fl=this.vs=this.ts=null,this.oe=new wt,this.oe.group=this}s.La(Z,I),s.ga("Group",Z),Z.prototype.cloneProtected=function(t){I.prototype.cloneProtected.call(this,t),this.ya&=-32769,t.ts=this.ts,t.vs=this.vs,t.Fl=this.Fl,t.zt=this.zt;var i=t.bu(function(n){return n instanceof en});t.Lb=i instanceof en?i:null,this.oe!==null?(t.oe=this.oe.copy(),t.oe.group=t):(t.oe!==null&&(t.oe.group=null),t.oe=null)},Z.prototype.qi=function(t){I.prototype.qi.call(this,t);var i=t.$p();for(t=t.hc;t.next();){var n=t.value;if(n.I(),n.J(8),n.Ut(),n instanceof I)n.ag(i);else if(n instanceof S)for(n=n.Ff;n.next();)n.value.ag(i)}},Z.prototype.$n=function(t,i,n,e,r,o,h){if(t===Li&&i==="elements")if(r instanceof en){var l=r;this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else r instanceof A&&(l=r.bu(function(u){return u instanceof en}),l instanceof en&&(this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else t===Ai&&i==="elements"&&this.Lb!==null&&(e===this.Lb?this.Lb=null:e instanceof A&&this.Lb.jm(e)&&(this.Lb=null));I.prototype.$n.call(this,t,i,n,e,r,o,h)},Z.prototype.pj=function(t,i,n,e){this.El=this.Lb,A.prototype.pj.call(this,t,i,n,e)},Z.prototype.km=function(){if(!I.prototype.km.call(this))return!1;for(var t=this.hc;t.next();){var i=t.value;if(i instanceof I){if(i.isVisible()&&$e(i))return!1}else if(i instanceof S&&i.isVisible()&&$e(i)&&i.V!==this&&i.Z!==this)return!1}return!0},s.u(Z,{placeholder:"placeholder"},function(){return this.Lb}),s.defineProperty(Z,{EH:"computesBoundsAfterDrag"},function(){return(this.ya&2048)!==0},function(t){var i=(this.ya&2048)!==0;i!==t&&(s.j(t,"boolean",Z,"computesBoundsAfterDrag"),this.ya^=2048,this.h("computesBoundsAfterDrag",i,t))}),s.defineProperty(Z,{nx:"computesBoundsIncludingLinks"},function(){return(this.ya&4096)!==0},function(t){s.j(t,"boolean",Z,"computesBoundsIncludingLinks");var i=(this.ya&4096)!==0;i!==t&&(this.ya^=4096,this.h("computesBoundsIncludingLinks",i,t))}),s.defineProperty(Z,{FH:"computesBoundsIncludingLocation"},function(){return(this.ya&8192)!==0},function(t){s.j(t,"boolean",Z,"computesBoundsIncludingLocation");var i=(this.ya&8192)!==0;i!==t&&(this.ya^=8192,this.h("computesBoundsIncludingLocation",i,t))}),s.defineProperty(Z,{oI:"handlesDragDropForMembers"},function(){return(this.ya&16384)!==0},function(t){s.j(t,"boolean",Z,"handlesDragDropForMembers");var i=(this.ya&16384)!==0;i!==t&&(this.ya^=16384,this.h("handlesDragDropForMembers",i,t))}),s.u(Z,{hc:"memberParts"},function(){return this.us.i});function kc(t,i){if(t.us.add(i)){i instanceof Z&&t.fp.add(i);var n=t.XI;if(n!==null){var e=!0,r=t.g;r!==null&&(e=r.Ua,r.Ua=!0),n(t,i),r!==null&&(r.Ua=e)}t.isVisible()&&t.$c||i.Dd(!1)}i instanceof S&&!t.nx||(n=t.Lb,n===null&&(n=t),n.I())}function Sc(t,i){if(t.us.remove(i)){i instanceof Z&&t.fp.remove(i);var n=t.YI;if(n!==null){var e=!0,r=t.g;r!==null&&(e=r.Ua,r.Ua=!0),n(t,i),r!==null&&(r.Ua=e)}t.isVisible()&&t.$c||i.Dd(!0)}i instanceof S&&!t.nx||(n=t.Lb,n===null&&(n=t),n.I())}Z.prototype.An=function(){if(0<this.us.count){var t=this.g;if(t!==null)for(var i=this.us.copy().i;i.next();)t.remove(i.value)}I.prototype.An.call(this)},s.defineProperty(Z,{Ub:"layout"},function(){return this.oe},function(t){var i=this.oe;if(i!==t){t!==null&&s.G(t,wt,Z,"layout"),i!==null&&(i.g=null,i.group=null),this.oe=t;var n=this.g;t!==null&&(t.g=n,t.group=this),n!==null&&(n.Pj=!0),this.h("layout",i,t),n!==null&&n.ye()}}),s.defineProperty(Z,{XI:"memberAdded"},function(){return this.ts},function(t){var i=this.ts;i!==t&&(t!==null&&s.j(t,"function",Z,"memberAdded"),this.ts=t,this.h("memberAdded",i,t))}),s.defineProperty(Z,{YI:"memberRemoved"},function(){return this.vs},function(t){var i=this.vs;i!==t&&(t!==null&&s.j(t,"function",Z,"memberRemoved"),this.vs=t,this.h("memberRemoved",i,t))}),s.defineProperty(Z,{gB:"memberValidation"},function(){return this.Fl},function(t){var i=this.Fl;i!==t&&(t!==null&&s.j(t,"function",Z,"memberValidation"),this.Fl=t,this.h("memberValidation",i,t))}),Z.prototype.canAddMembers=function(t){var i=this.g;if(i===null)return!1;for(i=i.pb,t=H0(t).i;t.next();)if(!i.isValidMember(this,t.value))return!1;return!0},Z.prototype.addMembers=function(t,i){var n=this.g;if(n===null)return!1;for(var n=n.pb,e=!0,r=H0(t).i;r.next();){var o=r.value;!i||n.isValidMember(this,o)?o.Ca=this:e=!1}return e},s.defineProperty(Z,{$J:"ungroupable"},function(){return(this.ya&256)!==0},function(t){var i=(this.ya&256)!==0;i!==t&&(s.j(t,"boolean",Z,"ungroupable"),this.ya^=256,this.h("ungroupable",i,t))}),Z.prototype.canUngroup=function(){if(!this.$J)return!1;var t=this.layer;return t!==null&&!t.kx?!1:(t=t.g,!!(t===null||t.kx))},Z.prototype.ag=function(t){t===void 0&&(t=null);var i=(this.ya&65536)!==0;if(I.prototype.ag.call(this,t),!i)for((this.ya&65536)===0&&(this.ya^=65536),i=this.$E();i.next();){var n=i.value;if(t===null||!t.contains(n)){var e=n.V;e!==null&&e!==this&&e.Ah(this)&&!e.isVisible()?(pe(e,n.gc),pe(e,n.zc),n.Tb()):(e=n.Z,e!==null&&e!==this&&e.Ah(this)&&!e.isVisible()&&(pe(e,n.gc),pe(e,n.zc),n.Tb()))}}},Z.prototype.findExternalLinksConnected=Z.prototype.$E=function(){var t=this.$p();t.add(this);for(var i=new R(S),n=t.i;n.next();){var e=n.value;if(e instanceof I)for(e=e.je;e.next();){var r=e.value;t.contains(r)||i.add(r)}}return i.i},Z.prototype.findExternalNodesConnected=function(){var t=this.$p();t.add(this);for(var i=new R(I),n=t.i;n.next();){var e=n.value;if(e instanceof I)for(e=e.je;e.next();){var r=e.value,o=r.V;t.contains(o)&&o!==this||i.add(o),r=r.Z,t.contains(r)&&r!==this||i.add(r)}}return i.i},Z.prototype.findContainingGroupChain=function(){function t(n,e){n!==null&&(e.add(n),t(n.Ca,e))}var i=new R(Z);return t(this,i),i},Z.prototype.findSubGraphParts=Z.prototype.$p=function(){var t=new R(L);return cs(t,this,!0,0,!0),t.remove(this),t},Z.prototype.Dd=function(t){I.prototype.Dd.call(this,t);for(var i=this.hc;i.next();)i.value.Dd(t)},Z.prototype.collapseSubGraph=Z.prototype.collapseSubGraph=function(){var t=this.g;if(t!==null&&!t.yh){t.yh=!0;var i=this.$p();B1(this,i,t.Ka,this),t.yh=!1}};function B1(t,i,n,e){for(var r=t.hc;r.next();){var o=r.value;if(o.Dd(!1),o instanceof Z){var h=o;h.$c&&(h.Gy=h.$c,B1(h,i,n,e))}if(o instanceof I)o.ag(i),ry(n,o,e);else if(o instanceof S)for(o=o.Ff;o.next();)o.value.ag(i)}t.$c=!1}Z.prototype.expandSubGraph=Z.prototype.expandSubGraph=function(){var t=this.g;if(t!==null&&!t.yh){t.yh=!0;var i=this.$p();z1(this,i,t.Ka,this),t.yh=!1}};function z1(t,i,n,e){for(var r=t.hc;r.next();){var o=r.value;if(o.Dd(!0),o instanceof Z){var h=o;h.Gy&&(h.Gy=!1,z1(h,i,n,e))}if(o instanceof I)o.ag(i),ey(n,o,e);else if(o instanceof S)for(o=o.Ff;o.next();)o.value.ag(i)}t.$c=!0}s.defineProperty(Z,{$c:"isSubGraphExpanded"},function(){return(this.ya&512)!==0},function(t){var i=(this.ya&512)!==0;if(i!==t){s.j(t,"boolean",Z,"isSubGraphExpanded"),this.ya^=512;var n=this.g;if(this.h("isSubGraphExpanded",i,t),i=this.QJ,i!==null){var e=!0;n!==null&&(e=n.Ua,n.Ua=!0),i(this),n!==null&&(n.Ua=e)}n!==null&&n.ja.lb?(this.Lb!==null&&this.Lb.I(),this.hc.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}),s.defineProperty(Z,{Gy:"wasSubGraphExpanded"},function(){return(this.ya&1024)!==0},function(t){var i=(this.ya&1024)!==0;i!==t&&(s.j(t,"boolean",Z,"wasSubGraphExpanded"),this.ya^=1024,this.h("wasSubGraphExpanded",i,t))}),s.defineProperty(Z,{QJ:"subGraphExpandedChanged"},function(){return this.zt},function(t){var i=this.zt;i!==t&&(t!==null&&s.j(t,"function",Z,"subGraphExpandedChanged"),this.zt=t,this.h("subGraphExpandedChanged",i,t))}),Z.prototype.move=function(t){var n=this.position,i=n.x;isNaN(i)&&(i=0),n=n.y,isNaN(n)&&(n=0);var i=t.x-i,n=t.y-n,e=s.wb(i,n);I.prototype.move.call(this,t),t=new R(S);for(var r=this.$p().i;r.next();){var o=r.value;o instanceof S&&(o.vi&&t.add(o),o.vi=!0)}for(r.reset();r.next();)if(o=r.value,!(o instanceof S||o instanceof I&&o.Df)){var h=o.position,l=o.location;h.H()?(e.x=h.x+i,e.y=h.y+n,o.position=e):l.H()&&(e.x=l.x+i,e.y=l.y+n,o.location=e)}for(r.reset();r.next();)o=r.value,o instanceof S&&(o.vi=t.contains(o),o.Mf||o.V!==this&&o.Z!==this)&&(h=o.position,e.x=h.x+i,e.y=h.y+n,e.H()?o.move(e):o.Tb(),gc(o)&&o.Tb());s.v(e)},s.defineProperty(Z,{Xn:null},function(){return(this.ya&32768)!==0},function(t){(this.ya&32768)!==0!==t&&(this.ya^=32768)});function en(){N.call(this),this.lf=Wu,this.jt=new O(NaN,NaN,NaN,NaN)}s.La(en,N),s.ga("Placeholder",en),en.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.lf=this.lf.S(),t.jt=this.jt.copy()},en.prototype.Ek=function(t){if(this.background===null&&this.qn===null)return!1;var i=this.Ja;return ao(0,0,i.width,i.height,t.x,t.y)},en.prototype.Rn=function(){var t=this.W;if(t!==null&&(t instanceof Z||t instanceof vt)||s.k("Placeholder is not inside a Group or Adornment."),t instanceof Z){var i=this.computeBorder(this.jt),n=this.Nc;Ko(n,i.width||0,i.height||0),Qr(this,0,0,n.width,n.height);for(var e=t.hc,n=!1;e.next();)if(e.value.isVisible()){n=!0;break}e=t.g,!n||e===null||e.Ka.Qe||isNaN(i.x)||isNaN(i.y)||(n=s.K(),n.bo(i,t.Gf),t.location=new F(n.x,n.y),s.v(n))}else{var i=this.Da,n=this.Nc,e=this.padding,r=e.left+e.right,o=e.top+e.bottom;if(i.H())Ko(n,i.width+r||0,i.height+o||0),Qr(this,-e.left,-e.top,n.width,n.height);else{var h=t.ub,l=h.Ya(gi,s.K()),i=s.lg(l.x,l.y,0,0);i.yi(h.Ya(_i,l)),i.yi(h.Ya(Dl,l)),i.yi(h.Ya(Ll,l)),t.Xi.m(i.x,i.y),Ko(n,i.width+r||0,i.height+o||0),Qr(this,-e.left,-e.top,n.width,n.height),s.v(l),s.Bb(i)}}},en.prototype.pj=function(t,i,n,e){var r=this.U;r.x=t,r.y=i,r.width=n,r.height=e},en.prototype.computeBorder=function(t){var i=this.W;if(i instanceof Z){var n=i;if(n.EH&&this.jt.H()){var e=n.g;if(e!==null&&!n.layer.Hc&&(e=e.Xa,e instanceof dt&&!e.Dr&&e.$b!==null&&!e.$b.contains(n)))return t.assign(this.jt),t}}var n=s.vf(),e=this.computeMemberBounds(n),r=this.padding;return t.m(e.x-r.left,e.y-r.top,Math.max(e.width+r.left+r.right,0),Math.max(e.height+r.top+r.bottom,0)),s.Bb(n),i instanceof Z&&(n=i,n.FH&&n.location.H()&&t.yi(n.location)),t},en.prototype.computeMemberBounds=function(t){if(!(this.W instanceof Z))return t.m(0,0,0,0),t;for(var i=this.W,n=1/0,e=1/0,r=-1/0,o=-1/0,h=i.hc;h.next();){var l=h.value;if(l.isVisible()){if(l instanceof S){var u=l;if(!i.nx||xs(u)||u.V===i||u.Z===i)continue}l=l.U,l.left<n&&(n=l.left),l.top<e&&(e=l.top),l.right>r&&(r=l.right),l.bottom>o&&(o=l.bottom)}}return isFinite(n)&&isFinite(e)?t.m(n,e,r-n,o-e):(i=i.location,n=this.padding,t.m(i.x+n.left,i.y+n.top,0,0)),t},s.defineProperty(en,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,en,"padding");var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.h("padding",i,t))});function wt(){0<arguments.length&&s.nd(wt),s.oc(this),this.yz=this.aa=null,this.yl=this.$r=!0,this.fs=!1,this.Xq=new F(0,0).freeze(),this.bs=this.cs=!0,this.TC="",this.es=!1,this.Kz=null}s.ga("Layout",wt),wt.prototype.cloneProtected=function(t){t.$r=this.$r,t.yl=this.yl,t.fs=this.fs,t.Xq.assign(this.Xq),t.cs=this.cs,t.bs=this.bs,t.TC=this.TC,t.es=!0},wt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},wt.prototype.ic=function(t){s.Lj(this,t)},wt.prototype.toString=function(){var t=s.pf(Object.getPrototypeOf(this)),t=t+"(";return this.group!==null&&(t+=" in "+this.group),this.g!==null&&(t+=" for "+this.g),t+")"},s.defineProperty(wt,{g:"diagram"},function(){return this.aa},function(t){t!==null&&s.G(t,x,wt,"diagram"),this.aa=t}),s.defineProperty(wt,{group:"group"},function(){return this.yz},function(t){this.yz!==t&&(t!==null&&s.G(t,Z,wt,"group"),this.yz=t,t!==null&&(this.aa=t.g))}),s.defineProperty(wt,{DI:"isOngoing"},function(){return this.$r},function(t){this.$r!==t&&(s.j(t,"boolean",wt,"isOngoing"),this.$r=t)}),s.defineProperty(wt,{GF:"isInitial"},function(){return this.yl},function(t){s.j(t,"boolean",wt,"isInitial"),this.yl=t,t||(this.es=!0)}),s.defineProperty(wt,{Qx:"isViewportSized"},function(){return this.fs},function(t){this.fs!==t&&(s.j(t,"boolean",wt,"isViewportSized"),(this.fs=t)&&this.J())}),s.defineProperty(wt,{Au:"isRouting"},function(){return this.cs},function(t){this.cs!==t&&(s.j(t,"boolean",wt,"isRouting"),this.cs=t)}),s.defineProperty(wt,{JF:"isRealtime"},function(){return this.bs},function(t){this.bs!==t&&(s.j(t,"boolean",wt,"isRealtime"),this.bs=t)}),s.defineProperty(wt,{sf:"isValidLayout"},function(){return this.es},function(t){this.es!==t&&(s.j(t,"boolean",wt,"isValidLayout"),this.es=t,t||(t=this.g,t!==null&&(t.Pj=!0)))}),wt.prototype.invalidateLayout=wt.prototype.J=function(){if(this.sf){var t=this.g;if(t!==null&&!t.ja.lb){var i=t.Ka;!i.Wo&&(i.Qe&&i.Jh(),this.DI&&t.Ln||this.GF&&!t.Ln)&&(this.sf=!1,t.ye())}}},s.defineProperty(wt,{network:"network"},function(){return this.Kz},function(t){var i=this.Kz;i!==t&&(t!==null&&s.G(t,At,wt,"network"),i!==null&&(i.Ub=null),this.Kz=t,t!==null&&(t.Ub=this))}),wt.prototype.createNetwork=function(){return new At},wt.prototype.makeNetwork=function(t){var i=this.createNetwork();return i.Ub=this,t instanceof x?(i.Bk(t.ig,!0),i.Bk(t.links,!0)):t instanceof Z?i.Bk(t.hc):i.Bk(t.i),i},wt.prototype.updateParts=function(){var t=this.g;if(t===null&&this.network!==null)for(var i=this.network.vertexes.i;i.next();){var n=i.value.Rc;if(n!==null&&(t=n.g,t!==null))break}this.sf=!0;try{t!==null&&t.Ib("Layout"),this.commitLayout()}finally{t!==null&&t.Yc("Layout")}},wt.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.Au)for(t=this.network.edges.i;t.next();)t.value.commit()},wt.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var i=new R(L);t instanceof x?(Ms(this,i,t.ig,!0,this.Xn,!0,!1,!0),Ms(this,i,t.Hj,!0,this.Xn,!0,!1,!0)):t instanceof Z?Ms(this,i,t.hc,!1,this.Xn,!0,!1,!0):i.Pc(t.i);var n=i.count;if(0<n){t=this.g,t!==null&&t.Ib("Layout"),n=Math.ceil(Math.sqrt(n)),this.Md=this.initialOrigin(this.Md);for(var e=this.Md.x,r=e,o=this.Md.y,h=0,l=0,i=i.i;i.next();){var u=i.value;u.Ne();var a=u.za,f=a.width,a=a.height;u.moveTo(r,o),u instanceof Z&&(u.Xn=!1),r+=Math.max(f,50)+20,l=Math.max(l,Math.max(a,50)),h>=n-1?(h=0,r=e,o+=l+20,l=0):h++}t!==null&&t.Yc("Layout")}this.sf=!0},wt.prototype.Xn=function(t){return!!(!t.location.H()||t instanceof Z&&t.Xn)};function Ms(t,i,n,e,r,o,h,l){for(n=n.i;n.next();){var u=n.value;e&&!u.jq||r!==null&&!r(u)||!u.canLayout()||(o&&u instanceof I?u.Df||(u instanceof Z&&u.Ub===null?Ms(t,i,u.hc,!1,r,o,h,l):(Nc(u),i.add(u))):h&&u instanceof S?i.add(u):!l||!u.he()||u instanceof I||(Nc(u),i.add(u)))}}function Nc(t){var i=t.U;(i.width===0||i.height===0||isNaN(i.width)||isNaN(i.height))&&t.Ne()}wt.prototype.collectParts=wt.prototype.zH=function(t){var i=new R(L);return t instanceof x?(Ms(this,i,t.ig,!0,null,!0,!0,!0),Ms(this,i,t.links,!0,null,!0,!0,!0),Ms(this,i,t.Hj,!0,null,!0,!0,!0)):t instanceof Z?Ms(this,i,t.hc,!1,null,!0,!0,!0):Ms(this,i,t.i,!1,null,!0,!0,!0),i},s.defineProperty(wt,{Md:"arrangementOrigin"},function(){return this.Xq},function(t){s.G(t,F,wt,"arrangementOrigin"),this.Xq.L(t)||(this.Xq.assign(t),this.J())}),wt.prototype.initialOrigin=function(t){var i=this.group;if(i!==null){var n=i.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),i=i.placeholder,i!==null&&(n=i.Ya(gi),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=i.padding.left,n.y+=i.padding.top),n}return t};function At(){if(s.oc(this),this.oe=null,this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new R(It),this.edges=new R(Vi),this.ay=new tt(I,It),this.Wx=new tt(S,Vi)}s.ga("LayoutNetwork",At),At.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new R(It),this.edges=new R(Vi),this.ay=new tt(I,It),this.Wx=new tt(S,Vi)},At.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutNetwork"+(this.Ub!==null?"("+this.Ub.toString()+")":"");if(0>=t)return i;if(i+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var n=this.vertexes.i;n.next();)i+=`
    `+n.value.toString(t-1);for(n=this.edges.i;n.next();)i+=`
    `+n.value.toString(t-1)}return i},s.defineProperty(At,{Ub:"layout"},function(){return this.oe},function(t){this.oe=t}),At.prototype.createVertex=function(){return new It},At.prototype.createEdge=function(){return new Vi},At.prototype.addParts=At.prototype.Bk=function(t,i,n){if(t!==null){for(i===void 0&&(i=!1),s.j(i,"boolean",At,"addParts:toplevelonly"),n===void 0&&(n=null),n===null&&(n=function(h){if(h instanceof I)return!h.Df;if(h instanceof S){var l=h.V;return l===null||l.Df?!1:(h=h.Z,!(h===null||h.Df))}return!1}),t=t.i;t.next();){var e=t.value;if(e instanceof I&&(!i||e.jq)&&e.canLayout()&&n(e)){if(e instanceof Z&&e.Ub===null)this.Bk(e.hc,!1);else if(this.Dn(e)===null){var r=this.createVertex();r.Rc=e,this.Sl(r)}}}for(t.reset();t.next();)if(e=t.value,e instanceof S&&(!i||e.jq)&&e.canLayout()&&n(e)&&this.Cx(e)===null){var o=e.V,r=e.Z;o!==null&&r!==null&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),o!==null&&r!==null&&this.oq(o,r,e))}}},At.prototype.findGroupVertex=function(t){if(t===null)return null;var i=t.findVisibleNode();if(i===null)return null;if(t=this.Dn(i),t!==null)return t;for(i=i.Ca;i!==null;){if(t=this.Dn(i),t!==null)return t;i=i.Ca}return null},At.prototype.addVertex=At.prototype.Sl=function(t){if(t!==null){this.vertexes.add(t);var i=t.Rc;i!==null&&this.ay.add(i,t),t.network=this}},At.prototype.addNode=At.prototype.Pt=function(t){if(t===null)return null;var i=this.Dn(t);return i===null&&(i=this.createVertex(),i.Rc=t,this.Sl(i)),i},At.prototype.deleteVertex=At.prototype.VE=function(t){if(t!==null&&E1(this,t)){for(var i=t.Te,n=i.count-1;0<=n;n--){var e=i.fa(n);this.Wp(e)}for(i=t.Me,n=i.count-1;0<=n;n--)e=i.fa(n),this.Wp(e)}};function E1(t,i){if(i===null)return!1;var n=t.vertexes.remove(i);return n&&(t.ay.remove(i.Rc),i.network=null),n}At.prototype.deleteNode=function(t){t!==null&&(t=this.Dn(t),t!==null&&this.VE(t))},At.prototype.findVertex=At.prototype.Dn=function(t){return t===null?null:this.ay.ka(t)},At.prototype.addEdge=At.prototype.Ip=function(t){if(t!==null){this.edges.add(t);var i=t.link;i!==null&&this.Cx(i)===null&&this.Wx.add(i,t),i=t.toVertex,i!==null&&i.zE(t),i=t.fromVertex,i!==null&&i.xE(t),t.network=this}},At.prototype.addLink=function(t){if(t===null)return null;var i=t.V,n=t.Z,e=this.Cx(t);return e===null?(e=this.createEdge(),e.link=t,i!==null&&(e.fromVertex=this.Pt(i)),n!==null&&(e.toVertex=this.Pt(n)),this.Ip(e)):(e.fromVertex=i!==null?this.Pt(i):null,e.toVertex=n!==null?this.Pt(n):null),e},At.prototype.deleteEdge=At.prototype.Wp=function(t){if(t!==null){var i=t.toVertex;i!==null&&i.UE(t),i=t.fromVertex,i!==null&&i.TE(t),Cc(this,t)}};function Cc(t,i){i!==null&&t.edges.remove(i)&&(t.Wx.remove(i.link),i.network=null)}At.prototype.deleteLink=function(t){t!==null&&(t=this.Cx(t),t!==null&&this.Wp(t))},At.prototype.findEdge=At.prototype.Cx=function(t){return t===null?null:this.Wx.ka(t)},At.prototype.linkVertexes=At.prototype.oq=function(t,i,n){if(t===null||i===null)return null;if(t.network===this&&i.network===this){var e=this.createEdge();return e.link=n,e.fromVertex=t,e.toVertex=i,this.Ip(e),e}return null},At.prototype.reverseEdge=At.prototype.Wu=function(t){if(t!==null){var i=t.fromVertex,n=t.toVertex;i!==null&&n!==null&&(i.TE(t),n.UE(t),t.Wu(),i.zE(t),n.xE(t))}},At.prototype.deleteSelfEdges=At.prototype.ux=function(){for(var t=s.Za(),i=this.edges.i;i.next();){var n=i.value;n.fromVertex===n.toVertex&&t.push(n)}for(i=t.length,n=0;n<i;n++)this.Wp(t[n]);s.ra(t)},At.prototype.deleteArtificialVertexes=function(){for(var t=s.Za(),i=this.vertexes.i;i.next();){var n=i.value;n.Rc===null&&t.push(n)}for(var n=t.length,e=0;e<n;e++)this.VE(t[e]);for(i=s.Za(),n=this.edges.i;n.next();)e=n.value,e.link===null&&i.push(e);for(n=i.length,e=0;e<n;e++)this.Wp(i[e]);s.ra(t),s.ra(i)};function Kx(t){for(var i=s.Za(),n=t.edges.i;n.next();){var e=n.value;e.fromVertex!==null&&e.toVertex!==null||i.push(e)}for(n=i.length,e=0;e<n;e++)t.Wp(i[e]);s.ra(i)}At.prototype.splitIntoSubNetworks=At.prototype.PJ=function(){this.deleteArtificialVertexes(),Kx(this),this.ux();for(var t=new z(At),i=!0;i;)for(var i=!1,n=this.vertexes.i;n.next();){var e=n.value;if(0<e.Te.count||0<e.Me.count){i=this.Ub.createNetwork(),t.add(i),jc(this,i,e),i=!0;break}}return t.sort(function(r,o){return r===null||o===null||r===o?0:o.vertexes.count-r.vertexes.count}),t};function jc(t,i,n){if(n!==null&&n.network!==i){E1(t,n),i.Sl(n);for(var e=n.nc;e.next();){var r=e.value;r.network!==i&&(Cc(t,r),i.Ip(r),jc(t,i,r.fromVertex))}for(e=n.lc;e.next();)n=e.value,n.network!==i&&(Cc(t,n),i.Ip(n),jc(t,i,n.toVertex))}}At.prototype.findAllParts=function(){for(var t=new R(L),i=this.vertexes.i;i.next();)t.add(i.value.Rc);for(i=this.edges.i;i.next();)t.add(i.value.link);return t};function It(){s.oc(this),this.network=null,this.O=new O(0,0,10,10).freeze(),this.T=new F(5,5).freeze(),this.vd=this.Zd=null,this.Te=new z(Vi),this.Me=new z(Vi)}s.ga("LayoutVertex",It),It.prototype.clear=function(){this.vd=this.Zd=null,this.Te=new z(Vi),this.Me=new z(Vi)},It.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutVertex#"+s.Pd(this);if(0<t&&(i+=this.Rc!==null?"("+this.Rc.toString()+")":"",1<t)){t="";for(var n=!0,e=this.Te.i;e.next();){var r=e.value;n?n=!1:t+=",",t+=r.toString(0)}for(r="",n=!0,e=this.Me.i;e.next();){var o=e.value;n?n=!1:r+=",",r+=o.toString(0)}i+=" sources: "+t+" destinations: "+r}return i},s.defineProperty(It,{data:"data"},function(){return this.Zd},function(t){if(this.Zd=t,t!==null){var e=t.bounds;t=e.x;var i=e.y,n=e.width,e=e.height;this.T.m(n/2,e/2),this.O.m(t,i,n,e)}}),s.defineProperty(It,{Rc:"node"},function(){return this.vd},function(t){if(this.vd!==t){this.vd=t,t.Ne();var r=t.U,i=r.x,n=r.y,e=r.width,r=r.height;if(isNaN(i)&&(i=0),isNaN(n)&&(n=0),this.O.m(i,n,e,r),!(t instanceof Z)&&(t=t.cg.Ya(Tt),t.H())){this.T.m(t.x-i,t.y-n);return}this.T.m(e/2,r/2)}}),s.defineProperty(It,{eb:"bounds"},function(){return this.O},function(t){this.O.L(t)||this.O.assign(t)}),s.defineProperty(It,{focus:"focus"},function(){return this.T},function(t){this.T.L(t)||this.T.assign(t)}),s.defineProperty(It,{la:"centerX"},function(){return this.O.x+this.T.x},function(t){var i=this.O;i.x+this.T.x!==t&&(i.Qa(),i.x=t-this.T.x,i.freeze())}),s.defineProperty(It,{sa:"centerY"},function(){return this.O.y+this.T.y},function(t){var i=this.O;i.y+this.T.y!==t&&(i.Qa(),i.y=t-this.T.y,i.freeze())}),s.defineProperty(It,{ju:"focusX"},function(){return this.T.x},function(t){var i=this.T;i.x!==t&&(i.Qa(),i.x=t,i.freeze())}),s.defineProperty(It,{ku:"focusY"},function(){return this.T.y},function(t){var i=this.T;i.y!==t&&(i.Qa(),i.y=t,i.freeze())}),s.defineProperty(It,{x:"x"},function(){return this.O.x},function(t){var i=this.O;i.x!==t&&(i.Qa(),i.x=t,i.freeze())}),s.defineProperty(It,{y:"y"},function(){return this.O.y},function(t){var i=this.O;i.y!==t&&(i.Qa(),i.y=t,i.freeze())}),s.defineProperty(It,{width:"width"},function(){return this.O.width},function(t){var i=this.O;i.width!==t&&(i.Qa(),i.width=t,i.freeze())}),s.defineProperty(It,{height:"height"},function(){return this.O.height},function(t){var i=this.O;i.height!==t&&(i.Qa(),i.height=t,i.freeze())}),It.prototype.commit=function(){var t=this.Zd;if(t!==null){var i=this.eb,n=t.bounds;s.Pa(n)?(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height):t.bounds=i.copy()}else if(t=this.Rc,t!==null){if(i=this.eb,!(t instanceof Z)){var n=t.U,e=t.cg.Ya(Tt);if(n.H()&&e.H()){t.moveTo(i.x+this.ju-(e.x-n.x),i.y+this.ku-(e.y-n.y));return}}t.moveTo(i.x,i.y)}},It.prototype.addSourceEdge=It.prototype.zE=function(t){t!==null&&(this.Te.contains(t)||this.Te.add(t))},It.prototype.deleteSourceEdge=It.prototype.UE=function(t){t!==null&&this.Te.remove(t)},It.prototype.addDestinationEdge=It.prototype.xE=function(t){t!==null&&(this.Me.contains(t)||this.Me.add(t))},It.prototype.deleteDestinationEdge=It.prototype.TE=function(t){t!==null&&this.Me.remove(t)},s.u(It,{OJ:"sourceVertexes"},function(){for(var t=new R(It),i=this.nc;i.next();)t.add(i.value.fromVertex);return t.i}),s.u(It,{RH:"destinationVertexes"},function(){for(var t=new R(It),i=this.lc;i.next();)t.add(i.value.toVertex);return t.i}),s.u(It,{vertexes:"vertexes"},function(){for(var t=new R(It),i=this.nc;i.next();)t.add(i.value.fromVertex);for(i=this.lc;i.next();)t.add(i.value.toVertex);return t.i}),s.u(It,{nc:"sourceEdges"},function(){return this.Te.i}),s.u(It,{lc:"destinationEdges"},function(){return this.Me.i}),s.u(It,{edges:"edges"},function(){for(var t=new z(Vi),i=this.nc;i.next();)t.add(i.value);for(i=this.lc;i.next();)t.add(i.value);return t.i}),s.u(It,{WH:"edgesCount"},function(){return this.Te.count+this.Me.count});var Fc;It.standardComparer=Fc=function(t,i){var n=t.vd,e=i.vd;return n?e?(n=n.text,e=e.text,n<e?-1:n>e?1:0):1:e!==null?-1:0},It.smartComparer=function(t,i){if(t!==null){if(i!==null){var n=t.vd,e=i.vd;if(n!==null){if(e!==null){for(var n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),r=0;r<n.length;r++)if(e[r]!==""&&e[r]!==void 0){var o=parseFloat(n[r]),h=parseFloat(e[r]);if(isNaN(o)){if(!isNaN(h))return 1;if(n[r].localeCompare(e[r])!==0)return n[r].localeCompare(e[r])}else{if(isNaN(h))return-1;if(o-h!==0)return o-h}}else if(n[r]!=="")return 1;return e[r]!==""&&e[r]!==void 0?-1:0}return 1}return e!==null?-1:0}return 1}return i!==null?-1:0};function Vi(){s.oc(this),this.toVertex=this.fromVertex=this.link=this.data=this.network=null}s.ga("LayoutEdge",Vi),Vi.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Vi.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutEdge#"+s.Pd(this);return 0<t&&(i+=this.link!==null?"("+this.link.toString()+")":"",1<t&&(i+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --> "+(this.toVertex?this.toVertex.toString():"null"))),i},Vi.prototype.Wu=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Vi.prototype.commit=function(){},Vi.prototype.getOtherVertex=Vi.prototype.fI=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null};function zt(){0<arguments.length&&s.nd(zt),wt.call(this),this.Qx=!0,this.Kt=this.Lt=NaN,this.Rj=new lt(NaN,NaN).freeze(),this.fi=new lt(10,10).freeze(),this.me=If,this.pd=xp,this.ei=Bf,this.Oh=R1}s.La(zt,wt),s.ga("GridLayout",zt),zt.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Lt=this.Lt,t.Kt=this.Kt,t.Rj.assign(this.Rj),t.fi.assign(this.fi),t.me=this.me,t.pd=this.pd,t.ei=this.ei,t.Oh=this.Oh},zt.prototype.ic=function(t){t.Je===zt?t===Bf||t===Mp||t===Dc||t===wp?this.sorting=t:t===xp||t===wr?this.Vf=t:t===If||t===mp?this.alignment=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},zt.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Md=this.initialOrigin(this.Md);var i=this.g;t=this.zH(t);for(var n=t.copy().i;n.next();){var e=n.value;if(e instanceof S){var r=e;if(r.V!==null||r.Z!==null){t.remove(r);continue}}if(e.Ne(),e instanceof Z)for(e=e.hc;e.next();)t.remove(e.value)}if(r=t.yc(),r.length!==0){switch(this.sorting){case wp:r.reverse();break;case Bf:r.sort(this.comparer);break;case Mp:r.sort(this.comparer),r.reverse()}var o=this.dK;isNaN(o)&&(o=0);var h=this.PG,h=isNaN(h)&&i!==null?Math.max(i.sb.width-i.padding.left-i.padding.right,0):Math.max(this.PG,0);switch(0>=o&&0>=h&&(o=1),t=this.spacing.width,isFinite(t)||(t=0),n=this.spacing.height,isFinite(n)||(n=0),i!==null&&i.Ib("Layout"),e=[],this.alignment){case mp:var l=t,u=n,p=Math.max(this.Np.width,1);if(!isFinite(p))for(var k=p=0;k<r.length;k++)var f=r[k],a=f.za,p=Math.max(p,a.width);var p=Math.max(p+l,1),y=Math.max(this.Np.height,1);if(!isFinite(y))for(k=y=0;k<r.length;k++)f=r[k],a=f.za,y=Math.max(y,a.height);for(var y=Math.max(y+u,1),c=this.Vf,v=this.Md.x,d=v,g=this.Md.y,C=0,G=0,k=0;k<r.length;k++){var f=r[k],a=f.za,m=Math.ceil((a.width+l)/p)*p,w=Math.ceil((a.height+u)/y)*y,M=0;switch(c){case wr:M=Math.abs(d-a.width);break;default:M=d+a.width}switch((0<o&&C>o-1||0<h&&0<C&&M>h)&&(e.push(new O(0,g,h+l,G)),C=0,d=v,g+=G,G=0),G=Math.max(G,w),w=0,c){case wr:w=-a.width;break;default:w=0}switch(f.moveTo(d+w,g),c){case wr:d-=m;break;default:d+=m}C++}e.push(new O(0,g,h+l,G));break;case If:for(l=o,u=t,p=n,k=Math.max(this.Np.width,1),f=g=m=0,a=s.K(),o=0;o<r.length;o++)y=r[o],c=y.za,v=Wo(y,y.cg,y.Gf,a),m=Math.max(m,v.x),g=Math.max(g,c.width-v.x),f=Math.max(f,v.y);switch(d=this.Vf,d){case wr:m+=u;break;default:g+=u}var k=isFinite(k)?Math.max(k+u,1):Math.max(m+g,1),D=g=this.Md.x,C=this.Md.y,G=0;h>=m&&(h-=m);for(var m=w=0,M=Math.max(this.Np.height,1),H=f=0,U=!0,X=s.K(),o=0;o<r.length;o++){if(y=r[o],c=y.za,v=Wo(y,y.cg,y.Gf,a),0<G)switch(d){case wr:D=(D-g-(c.width-v.x))/k,D=St(Math.round(D),D)?Math.round(D):Math.floor(D),D=D*k+g;break;default:D=(D-g+v.x)/k,D=St(Math.round(D),D)?Math.round(D):Math.ceil(D),D=D*k+g}else switch(d){case wr:w=D+v.x+c.width;break;default:w=D-v.x}var _=0;switch(d){case wr:_=-(D+v.x)+w;break;default:_=D+c.width-v.x-w}if(0<l&&G>l-1||0<h&&0<G&&_>h){for(e.push(new O(0,U?C-f:C,h+u,H+f+p)),D=0;D<G&&o!==G;D++){var _=r[o-G+D],Mt=Wo(_,_.cg,_.Gf,X);_.moveTo(_.position.x,_.position.y+f-Mt.y)}H+=p,C=U?C+H:C+(H+f),G=H=f=0,D=g,U=!1}switch(D===g&&(m=d===wr?Math.max(m,c.width-v.x):Math.min(m,-v.x)),f=Math.max(f,v.y),H=Math.max(H,c.height-v.y),isFinite(M)&&(H=Math.max(H,Math.max(c.height,M)-v.y)),U?y.moveTo(D-v.x,C-v.y):y.moveTo(D-v.x,C),d){case wr:D-=v.x+u;break;default:D+=c.width-v.x+u}G++}for(e.push(new O(0,C,h+u,(U?H:H+f)+p)),D=0;D<G&&o!==G;D++)_=r[o-G+D],Mt=Wo(_,_.cg,_.Gf,a),_.moveTo(_.position.x,_.position.y+f-Mt.y);if(s.v(a),s.v(X),d===wr)for(o=0;o<e.length;o++)r=e[o],r.width+=m,r.x-=m;else for(o=0;o<e.length;o++)r=e[o],r.x>m&&(r.width+=r.x-m,r.x=m)}for(l=o=h=r=0;l<e.length;l++)u=e[l],r=Math.min(r,u.x),h=Math.min(h,u.y),o=Math.max(o,u.x+u.width);this.Vf===wr?this.commitLayers(e,new F(r+t/2-(o+r),h-n/2)):this.commitLayers(e,new F(r-t/2,h-n/2)),i!==null&&i.Yc("Layout"),this.sf=!0}},zt.prototype.commitLayers=function(){},s.defineProperty(zt,{PG:"wrappingWidth"},function(){return this.Lt},function(t){this.Lt!==t&&(s.j(t,"number",zt,"wrappingWidth"),0<t||isNaN(t))&&(this.Lt=t,this.Qx=isNaN(t),this.J())}),s.defineProperty(zt,{dK:"wrappingColumn"},function(){return this.Kt},function(t){this.Kt!==t&&(s.j(t,"number",zt,"wrappingColumn"),0<t||isNaN(t))&&(this.Kt=t,this.J())}),s.defineProperty(zt,{Np:"cellSize"},function(){return this.Rj},function(t){s.G(t,lt,zt,"cellSize"),this.Rj.L(t)||(this.Rj.assign(t),this.J())}),s.defineProperty(zt,{spacing:"spacing"},function(){return this.fi},function(t){s.G(t,lt,zt,"spacing"),this.fi.L(t)||(this.fi.assign(t),this.J())}),s.defineProperty(zt,{alignment:"alignment"},function(){return this.me},function(t){this.me!==t&&(s.ob(t,zt,zt,"alignment"),t===If||t===mp)&&(this.me=t,this.J())}),s.defineProperty(zt,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,zt,zt,"arrangement"),t===xp||t===wr)&&(this.pd=t,this.J())}),s.defineProperty(zt,{sorting:"sorting"},function(){return this.ei},function(t){this.ei!==t&&(s.ob(t,zt,zt,"sorting"),t===Dc||t===wp||t===Bf||t===Mp)&&(this.ei=t,this.J())}),s.defineProperty(zt,{comparer:"comparer"},function(){return this.Oh},function(t){this.Oh!==t&&(s.j(t,"function",zt,"comparer"),this.Oh=t,this.J())});var R1;zt.standardComparer=R1=function(t,i){var n=t.text,e=i.text;return n<e?-1:n>e?1:0},zt.smartComparer=function(t,i){if(t!==null){if(i!==null){for(var n=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),r=0;r<n.length;r++)if(e[r]!==""&&e[r]!==void 0){var o=parseFloat(n[r]),h=parseFloat(e[r]);if(isNaN(o)){if(!isNaN(h))return 1;if(n[r].localeCompare(e[r])!==0)return n[r].localeCompare(e[r])}else{if(isNaN(h))return-1;if(o-h!==0)return o-h}}else if(n[r]!=="")return 1;return e[r]!==""&&e[r]!==void 0?-1:0}return 1}return i!==null?-1:0};var mp;zt.Position=mp=s.p(zt,"Position",0);var If;zt.Location=If=s.p(zt,"Location",1);var xp;zt.LeftToRight=xp=s.p(zt,"LeftToRight",2);var wr;zt.RightToLeft=wr=s.p(zt,"RightToLeft",3);var Dc;zt.Forward=Dc=s.p(zt,"Forward",4);var wp;zt.Reverse=wp=s.p(zt,"Reverse",5);var Bf;zt.Ascending=Bf=s.p(zt,"Ascending",6);var Mp;zt.Descending=Mp=s.p(zt,"Descending",7);function gt(){0<arguments.length&&s.nd(gt),wt.call(this),this.oz=this.Io=this.Gd=0,this.Er=360,this.nz=Le,this.rl=0,this.jC=new F,this.ZC=Le,this.Av=this.Uf=this.mE=0,this.Yw=new Fp,this.Bv=this.Ym=0,this.cH=600,this.Ys=NaN,this.Zq=1,this.yt=0,this.At=360,this.pd=Le,this.ba=xn,this.ei=xu,this.Oh=Fc,this.fi=6,this.Js=jp}s.La(gt,wt),s.ga("CircularLayout",gt),gt.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Ys=this.Ys,t.Zq=this.Zq,t.yt=this.yt,t.At=this.At,t.pd=this.pd,t.ba=this.ba,t.ei=this.ei,t.Oh=this.Oh,t.fi=this.fi,t.Js=this.Js},gt.prototype.ic=function(t){t.Je===gt?t===Np||t===Cp||t===kp||t===Sp||t===xu?this.sorting=t:t===ch||t===mu||t===xn||t===Ts?this.direction=t:t===_o||t===Ps||t===Le||t===ir?this.Vf=t:(t===vh||t===jp)&&(this.$x=t):wt.prototype.ic.call(this,t)},gt.prototype.createNetwork=function(){return new Gf},gt.prototype.doLayout=function(t){if(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Md=this.initialOrigin(this.Md),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.la=0,t.sa=0);else{var h=new z(bo);h.Pc(t.i),t=new z(bo);var i=new z(bo),n;n=this.sort(h);var a=this.nz,p=this.ZC,y=this.Gd,e=this.Io,r=this.oz,o=this.Er,h=this.rl,l=this.mE,u=this.Uf,f=this.Av,a=this.Vf,p=this.$x,y=this.nJ;if((!isFinite(y)||0>=y)&&(y=NaN),e=this.tH,(!isFinite(e)||0>=e)&&(e=1),r=this.Ae,isFinite(r)||(r=0),o=this.uf,(!isFinite(o)||360<o||1>o)&&(o=360),h=this.spacing,isFinite(h)||(h=NaN),a===ir&&p===vh?a=Le:a===ir&&p!==vh&&(p=vh,a=this.Vf),(this.direction===ch||this.direction===mu)&&this.sorting!==xu){for(var c=0;!(c>=n.length)&&(t.add(n.fa(c)),!(c+1>=n.length));c+=2)i.add(n.fa(c+1));this.direction===ch?(this.Vf===ir&&t.reverse(),n=new z(bo),n.Pc(t),n.Pc(i)):(this.Vf===ir&&i.reverse(),n=new z(bo),n.Pc(i),n.Pc(t))}for(var v=n.length,d=l=0,c=0;c<n.length;c++){var u=r+o*d*(this.direction===xn?1:-1)/v,g=n.fa(c).diameter;isNaN(g)&&(g=ks(n.fa(c),u)),360>o&&(c===0||c===n.length-1)&&(g/=2),l+=g,d++}if(isNaN(y)||a===ir){if(isNaN(h)&&(h=6),a!==Le&&a!==ir){for(g=-1/0,c=0;c<v;c++){var f=n.fa(c),m=n.fa(c===v-1?0:c+1);isNaN(f.diameter)&&ks(f,0),isNaN(m.diameter)&&ks(m,0),g=Math.max(g,(f.diameter+m.diameter)/2)}f=g+h,a===_o?(u=2*Math.PI/v,y=(g+h)/u):y=Pp(this,f*(360<=o?v:v-1),e,r*Math.PI/180,o*Math.PI/180)}else y=Pp(this,l+(360<=o?v:v-1)*(a!==ir?h:1.6*h),e,r*Math.PI/180,o*Math.PI/180);u=y*e}else if(u=y*e,d=Lc(this,y,u,r*Math.PI/180,o*Math.PI/180),isNaN(h))(a===Le||a===ir)&&(h=(d-l)/(360<=o?v:v-1));else if(a===Le||a===ir)c=(d-l)/(360<=o?v:v-1),c<h?(y=Pp(this,l+h*(360<=o?v:v-1),e,r*Math.PI/180,o*Math.PI/180),u=y*e):h=c;else{for(g=-1/0,c=0;c<v;c++)f=n.fa(c),m=n.fa(c===v-1?0:c+1),isNaN(f.diameter)&&ks(f,0),isNaN(m.diameter)&&ks(m,0),g=Math.max(g,(f.diameter+m.diameter)/2);f=g+h,c=Pp(this,f*(360<=o?v:v-1),e,r*Math.PI/180,o*Math.PI/180),c>y?(y=c,u=y*e):f=d/(360<=o?v:v-1)}if(this.nz=a,this.ZC=p,this.Gd=y,this.Io=e,this.oz=r,this.Er=o,this.rl=h,this.mE=l,this.Uf=u,this.Av=f,h=n,n=this.nz,a=this.Gd,p=this.oz,e=this.Er,r=this.rl,o=this.Uf,l=this.Av,this.direction!==ch&&this.direction!==mu||n!==ir)if(this.direction===ch||this.direction===mu){switch(y=0,n){case Ps:y=180*Tp(this,a,o,p,l)/Math.PI;break;case Le:l=h=0,y=t.first(),y!==null&&(h=ks(y,Math.PI/2)),y=i.first(),y!==null&&(l=ks(y,Math.PI/2)),y=180*Tp(this,a,o,p,r+(h+l)/2)/Math.PI;break;case _o:y=e/h.length}if(this.direction===ch){switch(n){case Ps:Rf(this,t,p,Ts);break;case Le:Ef(this,t,p,Ts);break;case _o:zf(this,t,e/2,p,Ts)}switch(n){case Ps:Rf(this,i,p+y,xn);break;case Le:Ef(this,i,p+y,xn);break;case _o:zf(this,i,e/2,p+y,xn)}}else{switch(n){case Ps:Rf(this,i,p,Ts);break;case Le:Ef(this,i,p,Ts);break;case _o:zf(this,i,e/2,p,Ts)}switch(n){case Ps:Rf(this,t,p+y,xn);break;case Le:Ef(this,t,p+y,xn);break;case _o:zf(this,t,e/2,p+y,xn)}}}else switch(n){case Ps:Rf(this,h,p,this.direction);break;case Le:Ef(this,h,p,this.direction);break;case _o:zf(this,h,e,p,this.direction);break;case ir:G1(this,h,e,p,this.direction)}else G1(this,h,e,p-e/2,xn)}this.updateParts(),this.network=null,this.sf=!0};function zf(t,i,n,e,r){var o=t.Er,h=t.Gd;t=t.Uf,e=e*Math.PI/180,n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=e+(r===xn?u*n/(360<=o?l:l-1):-(u*n)/l),a=i.fa(u),p=h*Math.tan(f)/t,p=Math.sqrt((h*h+t*t*p*p)/(1+p*p));a.la=p*Math.cos(f),a.sa=p*Math.sin(f),a.actualAngle=180*f/Math.PI}}function Ef(t,i,n,e){var r=t.Gd,o=t.Uf,h=t.rl;n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=i.fa(u),a=i.fa(u===l-1?0:u+1),p=o*Math.sin(n);f.la=r*Math.cos(n),f.sa=p,f.actualAngle=180*n/Math.PI,isNaN(f.diameter)&&ks(f,0),isNaN(a.diameter)&&ks(a,0),f=Tp(t,r,o,e===xn?n:-n,(f.diameter+a.diameter)/2+h),n+=e===xn?f:-f}}function Rf(t,i,n,e){var r=t.Gd,o=t.Uf,h=t.Av;n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=i.fa(u);f.la=r*Math.cos(n),f.sa=o*Math.sin(n),f.actualAngle=180*n/Math.PI,f=Tp(t,r,o,e===xn?n:-n,h),n+=e===xn?f:-f}}function G1(t,i,n,e,r){var o=t.Bv,o=t.Er;if(t.Ym=0,t.Yw=new Fp,360>n){for(o=e+(r===xn?o:-o);0>o;)o+=360;o%=360,180<o&&(o-=360),o*=Math.PI/180,t.Bv=o,V1(t,i,n,e,r)}else O1(t,i,n,e,r);t.Yw.commit(i)}function O1(t,i,n,e,r){var o=t.Gd,h=t.rl,l=t.Io,u=o*Math.cos(e*Math.PI/180),f=t.Uf*Math.sin(e*Math.PI/180),a=i.yc();if(a.length===3)a[0].la=o,a[0].sa=0,a[1].la=a[0].la-a[0].width/2-a[1].width/2-h,a[1].y=a[0].y,a[2].la=(a[0].la+a[1].la)/2,a[2].y=a[0].y-a[2].height-h;else if(a.length===4)a[0].la=o,a[0].sa=0,a[2].la=-a[0].la,a[2].sa=a[0].sa,a[1].la=0,a[1].y=Math.min(a[0].y,a[2].y)-a[1].height-h,a[3].la=0,a[3].y=Math.max(a[0].y+a[0].height+h,a[2].y+a[2].height+h);else{for(var o=s.K(),p=0;p<a.length&&(a[p].la=u,a[p].sa=f,!(p>=a.length-1));p++)H1(t,u,f,a,p,r,o)||K1(t,u,f,a,p,r,o),u=o.x,f=o.y;if(s.v(o),t.Ym++,!(23<t.Ym)){var u=a[0].la,f=a[0].sa,o=a[a.length-1].la,p=a[a.length-1].sa,y=Math.abs(u-o)-((a[0].width+a[a.length-1].width)/2+h),c=Math.abs(f-p)-((a[0].height+a[a.length-1].height)/2+h),h=0;1>Math.abs(c)?Math.abs(u-o)<(a[0].width+a[a.length-1].width)/2&&(h=0):h=0<c?c:1>Math.abs(y)?0:y,y=!1,y=Math.abs(o)>Math.abs(p)?0<o!=f>p:0<p!=u<o,(y=r===xn?y:!y)&&(h=-Math.abs(h),h=Math.min(h,-a[a.length-1].width),h=Math.min(h,-a[a.length-1].height)),t.Yw.compare(h,a),1<Math.abs(h)&&(t.Gd=8>t.Ym?t.Gd-h/(2*Math.PI):5>a.length&&10<h?t.Gd/2:t.Gd-(0<h?1.7:-2.3),t.Uf=t.Gd*l,O1(t,i,n,e,r))}}}function V1(t,i,n,e,r){for(var o=t.Gd,h=t.Uf,l=t.Io,u=o*Math.cos(e*Math.PI/180),f=h*Math.sin(e*Math.PI/180),a=s.K(),p=i.yc(),y=0;y<p.length&&(p[y].la=u,p[y].sa=f,!(y>=p.length-1));y++)H1(t,u,f,p,y,r,a)||K1(t,u,f,p,y,r,a),u=a.x,f=a.y;if(s.v(a),t.Ym++,!(23<t.Ym)){if(u=Math.atan2(f,u),u=r===xn?t.Bv-u:u-t.Bv,u=Math.abs(u)<Math.abs(u-2*Math.PI)?u:u-2*Math.PI,o=u*(o+h)/2,h=t.Yw,Math.abs(o)<Math.abs(h.aq))for(h.aq=o,h.lo=[],h.Nq=[],u=0;u<p.length;u++)h.lo[u]=p[u].eb.x,h.Nq[u]=p[u].eb.y;1<Math.abs(o)&&(t.Gd=8>t.Ym?t.Gd-o/(2*Math.PI):t.Gd-(0<o?1.7:-2.3),t.Uf=t.Gd*l,V1(t,i,n,e,r))}}function H1(t,i,n,e,r,o,h){var l=t.Gd,u=t.Uf,f=0,a=0;t=(e[r].width+e[r+1].width)/2+t.rl;var p=!1;if(0<=n!=(o===xn)){if(f=i+t,f>l){if(f=i-t,f<-l)return h.x=f,h.y=a,!1;p=!0}}else if(f=i-t,f<-l){if(f=i+t,f>l)return h.x=f,h.y=a,!1;p=!0}return a=Math.sqrt(1-Math.min(1,f*f/(l*l)))*u,0>n!==p&&(a=-a),Math.abs(n-a)>(e[r].height+e[r+1].height)/2?(h.x=f,h.y=a,!1):(h.x=f,h.y=a,!0)}function K1(t,i,n,e,r,o,h){var l=t.Gd,u=t.Uf,f=0,a=0;if(t=(e[r].height+e[r+1].height)/2+t.rl,e=!1,0<=i!=(o===xn)){if(a=n-t,a<-u){if(a=n+t,a>u){h.x=f,h.y=a;return}e=!0}}else if(a=n+t,a>u){if(a=n-t,a<-u){h.x=f,h.y=a;return}e=!0}f=Math.sqrt(1-Math.min(1,a*a/(u*u)))*l,0>i!==e&&(f=-f),h.x=f,h.y=a}gt.prototype.commitLayout=function(){this.commitNodes(),this.Au&&this.commitLinks()},gt.prototype.commitNodes=function(){var t=this.lH,i=this.group!==null&&this.group.placeholder!==null&&this.group.$c,n=i?this.group.location.copy():null;i?t=new F(0,0):(t.x=this.Md.x+this.Gd,t.y=this.Md.y+this.Uf);for(var e=this.network.vertexes.i;e.next();){var r=e.value;r.x+=t.x,r.y+=t.y,r.commit()}i&&(this.group.Ne(),t=this.group.position.copy(),i=this.group.location.copy(),n=n.ui(i.ui(t)),this.group.move(n),this.jC=n.ui(t))},gt.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()};function Lc(t,i,n,e,r){var o=t.cH;if(.001>Math.abs(t.Io-1))return e!==void 0&&r!==void 0?r*i:2*Math.PI*i;t=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n;for(var h=0,l=0,l=e!==void 0&&r!==void 0?r/(o+1):Math.PI/(2*(o+1)),u=0,f=0;f<=o;f++)u=e!==void 0&&r!==void 0?e+f*r/o:f*Math.PI/(2*o),u=Math.sin(u),h+=Math.sqrt(1-t*t*u*u)*l;return e!==void 0&&r!==void 0?(i>n?i:n)*h:4*(i>n?i:n)*h}function Pp(t,i,n,e,r){var o=0,o=e!==void 0&&r!==void 0?Lc(t,1,n,e,r):Lc(t,1,n);return i/o}function Tp(t,i,n,e,r){if(.001>Math.abs(t.Io-1))return r/i;var o=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),i>n&&(e+=Math.PI/2);for(var l=0;;l++){var u=Math.sin(e+l*t),h=h+(i>n?i:n)*Math.sqrt(1-o*o*u*u)*t;if(h>=r)return l*t}}gt.prototype.sort=function(t){switch(this.sorting){case kp:break;case Sp:t.reverse();break;case Np:t.sort(this.comparer);break;case Cp:t.sort(this.comparer),t.reverse();break;case xu:for(var i=[],n=0;n<t.length;n++)i.push(0);for(var e=new z(bo),n=0;n<t.length;n++){var r=-1,o=-1;if(n===0)for(var h=0;h<t.length;h++){var l=t.fa(h).WH;l>r&&(r=l,o=h)}else for(h=0;h<t.length;h++)l=i[h],l>r&&(r=l,o=h);for(e.add(t.fa(o)),i[o]=-1,o=t.fa(o),r=0,h=o.nc;h.next();)r=t.indexOf(h.value.fromVertex),0>r||0<=i[r]&&i[r]++;for(o=o.lc;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=i[r]&&i[r]++}for(t=[],o=0;o<e.length;o++){i=e.fa(o),t[o]=[];for(var u=0,n=i.lc;n.next();)u=e.indexOf(n.value.toVertex),u!==o&&0>t[o].indexOf(u)&&t[o].push(u);for(i=i.nc;i.next();)u=e.indexOf(i.value.fromVertex),u!==o&&0>t[o].indexOf(u)&&t[o].push(u)}for(h=[],o=0;o<t.length;o++)h[o]=0;for(var i=[],l=[],f=[],n=[],r=new z(bo),a=0,o=0;o<t.length;o++){var p=t[o].length;if(p===1)n.push(o);else if(p===0)r.add(e.fa(o));else{if(a===0)i.push(o);else{for(var y=1/0,c=1/0,v=-1,d=[],p=0;p<i.length;p++)0>t[i[p]].indexOf(i[p===i.length-1?0:p+1])&&d.push(p===i.length-1?0:p+1);if(d.length===0)for(p=0;p<i.length;p++)d.push(p);for(p=0;p<d.length;p++){var g=d[p],m,u=t[o];m=l;for(var w=f,M=h,k=g,D=i,C=0,G=0;G<m.length;G++){var H=M[m[G]],U=M[w[G]],X=0,_=0;if(H<U?(X=H,_=U):(X=U,_=H),X<k&&k<=_)for(H=0;H<u.length;H++)U=u[H],0>D.indexOf(U)||X<M[U]&&M[U]<_||X===M[U]||_===M[U]||C++;else for(H=0;H<u.length;H++)U=u[H],0>D.indexOf(U)||X<M[U]&&M[U]<_&&X!==M[U]&&_!==M[U]&&C++}for(m=C,M=w=0;M<t[o].length;M++)u=i.indexOf(t[o][M]),0<=u&&(u=Math.abs(g-(u>=g?u+1:u)),w+=u<i.length+1-u?u:i.length+1-u);for(M=0;M<l.length;M++)u=h[l[M]],k=h[f[M]],u>=g&&u++,k>=g&&k++,u>k&&(D=k,k=u,u=D),k-u<(i.length+2)/2==(u<g&&g<=k)&&w++;(m<y||m===y&&w<c)&&(y=m,c=w,v=g)}for(i.splice(v,0,o),p=0;p<i.length;p++)h[i[p]]=p;for(p=0;p<t[o].length;p++)y=t[o][p],0<=i.indexOf(y)&&(l.push(o),f.push(y))}a++}}for(o=!1,h=i.length;;){for(o=!0,l=0;l<n.length;l++)if(f=n[l],a=t[f][0],u=i.indexOf(a),0<=u){for(c=p=0;c<t[a].length;c++)y=t[a][c],y=i.indexOf(y),0>y||y===u||(v=y>u?y-u:u-y,p+=y<u!=v>h-v?1:-1);i.splice(0>p?u:u+1,0,f),n.splice(l,1),l--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(o=0;o<i.length;o++)r.add(e.fa(i[o]));return r;default:s.k("Invalid sorting type.")}return t},s.defineProperty(gt,{nJ:"radius"},function(){return this.Ys},function(t){this.Ys!==t&&(s.j(t,"number",gt,"radius"),0<t||isNaN(t))&&(this.Ys=t,this.J())}),s.defineProperty(gt,{tH:"aspectRatio"},function(){return this.Zq},function(t){this.Zq!==t&&(s.j(t,"number",gt,"aspectRatio"),0<t&&(this.Zq=t,this.J()))}),s.defineProperty(gt,{Ae:"startAngle"},function(){return this.yt},function(t){this.yt!==t&&(s.j(t,"number",gt,"startAngle"),this.yt=t,this.J())}),s.defineProperty(gt,{uf:"sweepAngle"},function(){return this.At},function(t){this.At!==t&&(s.j(t,"number",gt,"sweepAngle"),this.At=0<t&&360>=t?t:360,this.J())}),s.defineProperty(gt,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,gt,gt,"arrangement"),t===ir||t===Le||t===Ps||t===_o)&&(this.pd=t,this.J())}),s.defineProperty(gt,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(s.ob(t,gt,gt,"direction"),t===xn||t===Ts||t===ch||t===mu)&&(this.ba=t,this.J())}),s.defineProperty(gt,{sorting:"sorting"},function(){return this.ei},function(t){this.ei!==t&&(s.ob(t,gt,gt,"sorting"),t===kp||t===Sp||t===Np||Cp||t===xu)&&(this.ei=t,this.J())}),s.defineProperty(gt,{comparer:"comparer"},function(){return this.Oh},function(t){this.Oh!==t&&(s.j(t,"function",gt,"comparer"),this.Oh=t,this.J())}),s.defineProperty(gt,{spacing:"spacing"},function(){return this.fi},function(t){this.fi!==t&&(s.j(t,"number",gt,"spacing"),this.fi=t,this.J())}),s.defineProperty(gt,{$x:"nodeDiameterFormula"},function(){return this.Js},function(t){this.Js!==t&&(s.ob(t,gt,gt,"nodeDiameterFormula"),t===jp||t===vh)&&(this.Js=t,this.J())}),s.u(gt,{gK:"actualXRadius"},function(){return this.Gd}),s.u(gt,{hK:"actualYRadius"},function(){return this.Uf}),s.u(gt,{fK:"actualSpacing"},function(){return this.rl}),s.u(gt,{lH:"actualCenter"},function(){return this.jC});var Le;gt.ConstantSpacing=Le=s.p(gt,"ConstantSpacing",0);var Ps;gt.ConstantDistance=Ps=s.p(gt,"ConstantDistance",1);var _o;gt.ConstantAngle=_o=s.p(gt,"ConstantAngle",2);var ir;gt.Packed=ir=s.p(gt,"Packed",3);var xn;gt.Clockwise=xn=s.p(gt,"Clockwise",4);var Ts;gt.Counterclockwise=Ts=s.p(gt,"Counterclockwise",5);var ch;gt.BidirectionalLeft=ch=s.p(gt,"BidirectionalLeft",6);var mu;gt.BidirectionalRight=mu=s.p(gt,"BidirectionalRight",7);var kp;gt.Forwards=kp=s.p(gt,"Forwards",8);var Sp;gt.Reverse=Sp=s.p(gt,"Reverse",9);var Np;gt.Ascending=Np=s.p(gt,"Ascending",10);var Cp;gt.Descending=Cp=s.p(gt,"Descending",11);var xu;gt.Optimized=xu=s.p(gt,"Optimized",12);var jp;gt.Pythagorean=jp=s.p(gt,"Pythagorean",13);var vh;gt.Circular=vh=s.p(gt,"Circular",14);function Fp(){this.aq=-1/0,this.Nq=this.lo=null}Fp.prototype.compare=function(t,i){if(0<t&&0>this.aq||Math.abs(t)<Math.abs(this.aq)&&!(0>t&&0<this.aq)){this.aq=t,this.lo=[],this.Nq=[];for(var n=0;n<i.length;n++)this.lo[n]=i[n].eb.x,this.Nq[n]=i[n].eb.y}},Fp.prototype.commit=function(t){if(this.lo!==null&&this.Nq!==null)for(var i=0;i<this.lo.length;i++){var n=t.fa(i);n.x=this.lo[i],n.y=this.Nq[i]}};function Gf(){At.call(this)}s.La(Gf,At),s.ga("CircularNetwork",Gf),Gf.prototype.createVertex=function(){return new bo},Gf.prototype.createEdge=function(){return new Ac};function bo(){It.call(this),this.actualAngle=this.diameter=NaN}s.La(bo,It),s.ga("CircularVertex",bo);function ks(t,i){var n=t.network;if(n===null)return NaN;if(n=n.Ub,n===null)return NaN;if(n.Vf===ir)if(n.$x===vh)t.diameter=Math.max(t.width,t.height);else{var n=Math.abs(Math.sin(i)),e=Math.abs(Math.cos(i));if(n===0)return t.width;if(e===0)return t.height;t.diameter=Math.min(t.height/n,t.width/e)}else t.diameter=n.$x===vh?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function Ac(){Vi.call(this)}s.La(Ac,Vi),s.ga("CircularEdge",Ac);function Dt(){0<arguments.length&&s.nd(Dt),wt.call(this),this.Ig=null,this.hs=0,this.ng=new lt(100,100).freeze(),this.Yq=!1,this.di=!0,this.Nh=!1,this.ep=100,this.Hr=1,this.Qi=1e3,this.Ds=10,this.Zs=Math,this.Eo=.05,this.Do=50,this.Bo=150,this.Co=0,this.vr=10,this.ur=5}s.La(Dt,wt),s.ga("ForceDirectedLayout",Dt),Dt.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.ng.assign(this.ng),t.Yq=this.Yq,t.di=this.di,t.Nh=this.Nh,t.ep=this.ep,t.Hr=this.Hr,t.Qi=this.Qi,t.Ds=this.Ds,t.Zs=this.Zs,t.Eo=this.Eo,t.Do=this.Do,t.Bo=this.Bo,t.Co=this.Co,t.vr=this.vr,t.ur=this.ur},Dt.prototype.createNetwork=function(){return new wu},Dt.prototype.doLayout=function(t){if(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),t=this.fB,0<this.network.vertexes.count){this.network.ux();for(var i=this.network.vertexes.i;i.next();){var n=i.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(i=this.network.edges.i;i.next();)n=i.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.jA(),this.hs=0,this.needsClusterLayout()){for(i=this.network,n=i.PJ().i;n.next();){this.network=n.value;for(var e=this.network.vertexes.i;e.next();){var r=e.value;r.jg=r.vertexes.count,r.Uk=1,r.un=null,r.Ih=null}U1(this,0,t)}this.network=i,n.reset();for(var e=this.FE,o=n.count,h=!0,l=r=0,u=s.Za(),f=0;f<o+i.vertexes.count+2;f++)u[f]=null;o=0,n.reset();for(var a=s.vf();n.next();)if(f=n.value,this.computeBounds(f,a),h)h=!1,r=a.x+a.width/2,l=a.y+a.height/2,u[0]=new F(a.x+a.width+e.width,a.y),u[1]=new F(a.x,a.y+a.height+e.height),o=2;else{var p=J1(u,o,r,l,a.width,a.height,e),y=u[p],c=new F(y.x+a.width+e.width,y.y),v=new F(y.x,y.y+a.height+e.height);for(p+1<o&&u.splice(p+1,0,null),u[p]=c,u[p+1]=v,o++,p=y.x-a.x,y=y.y-a.y,f=f.vertexes.i;f.next();)c=f.value,c.la+=p,c.sa+=y}for(s.Bb(a),f=i.vertexes.i;f.next();)h=f.value,a=h.eb,2>o?(r=a.x+a.width/2,l=a.y+a.height/2,u[0]=new F(a.x+a.width+e.width,a.y),u[1]=new F(a.x,a.y+a.height+e.height),o=2):(p=J1(u,o,r,l,a.width,a.height,e),y=u[p],c=new F(y.x+a.width+e.width,y.y),v=new F(y.x,y.y+a.height+e.height),p+1<o&&u.splice(p+1,0,null),u[p]=c,u[p+1]=v,o++,h.la=y.x+h.width/2,h.sa=y.y+h.height/2);for(s.ra(u),n.reset();n.next();){for(e=n.value,r=e.vertexes.i;r.next();)i.Sl(r.value);for(e=e.edges.i;e.next();)i.Ip(e.value)}}q1(this,t),this.updateParts()}this.ep=t,this.network=null,this.sf=!0},Dt.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,i=0,n=this.network.vertexes.first().eb,e=this.network.vertexes.i;e.next();){if(e.value.eb.$f(n)&&(t++,2<t))return!0;if(10<i)break;i++}return!1},Dt.prototype.computeBounds=function(t,i){for(var n=!0,e=t.vertexes.i;e.next();){var r=e.value;n?(n=!1,i.set(r.eb)):i.Zg(r.eb)}return i};function U1(t,i,n){if(Ux(t,i)){var e=t.Qi;t.Qi*=1+1/(i+1);var r=Jx(t,i),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(i+1)/11),10));for(t.fB+=o,U1(t,i+1,n),q1(t,o),Yx(t,r),i=t.Ig,i===null?i=new z(dh):i.clear(),i.Pc(r.vertexes),i.sort(function(h,l){return h===null||l===null||h===l?0:l.jg-h.jg}),r=i.i;r.next();)qx(t,r.value);t.Qi=e}}function Ux(t,i){if(10<i||3>t.network.vertexes.count)return!1;t.Ig===null?t.Ig=new z(dh):t.Ig.clear(),t.Ig.Pc(t.network.vertexes);var n=t.Ig;n.sort(function(r,o){return r===null||o===null||r===o?0:o.jg-r.jg});for(var e=n.count-1;0<=e&&1>=n.fa(e).jg;)e--;return 1<n.count-e}function Jx(t,i){for(var n=t.network,e=new wu,r=t.Ig.i;r.next();){var o=r.value;if(1<o.jg){e.Sl(o);var h=new Z1;h.Ky=o.jg,h.Ly=o.width,h.Jy=o.height,h.cC=o.T.x,h.dC=o.T.y,o.Ih===null&&(o.Ih=new z(Z1)),o.Ih.add(h),o.yB=o.Ih.count-1}else break}for(var l=n.edges.i;l.next();)if(h=l.value,r=h.fromVertex,o=h.toVertex,r.network===e&&o.network===e)e.Ip(h);else if(r.network===e){var u=r.un;u===null&&(u=new z(dh),r.un=u),u.add(o),r.jg--,r.Uk+=o.Uk}else o.network===e&&(u=o.un,u===null&&(u=new z(dh),o.un=u),u.add(r),o.jg--,o.Uk+=r.Uk);for(r=e.edges.i;r.next();)o=r.value,o.length*=Math.max(1,Xs((o.fromVertex.Uk+o.toVertex.Uk)/(4*i+1)));for(r=e.vertexes.i;r.next();)if(o=r.value,u=o.un,u!==null&&0<u.count&&(h=o.Ih.fa(o.Ih.count-1),h=h.Ky-o.jg,!(0>=h))){for(var f=0,a=0,p=u.count-h;p<u.count;p++){for(var y=u.fa(p),c=null,l=y.edges.i;l.next();){var v=l.value;if(v.fI(y)===o){c=v;break}}c!==null&&(a+=c.length,f+=y.width*y.height)}l=o.la,u=o.sa,p=o.width,y=o.height,c=o.T,v=p*y,1>v&&(v=1),f=Xs((f+v+a*a*4/(h*h))/v),h=(f-1)*p/2,f=(f-1)*y/2,o.eb=new O(l-c.x-h,u-c.y-f,p+2*h,y+2*f),o.focus=new F(c.x+h,c.y+f)}return t.network=e,n}function Yx(t,i){for(var n=t.network.vertexes.i;n.next();){var e=n.value;if(e.network=i,e.Ih!==null){var r=e.Ih.fa(e.yB);e.jg=r.Ky;var o=r.cC,h=r.dC;e.eb=new O(e.la-o,e.sa-h,r.Ly,r.Jy),e.focus=new F(o,h),e.yB--}}for(n=t.network.edges.i;n.next();)n.value.network=i;t.network=i}function qx(t,i){var n=i.un;if(n!==null&&n.count!==0){var e=i.la,r=i.sa,o=i.width,h=i.height;i.Ih!==null&&0<i.Ih.count&&(h=i.Ih.fa(0),o=h.Ly,h=h.Jy);for(var o=Xs(o*o+h*h)/2,l=!1,u=h=0,f=0,a=i.vertexes.i;a.next();){var p=a.value;1>=p.jg?u++:(l=!0,f++,h+=Math.atan2(i.sa-p.sa,i.la-p.la))}if(u!==0){for(0<f&&(h/=f),a=f=0,f=l?2*Math.PI/(u+1):2*Math.PI/u,u%2===0&&(a=f/2),1<n.count&&n.sort(function(v,d){return v===null||d===null||v===d?0:d.width*d.height-v.width*v.height}),l=u%2===0?0:1,n=n.i;n.next();)if(u=n.value,!(1<u.jg||t.isFixed(u))){for(var p=null,c=u.edges.i;c.next();){p=c.value;break}var c=u.width,y=u.height,c=Xs(c*c+y*y)/2,p=o+p.length+c,c=h+(f*(l/2>>1)+a)*(l%2===0?1:-1);u.la=e+p*Math.cos(c),u.sa=r+p*Math.sin(c),l++}}}}function J1(t,i,n,e,r,o,h){var l=9e19,u=-1,f=0;t:for(;f<i;f++){var a=t[f],y=a.x-n,p=a.y-e,y=y*y+p*p;if(y<l){for(p=f-1;0<=p;p--)if(t[p].y>a.y&&t[p].x-a.x<r+h.width)continue t;for(p=f+1;p<i;p++)if(t[p].x>a.x&&t[p].y-a.y<o+h.height)continue t;u=f,l=y}}return u}Dt.prototype.jA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Dt.prototype.addComments=function(t){var i=t.Rc;if(i!==null)for(i=i.bF();i.next();){var n=i.value;if(n.kd==="Comment"&&n.isVisible()){var e=this.network.Dn(n);e===null&&(e=this.network.Pt(n)),e.charge=this.MH;for(var n=null,r=e.lc;r.next();){var o=r.value;if(o.toVertex===t){n=o;break}}if(n===null){for(r=e.nc;r.next();)if(o=r.value,o.fromVertex===t){n=o;break}}n===null&&(n=this.network.oq(t,e,null)),n.length=this.NH}}};function Y1(t,i){var o=t.O,n=o.x,e=o.y,r=o.width,o=o.height,f=i.O,h=f.x,l=f.y,u=f.width,f=f.height;return n+r<h?e>l+f?(n=n+r-h,e=e-l-f,Xs(n*n+e*e)):e+o<l?(n=n+r-h,e=e+o-l,Xs(n*n+e*e)):h-(n+r):n>h+u?e>l+f?(n=n-h-u,e=e-l-f,Xs(n*n+e*e)):e+o<l?(n=n-h-u,e=e+o-l,Xs(n*n+e*e)):n-(h+u):e>l+f?e-(l+f):e+o<l?l-(e+o):.1}function q1(t,i){t.Ig=null;for(var n=t.hs+i;t.hs<n&&(t.hs++,Zx(t)););t.Ig=null}function Zx(t){t.Ig===null&&(t.Ig=new z(dh),t.Ig.Pc(t.network.vertexes));var i=t.Ig.n;if(0>=i.length)return!1;var n=i[0];n.forceX=0,n.forceY=0;for(var e=n.la,r=e,o=n.sa,h=o,n=1;n<i.length;n++){var u=i[n];u.forceX=0,u.forceY=0;var l=u.la,u=u.sa,e=Math.min(e,l),r=Math.max(r,l),o=Math.min(o,u),h=Math.max(h,u)}(o=r-e>h-o)?i.sort(function(d,g){return d===null||g===null||d===g?0:d.la-g.la}):i.sort(function(d,g){return d===null||g===null||d===g?0:d.sa-g.sa});for(var h=t.Qi,f=0,a=0,p=0,n=0;n<i.length;n++){var u=i[n],l=u.O,y=u.T,e=l.x+y.x,l=l.y+y.y,a=u.charge*t.electricalFieldX(e,l),p=u.charge*t.electricalFieldY(e,l),a=a+u.mass*t.gravitationalFieldX(e,l),p=p+u.mass*t.gravitationalFieldY(e,l);for(u.forceX+=a,u.forceY+=p,y=n+1;y<i.length;y++)if(r=i[y],r!==u){var c=r.O,a=r.T,p=c.x+a.x,c=c.y+a.y;if(e-p>h||p-e>h){if(o)break}else if(l-c>h||c-l>h){if(!o)break}else{var v=Y1(u,r);1>v?(a=t.ly,a===null&&(t.ly=a=new Zs(0)),f=a.random(),v=a.random(),e>p?(a=Math.abs(r.O.right-u.O.x),a=(1+a)*f):e<p?(a=Math.abs(r.O.x-u.O.right),a=-(1+a)*f):(a=Math.max(r.width,u.width),a=(1+a)*f-a/2),l>c?(p=Math.abs(r.O.bottom-u.O.y),p=(1+p)*v):e<p?(p=Math.abs(r.O.y-u.O.bottom),p=-(1+p)*v):(p=Math.max(r.height,u.height),p=(1+p)*v-p/2)):(f=-(u.charge*r.charge)/(v*v),a=(p-e)/v*f,p=(c-l)/v*f),u.forceX+=a,u.forceY+=p,r.forceX-=a,r.forceY-=p}}}for(n=t.network.edges.i;n.next();)o=n.value,u=o.fromVertex,r=o.toVertex,l=u.O,y=u.T,e=l.x+y.x,l=l.y+y.y,c=r.O,a=r.T,p=c.x+a.x,c=c.y+a.y,v=Y1(u,r),1>v?(a=t.ly,a===null&&(t.ly=a=new Zs(0)),f=a.random(),v=a.random(),a=(e>p?1:-1)*(1+(r.width>u.width?r.width:u.width))*f,p=(l>c?1:-1)*(1+(r.height>u.height?r.height:u.height))*v):(f=o.stiffness*(v-o.length),a=(p-e)/v*f,p=(c-l)/v*f),u.forceX+=a,u.forceY+=p,r.forceX-=a,r.forceY-=p;for(n=0,e=t.fJ,r=0;r<i.length;r++)u=i[r],t.isFixed(u)?t.moveFixedVertex(u):(o=u.forceX,h=u.forceY,o<-e?o=-e:o>e&&(o=e),h<-e?h=-e:h>e&&(h=e),u.la+=o,u.sa+=h,n=Math.max(n,o*o+h*h));return n>t.ZE*t.ZE}Dt.prototype.moveFixedVertex=function(){},Dt.prototype.commitLayout=function(){this.FB(),this.commitNodes(),this.Au&&this.commitLinks()},Dt.prototype.FB=function(){if(this.co)for(var t=this.network.edges.i;t.next();){var i=t.value.link;i!==null&&(i.Mb=cn,i.Nb=cn)}},Dt.prototype.commitNodes=function(){var t=0,i=0;if(this.sH){var n=s.vf();this.computeBounds(this.network,n),i=this.Md,t=i.x-n.x,i=i.y-n.y,s.Bb(n)}for(var n=s.vf(),e=this.network.vertexes.i;e.next();){var r=e.value;(t!==0||i!==0)&&(n.assign(r.eb),n.x+=t,n.y+=i,r.eb=n),r.commit()}s.Bb(n)},Dt.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Dt.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Eo:t},Dt.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Do:t},Dt.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Bo:t},Dt.prototype.electricalFieldX=function(){return 0},Dt.prototype.electricalFieldY=function(){return 0},Dt.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Co:t},Dt.prototype.gravitationalFieldX=function(){return 0},Dt.prototype.gravitationalFieldY=function(){return 0},Dt.prototype.isFixed=function(t){return t.isFixed},s.u(Dt,{OK:"currentIteration"},function(){return this.hs}),s.defineProperty(Dt,{FE:"arrangementSpacing"},function(){return this.ng},function(t){s.G(t,lt,Dt,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),s.defineProperty(Dt,{sH:"arrangesToOrigin"},function(){return this.Yq},function(t){this.Yq!==t&&(s.j(t,"boolean",Dt,"arrangesToOrigin"),this.Yq=t,this.J())}),s.defineProperty(Dt,{co:"setsPortSpots"},function(){return this.di},function(t){this.di!==t&&(s.j(t,"boolean",Dt,"setsPortSpots"),this.di=t,this.J())}),s.defineProperty(Dt,{comments:"comments"},function(){return this.Nh},function(t){this.Nh!==t&&(s.j(t,"boolean",Dt,"comments"),this.Nh=t,this.J())}),s.defineProperty(Dt,{fB:"maxIterations"},function(){return this.ep},function(t){this.ep!==t&&(s.j(t,"number",Dt,"maxIterations"),0<=t&&(this.ep=t,this.J()))}),s.defineProperty(Dt,{ZE:"epsilonDistance"},function(){return this.Hr},function(t){this.Hr!==t&&(s.j(t,"number",Dt,"epsilonDistance"),0<t&&(this.Hr=t,this.J()))}),s.defineProperty(Dt,{hL:"infinityDistance"},function(){return this.Qi},function(t){this.Qi!==t&&(s.j(t,"number",Dt,"infinityDistance"),1<t&&(this.Qi=t,this.J()))}),s.defineProperty(Dt,{fJ:"moveLimit"},function(){return this.Ds},function(t){this.Ds!==t&&(s.j(t,"number",Dt,"moveLimit"),1<t&&(this.Ds=t,this.J()))}),s.defineProperty(Dt,{ly:"randomNumberGenerator"},function(){return this.Zs},function(t){this.Zs!==t&&(t!==null&&typeof t.random!="function"&&s.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Zs=t)}),s.defineProperty(Dt,{$K:"defaultSpringStiffness"},function(){return this.Eo},function(t){this.Eo!==t&&(s.j(t,"number",Dt,"defaultSpringStiffness"),this.Eo=t,this.J())}),s.defineProperty(Dt,{ZK:"defaultSpringLength"},function(){return this.Do},function(t){this.Do!==t&&(s.j(t,"number",Dt,"defaultSpringLength"),this.Do=t,this.J())}),s.defineProperty(Dt,{TK:"defaultElectricalCharge"},function(){return this.Bo},function(t){this.Bo!==t&&(s.j(t,"number",Dt,"defaultElectricalCharge"),this.Bo=t,this.J())}),s.defineProperty(Dt,{UK:"defaultGravitationalMass"},function(){return this.Co},function(t){this.Co!==t&&(s.j(t,"number",Dt,"defaultGravitationalMass"),this.Co=t,this.J())}),s.defineProperty(Dt,{NH:"defaultCommentSpringLength"},function(){return this.vr},function(t){this.vr!==t&&(s.j(t,"number",Dt,"defaultCommentSpringLength"),this.vr=t,this.J())}),s.defineProperty(Dt,{MH:"defaultCommentElectricalCharge"},function(){return this.ur},function(t){this.ur!==t&&(s.j(t,"number",Dt,"defaultCommentElectricalCharge"),this.ur=t,this.J())});function Z1(){this.dC=this.cC=this.Jy=this.Ly=this.Ky=0}function wu(){At.call(this)}s.La(wu,At),s.ga("ForceDirectedNetwork",wu),wu.prototype.createVertex=function(){return new dh},wu.prototype.createEdge=function(){return new Ic};function dh(){It.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.Uk=this.jg=this.forceY=this.forceX=0,this.Ih=this.un=null,this.yB=0}s.La(dh,It),s.ga("ForceDirectedVertex",dh);function Ic(){Vi.call(this),this.length=this.stiffness=NaN}s.La(Ic,Vi),s.ga("ForceDirectedEdge",Ic);function st(){0<arguments.length&&s.nd(st),wt.call(this),this.Yd=this.Pm=25,this.ba=0,this.Ao=Bp,this.ap=zp,this.Ro=Ep,this.Om=4,this.po=Rp,this.dj=Zc,this.di=!0,this.ns=4,this.Kb=this.mw=this.tb=-1,this.Rf=this.ws=0,this.Pb=this.Pf=this.Qf=this.yg=this.ne=null,this.Fs=0,this.Es=this.Um=null,this.Cg=0,this.Gs=null,this.pC=new F,this.kh=[],this.kh.length=100}s.La(st,wt),s.ga("LayeredDigraphLayout",st),st.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Pm=this.Pm,t.Yd=this.Yd,t.ba=this.ba,t.Ao=this.Ao,t.ap=this.ap,t.Ro=this.Ro,t.Om=this.Om,t.po=this.po,t.dj=this.dj,t.di=this.di,t.ns=this.ns},st.prototype.ic=function(t){t.Je===st?t.name.indexOf("Aggressive")===0?this.rH=t:t.name.indexOf("Cycle")===0?this.yA=t:t.name.indexOf("Init")===0?this.xI=t:t.name.indexOf("Layer")===0?this.JI=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},st.prototype.createNetwork=function(){return new Pu},st.prototype.doLayout=function(t){for(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Md=this.initialOrigin(this.Md),this.mw=-1,this.Rf=this.ws=0,this.Gs=this.Es=this.Um=null,t=0;t<this.kh.length;t++)this.kh[t]=null;if(0<this.network.vertexes.count){for(this.network.ux(),this.yA!==Vf&&W1(this),t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.tb=-1,this.assignLayers(),t.reset();t.next();)this.tb=Math.max(this.tb,t.value.layer);this.yA===Vf&&W1(this),t=this.network;for(var i=[],n=t.edges.i;n.next();){var e=n.value;e.valid=!1,i.push(e)}for(n=0;n<i.length;n++){var e=i[n],r=e.fromVertex,o=e.toVertex;if(!e.valid&&(r.vd!==null&&o.vd!==null||r.layer!==o.layer)){var h=0,l=0,u=0,f=0;if(e.link!==null){if(l=e.link,l===null)continue;var a=r.vd,h=o.vd;if(a===null||h===null)continue;var p=l.V,u=l.Z,y=l.gc,l=l.zc;if(e.rev)var f=p,d=y,p=u,y=l,u=f,l=d;var c=r.T,f=o.T,v=e.rev?o.O:r.O,d=s.K();a!==p?v.H()&&p.isVisible()?p.U.H()?(Wo(p,y,Tt,d),d.x+=p.U.x-v.x,d.y+=p.U.y-v.y):(Wo(p,y,Tt,d),d.H()||d.assign(c)):d.assign(c):v.H()?(Wo(p,y,Tt,d),d.H()||d.assign(c)):d.assign(c),p=e.rev?r.O:o.O,a=s.K(),h!==u?p.H()&&u.isVisible()?u.U.H()?(Wo(u,l,Tt,a),a.x+=u.U.x-p.x,a.y+=u.U.y-p.y):(Wo(u,l,Tt,a),a.H()||a.assign(f)):a.assign(f):p.H()?(Wo(u,l,Tt,a),a.H()||a.assign(f)):a.assign(f),this.ba===90||this.ba===270?(h=Math.round((d.x-c.x)/this.Yd),u=d.x,l=Math.round((a.x-f.x)/this.Yd),f=a.x):(h=Math.round((d.y-c.y)/this.Yd),u=d.y,l=Math.round((a.y-f.y)/this.Yd),f=a.y),s.v(d),s.v(a),e.portFromColOffset=h,e.portFromPos=u,e.portToColOffset=l,e.portToPos=f}else e.portFromColOffset=0,e.portFromPos=0,e.portToColOffset=0,e.portToPos=0;d=r.layer,a=o.layer;t:{var p=e,y=0,g=p.link;if(g!==null){var m=g.gc,w=g.zc;if(m!==null&&w!==null){var M=g.V,c=g.Z;if(M!==null&&c!==null){var k=Ap(this,!0),D=Ap(this,!1),C=this.co?k:g.computeSpot(!0,m),v=this.co?D:g.computeSpot(!1,w),G=g.ac;if(C.zj()&&C.xj(D)&&v.zj()&&v.xj(k)){y=0;break t}k=g.getLinkPoint(M,m,C,!0,G,c,w,s.K()),D=g.getLinkDirection(M,m,k,C,!0,G,c,w),s.v(k),C.ZA()||D!==em(this,p,!0)?this.co&&M!==null&&M.ports.count===1&&p.rev&&(y+=1):y+=1,C=g.getLinkPoint(c,w,v,!1,G,M,m,s.K()),g=g.getLinkDirection(c,w,C,v,!1,G,M,m),s.v(C),v.ZA()||g!==em(this,p,!1)?this.co&&c!==null&&c.ports.count===1&&p.rev&&(y+=2):y+=2}}}}if(p=y===1||y===3,(y=y===2||y===3)&&(c=t.createVertex(),c.vd=null,c.rn=1,c.layer=d,c.near=r,t.Sl(c),r=t.oq(r,c,e.link),r.valid=!1,r.rev=e.rev,r.portFromColOffset=h,r.portToColOffset=0,r.portFromPos=u,r.portToPos=0,r=c),v=1,p&&v--,d-a>v&&0<d){for(e.valid=!1,c=t.createVertex(),c.vd=null,c.rn=2,c.layer=d-1,t.Sl(c),r=t.oq(r,c,e.link),r.valid=!0,r.rev=e.rev,r.portFromColOffset=y?0:h,r.portToColOffset=0,r.portFromPos=y?0:u,r.portToPos=0,r=c,d--;d-a>v&&0<d;)c=t.createVertex(),c.vd=null,c.rn=3,c.layer=d-1,t.Sl(c),r=t.oq(r,c,e.link),r.valid=!0,r.rev=e.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=c,d--;r=t.oq(c,o,e.link),r.valid=!p,p&&(c.near=o),r.rev=e.rev,r.portFromColOffset=0,r.portToColOffset=l,r.portFromPos=0,r.portToPos=f}else e.valid=!0}}for(i=this.ne=[],e=0;e<=this.tb;e++)i[e]=0;for(t=this.network.vertexes.i;t.next();)t.value.index=-1;for(this.initializeIndices(),this.mw=-1,e=this.Rf=this.ws=0;e<=this.tb;e++)i[e]>i[this.Rf]&&(this.mw=i[e]-1,this.Rf=e),i[e]<i[this.ws]&&(this.ws=e);for(this.Gs=[],e=0;e<i.length;e++)this.Gs[e]=[];for(t.reset();t.next();)i=t.value,this.Gs[i.layer][i.index]=i;for(this.Kb=-1,t=0;t<=this.tb;t++){for(i=Ss(this,t),e=0,n=this.ne[t],o=0;o<n;o++)r=i[o],e+=this.nodeMinColumnSpace(r,!0),r.column=e,e+=1,e+=this.nodeMinColumnSpace(r,!1);this.Kb=Math.max(this.Kb,e-1),Ns(this,t,i)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.sf=!0},st.prototype.linkMinLength=function(){return 1};function Bc(t){var i=t.fromVertex.vd;return t=t.toVertex.vd,i===null&&t===null?8:i===null||t===null?4:1}st.prototype.nodeMinLayerSpace=function(t,i){return t.vd===null?0:this.ba===90||this.ba===270?i?t.T.y+10:t.O.height-t.T.y+10:i?t.T.x+10:t.O.width-t.T.x+10},st.prototype.nodeMinColumnSpace=function(t,i){if(t.vd===null)return 0;var n=i?t.mB:t.lB;return n!==null?n:(n=this.ba,n===90||n===270?i?t.mB=t.T.x/this.Yd+1|0:t.lB=(t.O.width-t.T.x)/this.Yd+1|0:i?t.mB=t.T.y/this.Yd+1|0:t.lB=(t.O.height-t.T.y)/this.Yd+1|0)};function Sn(t){t.Um===null&&(t.Um=[]);for(var i=0,n=t.network.vertexes.i;n.next();){var e=n.value;t.Um[i]=e.layer,i++,t.Um[i]=e.column,i++,t.Um[i]=e.index,i++}return t.Um}function ce(t,i){for(var n=0,e=t.network.vertexes.i;e.next();){var r=e.value;r.layer=i[n],n++,r.column=i[n],n++,r.index=i[n],n++}}function Q1(t,i,n){var e=Ss(t,i),r=t.ne[i];(t.Es===null||t.Es.length<r*r)&&(t.Es=[]);for(var o=t.Es,h=0;h<r;h++){var l=0,u=e[h],p=u.near,f=0;if(p!==null&&p.layer===u.layer)if(f=p.index,f>h)for(var a=h+1;a<f;a++)u=e[a],u.near===p&&u.rn===p.rn||l++;else for(a=h-1;a>f;a--)u=e[a],u.near===p&&u.rn===p.rn||l++;var p=0,y,c=y=a=u=0,v,d=0,g=0;v=0;var m;if(0<=n){for(f=e[h].Te,p=0;p<f.count;p++)if(y=f.n[p],y.valid&&y.fromVertex.layer!==i)for(u=y.fromVertex.index,a=y.portToPos,y=y.portFromPos,c=p+1;c<f.count;c++)v=f.n[c],v.valid&&v.fromVertex.layer!==i&&(d=v.fromVertex.index,g=v.portToPos,v=v.portFromPos,a<g&&(u>d||u===d&&y>v)&&l++,g<a&&(d>u||d===u&&v>y)&&l++)}if(0>=n){for(f=e[h].Me,p=0;p<f.count;p++)if(y=f.n[p],y.valid&&y.toVertex.layer!==i)for(u=y.toVertex.index,a=y.portToPos,y=y.portFromPos,c=p+1;c<f.count;c++)v=f.n[c],v.valid&&v.toVertex.layer!==i&&(d=v.toVertex.index,g=v.portToPos,v=v.portFromPos,y<v&&(u>d||u===d&&a>g)&&l++,v<y&&(d>u||d===u&&g>a)&&l++)}for(o[h*r+h]=l,f=h+1;f<r;f++){var w=0,M=0;if(0<=n){for(l=e[h].Te,m=e[f].Te,p=0;p<l.count;p++)if(y=l.n[p],y.valid&&y.fromVertex.layer!==i)for(u=y.fromVertex.index,y=y.portFromPos,c=0;c<m.count;c++)v=m.n[c],v.valid&&v.fromVertex.layer!==i&&(d=v.fromVertex.index,v=v.portFromPos,(u<d||u===d&&y<v)&&M++,(d<u||d===u&&v<y)&&w++)}if(0>=n){for(l=e[h].Me,m=e[f].Me,p=0;p<l.count;p++)if(y=l.n[p],y.valid&&y.toVertex.layer!==i)for(u=y.toVertex.index,a=y.portToPos,c=0;c<m.count;c++)v=m.n[c],v.valid&&v.toVertex.layer!==i&&(d=v.toVertex.index,g=v.portToPos,(u<d||u===d&&a<g)&&M++,(d<u||d===u&&g<a)&&w++)}o[h*r+f]=w,o[f*r+h]=M}}return Ns(t,i,e),o}st.prototype.countCrossings=function(){for(var t=0,i=0;i<=this.tb;i++)for(var n=Q1(this,i,1),e=this.ne[i],r=0;r<e;r++)for(var o=r;o<e;o++)t+=n[r*e+o];return t};function Dp(t){for(var i=0,n=0;n<=t.tb;n++){for(var e=t,r=n,o=Ss(e,r),h=e.ne[r],l=0,u=0;u<h;u++){var f=null,f=o[u].Me,a,p=0,y=0;if(f!==null)for(var c=0;c<f.count;c++)a=f.n[c],a.valid&&a.toVertex.layer!==r&&(p=a.fromVertex.column+a.portFromColOffset,y=a.toVertex.column+a.portToColOffset,l+=(Math.abs(p-y)+1)*Bc(a))}Ns(e,r,o),i+=l}return i}st.prototype.normalize=function(){var t=1/0;this.Kb=-1;for(var i=this.network.vertexes.i;i.next();){var n=i.value,t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0));this.Kb=Math.max(this.Kb,n.column+this.nodeMinColumnSpace(n,!1))}for(i.reset();i.next();)i.value.column-=t;this.Kb-=t};function zc(t,i,n){for(var e=Ss(t,i),r=t.ne[i],o=[],h=0;h<r;h++){var l=e[h],u=null;0>=n&&(u=l.Te);var f=null;0<=n&&(f=l.Me);var a=0,p=0,y=l.near;if(y!==null&&y.layer===l.layer&&(a+=y.column-1,p++),u!==null)for(y=0;y<u.count;y++){var l=u.n[y],c=l.fromVertex;l.valid&&!l.rev&&c.layer!==i&&(a+=c.column,p++)}if(f!==null)for(u=0;u<f.count;u++)l=f.n[u],y=l.toVertex,l.valid&&!l.rev&&y.layer!==i&&(a+=y.column,p++);o[h]=p===0?-1:a/p}return Ns(t,i,e),o}function X1(t,i,n){for(var e=Ss(t,i),r=t.ne[i],o=[],h=0;h<r;h++){var l=e[h],u=null;0>=n&&(u=l.Te);var f=null;0<=n&&(f=l.Me);var a=0,p=[],y=l.near;if(y!==null&&y.layer===l.layer&&(p[a]=y.column-1,a++),u!==null)for(y=0;y<u.count;y++){var l=u.n[y],c=l.fromVertex;l.valid&&!l.rev&&c.layer!==i&&(p[a]=c.column+l.portFromColOffset,a++)}if(f!==null)for(u=0;u<f.count;u++)l=f.n[u],y=l.toVertex,l.valid&&!l.rev&&y.layer!==i&&(p[a]=y.column+l.portToColOffset,a++);a===0?o[h]=-1:(p.sort(function(v,d){return v-d}),f=a>>1,o[h]=(a&1)!==0?p[f]:p[f-1]+p[f]>>1)}return Ns(t,i,e),o}function Of(t,i,n,e,r,o){if(i.component===e){i.component=n;var h=0,l=0;if(r)for(var u=i.lc;u.next();){var l=u.value,f=l.toVertex,h=i.layer-f.layer,l=t.linkMinLength(l);h===l&&Of(t,f,n,e,r,o)}if(o)for(u=i.nc;u.next();)l=u.value,f=l.fromVertex,h=f.layer-i.layer,l=t.linkMinLength(l),h===l&&Of(t,f,n,e,r,o)}}function Ec(t,i,n,e,r,o){if(i.component===e){if(i.component=n,r)for(var h=i.lc;h.next();)Ec(t,h.value.toVertex,n,e,r,o);if(o)for(i=i.nc;i.next();)Ec(t,i.value.fromVertex,n,e,r,o)}}function W1(t){for(var i=t.network.edges.i;i.next();)i.value.rev=!1;switch(t.Ao){default:case Oc:var i=t.network,n=0,e=i.vertexes.count-1,r=[];r.length=e+1;for(var o=i.vertexes.i;o.next();)o.value.valid=!0;for(;Qx(i)!==null;){for(o=$1(i);o!==null;)r[e]=o,e--,o.valid=!1,o=$1(i);for(o=_1(i);o!==null;)r[n]=o,n++,o.valid=!1,o=_1(i);for(var o=null,h=0,l=t.network.vertexes.i;l.next();){var u=l.value;if(u.valid){for(var f=0,a=u.lc;a.next();)a.value.toVertex.valid&&f++;for(var a=0,p=u.nc;p.next();)p.value.fromVertex.valid&&a++;(o===null||h<f-a)&&(o=u,h=f-a)}}o!==null&&(r[n]=o,n++,o.valid=!1)}for(t=0;t<i.vertexes.count;t++)r[t].index=t;for(t=i.edges.i;t.next();)r=t.value,r.fromVertex.index>r.toVertex.index&&(i.Wu(r),r.rev=!0);break;case Bp:for(r=t.network.vertexes.i;r.next();)i=r.value,i.Xp=-1,i.finish=-1;for(i=t.network.edges.i;i.next();)i.value.forest=!1;for(t.Fs=0,r.reset();r.next();)n=r.value,n.nc.count===0&&Rc(t,n);for(r.reset();r.next();)n=r.value,n.Xp===-1&&Rc(t,n);for(i.reset();i.next();)r=i.value,r.forest||(n=r.fromVertex,e=n.finish,o=r.toVertex,h=o.finish,o.Xp<n.Xp&&e<h&&(t.network.Wu(r),r.rev=!0));break;case Vf:for(t=t.network,n=t.vertexes.i,r=1/0;n.next();)i=n.value,r=Math.min(r,i.layer);if(1/0>r){if(0>r)for(n.reset();n.next();)i=n.value,i.layer-=r;for(r=[],n.reset();n.next();)i=n.value,e=r[i.layer],e===void 0?r[i.layer]=[i]:e.push(i);for(e=n=0;e<r.length;e++)if(o=r[e],!o||o.length===0)n++;else if(0<e)for(h=0;h<o.length;h++)i=o[h],i.layer-=n;for(i=t.edges.i;i.next();)r=i.value,r.fromVertex.layer<r.toVertex.layer&&(t.Wu(r),r.rev=!0)}}}function Qx(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid)return i}return null}function $1(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.lc;e.next();)if(e.value.toVertex.valid){n=!1;break}if(n)return i}}return null}function _1(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.nc;e.next();)if(e.value.fromVertex.valid){n=!1;break}if(n)return i}}return null}function Rc(t,i){i.Xp=t.Fs,t.Fs++;for(var n=i.lc;n.next();){var e=n.value,r=e.toVertex;r.Xp===-1&&(e.forest=!0,Rc(t,r))}i.finish=t.Fs,t.Fs++}st.prototype.assignLayers=function(){switch(this.ap){case Vc:b1(this);break;case Hc:for(var t=0,i=this.network.vertexes.i;i.next();)t=im(this,i.value),this.tb=Math.max(t,this.tb);for(i.reset();i.next();)t=i.value,t.layer=this.tb-t.layer;break;default:case zp:for(b1(this),i=this.network.vertexes.i;i.next();)i.value.valid=!1;for(i.reset();i.next();)t=i.value,t.nc.count===0&&nm(this,t);for(t=1/0,i.reset();i.next();)t=Math.min(t,i.value.layer);for(this.tb=-1,i.reset();i.next();){var n=i.value;n.layer-=t,this.tb=Math.max(this.tb,n.layer)}}};function b1(t){for(var i=t.network.vertexes.i;i.next();){var n=tm(t,i.value);t.tb=Math.max(n,t.tb)}}function tm(t,i){var n=0;if(i.layer===-1){for(var e=i.lc;e.next();)var o=e.value,r=o.toVertex,o=t.linkMinLength(o),n=Math.max(n,tm(t,r)+o);i.layer=n}else n=i.layer;return n}function im(t,i){var n=0;if(i.layer===-1){for(var e=i.nc;e.next();)var o=e.value,r=o.fromVertex,o=t.linkMinLength(o),n=Math.max(n,im(t,r)+o);i.layer=n}else n=i.layer;return n}function nm(t,i){if(!i.valid){i.valid=!0;for(var n=i.lc;n.next();)nm(t,n.value.toVertex);for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(var e=i.Te.n,r=e.length,o=0;o<r;o++){var u=e[o],h=u.fromVertex,l=u.toVertex,u=t.linkMinLength(u);h.layer-l.layer>u&&Of(t,h,0,-1,!0,!1)}for(Of(t,i,1,-1,!0,!0);i.component!==0;){for(var h=0,e=1/0,l=0,f=null,a=t.network.vertexes.i;a.next();){var p=a.value;if(p.component===1){for(var y=0,c=!1,v=p.Te.n,r=v.length,o=0;o<r;o++){var u=v[o],d=u.fromVertex,y=y+1;d.component!==1&&(h+=1,d=d.layer-p.layer,u=t.linkMinLength(u),e=Math.min(e,d-u))}for(u=p.Me.n,r=u.length,o=0;o<r;o++)v=u[o].toVertex,y-=1,v.component!==1?h-=1:c=!0;(f===null||y<l)&&!c&&(f=p,l=y)}}if(0<h){for(n.reset();n.next();)r=n.value,r.component===1&&(r.layer+=e);i.component=0}else f.component=0}for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(Of(t,i,1,-1,!0,!1);i.component!==0;){for(o=0,r=1/0,e=0,u=null,h=t.network.vertexes.i;h.next();)if(l=h.value,l.component===1){for(f=0,a=!1,c=l.Te.n,p=c.length,y=0;y<p;y++)v=c[y].fromVertex,f+=1,v.component!==1?o+=1:a=!0;for(c=l.Me.n,p=c.length,y=0;y<p;y++)v=c[y],d=v.toVertex,f-=1,d.component!==1&&(o-=1,d=l.layer-d.layer,v=t.linkMinLength(v),r=Math.min(r,d-v));(u===null||f>e)&&!a&&(u=l,e=f)}if(0>o){for(n.reset();n.next();)o=n.value,o.component===1&&(o.layer-=r);i.component=0}else u.component=0}}}function em(t,i,n){return t.ba===90?n&&!i.rev||!n&&i.rev?270:90:t.ba===180?n&&!i.rev||!n&&i.rev?0:180:t.ba===270?n&&!i.rev||!n&&i.rev?90:270:n&&!i.rev||!n&&i.rev?180:0}st.prototype.initializeIndices=function(){switch(this.Ro){default:case Uc:for(var t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;i.index=this.ne[n],this.ne[n]++}break;case Ep:for(t=this.network.vertexes.i,i=this.tb;0<=i;i--)for(t.reset();t.next();)n=t.value,n.layer===i&&n.index===-1&&rm(this,n);break;case Kc:for(t=this.network.vertexes.i,i=0;i<=this.tb;i++)for(t.reset();t.next();)n=t.value,n.layer===i&&n.index===-1&&om(this,n)}};function rm(t,i){var n=i.layer;i.index=t.ne[n],t.ne[n]++;for(var n=i.Me.yc(),e=!0;e;)for(var e=!1,r=0;r<n.length-1;r++){var o=n[r],h=n[r+1];o.portFromColOffset>h.portFromColOffset&&(e=!0,n[r]=h,n[r+1]=o)}for(r=0;r<n.length;r++)e=n[r],e.valid&&(e=e.toVertex,e.index===-1&&rm(t,e))}function om(t,i){var n=i.layer;i.index=t.ne[n],t.ne[n]++;for(var n=i.Te.yc(),e=!0,r=0;e;)for(e=!1,r=0;r<n.length-1;r++){var o=n[r],h=n[r+1];o.portToColOffset>h.portToColOffset&&(e=!0,n[r]=h,n[r+1]=o)}for(r=0;r<n.length;r++)e=n[r],e.valid&&(e=e.fromVertex,e.index===-1&&om(t,e))}st.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),i=Sn(this),e=0,l=0,n=0,e=0;e<this.Om;e++){for(l=0;l<=this.tb;l++)Lp(this,l,1),Ae(this,l,1);for(n=this.countCrossings(),n<t&&(t=n,i=Sn(this)),l=this.tb;0<=l;l--)Lp(this,l,-1),Ae(this,l,-1);n=this.countCrossings(),n<t&&(t=n,i=Sn(this))}for(ce(this,i),e=0;e<this.Om;e++){for(l=0;l<=this.tb;l++)Lp(this,l,0),Ae(this,l,0);for(n=this.countCrossings(),n<t&&(t=n,i=Sn(this)),l=this.tb;0<=l;l--)Lp(this,l,0),Ae(this,l,0);n=this.countCrossings(),n<t&&(t=n,i=Sn(this))}ce(this,i);var r=!1,o=e=0,h=0,l=0;switch(this.po){case Jc:break;case Yc:for(h=t+1;(l=this.countCrossings())<h;)for(h=l,e=this.tb;0<=e;e--)for(o=0;o<=e;o++){for(r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,-1)||r;for(n=this.countCrossings(),n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,1)||r;for(n=this.countCrossings(),n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,1)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,-1)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,0)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,0)||r;n>=t?ce(this,i):(t=n,i=Sn(this))}break;default:case Rp:for(e=this.tb,o=0,h=t+1;(l=this.countCrossings())<h;){for(h=l,r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,-1)||r;for(n=this.countCrossings(),n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,1)||r;for(n=this.countCrossings(),n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,1)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,-1)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=e;l>=o;l--)r=Ae(this,l,0)||r;for(n>=t?ce(this,i):(t=n,i=Sn(this)),r=!0;r;)for(r=!1,l=o;l<=e;l++)r=Ae(this,l,0)||r;n>=t?ce(this,i):(t=n,i=Sn(this))}}ce(this,i)};function Lp(t,i,n){var e=0,r=Ss(t,i),o=t.ne[i],h=X1(t,i,n);for(n=zc(t,i,n),e=0;e<o;e++)n[e]===-1&&(n[e]=r[e].column),h[e]===-1&&(h[e]=r[e].column);for(var l=!0,u;l;)for(l=!1,e=0;e<o-1;e++)(h[e+1]<h[e]||h[e+1]===h[e]&&n[e+1]<n[e])&&(l=!0,u=h[e],h[e]=h[e+1],h[e+1]=u,u=n[e],n[e]=n[e+1],n[e+1]=u,u=r[e],r[e]=r[e+1],r[e+1]=u);for(e=h=0;e<o;e++)u=r[e],u.index=e,h+=t.nodeMinColumnSpace(u,!0),u.column=h,h+=1,h+=t.nodeMinColumnSpace(u,!1);Ns(t,i,r)}function Ae(t,i,n){var e=Ss(t,i),r=t.ne[i];n=Q1(t,i,n);var o=0,h;for(h=[],o=0;o<r;o++)h[o]=-1;var l;for(l=[],o=0;o<r;o++)l[o]=-1;for(var u=!1,f=!0;f;)for(f=!1,o=0;o<r-1;o++){var a=n[e[o].index*r+e[o+1].index],p=n[e[o+1].index*r+e[o].index],y=0,c=0,v=e[o].column,d=e[o+1].column,m=t.nodeMinColumnSpace(e[o],!0),w=t.nodeMinColumnSpace(e[o],!1),M=t.nodeMinColumnSpace(e[o+1],!0),g=t.nodeMinColumnSpace(e[o+1],!1),m=v-m+M,w=d-w+g,M=M=0,k=e[o].nc.i;for(k.reset();k.next();)if(M=k.value,g=M.fromVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M<o&&(y+=2*(o-M),c+=2*(o+1-M)),M===o+1&&(y+=1),M>o+1&&(y+=4*(M-o),c+=4*(M-(o+1)))}for(k=e[o].lc.i,k.reset();k.next();)if(M=k.value,g=M.toVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M===o+1&&(c+=1)}for(k=e[o+1].nc.i,k.reset();k.next();)if(M=k.value,g=M.fromVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M<o&&(y+=2*(o+1-M),c+=2*(o-M)),M===o&&(c+=1),M>o+1&&(y+=4*(M-(o+1)),c+=4*(M-o))}for(k=e[o+1].lc.i,k.reset();k.next();)if(M=k.value,g=M.toVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M===o&&(y+=1)}var M=g=0,k=h[e[o].index],D=l[e[o].index],C=h[e[o+1].index],G=l[e[o+1].index];k!==-1&&(g+=Math.abs(k-v),M+=Math.abs(k-w)),D!==-1&&(g+=Math.abs(D-v),M+=Math.abs(D-w)),C!==-1&&(g+=Math.abs(C-d),M+=Math.abs(C-m)),G!==-1&&(g+=Math.abs(G-d),M+=Math.abs(G-m)),(c<y-.5||c===y&&p<a-.5||c===y&&p===a&&M<g-.5)&&(f=u=!0,e[o].column=w,e[o+1].column=m,a=e[o],e[o]=e[o+1],e[o+1]=a)}for(o=0;o<r;o++)e[o].index=o;return Ns(t,i,e),u}st.prototype.straightenAndPack=function(){var n=0,t=!1,i=(this.dj&lm)!==0,n=this.dj===Zc;if(1e3<this.network.edges.count&&!n&&(i=!1),i){for(t=[],n=n=0;n<=this.tb;n++)t[n]=0;for(var e=0,r=this.network.vertexes.i;r.next();){var o=r.value,n=o.layer,e=o.column,o=this.nodeMinColumnSpace(o,!1);t[n]=Math.max(t[n],e+o)}for(r.reset();r.next();)o=r.value,n=o.layer,e=o.column,o.column=(8*(this.Kb-t[n])>>1)+8*e;this.Kb*=8}if((this.dj&qc)!==0)for(t=!0;t;){for(t=!1,n=this.Rf+1;n<=this.tb;n++)t=Mu(this,n,1)||t;for(n=this.Rf-1;0<=n;n--)t=Mu(this,n,-1)||t;t=Mu(this,this.Rf,0)||t}if((this.dj&um)!==0){for(n=this.Rf+1;n<=this.tb;n++)Gc(this,n,1);for(n=this.Rf-1;0<=n;n--)Gc(this,n,-1);Gc(this,this.Rf,0)}if(i&&(sm(this,-1),sm(this,1)),(this.dj&qc)!==0)for(t=!0;t;){for(t=!1,t=Mu(this,this.Rf,0)||t,n=this.Rf+1;n<=this.tb;n++)t=Mu(this,n,0)||t;for(n=this.Rf-1;0<=n;n--)t=Mu(this,n,0)||t}};function Mu(t,i,n){for(var e=!1;Xx(t,i,n);)e=!0;return e}function Xx(t,i,n){var e=0,r=Ss(t,i),o=t.ne[i],h=zc(t,i,-1);if(0<n)for(e=0;e<o;e++)h[e]=-1;var l=zc(t,i,1);if(0>n)for(e=0;e<o;e++)l[e]=-1;for(var u=!1,f=!0;f;)for(f=!1,e=0;e<o;e++){var a=r[e].column,c=t.nodeMinColumnSpace(r[e],!0),p=t.nodeMinColumnSpace(r[e],!1),y=0,y=0>e-1||a-r[e-1].column-1>c+t.nodeMinColumnSpace(r[e-1],!1)?a-1:a,c=0,c=e+1>=o||r[e+1].column-a-1>p+t.nodeMinColumnSpace(r[e+1],!0)?a+1:a,v=p=0,d=0,g=0,m=0,w=0;if(0>=n)for(var M=r[e].nc.i;M.next();){var w=M.value,k=w.fromVertex;w.valid&&k.layer!==i&&(g=Bc(w),m=w.portFromColOffset,w=w.portToColOffset,k=k.column,p+=(Math.abs(a+w-(k+m))+1)*g,v+=(Math.abs(y+w-(k+m))+1)*g,d+=(Math.abs(c+w-(k+m))+1)*g)}if(0<=n)for(M=r[e].lc.i;M.next();)w=M.value,k=w.toVertex,w.valid&&k.layer!==i&&(g=Bc(w),m=w.portFromColOffset,w=w.portToColOffset,k=k.column,p+=(Math.abs(a+m-(k+w))+1)*g,v+=(Math.abs(y+m-(k+w))+1)*g,d+=(Math.abs(c+m-(k+w))+1)*g);w=m=g=0,M=h[r[e].index],k=l[r[e].index],M!==-1&&(g+=Math.abs(M-a),m+=Math.abs(M-y),w+=Math.abs(M-c)),k!==-1&&(g+=Math.abs(k-a),m+=Math.abs(k-y),w+=Math.abs(k-c)),v<p||v===p&&m<g?(f=u=!0,r[e].column=y):(d<p||d===p&&w<g)&&(f=u=!0,r[e].column=c)}return Ns(t,i,r),t.normalize(),u}function Gc(t,i,n){var e=0,r=Ss(t,i),o=t.ne[i],h=X1(t,i,n);for(n=[],e=0;e<o;e++)n[e]=h[e];for(h=!0;h;)for(h=!1,e=0;e<o;e++){var l=r[e].column,u=t.nodeMinColumnSpace(r[e],!0),f=t.nodeMinColumnSpace(r[e],!1),a=0,p=0,y=0,y=p=0;n[e]===-1?e===0&&e===o-1?a=l:e===0?(p=r[e+1].column,a=p-l===f+t.nodeMinColumnSpace(r[e+1],!0)?l-1:l):e===o-1?(y=r[e-1].column,a=l-y===u+t.nodeMinColumnSpace(r[e-1],!1)?l+1:l):(y=r[e-1].column,y=y+t.nodeMinColumnSpace(r[e-1],!1)+u+1,p=r[e+1].column,p=p-t.nodeMinColumnSpace(r[e+1],!0)-f-1,a=(y+p)/2|0):e===0&&e===o-1?a=n[e]:e===0?(p=r[e+1].column,p=p-t.nodeMinColumnSpace(r[e+1],!0)-f-1,a=Math.min(n[e],p)):e===o-1?(y=r[e-1].column,y=y+t.nodeMinColumnSpace(r[e-1],!1)+u+1,a=Math.max(n[e],y)):(y=r[e-1].column,y=y+t.nodeMinColumnSpace(r[e-1],!1)+u+1,p=r[e+1].column,p=p-t.nodeMinColumnSpace(r[e+1],!0)-f-1,y<n[e]&&n[e]<p?a=n[e]:y>=n[e]?a=y:p<=n[e]&&(a=p)),a!==l&&(h=!0,r[e].column=a)}Ns(t,i,r),t.normalize()}function Wx(t,i){for(var n=!0,e=t.network.vertexes.i;e.next();){var r=e.value,o=t.nodeMinColumnSpace(r,!0),h=t.nodeMinColumnSpace(r,!1);if(r.column-o<=i&&r.column+h>=i){n=!1;break}}if(r=!1,n)for(e.reset();e.next();)n=e.value,n.column>i&&(n.column-=1,r=!0);return r}function $x(t,i){for(var n=i,n=i+1,o=0,e=[],r=[],o=0;o<=t.tb;o++)e[o]=!1,r[o]=!1;for(var h=t.network.vertexes.i;h.next();){var o=h.value,l=o.column-t.nodeMinColumnSpace(o,!0),u=o.column+t.nodeMinColumnSpace(o,!1);l<=i&&u>=i&&(e[o.layer]=!0),l<=n&&u>=n&&(r[o.layer]=!0)}for(l=!0,n=!1,o=0;o<=t.tb;o++)l=l&&!(e[o]&&r[o]);if(l)for(h.reset();h.next();)e=h.value,e.column>i&&(e.column-=1,n=!0);return n}function sm(t,i){for(var n=0;n<=t.Kb;n++)for(;Wx(t,n););for(t.normalize(),n=0;n<t.Kb;n++)for(;$x(t,n););t.normalize();var n=0,e,r=0,o=0,h=0;if(0<i)for(n=0;n<=t.Kb;n++)for(e=Sn(t),r=Dp(t),o=r+1;r<o;)o=r,hm(t,n,1),h=Dp(t),h>r?ce(t,e):h<r&&(r=h,e=Sn(t));if(0>i)for(n=t.Kb;0<=n;n--)for(e=Sn(t),r=Dp(t),o=r+1;r<o;)o=r,hm(t,n,-1),h=Dp(t),h>r?ce(t,e):h<r&&(r=h,e=Sn(t));t.normalize()}function hm(t,i,n){t.Cg=0;for(var e=t.network.vertexes.i;e.next();)e.value.component=-1;if(0<n)for(e.reset();e.next();){var r=e.value;r.column-t.nodeMinColumnSpace(r,!0)<=i&&(r.component=t.Cg)}if(0>n)for(e.reset();e.next();)r=e.value,r.column+t.nodeMinColumnSpace(r,!1)>=i&&(r.component=t.Cg);for(t.Cg++,e.reset();e.next();)i=e.value,i.component===-1&&(Ec(t,i,t.Cg,-1,!0,!0),t.Cg++);var o=0;for(i=[],o=0;o<t.Cg*t.Cg;o++)i[o]=!1;for(r=[],o=0;o<(t.tb+1)*(t.Kb+1);o++)r[o]=-1;for(e.reset();e.next();)for(var o=e.value,h=o.layer,l=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),u=Math.min(t.Kb,o.column+t.nodeMinColumnSpace(o,!1));l<=u;l++)r[h*(t.Kb+1)+l]=o.component;for(o=0;o<=t.tb;o++){if(0<n)for(l=0;l<t.Kb;l++)r[o*(t.Kb+1)+l]!==-1&&r[o*(t.Kb+1)+l+1]!==-1&&r[o*(t.Kb+1)+l]!==r[o*(t.Kb+1)+l+1]&&(i[r[o*(t.Kb+1)+l]*t.Cg+r[o*(t.Kb+1)+l+1]]=!0);if(0>n)for(l=t.Kb;0<l;l--)r[o*(t.Kb+1)+l]!==-1&&r[o*(t.Kb+1)+l-1]!==-1&&r[o*(t.Kb+1)+l]!==r[o*(t.Kb+1)+l-1]&&(i[r[o*(t.Kb+1)+l]*t.Cg+r[o*(t.Kb+1)+l-1]]=!0)}for(r=[],o=0;o<t.Cg;o++)r[o]=!0;for(h=new z("number"),h.add(0),u=0;h.count!==0;)if(u=h.n[h.count-1],h.cd(h.count-1),r[u])for(r[u]=!1,o=0;o<t.Cg;o++)i[u*t.Cg+o]&&h.Rd(0,o);if(0<n)for(e.reset();e.next();)t=e.value,r[t.component]&&(t.column-=1);if(0>n)for(e.reset();e.next();)n=e.value,r[n.component]&&(n.column+=1)}st.prototype.commitLayout=function(){if(this.co)for(var t=Ap(this,!0),i=Ap(this,!1),n=this.network.edges.i;n.next();){var e=n.value.link;e!==null&&(e.Mb=t,e.Nb=i)}this.commitNodes(),this.pA(),this.Au&&this.commitLinks()};function Ap(t,i){return t.ba===270?i?Se:Ce:t.ba===90?i?Ce:Se:t.ba===180?i?Ne:Un:i?Un:Ne}st.prototype.commitNodes=function(){this.yg=[],this.Qf=[],this.Pf=[],this.Pb=[];for(var t=0;t<=this.tb;t++)this.yg[t]=0,this.Qf[t]=0,this.Pf[t]=0,this.Pb[t]=0;for(t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;this.yg[n]=Math.max(this.yg[n],this.nodeMinLayerSpace(i,!0)),this.Qf[n]=Math.max(this.Qf[n],this.nodeMinLayerSpace(i,!1))}for(var i=0,e=this.Pm,n=0;n<=this.tb;n++){var r=e;0>=this.yg[n]+this.Qf[n]&&(r=0),0<n&&(i+=r/2),this.ba===90||this.ba===0?(i+=this.Qf[n],this.Pf[n]=i,i+=this.yg[n]):(i+=this.yg[n],this.Pf[n]=i,i+=this.Qf[n]),n<this.tb&&(i+=r/2),this.Pb[n]=i}for(e=i,i=this.Md,n=0;n<=this.tb;n++)this.ba===270?this.Pf[n]=i.y+this.Pf[n]:this.ba===90?(this.Pf[n]=i.y+e-this.Pf[n],this.Pb[n]=e-this.Pb[n]):this.ba===180?this.Pf[n]=i.x+this.Pf[n]:(this.Pf[n]=i.x+e-this.Pf[n],this.Pb[n]=e-this.Pb[n]);for(t.reset(),e=r=1/0;t.next();){var n=t.value,o=n.layer,h=n.column|0,l=0,u=0;this.ba===270||this.ba===90?(l=i.x+this.Yd*h,u=this.Pf[o]):(l=this.Pf[o],u=i.y+this.Yd*h),n.la=l,n.sa=u,r=Math.min(n.x,r),e=Math.min(n.y,e)}for(r=i.x-r,i=i.y-e,this.pC=new F(r,i),t.reset();t.next();)n=t.value,n.x+=r,n.y+=i,n.commit()},st.prototype.pA=function(){for(var t=0,i=this.Pm,n=0;n<=this.tb;n++)t+=this.yg[n],t+=this.Qf[n];for(var t=t+this.tb*i,i=[],n=this.Yd*this.Kb,e=this.SI;0<=e;e--)this.ba===270?e===0?i.push(new O(0,0,n,Math.abs(this.Pb[0]))):i.push(new O(0,this.Pb[e-1],n,Math.abs(this.Pb[e-1]-this.Pb[e]))):this.ba===90?e===0?i.push(new O(0,this.Pb[0],n,Math.abs(this.Pb[0]-t))):i.push(new O(0,this.Pb[e],n,Math.abs(this.Pb[e-1]-this.Pb[e]))):this.ba===180?e===0?i.push(new O(0,0,Math.abs(this.Pb[0]),n)):i.push(new O(this.Pb[e-1],0,Math.abs(this.Pb[e-1]-this.Pb[e]),n)):e===0?i.push(new O(this.Pb[0],0,Math.abs(this.Pb[0]-t),n)):i.push(new O(this.Pb[e],0,Math.abs(this.Pb[e-1]-this.Pb[e]),n));this.commitLayers(i,this.pC)},st.prototype.commitLayers=function(){},st.prototype.commitLinks=function(){for(var t=this.network.edges.i,i;t.next();)i=t.value.link,i!==null&&(i.tm(),i.Pp(),i.qj());for(t.reset();t.next();)i=t.value.link,i!==null&&i.jo();for(t.reset();t.next();){var n=t.value;if(i=n.link,i!==null){i.tm();var e=i,r=e.V,o=e.Z,h=e.gc,l=e.zc;if(r!==null){var u=r.findVisibleNode();u!==null&&u!==r&&(r=u,h=u.port)}if(o!==null){var f=o.findVisibleNode();f!==null&&f!==o&&(o=f,l=f.port)}var a=i.computeSpot(!0,h),p=i.computeSpot(!1,l),y=n.fromVertex,c=n.toVertex;if(n.valid){if(i.nf===De&&i.qa===4)if(y.column===c.column){var v=i.getLinkPoint(r,h,a,!0,!1,o,l),d=i.getLinkPoint(o,l,p,!1,!1,r,h);v.H()||v.set(r.U.Wl),d.H()||d.set(o.U.Wl),i.Pp(),i.oj(v.x,v.y),i.oj((2*v.x+d.x)/3,(2*v.y+d.y)/3),i.oj((v.x+2*d.x)/3,(v.y+2*d.y)/3),i.oj(d.x,d.y)}else{var g=!1,m=!1;if(h!==null&&a===ki&&(g=!0),l!==null&&p===ki&&(m=!0),g||m){var w=i.l(0).x,M=i.l(0).y,k=i.l(1).x,D=i.l(1).y,C=i.l(2).x,G=i.l(2).y,H=i.l(3).x,U=i.l(3).y;if(g){this.ba===90||this.ba===270?(k=w,D=(M+U)/2):(k=(w+H)/2,D=M),i.ca(1,k,D);var X=i.getLinkPoint(r,h,a,!0,!1,o,l);X.H()||X.set(r.U.Wl),i.ca(0,X.x,X.y)}m&&(this.ba===90||this.ba===270?(C=H,G=(M+U)/2):(C=(w+H)/2,G=U),i.ca(2,C,G),X=i.getLinkPoint(o,l,p,!1,!1,r,h),X.H()||X.set(o.U.Wl),i.ca(3,X.x,X.y))}}i.qj()}else if(y.layer===c.layer)i.qj();else{var _=!1,Mt=!1,Ft=0,J=i.fu+1;if(i.ac)Mt=!0,Ft=i.qa,4<Ft&&i.points.removeRange(2,Ft-3);else if(i.nf===De)_=!0,Ft=i.qa,4<Ft&&i.points.removeRange(2,Ft-3),J=2;else{var Ft=i.qa,ht=a===ki,qt=p===ki;2<Ft&&ht&&qt?i.points.removeRange(1,Ft-2):3<Ft&&ht&&!qt?i.points.removeRange(1,Ft-3):3<Ft&&!ht&&qt?i.points.removeRange(2,Ft-2):4<Ft&&!ht&&!qt&&i.points.removeRange(2,Ft-3)}var Bt,Wt;if(n.rev){for(var Ct=0;c!==null&&y!==c;){Wt=Bt=null;for(var xh=c.nc.i;xh.next();){var Ie=xh.value;if(Ie.link===n.link&&(Bt=Ie.fromVertex,Wt=Ie.toVertex,Bt.vd===null))break}if(Bt!==y)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=Bt.la,at=Bt.sa,Mt)this.ba===180||this.ba===0?J===2?(i.w(J++,ai,ni),i.w(J++,ai,at)):(Ii=Wt!==null?Wt.sa:ni,Ii!==at&&(yi=this.Pb[Bt.layer-1],i.w(J++,yi,ni),i.w(J++,yi,at))):J===2?(i.w(J++,ai,ni),i.w(J++,ft,ni)):(Fs=Wt!==null?Wt.la:ai,Fs!==ft&&(yi=this.Pb[Bt.layer-1],i.w(J++,ai,yi),i.w(J++,ft,yi)));else if(J===2)if(Zt=Math.max(10,this.yg[c.layer]),Kt=Math.max(10,this.Qf[c.layer]),_)this.ba===180?ft<=c.O.x?(Ct=c.O.x,i.w(J++,Ct-Zt,at),i.w(J++,Ct,at),i.w(J++,Ct+Kt,at)):(i.w(J++,ft-Zt,at),i.w(J++,ft,at),i.w(J++,ft+Kt,at)):this.ba===90?at>=c.O.bottom?(Ct=c.O.y+c.O.height,i.w(J++,ft,Ct+Kt),i.w(J++,ft,Ct),i.w(J++,ft,Ct-Zt)):(i.w(J++,ft,at+Kt),i.w(J++,ft,at),i.w(J++,ft,at-Zt)):this.ba===270?at<=c.O.y?(Ct=c.O.y,i.w(J++,ft,Ct-Zt),i.w(J++,ft,Ct),i.w(J++,ft,Ct+Kt)):(i.w(J++,ft,at-Zt),i.w(J++,ft,at),i.w(J++,ft,at+Kt)):this.ba===0&&(ft>=c.O.right?(Ct=c.O.x+c.O.width,i.w(J++,Ct+Kt,at),i.w(J++,Ct,at),i.w(J++,Ct-Zt,at)):(i.w(J++,ft+Kt,at),i.w(J++,ft,at),i.w(J++,ft-Zt,at)));else{i.w(J++,ai,ni);var ve=0;this.ba===180||this.ba===0?((this.ba===180?ft>=c.O.right:ft<=c.O.x)&&(ve=(this.ba===0?-Zt:Kt)/2),i.w(J++,ai+ve,at)):((this.ba===270?at>=c.O.bottom:at<=c.O.y)&&(ve=(this.ba===90?-Zt:Kt)/2),i.w(J++,ft,ni+ve)),i.w(J++,ft,at)}else Zt=Math.max(10,this.yg[Bt.layer]),Kt=Math.max(10,this.Qf[Bt.layer]),this.ba===180?(_&&i.w(J++,ft-Zt,at),i.w(J++,ft,at),_&&i.w(J++,ft+Kt,at)):this.ba===90?(_&&i.w(J++,ft,at+Kt),i.w(J++,ft,at),_&&i.w(J++,ft,at-Zt)):this.ba===270?(_&&i.w(J++,ft,at-Zt),i.w(J++,ft,at),_&&i.w(J++,ft,at+Kt)):(_&&i.w(J++,ft+Kt,at),i.w(J++,ft,at),_&&i.w(J++,ft-Zt,at));c=Bt}if(l===null||a!==ki||Mt)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=i.l(J).x,at=i.l(J).y,Mt){var Co=this.Qf[y.layer],wn=0;this.ba===180||this.ba===0?(wn=ni,wn>=y.O.y&&wn<=y.O.bottom&&(this.ba===180?ft>=y.O.x:ft<=y.O.right)&&(Ct=y.la+(this.ba===180?-Co:Co),wn=wn<y.O.y+y.O.height/2?y.O.y-this.Yd/2:y.O.bottom+this.Yd/2,i.w(J++,Ct,ni),i.w(J++,Ct,wn)),i.w(J++,ft,wn)):(wn=ai,wn>=y.O.x&&wn<=y.O.right&&(this.ba===270?at>=y.O.y:at<=y.O.bottom)&&(Ct=y.sa+(this.ba===270?-Co:Co),wn=wn<y.O.x+y.O.width/2?y.O.x-this.Yd/2:y.O.right+this.Yd/2,i.w(J++,ai,Ct),i.w(J++,wn,Ct)),i.w(J++,wn,at)),i.w(J++,ft,at)}else _?(Zt=Math.max(10,this.yg[y.layer]),Kt=Math.max(10,this.Qf[y.layer]),this.ba===180&&ft>=y.O.x?(Ct=y.O.x+y.O.width,i.ca(J-2,Ct,ni),i.ca(J-1,Ct+Kt,ni)):this.ba===90&&at<=y.O.bottom?(Ct=y.O.y,i.ca(J-2,ai,Ct),i.ca(J-1,ai,Ct-Zt)):this.ba===270&&at>=y.O.y?(Ct=y.O.y+y.O.height,i.ca(J-2,ai,Ct),i.ca(J-1,ai,Ct+Kt)):this.ba===0&&ft<=y.O.right&&(Ct=y.O.x,i.ca(J-2,Ct,ni),i.ca(J-1,Ct-Zt,ni))):(Zt=Math.max(10,this.yg[y.layer]),Kt=Math.max(10,this.Qf[y.layer]),ve=0,this.ba===180||this.ba===0?((this.ba===180?ft<=y.O.x:ft>=y.O.right)&&(ve=(this.ba===0?Kt:-Zt)/2),i.w(J++,ft+ve,ni)):((this.ba===270?at<=y.O.y:at>=y.O.bottom)&&(ve=(this.ba===90?Kt:-Zt)/2),i.w(J++,ai,at+ve)),i.w(J++,ft,at))}else{for(;y!==null&&y!==c;){Wt=Bt=null;for(var er=y.lc.i;er.next();){var js=er.value;if(js.link===n.link&&(Bt=js.toVertex,Wt=js.fromVertex,Wt.vd!==null&&(Wt=null),Bt.vd===null))break}var ai=0,ni=0,ft=0,at=0,yi=0,Zt=0,Kt=0;if(Bt!==c)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=Bt.la,at=Bt.sa,Mt)if(this.ba===180||this.ba===0){var Ii=Wt!==null?Wt.sa:ni;Ii!==at&&(yi=this.Pb[Bt.layer],J===2&&(yi=this.ba===0?Math.max(yi,ai):Math.min(yi,ai)),i.w(J++,yi,ni),i.w(J++,yi,at))}else{var Fs=Wt!==null?Wt.la:ai;Fs!==ft&&(yi=this.Pb[Bt.layer],J===2&&(yi=this.ba===90?Math.max(yi,ni):Math.min(yi,ni)),i.w(J++,ai,yi),i.w(J++,ft,yi))}else Zt=Math.max(10,this.yg[Bt.layer]),Kt=Math.max(10,this.Qf[Bt.layer]),this.ba===180?(i.w(J++,ft+Kt,at),_&&i.w(J++,ft,at),i.w(J++,ft-Zt,at)):this.ba===90?(i.w(J++,ft,at-Zt),_&&i.w(J++,ft,at),i.w(J++,ft,at+Kt)):this.ba===270?(i.w(J++,ft,at+Kt),_&&i.w(J++,ft,at),i.w(J++,ft,at-Zt)):(i.w(J++,ft-Zt,at),_&&i.w(J++,ft,at),i.w(J++,ft+Kt,at));y=Bt}Mt&&(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=i.l(J).x,at=i.l(J).y,this.ba===180||this.ba===0?ni!==at&&(yi=this.ba===0?Math.min(Math.max((ft+ai)/2,this.Pb[c.layer]),ft):Math.max(Math.min((ft+ai)/2,this.Pb[c.layer]),ft),i.w(J++,yi,ni),i.w(J++,yi,at)):ai!==ft&&(yi=this.ba===90?Math.min(Math.max((at+ni)/2,this.Pb[c.layer]),at):Math.max(Math.min((at+ni)/2,this.Pb[c.layer]),at),i.w(J++,ai,yi),i.w(J++,ft,yi)))}if(e!==null&&_){if(h!==null){if(a===ki){var In=i.l(0),rr=i.l(2);In.L(rr)||i.ca(1,(In.x+rr.x)/2,(In.y+rr.y)/2)}X=i.getLinkPoint(r,h,ki,!0,!1,o,l),X.H()||X.set(r.U.Wl),i.ca(0,X.x,X.y)}l!==null&&(p===ki&&(In=i.l(i.qa-1),rr=i.l(i.qa-3),In.L(rr)||i.ca(i.qa-2,(In.x+rr.x)/2,(In.y+rr.y)/2)),X=i.getLinkPoint(o,l,ki,!1,!1,r,h),X.H()||X.set(o.U.Wl),i.ca(i.qa-1,X.x,X.y))}i.qj(),n.commit()}}}for(var to=new z(S),os=this.network.edges.i;os.next();){var de=os.value.link;de!==null&&de.ac&&!to.contains(de)&&to.add(de)}if(0<to.count)if(this.ba===90||this.ba===270){for(var Bi=new z(ko),Mn,ee,jo=to.i;jo.next();){var Hi=jo.value;if(Hi!==null&&Hi.ac){for(var Ki=2;Ki<Hi.qa-3;Ki++)if(Mn=Hi.l(Ki),ee=Hi.l(Ki+1),Ip(Mn.y,ee.y)&&!Ip(Mn.x,ee.x)){var or=new ko;or.layer=Math.floor(Mn.y/2);var Be=Hi.l(0),li=Hi.l(Hi.qa-1);if(or.first=Be.x*Be.x+Be.y,or.ie=li.x*li.x+li.y,or.af=Math.min(Mn.x,ee.x),or.ue=Math.max(Mn.x,ee.x),or.index=Ki,or.link=Hi,Ki+2<Hi.qa){var Bn=Hi.l(Ki-1),ss=Hi.l(Ki+2),Ds=0;Bn.y<Mn.y?Ds=ss.y<Mn.y?3:Mn.x<ee.x?2:1:Bn.y>Mn.y&&(Ds=ss.y>Mn.y?0:ee.x<Mn.x?2:1),or.xi=Ds}Bi.add(or)}}}if(1<Bi.count){Bi.sort(this.pG);for(var Er=0;Er<Bi.count;){for(var si=Bi.n[Er].layer,zi=Er+1;zi<Bi.count&&Bi.n[zi].layer===si;)zi++;if(1<zi-Er)for(var ei=Er;ei<zi;){for(var ze=Bi.n[ei].ue,$i=Er+1;$i<zi&&Bi.n[$i].af<ze;)ze=Math.max(ze,Bi.n[$i].ue),$i++;var Ls=$i-ei;if(1<Ls){Bi.Jq(this.vy,ei,ei+Ls);for(var pi=1,rn=Bi.n[ei].ie,Ki=ei;Ki<$i;Ki++){var Ut=Bi.n[Ki];Ut.ie!==rn&&(pi++,rn=Ut.ie)}Bi.Jq(this.oG,ei,ei+Ls);for(var Nn=1,rn=Bi.n[ei].first,Ki=ei;Ki<$i;Ki++)Ut=Bi.n[Ki],Ut.first!==rn&&(Nn++,rn=Ut.first);var xi=!0,ci=Nn;pi<Nn?(xi=!1,ci=pi,rn=Bi.n[ei].ie,Bi.Jq(this.vy,ei,ei+Ls)):rn=Bi.n[ei].first;for(var Fi=0,Ki=ei;Ki<$i;Ki++){Ut=Bi.n[Ki],(xi?Ut.first:Ut.ie)!==rn&&(Fi++,rn=xi?Ut.first:Ut.ie),Hi=Ut.link,Mn=Hi.l(Ut.index),ee=Hi.l(Ut.index+1);var Ee=this.OF*(Fi-(ci-1)/2);Hi.tm(),Hi.ca(Ut.index,Mn.x,Mn.y+Ee),Hi.ca(Ut.index+1,ee.x,ee.y+Ee),Hi.qj()}}ei=$i}Er=zi}}}else{for(var Si=new z(ko),Ui,re,rl=to.i;rl.next();){var Ei=rl.value;if(Ei!==null&&Ei.ac){for(var Ri=2;Ri<Ei.qa-3;Ri++)if(Ui=Ei.l(Ri),re=Ei.l(Ri+1),Ip(Ui.x,re.x)&&!Ip(Ui.y,re.y)){var Cn=new ko;Cn.layer=Math.floor(Ui.x/2);var Qn=Ei.l(0),ge=Ei.l(Ei.qa-1);if(Cn.first=Qn.x+Qn.y*Qn.y,Cn.ie=ge.x+ge.y*ge.y,Cn.af=Math.min(Ui.y,re.y),Cn.ue=Math.max(Ui.y,re.y),Cn.index=Ri,Cn.link=Ei,Ri+2<Ei.qa){var As=Ei.l(Ri-1),ol=Ei.l(Ri+2),vi=0;As.x<Ui.x?vi=ol.x<Ui.x?3:Ui.y<re.y?2:1:As.x>Ui.x&&(vi=ol.x>Ui.x?0:re.y<Ui.y?2:1),Cn.xi=vi}Si.add(Cn)}}}if(1<Si.count){Si.sort(this.pG);for(var Xn=0;Xn<Si.count;){for(var sl=Si.n[Xn].layer,Rr=Xn+1;Rr<Si.count&&Si.n[Rr].layer===sl;)Rr++;if(1<Rr-Xn)for(var on=Xn;on<Rr;){for(var Mr=Si.n[on].ue,sn=Xn+1;sn<Rr&&Si.n[sn].af<Mr;)Mr=Math.max(Mr,Si.n[sn].ue),sn++;var zn=sn-on;if(1<zn){Si.Jq(this.vy,on,on+zn);for(var me=1,hn=Si.n[on].ie,Ri=on;Ri<sn;Ri++){var Jt=Si.n[Ri];Jt.ie!==hn&&(me++,hn=Jt.ie)}Si.Jq(this.oG,on,on+zn);for(var ln=1,hn=Si.n[on].first,Ri=on;Ri<sn;Ri++)Jt=Si.n[Ri],Jt.first!==hn&&(ln++,hn=Jt.first);var hl=!0,io=ln;me<ln?(hl=!1,io=me,hn=Si.n[on].ie,Si.Jq(this.vy,on,on+zn)):hn=Si.n[on].first;for(var Re=0,Ri=on;Ri<sn;Ri++){Jt=Si.n[Ri],(hl?Jt.first:Jt.ie)!==hn&&(Re++,hn=hl?Jt.first:Jt.ie),Ei=Jt.link,Ui=Ei.l(Jt.index),re=Ei.l(Jt.index+1);var Fo=this.OF*(Re-(io-1)/2);Ei.tm(),Ei.ca(Jt.index,Ui.x+Fo,Ui.y),Ei.ca(Jt.index+1,re.x+Fo,re.y),Ei.qj()}}on=sn}Xn=Rr}}}},st.prototype.pG=function(t,i){return t instanceof ko&&i instanceof ko&&t!==i?t.layer<i.layer?-1:t.layer>i.layer?1:t.af<i.af?-1:t.af>i.af?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0},st.prototype.oG=function(t,i){return t instanceof ko&&i instanceof ko&&t!==i?t.first<i.first?-1:t.first>i.first||t.xi<i.xi?1:t.xi>i.xi||t.af<i.af?-1:t.af>i.af?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0},st.prototype.vy=function(t,i){return t instanceof ko&&i instanceof ko&&t!==i?t.ie<i.ie?-1:t.ie>i.ie||t.xi<i.xi?1:t.xi>i.xi||t.af<i.af?-1:t.af>i.af?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0};function Ip(t,i){var n=t-i;return-1<n&&1>n}function Ss(t,i){var n,e=t.ne[i];if(e>=t.kh.length){n=[];for(var r=0;r<t.kh.length;r++)n[r]=t.kh[r];t.kh=n}for(t.kh[e]===void 0||t.kh[e]===null?n=[]:(n=t.kh[e],t.kh[e]=null),e=t.Gs[i],r=0;r<e.length;r++){var o=e[r];n[o.index]=o}return n}function Ns(t,i,n){t.kh[t.ne[i]]=n}s.defineProperty(st,{layerSpacing:"layerSpacing"},function(){return this.Pm},function(t){this.Pm!==t&&(s.j(t,"number",st,"layerSpacing"),0<=t&&(this.Pm=t,this.J()))}),s.defineProperty(st,{LK:"columnSpacing"},function(){return this.Yd},function(t){this.Yd!==t&&(s.j(t,"number",st,"columnSpacing"),0<t&&(this.Yd=t,this.J()))}),s.defineProperty(st,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(s.j(t,"number",st,"direction"),t===0||t===90||t===180||t===270?(this.ba=t,this.J()):s.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),s.defineProperty(st,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),s.defineProperty(st,{yA:"cycleRemoveOption"},function(){return this.Ao},function(t){this.Ao!==t&&(s.ob(t,st,st,"cycleRemoveOption"),t===Oc||t===Bp||t===Vf)&&(this.Ao=t,this.J())}),s.defineProperty(st,{JI:"layeringOption"},function(){return this.ap},function(t){this.ap!==t&&(s.ob(t,st,st,"layeringOption"),t===zp||t===Vc||t===Hc)&&(this.ap=t,this.J())}),s.defineProperty(st,{xI:"initializeOption"},function(){return this.Ro},function(t){this.Ro!==t&&(s.ob(t,st,st,"initializeOption"),t===Ep||t===Kc||t===Uc)&&(this.Ro=t,this.J())}),s.defineProperty(st,{oL:"iterations"},function(){return this.Om},function(t){this.Om!==t&&(s.Ad(t,Pu,"iterations"),0<=t&&(this.Om=t,this.J()))}),s.defineProperty(st,{rH:"aggressiveOption"},function(){return this.po},function(t){this.po!==t&&(s.ob(t,st,st,"aggressiveOption"),t===Jc||t===Rp||t===Yc)&&(this.po=t,this.J())}),s.defineProperty(st,{IL:"packOption"},function(){return this.dj},function(t){this.dj!==t&&(s.j(t,"number",st,"packOption"),0<=t&&8>t&&(this.dj=t,this.J()))}),s.defineProperty(st,{co:"setsPortSpots"},function(){return this.di},function(t){this.di!==t&&(s.j(t,"boolean",st,"setsPortSpots"),this.di=t,this.J())}),s.defineProperty(st,{OF:"linkSpacing"},function(){return this.ns},function(t){this.ns!==t&&(s.j(t,"number",st,"linkSpacing"),0<=t&&(this.ns=t,this.J()))}),s.u(st,{SI:"maxLayer"},function(){return this.tb}),s.u(st,{uL:"maxIndex"},function(){return this.mw}),s.u(st,{tL:"maxColumn"},function(){return this.Kb}),s.u(st,{zL:"minIndexLayer"},function(){return this.ws}),s.u(st,{vL:"maxIndexLayer"},function(){return this.Rf});var Bp;st.CycleDepthFirst=Bp=s.p(st,"CycleDepthFirst",0);var Oc;st.CycleGreedy=Oc=s.p(st,"CycleGreedy",1);var Vf;st.CycleFromLayers=Vf=s.p(st,"CycleFromLayers",2);var zp;st.LayerOptimalLinkLength=zp=s.p(st,"LayerOptimalLinkLength",0);var Vc;st.LayerLongestPathSink=Vc=s.p(st,"LayerLongestPathSink",1);var Hc;st.LayerLongestPathSource=Hc=s.p(st,"LayerLongestPathSource",2);var Ep;st.InitDepthFirstOut=Ep=s.p(st,"InitDepthFirstOut",0);var Kc;st.InitDepthFirstIn=Kc=s.p(st,"InitDepthFirstIn",1);var Uc;st.InitNaive=Uc=s.p(st,"InitNaive",2);var Jc;st.AggressiveNone=Jc=s.p(st,"AggressiveNone",0);var Rp;st.AggressiveLess=Rp=s.p(st,"AggressiveLess",1);var Yc;st.AggressiveMore=Yc=s.p(st,"AggressiveMore",2),st.PackNone=0;var lm;st.PackExpand=lm=1;var qc;st.PackStraighten=qc=2;var um;st.PackMedian=um=4;var Zc;st.PackAll=Zc=7;function ko(){this.index=this.ue=this.af=this.ie=this.first=this.layer=0,this.link=null,this.xi=0}s.be(ko,{layer:!0,first:!0,ie:!0,af:!0,ue:!0,index:!0,link:!0,xi:!0});function Pu(){At.call(this)}s.La(Pu,At),s.ga("LayeredDigraphNetwork",Pu),Pu.prototype.createVertex=function(){return new Qc},Pu.prototype.createEdge=function(){return new Xc};function Qc(){It.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.Xp=NaN,this.rn=0,this.lB=this.mB=null}s.La(Qc,It),s.ga("LayeredDigraphVertex",Qc);function Xc(){Vi.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}s.La(Xc,Vi),s.ga("LayeredDigraphEdge",Xc);function E(){0<arguments.length&&s.nd(E),wt.call(this),this.yd=new R(Object),this.Ts=Hp,this.Of=Wr,this.It=Up,this.jw=sv,this.kC=null,this.Nh=!0,this.pd=Jp,this.ng=new lt(10,10).freeze(),this.va=new Wi,this.wa=new Wi,this.Wz=[]}s.La(E,wt),s.ga("TreeLayout",E),E.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Ts=this.Ts,t.It=this.It,t.jw=this.jw,t.Nh=this.Nh,t.pd=this.pd,t.ng.assign(this.ng),t.va.copyInheritedPropertiesFrom(this.va),t.wa.copyInheritedPropertiesFrom(this.wa)},E.prototype.ic=function(t){t.Je===E?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.Vf=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.ZJ=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},E.prototype.createNetwork=function(){return new qf},E.prototype.makeNetwork=function(t){function i(e){if(e instanceof I)return!e.Df&&e.kd!=="Comment";if(e instanceof S){var r=e.V;return r===null||r.Df||r.kd==="Comment"?!1:(e=e.Z,!(e===null||e.Df||e.kd==="Comment"))}return!1}var n=this.createNetwork();return n.Ub=this,t instanceof x?(n.Bk(t.ig,!0,i),n.Bk(t.links,!0,i)):t instanceof Z?n.Bk(t.hc,!1,i):n.Bk(t.i,!1,i),n},E.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Vf!==Yp&&(this.Md=this.initialOrigin(this.Md));var i=this.g;if(i===null&&t instanceof x&&(i=t),this.Of=this.path===Hp&&i!==null?i.Vd?Wr:el:this.path===Hp?Wr:this.path,0<this.network.vertexes.count){for(this.network.ux(),t=this.network.vertexes.i;t.next();)i=t.value,i.initialized=!1,i.level=0,i.parent=null,i.children=[];if(0<this.yd.count){for(t=new R(Wi),i=this.yd.i;i.next();){var n=i.value;n instanceof I?(n=this.network.Dn(n),n!==null&&t.add(n)):n instanceof Wi&&t.add(n)}this.yd=t}for(this.yd.count===0&&this.findRoots(),t=this.yd.copy().i;t.next();)i=t.value,i.initialized||(i.initialized=!0,Wc(this,i));for(i=this.network.vertexes,t=null;t=_x(i),0<t.count;)i=fm(this,t),i!==null&&this.yd.add(i),i.initialized=!0,Wc(this,i),i=t;for(t=this.yd.i;t.next();)i=t.value,i instanceof Wi&&pm(this,i);for(t=this.yd.i;t.next();)i=t.value,i instanceof Wi&&ym(this,i);for(t=this.yd.i;t.next();)i=t.value,i instanceof Wi&&cm(this,i);if(this.jA(),this.aB===qp){for(n=[],t=this.network.vertexes.i;t.next();){var e=t.value,i=e.parent;i===null&&(i=e);var i=i.angle===0||i.angle===180,r=n[e.level];r===void 0&&(r=0),n[e.level]=Math.max(r,i?e.width:e.height)}for(e=0;e<n.length;e++)n[e]===void 0&&(n[e]=0);for(this.kC=n,t=this.network.vertexes.i;t.next();)e=t.value,i=e.parent,i===null&&(i=e),i.angle===0||i.angle===180?(i.angle===180&&(e.ju+=n[e.level]-e.width),e.width=n[e.level]):(i.angle===270&&(e.ku+=n[e.level]-e.height),e.height=n[e.level])}else if(this.aB===hv)for(t=this.network.vertexes.i;t.next();){for(n=t.value,i=n.angle===0||n.angle===180,r=-1,e=0;e<n.children.length;e++)var o=n.children[e],r=Math.max(r,i?o.width:o.height);if(0<=r)for(e=0;e<n.children.length;e++)o=n.children[e],i?(n.angle===180&&(o.ju+=r-o.width),o.width=r):(n.angle===270&&(o.ku+=r-o.height),o.height=r)}for(t=this.yd.i;t.next();)i=t.value,i instanceof Wi&&this.layoutTree(i);this.arrangeTrees(),this.updateParts()}this.network=null,this.yd=new R(Object),this.sf=!0};function _x(t){var i=new R(Wi);for(t=t.i;t.next();){var n=t.value;n.initialized||i.add(n)}return i}E.prototype.findRoots=function(){for(var t=this.network.vertexes,i=t.i;i.next();){var n=i.value;switch(this.Of){case Wr:n.nc.count===0&&this.yd.add(n);break;case el:n.lc.count===0&&this.yd.add(n);break;default:s.k("Unhandled path value "+this.Of.toString())}}this.yd.count===0&&(t=fm(this,t),t!==null&&this.yd.add(t))};function fm(t,i){for(var n=999999,e=null,r=i.i;r.next();){var o=r.value;switch(t.Of){case Wr:o.nc.count<n&&(n=o.nc.count,e=o);break;case el:o.lc.count<n&&(n=o.lc.count,e=o);break;default:s.k("Unhandled path value "+t.Of.toString())}}return e}function Wc(t,i){if(i!==null){switch(t.Of){case Wr:if(0<i.lc.count){for(var n=new z(Wi),e=i.RH;e.next();){var r=e.value;am(t,i,r)&&n.add(r)}0<n.count&&(i.children=n.yc())}break;case el:if(0<i.nc.count){for(n=new z(Wi),e=i.OJ;e.next();)r=e.value,am(t,i,r)&&n.add(r);0<n.count&&(i.children=n.yc())}break;default:s.k("Unhandled path value"+t.Of.toString())}for(n=i.children,e=n.length,r=0;r<e;r++){var o=n[r];o.initialized=!0,o.level=i.level+1,o.parent=i,t.yd.remove(o)}for(r=0;r<e;r++)o=n[r],Wc(t,o)}}function am(t,i,n){if(n.initialized){var e;if(i===null)e=!1;else{for(e=i.parent;e!==null&&e!==n;)e=e.parent;e=e===n}if(e||n.level>i.level)return!1;t.removeChild(n.parent,n)}return!0}E.prototype.removeChild=function(t,i){if(t!==null&&i!==null){for(var n=t.children,e=0,r=0;r<n.length;r++)n[r]===i&&e++;if(0<e){for(var e=Array(n.length-e),o=0,r=0;r<n.length;r++)n[r]!==i&&(e[o++]=n[r]);t.children=e}}};function pm(t,i){if(i!==null){t.initializeTreeVertexValues(i),i.alignment===br&&t.sortTreeVertexChildren(i);for(var n=0,e=i.tn,r=0,o=i.children,h=o.length,l=0;l<h;l++){var u=o[l];pm(t,u),n+=u.descendantCount+1,e=Math.max(e,u.maxChildrenCount),r=Math.max(r,u.maxGenerationCount)}i.descendantCount=n,i.maxChildrenCount=e,i.maxGenerationCount=0<e?r+1:0}}function bx(t,i){switch(t.It){default:case Up:return i.parent!==null?i.parent:t.va;case rv:return i.parent===null?t.va:i.parent.parent===null?t.wa:i.parent;case ev:return i.parent!==null?i.parent.parent!==null?i.parent.parent:t.wa:t.va;case nv:var n=!0;if(i.tn===0)n=!1;else for(var e=i.children,r=e.length,o=0;o<r;o++)if(0<e[o].tn){n=!1;break}return n&&i.parent!==null?t.wa:i.parent!==null?i.parent:t.va}}E.prototype.initializeTreeVertexValues=function(t){var i=bx(this,t);if(t.copyInheritedPropertiesFrom(i),t.parent!==null&&t.parent.alignment===br){for(var i=t.angle,n=t.parent.children,e=0;e<n.length&&t!==n[e];)e++;e%2===0?e!==n.length-1&&(i=i===90?180:i===180?270:i===270?180:270):i=i===90?0:i===180?90:i===270?0:90,t.angle=i}t.initialized=!0};function ym(t,i){if(i!==null){t.assignTreeVertexValues(i);for(var n=i.children,e=n.length,r=0;r<e;r++)ym(t,n[r])}}E.prototype.assignTreeVertexValues=function(){};function cm(t,i){if(i!==null){i.alignment!==br&&t.sortTreeVertexChildren(i);for(var n=i.children,e=n.length,r=0;r<e;r++)cm(t,n[r])}}E.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case ku:break;case Kf:t.children.reverse();break;case Uf:t.children.sort(t.comparer);break;case Jf:t.children.sort(t.comparer),t.children.reverse();break;default:s.k("Unhandled sorting value "+t.sorting.toString())}},E.prototype.jA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},E.prototype.addComments=function(t){var n=t.angle,r=t.parent,e=0,i=So,i=!1;r!==null&&(e=r.angle,i=r.alignment,i=Cs(i));var n=n===90||n===270,e=e===90||e===270,r=t.tn===0,o=0,h=0,l=0,u=t.commentSpacing;if(t.Rc!==null)for(var f=t.Rc.bF();f.next();){var a=f.value;a.kd==="Comment"&&a.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(a),a.Ne(),a=a.za,n&&!r||!i&&!e&&r||i&&e&&r?(o=Math.max(o,a.width),h+=a.height+Math.abs(l)):(o+=a.width+Math.abs(l),h=Math.max(h,a.height)),l=u)}t.comments!==null&&(n&&!r||!i&&!e&&r||i&&e&&r?(o+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),i=s.lg(0,0,t.O.width+o,t.O.height+h),t.eb=i,s.Bb(i))};function Cs(t){return t===es||t===br||t===rs||t===No}function Hf(t){return t===es||t===br}function $c(t){var i=t.parent;if(i!==null){var n=i.alignment;if(Cs(n)){if(Hf(n)){for(i=i.children,n=0;n<i.length&&t!==i[n];)n++;return n%2===0}if(n===rs)return!0}}return!1}E.prototype.layoutComments=function(t){if(t.comments!==null){var i=t.Rc.za,n=t.parent,e=t.angle,r=0,o=So,o=!1;n!==null&&(r=n.angle,o=n.alignment,o=Cs(o));for(var n=e===90||e===270,e=r===90||r===270,h=t.tn===0,l=$c(t),u=0,f=t.comments,a=f.length,p=s.K(),y=0;y<a;y++){var c=f[y],v=c.za;if(n&&!h||!o&&!e&&h||o&&e&&h){if(135<r&&!o||e&&l)if(0<=t.commentMargin)for(p.m(t.O.x-t.commentMargin-v.width,t.O.y+u),c.move(p),c=c.Mg();c.next();){var d=c.value;d.Mb=Ne,d.Nb=Un}else for(p.m(t.O.x+2*t.T.x-t.commentMargin,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Un,d.Nb=Ne;else if(0<=t.commentMargin)for(p.m(t.O.x+2*t.T.x+t.commentMargin,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Un,d.Nb=Ne;else for(p.m(t.O.x+t.commentMargin-v.width,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ne,d.Nb=Un;u=0<=t.commentSpacing?u+(v.height+t.commentSpacing):u+(t.commentSpacing-v.height)}else{if(135<r&&!o||!e&&l)if(0<=t.commentMargin)for(p.m(t.O.x+u,t.O.y-t.commentMargin-v.height),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Se,d.Nb=Ce;else for(p.m(t.O.x+u,t.O.y+2*t.T.y-t.commentMargin),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ce,d.Nb=Se;else if(0<=t.commentMargin)for(p.m(t.O.x+u,t.O.y+2*t.T.y+t.commentMargin),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ce,d.Nb=Se;else for(p.m(t.O.x+u,t.O.y+t.commentMargin-v.height),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Se,d.Nb=Ce;u=0<=t.commentSpacing?u+(v.width+t.commentSpacing):u+(t.commentSpacing-v.width)}}if(s.v(p),i=u-t.commentSpacing-(n?i.height:i.width),this.Of===Wr)for(r=t.lc;r.next();)t=r.value.link,t===null||t.hm||(t.cm=0<i?i:NaN);else for(r=t.nc;r.next();)t=r.value.link,t===null||t.hm||(t.wm=0<i?i:NaN)}},E.prototype.layoutTree=function(t){if(t!==null){for(var i=t.children,n=i.length,e=0;e<n;e++)this.layoutTree(i[e]);switch(t.compaction){case Kp:vm(this,t);break;case Yf:if(t.alignment===br)vm(this,t);else if(t.tn===0){var e=t.parent,i=!1,n=0,r=So;e!==null&&(n=e.angle,r=e.alignment,i=Cs(r)),e=$c(t),t.pa.m(0,0),t.kb.m(t.width,t.height),t.parent===null||t.comments===null||(n!==180&&n!==270||i)&&!e?t.Oa.m(0,0):n===180&&!i||(n===90||n===270)&&e?t.Oa.m(t.width-2*t.T.x,0):t.Oa.m(0,t.height-2*t.T.y),t.Cu=null,t.Xu=null}else{for(var o=nr(t),i=o===90||o===270,f=0,h=t.children,l=h.length,u=0;u<l;u++)var ht=h[u],f=Math.max(f,i?ht.kb.width:ht.kb.height);var a=t.alignment,e=a===$r,p=a===_r,y=Cs(a),c=Math.max(0,t.breadthLimit),n=Tu(t),v=t.nodeSpacing,d=ns(t),g=t.rowSpacing,m=0;(e||p||t.Bq||t.Cq&&t.maxGenerationCount===1)&&(m=Math.max(0,t.rowIndent));var e=t.width,r=t.height,w=0,M=0,k=0,D=null,C=null,G=0,H=0,U=0,X=0,_=0,Mt=0,Ft=0,J=0,ht=0;if(y&&!Hf(a)&&135<o&&h.reverse(),Hf(a))if(1<l)for(u=0;u<l;u++)u%2===0&&u!==l-1?J=Math.max(J,i?h[u].kb.width:h[u].kb.height):u%2!==0&&(ht=Math.max(ht,i?h[u].kb.width:h[u].kb.height));else l===1&&(J=i?h[0].kb.width:h[0].kb.height);if(y){switch(a){case es:M=135>o?dm(t,h,J,w,M):gm(t,h,J,w,M),J=M.x,w=M.width,M=M.height;break;case rs:for(u=0;u<l;u++){var ht=h[u],qt=ht.kb,D=Mt===0?0:g;i?(ht.pa.m(f-qt.width,X+D),w=Math.max(w,qt.width),M=Math.max(M,X+D+qt.height),X+=D+qt.height):(ht.pa.m(U+D,f-qt.height),w=Math.max(w,U+D+qt.width),M=Math.max(M,qt.height),U+=D+qt.width),Mt++}break;case No:for(u=0;u<l;u++)ht=h[u],qt=ht.kb,D=Mt===0?0:g,i?(ht.pa.m(v/2+t.T.x,X+D),w=Math.max(w,qt.width),M=Math.max(M,X+D+qt.height),X+=D+qt.height):(ht.pa.m(U+D,v/2+t.T.y),w=Math.max(w,U+D+qt.width),M=Math.max(M,qt.height),U+=D+qt.width),Mt++}D=An(this,2),C=An(this,2),i?(D[0].m(0,0),D[1].m(0,M),C[0].m(w,0)):(D[0].m(0,0),D[1].m(w,0),C[0].m(0,M)),C[1].m(w,M)}else for(u=0;u<l;u++){if(ht=h[u],qt=ht.kb,i){0<c&&0<Mt&&U+v+qt.width>c&&(U<f&&gh(t,a,f-U,0,Ft,u-1),_++,Mt=0,Ft=u,k=M,U=0,X=135<o?-M-g:M+g),Op(this,ht,0,X);var Bt=0;if(Mt===0)D=ht.Cu,C=ht.Xu,G=qt.width,H=qt.height,(D===null||C===null||o!==nr(ht))&&(D=An(this,2),C=An(this,2),D[0].m(0,0),D[1].m(0,H),C[0].m(G,0),C[1].m(G,H));else{var Wt=s.Za(),H=xm(this,t,ht,D,C,G,H,Wt),Bt=H.x,D=Wt[0],C=Wt[1],G=H.width,H=H.height;s.ra(Wt),U<qt.width&&0>Bt&&(nl(t,-Bt,0,Ft,u-1),Vp(D,-Bt,0),Vp(C,-Bt,0),Bt=0)}ht.pa.m(Bt,X),w=Math.max(w,G),M=Math.max(M,k+(_===0?0:g)+qt.height),U=G}else 0<c&&0<Mt&&X+v+qt.height>c&&(X<f&&gh(t,a,0,f-X,Ft,u-1),_++,Mt=0,Ft=u,k=w,X=0,U=135<o?-w-g:w+g),Op(this,ht,U,0),Bt=0,Mt===0?(D=ht.Cu,C=ht.Xu,G=qt.width,H=qt.height,(D===null||C===null||o!==nr(ht))&&(D=An(this,2),C=An(this,2),D[0].m(0,0),D[1].m(G,0),C[0].m(0,H),C[1].m(G,H))):(Wt=s.Za(),H=xm(this,t,ht,D,C,G,H,Wt),Bt=H.x,D=Wt[0],C=Wt[1],G=H.width,H=H.height,s.ra(Wt),X<qt.height&&0>Bt&&(nl(t,0,-Bt,Ft,u-1),Vp(D,0,-Bt),Vp(C,0,-Bt),Bt=0)),ht.pa.m(U,Bt),M=Math.max(M,H),w=Math.max(w,k+(_===0?0:g)+qt.width),X=H;Mt++}switch(0<_&&(i?(M+=Math.max(0,n),U<w&&gh(t,a,w-U,0,Ft,l-1),0<m&&(p||nl(t,m,0,0,l-1),w+=m)):(w+=Math.max(0,n),X<M&&gh(t,a,0,M-X,Ft,l-1),0<m&&(p||nl(t,0,m,0,l-1),M+=m))),m=p=0,a){case Su:i?p+=w/2-t.T.x-d/2:m+=M/2-t.T.y-d/2;break;case So:0<_?i?p+=w/2-t.T.x-d/2:m+=M/2-t.T.y-d/2:i?(J=h[0].pa.x+h[0].Oa.x,u=h[l-1].pa.x+h[l-1].Oa.x+2*h[l-1].T.x,p+=J+(u-J)/2-t.T.x-d/2):(J=h[0].pa.y+h[0].Oa.y,u=h[l-1].pa.y+h[l-1].Oa.y+2*h[l-1].T.y,m+=J+(u-J)/2-t.T.y-d/2);break;case $r:i?(p-=d,w+=d):(m-=d,M+=d);break;case _r:i?(p+=w-t.width+d,w+=d):(m+=M-t.height+d,M+=d);break;case es:i?p=1<l?p+(J+v/2-t.T.x):p+(h[0].T.x-t.T.x+h[0].Oa.x):m=1<l?m+(J+v/2-t.T.y):m+(h[0].T.y-t.T.y+h[0].Oa.y);break;case rs:i?p+=w+v/2-t.T.x:m+=M+v/2-t.T.y;break;case No:break;default:s.k("Unhandled alignment value "+a.toString())}for(u=0;u<l;u++)ht=h[u],i?ht.pa.m(ht.pa.x+ht.Oa.x-p,ht.pa.y+(135<o?(y?-M:-ht.kb.height)+ht.Oa.y-n:r+n+ht.Oa.y)):ht.pa.m(ht.pa.x+(135<o?(y?-w:-ht.kb.width)+ht.Oa.x-n:e+n+ht.Oa.x),ht.pa.y+ht.Oa.y-m);if(l=h=0,y?i?(w=_c(t,w,p),0>p&&(p=0),135<o&&(m+=M+n),M+=r+n,a===No&&(h+=v/2+t.T.x),l+=r+n):(135<o&&(p+=w+n),w+=e+n,M=bc(t,M,m),0>m&&(m=0),a===No&&(l+=v/2+t.T.y),h+=e+n):i?(t.comments===null?e>w&&(a=tv(a,e-w,0),h=a.x,l=a.y,w=e,p=0):w=_c(t,w,p),0>p&&(h-=p,p=0),135<o&&(m+=M+n),M=Math.max(Math.max(M,r),M+r+n),l+=r+n):(135<o&&(p+=w+n),w=Math.max(Math.max(w,e),w+e+n),t.comments===null?r>M&&(a=tv(a,0,r-M),h=a.x,l=a.y,M=r,m=0):M=bc(t,M,m),0>m&&(l-=m,m=0),h+=e+n),0<_)o=An(this,4),a=An(this,4),i?(o[2].m(0,r+n),o[3].m(o[2].x,M),a[2].m(w,o[2].y),a[3].m(a[2].x,o[3].y)):(o[2].m(e+n,0),o[3].m(w,o[2].y),a[2].m(o[2].x,M),a[3].m(o[3].x,a[2].y));else{for(o=An(this,D.length+2),a=An(this,C.length+2),u=0;u<D.length;u++)y=D[u],o[u+2].m(y.x+h,y.y+l);for(u=0;u<C.length;u++)y=C[u],a[u+2].m(y.x+h,y.y+l)}i?(o[0].m(p,0),o[1].m(o[0].x,r),o[2].y<o[1].y&&(o[2].x>o[0].x?o[2].assign(o[1]):o[1].assign(o[2])),o[3].y<o[2].y&&(o[3].x>o[0].x?o[3].assign(o[2]):o[2].assign(o[3])),a[0].m(p+e,0),a[1].m(a[0].x,r),a[2].y<a[1].y&&(a[2].x<a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x<a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),o[2].y-=n/2,a[2].y-=n/2):(o[0].m(0,m),o[1].m(e,o[0].y),o[2].x<o[1].x&&(o[2].y>o[0].y?o[2].assign(o[1]):o[1].assign(o[2])),o[3].x<o[2].x&&(o[3].y>o[0].y?o[3].assign(o[2]):o[2].assign(o[3])),a[0].m(0,m+r),a[1].m(e,a[0].y),a[2].x<a[1].x&&(a[2].y<a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y<a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),o[2].x-=n/2,a[2].x-=n/2),is(this,D),is(this,C),t.Cu=o,t.Xu=a,t.Oa.m(p,m),t.kb.m(w,M)}break;default:s.k("Unhandled compaction value "+t.compaction.toString())}}};function vm(t,i){if(i.tn===0){var n=!1,e=0,r=So;i.parent!==null&&(e=i.parent.angle,r=i.parent.alignment,n=Cs(r)),r=$c(i),i.pa.m(0,0),i.kb.m(i.width,i.height),i.parent===null||i.comments===null||(e!==180&&e!==270||n)&&!r?i.Oa.m(0,0):e===180&&!n||(e===90||e===270)&&r?i.Oa.m(i.width-2*i.T.x,0):i.Oa.m(0,i.height-2*i.T.y)}else{for(var n=nr(i),e=n===90||n===270,u=0,r=i.children,o=r.length,h=0;h<o;h++)var l=r[h],u=Math.max(u,e?l.kb.width:l.kb.height);var f=i.alignment,M=f===$r,a=f===_r,p=Cs(f),y=Math.max(0,i.breadthLimit),c=Tu(i),v=i.nodeSpacing,d=ns(i),g=M||a?0:d/2,m=i.rowSpacing,w=0;(M||a||i.Bq||i.Cq&&i.maxGenerationCount===1)&&(w=Math.max(0,i.rowIndent));var M=i.width,k=i.height,D=0,C=0,G=0,H=0,U=0,X=0,_=0,Mt=0,Ft=0,J=0;if(p&&!Hf(f)&&135<n&&r.reverse(),Hf(f))if(1<o)for(h=0;h<o;h++){var l=r[h],ht=l.kb;h%2===0&&h!==o-1?Ft=Math.max(Ft,(e?ht.width:ht.height)+ts(l)-v):h%2!==0&&(J=Math.max(J,(e?ht.width:ht.height)+ts(l)-v))}else o===1&&(Ft=e?r[0].kb.width:r[0].kb.height);if(p)switch(f){case es:case br:C=135>n?dm(i,r,Ft,D,C):gm(i,r,Ft,D,C),Ft=C.x,D=C.width,C=C.height;break;case rs:for(h=0;h<o;h++)l=r[h],ht=l.kb,y=_===0?0:m,e?(l.pa.m(u-ht.width,U+y),D=Math.max(D,ht.width),C=Math.max(C,U+y+ht.height),U+=y+ht.height):(l.pa.m(H+y,u-ht.height),D=Math.max(D,H+y+ht.width),C=Math.max(C,ht.height),H+=y+ht.width),_++;break;case No:for(u=0;u<o;u++)l=r[u],ht=l.kb,y=_===0?0:m,e?(l.pa.m(v/2+i.T.x,U+y),D=Math.max(D,ht.width),C=Math.max(C,U+y+ht.height),U+=y+ht.height):(l.pa.m(H+y,v/2+i.T.y),D=Math.max(D,H+y+ht.width),C=Math.max(C,ht.height),H+=y+ht.width),_++}else for(h=0;h<o;h++)l=r[h],ht=l.kb,e?(0<y&&0<_&&H+v+ht.width>y&&(H<u&&gh(i,f,u-H,0,Mt,h-1),X++,_=0,Mt=h,G=C,H=0,U=135<n?-C-m:C+m),J=_===0?g:v,Op(t,l,0,U),l.pa.m(H+J,U),D=Math.max(D,H+J+ht.width),C=Math.max(C,G+(X===0?0:m)+ht.height),H+=J+ht.width):(0<y&&0<_&&U+v+ht.height>y&&(U<u&&gh(i,f,0,u-U,Mt,h-1),X++,_=0,Mt=h,G=D,U=0,H=135<n?-D-m:D+m),J=_===0?g:v,Op(t,l,H,0),l.pa.m(H,U+J),C=Math.max(C,U+J+ht.height),D=Math.max(D,G+(X===0?0:m)+ht.width),U+=J+ht.height),_++;switch(0<X&&(e?(C+=Math.max(0,c),H<D&&gh(i,f,D-H,0,Mt,o-1),0<w&&(a||nl(i,w,0,0,o-1),D+=w)):(D+=Math.max(0,c),U<C&&gh(i,f,0,C-U,Mt,o-1),0<w&&(a||nl(i,0,w,0,o-1),C+=w))),w=a=0,f){case Su:e?a+=D/2-i.T.x-d/2:w+=C/2-i.T.y-d/2;break;case So:0<X?e?a+=D/2-i.T.x-d/2:w+=C/2-i.T.y-d/2:e?(f=r[0].pa.x+r[0].Oa.x,v=r[o-1].pa.x+r[o-1].Oa.x+2*r[o-1].T.x,a+=f+(v-f)/2-i.T.x-d/2):(f=r[0].pa.y+r[0].Oa.y,v=r[o-1].pa.y+r[o-1].Oa.y+2*r[o-1].T.y,w+=f+(v-f)/2-i.T.y-d/2);break;case $r:e?(a-=d,D+=d):(w-=d,C+=d);break;case _r:e?(a+=D-i.width+d,D+=d):(w+=C-i.height+d,C+=d);break;case es:case br:e?a=1<o?a+(Ft+v/2-i.T.x):a+(r[0].T.x-i.T.x+r[0].Oa.x):w=1<o?w+(Ft+v/2-i.T.y):w+(r[0].T.y-i.T.y+r[0].Oa.y);break;case rs:e?a+=D+v/2-i.T.x:w+=C+v/2-i.T.y;break;case No:break;default:s.k("Unhandled alignment value "+f.toString())}for(h=0;h<o;h++)l=r[h],e?l.pa.m(l.pa.x+l.Oa.x-a,l.pa.y+(135<n?(p?-C:-l.kb.height)+l.Oa.y-c:k+c+l.Oa.y)):l.pa.m(l.pa.x+(135<n?(p?-D:-l.kb.width)+l.Oa.x-c:M+c+l.Oa.x),l.pa.y+l.Oa.y-w);e?(D=_c(i,D,a),0>a&&(a=0),135<n&&(w+=C+c),C+=k+c):(135<n&&(a+=D+c),D+=M+c,C=bc(i,C,w),0>w&&(w=0)),i.Oa.m(a,w),i.kb.m(D,C)}}function dm(t,i,n,e,r){var o=i.length;if(o===0)return new O(n,0,e,r);if(o===1){var h=i[0];return e=h.kb.width,r=h.kb.height,new O(n,0,e,r)}for(var l=t.nodeSpacing,u=t.rowSpacing,f=nr(t)===90,g=0,a=0,p=0,y=0;y<o;y++)if(!(y%2!==0||1<o&&y===o-1)){var h=i[y],c=h.kb,v=g===0?0:u;if(f){var d=ts(h)-l;h.pa.m(n-(c.width+d),p+v),e=Math.max(e,c.width+d),r=Math.max(r,p+v+c.height),p+=v+c.height}else d=ts(h)-l,h.pa.m(a+v,n-(c.height+d)),r=Math.max(r,c.height+d),e=Math.max(e,a+v+c.width),a+=v+c.width;g++}var g=0,m=a,w=p;for(f?(a=n+l,p=0):(a=0,p=n+l),y=0;y<o;y++)y%2!==0&&(h=i[y],c=h.kb,v=g===0?0:u,f?(d=ts(h)-l,h.pa.m(a+d,p+v),e=Math.max(e,a+c.width+d),r=Math.max(r,p+v+c.height),p+=v+c.height):(d=ts(h)-l,h.pa.m(a+v,p+d),e=Math.max(e,a+v+c.width),r=Math.max(r,p+c.height+d),a+=v+c.width),g++);return 1<o&&o%2===1&&(h=i[o-1],c=h.kb,i=mm(h),f?(h.pa.m(n+l/2-h.T.x-h.Oa.x,r+i),f=n+l/2-h.T.x-h.Oa.x,e=Math.max(e,f+c.width),0>f&&(e-=f),r=Math.max(r,Math.max(w,p)+i+c.height),0>h.pa.x&&(n=Gp(t,h.pa.x,!1,n,l))):(h.pa.m(e+i,n+l/2-h.T.y-h.Oa.y),e=Math.max(e,Math.max(m,a)+i+c.width),f=n+l/2-h.T.y-h.Oa.y,r=Math.max(r,f+c.height),0>f&&(r-=f),0>h.pa.y&&(n=Gp(t,h.pa.y,!0,n,l)))),new O(n,0,e,r)}function gm(t,i,n,e,r){var o=i.length;if(o===0)return new O(n,0,e,r);if(o===1){var h=i[0];return e=h.kb.width,r=h.kb.height,new O(n,0,e,r)}for(var l=t.nodeSpacing,u=t.rowSpacing,f=nr(t)===270,g=0,a=0,p=0,y=0;y<o;y++)if(!(y%2!==0||1<o&&y===o-1)){var h=i[y],c=h.kb,v=g===0?0:u;if(f){var d=ts(h)-l,p=p-(v+c.height);h.pa.m(n-(c.width+d),p),e=Math.max(e,c.width+d),r=Math.max(r,Math.abs(p))}else d=ts(h)-l,a-=v+c.width,h.pa.m(a,n-(c.height+d)),r=Math.max(r,c.height+d),e=Math.max(e,Math.abs(a));g++}var g=0,m=a,w=p;for(f?(a=n+l,p=0):(a=0,p=n+l),y=0;y<o;y++)y%2!==0&&(h=i[y],c=h.kb,v=g===0?0:u,f?(d=ts(h)-l,p-=v+c.height,h.pa.m(a+d,p),e=Math.max(e,a+c.width+d),r=Math.max(r,Math.abs(p))):(d=ts(h)-l,a-=v+c.width,h.pa.m(a,p+d),r=Math.max(r,p+c.height+d),e=Math.max(e,Math.abs(a))),g++);for(1<o&&o%2===1&&(h=i[o-1],c=h.kb,u=mm(h),f?(h.pa.m(n+l/2-h.T.x-h.Oa.x,-r-c.height-u),a=n+l/2-h.T.x-h.Oa.x,e=Math.max(e,a+c.width),0>a&&(e-=a),r=Math.max(r,Math.abs(Math.min(w,p))+u+c.height),0>h.pa.x&&(n=Gp(t,h.pa.x,!1,n,l))):(h.pa.m(-e-c.width-u,n+l/2-h.T.y-h.Oa.y),e=Math.max(e,Math.abs(Math.min(m,a))+u+c.width),a=n+l/2-h.T.y-h.Oa.y,r=Math.max(r,a+c.height),0>a&&(r-=a),0>h.pa.y&&(n=Gp(t,h.pa.y,!0,n,l)))),y=0;y<o;y++)h=i[y],f?h.pa.m(h.pa.x,h.pa.y+r):h.pa.m(h.pa.x+e,h.pa.y);return new O(n,0,e,r)}function ts(t){return t.parent===null?0:t.parent.nodeSpacing}function mm(t){return t.parent===null?0:t.parent.rowSpacing}function Gp(t,i,n,e,r){t=t.children;for(var o=t.length,h=0;h<o;h++)n?t[h].pa.m(t[h].pa.x,t[h].pa.y-i):t[h].pa.m(t[h].pa.x-i,t[h].pa.y);return i=t[o-1],Math.max(e,n?i.Oa.y+i.T.y-r/2:i.Oa.x+i.T.x-r/2)}function _c(t,i,n){switch(t.alignment){case So:case Su:var e=i;return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case $r:return t.width>i?t.width:i;case _r:return 2*t.T.x>i?t.width:i+t.width-2*t.T.x;case es:case br:return e=Math.min(0,n),n=Math.max(i,n+t.width),Math.max(t.width,n-e);case rs:return t.width-t.T.x+t.nodeSpacing/2+i;case No:return Math.max(t.width,t.T.x+t.nodeSpacing/2+i);default:return i}}function bc(t,i,n){switch(t.alignment){case So:case Su:var e=i;return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case $r:return t.height>i?t.height:i;case _r:return 2*t.T.y>i?t.height:i+t.height-2*t.T.y;case es:case br:return e=Math.min(0,n),n=Math.max(i,n+t.height),Math.max(t.height,n-e);case rs:return t.height-t.T.y+t.nodeSpacing/2+i;case No:return Math.max(t.height,t.T.y+t.nodeSpacing/2+i);default:return i}}function tv(t,i,n){switch(t){case Su:i/=2,n/=2;break;case So:i/=2,n/=2;break;case $r:n=i=0;break;case _r:break;default:s.k("Unhandled alignment value "+t.toString())}return new F(i,n)}function gh(t,i,n,e,r,o){i=tv(i,n,e),nl(t,i.x,i.y,r,o)}function nl(t,i,n,e,r){if(i!==0||n!==0)for(t=t.children;e<=r;e++){var o=t[e].pa;o.x+=i,o.y+=n}}function Op(t,i,n,e){var r=i.parent;switch(t.Of){case Wr:for(t=i.nc;t.next();)i=t.value,i.fromVertex===r&&i.$s.m(n,e);break;case el:for(t=i.lc;t.next();)i=t.value,i.toVertex===r&&i.$s.m(n,e);break;default:s.k("Unhandled path value "+t.Of.toString())}}function Vp(t,i,n){for(var e=0;e<t.length;e++){var r=t[e];r.x+=i,r.y+=n}}function xm(t,i,n,e,r,o,h,l){var u=nr(i),f=u===90||u===270,a=i.nodeSpacing;i=e;var p=r;e=o,r=h;var y=n.Cu,c=n.Xu;h=n.kb;var v=f?Math.max(r,h.height):Math.max(e,h.width);if((y===null||u!==nr(n))&&(y=An(t,2),c=An(t,2),f?(y[0].m(0,0),y[1].m(0,h.height),c[0].m(h.width,0),c[1].m(c[0].x,y[1].y)):(y[0].m(0,0),y[1].m(h.width,0),c[0].m(0,h.height),c[1].m(y[1].x,c[0].y))),f){if(n=e,e=9999999,!(p===null||2>p.length||y===null||2>y.length))for(f=u=0;u<p.length&&f<y.length;){r=p[u];var m=y[f];o=m.x;var d=m.y;o+=n;var g=r;u+1<p.length&&(g=p[u+1]);var w=m,m=w.x,w=w.y;f+1<y.length&&(w=y[f+1],m=w.x,w=w.y,m+=n);var M=e;r.y===d?M=o-r.x:r.y>d&&r.y<w?M=o+(r.y-d)/(w-d)*(m-o)-r.x:d>r.y&&d<g.y&&(M=o-(r.x+(d-r.y)/(g.y-r.y)*(g.x-r.x))),M<e&&(e=M),g.y<=r.y?u++:w<=d?f++:(g.y<=w&&u++,w<=g.y&&f++)}if(n-=e,n+=a,u=y,f=n,i===null||2>i.length||u===null||2>u.length)e=null;else{for(a=An(t,i.length+u.length),e=o=r=0;o<u.length&&u[o].y<i[0].y;)d=u[o++],a[e++].m(d.x+f,d.y);for(;r<i.length;)d=i[r++],a[e++].m(d.x,d.y);for(r=i[i.length-1].y;o<u.length&&u[o].y<=r;)o++;for(;o<u.length&&u[o].y>r;)d=u[o++],a[e++].m(d.x+f,d.y);for(u=An(t,e),r=0;r<e;r++)u[r].assign(a[r]);is(t,a),e=u}if(o=c,d=n,p===null||2>p.length||o===null||2>o.length)r=null;else{for(a=An(t,p.length+o.length),f=g=u=0;u<p.length&&p[u].y<o[0].y;)r=p[u++],a[f++].m(r.x,r.y);for(;g<o.length;)r=o[g++],a[f++].m(r.x+d,r.y);for(o=o[o.length-1].y;u<p.length&&p[u].y<=o;)u++;for(;u<p.length&&p[u].y>o;)r=p[u++],a[f++].m(r.x,r.y);for(r=An(t,f),u=0;u<f;u++)r[u].assign(a[u]);is(t,a)}o=Math.max(0,n)+h.width,h=v}else{if(n=r,e=9999999,!(p===null||2>p.length||y===null||2>y.length))for(f=u=0;u<p.length&&f<y.length;)r=p[u],m=y[f],o=m.x,d=m.y,d+=n,g=r,u+1<p.length&&(g=p[u+1]),w=m,m=w.x,w=w.y,f+1<y.length&&(w=y[f+1],m=w.x,w=w.y,w+=n),M=e,r.x===o?M=d-r.y:r.x>o&&r.x<m?M=d+(r.x-o)/(m-o)*(w-d)-r.y:o>r.x&&o<g.x&&(M=d-(r.y+(o-r.x)/(g.x-r.x)*(g.y-r.y))),M<e&&(e=M),g.x<=r.x?u++:m<=o?f++:(g.x<=m&&u++,m<=g.x&&f++);if(n-=e,n+=a,u=y,f=n,i===null||2>i.length||u===null||2>u.length)e=null;else{for(a=An(t,i.length+u.length),e=o=r=0;o<u.length&&u[o].x<i[0].x;)d=u[o++],a[e++].m(d.x,d.y+f);for(;r<i.length;)d=i[r++],a[e++].m(d.x,d.y);for(r=i[i.length-1].x;o<u.length&&u[o].x<=r;)o++;for(;o<u.length&&u[o].x>r;)d=u[o++],a[e++].m(d.x,d.y+f);for(u=An(t,e),r=0;r<e;r++)u[r].assign(a[r]);is(t,a),e=u}if(o=c,d=n,p===null||2>p.length||o===null||2>o.length)r=null;else{for(a=An(t,p.length+o.length),f=g=u=0;u<p.length&&p[u].x<o[0].x;)r=p[u++],a[f++].m(r.x,r.y);for(;g<o.length;)r=o[g++],a[f++].m(r.x,r.y+d);for(o=o[o.length-1].x;u<p.length&&p[u].x<=o;)u++;for(;u<p.length&&p[u].x>o;)r=p[u++],a[f++].m(r.x,r.y);for(r=An(t,f),u=0;u<f;u++)r[u].assign(a[u]);is(t,a)}o=v,h=Math.max(0,n)+h.height}return is(t,i),is(t,y),is(t,p),is(t,c),l[0]=e,l[1]=r,new O(n,0,o,h)}function An(t,i){var n=t.Wz[i];if(n!==void 0&&(n=n.pop(),n!==void 0))return n;for(var n=[],e=0;e<i;e++)n[e]=new F;return n}function is(t,i){var n=i.length,e=t.Wz[n];e===void 0&&(e=[],t.Wz[n]=e),e.push(i)}E.prototype.arrangeTrees=function(){if(this.pd===Yp)for(var t=this.yd.i;t.next();){var i=t.value;if(i instanceof Wi){var n=i.Rc;if(n!==null){var e=n.position,n=e.x,e=e.y;isFinite(n)||(n=0),isFinite(e)||(e=0),iv(this,i,n,e)}}}else{for(n=[],t=this.yd.i;t.next();)i=t.value,i instanceof Wi&&n.push(i);switch(this.sorting){case ku:break;case Kf:n.reverse();break;case Uf:n.sort(this.comparer);break;case Jf:n.sort(this.comparer),n.reverse();break;default:s.k("Unhandled sorting value "+this.sorting.toString())}for(i=this.Md,t=i.x,i=i.y,e=0;e<n.length;e++){var r=n[e];switch(iv(this,r,t+r.Oa.x,i+r.Oa.y),this.pd){case Jp:i+=r.kb.height+this.ng.height;break;case ov:t+=r.kb.width+this.ng.width;break;default:s.k("Unhandled arrangement value "+this.pd.toString())}}}};function iv(t,i,n,e){if(i!==null){i.x=n,i.y=e,i=i.children;for(var r=i.length,o=0;o<r;o++){var h=i[o];iv(t,h,n+h.pa.x,e+h.pa.y)}}}E.prototype.commitLayout=function(){this.FB(),this.commitNodes(),this.pA(),this.Au&&this.commitLinks()},E.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},E.prototype.pA=function(){if(this.aB===qp){for(var t=this.kC,i=[],o=null,n=this.network.vertexes.i;n.next();){var e=n.value;o===null?o=e.eb.copy():o.Zg(e.eb);var r=i[e.level],r=r===void 0?Tu(e):Math.max(r,Tu(e));i[e.level]=r}for(n=0;n<i.length;n++)i[n]===void 0&&(i[n]=0);this.angle===90||this.angle===270?(o.Zf(this.nodeSpacing/2,this.layerSpacing),e=new F(-this.nodeSpacing/2,-this.layerSpacing/2)):(o.Zf(this.layerSpacing,this.nodeSpacing/2),e=new F(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],o=this.angle===90||this.angle===270?o.width:o.height,h=0;if(this.angle===180||this.angle===270)for(n=0;n<t.length;n++)h+=t[n]+i[n];for(n=0;n<t.length;n++){var l=t[n]+i[n];this.angle===270?(h-=l,r.push(new O(0,h,o,l))):this.angle===90?(r.push(new O(0,h,o,l)),h+=l):this.angle===180?(h-=l,r.push(new O(h,0,l,o))):(r.push(new O(h,0,l,o)),h+=l)}this.commitLayers(r,e)}},E.prototype.commitLayers=function(){},E.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},E.prototype.FB=function(){for(var t=this.yd.i;t.next();){var i=t.value;i instanceof Wi&&wm(this,i)}};function wm(t,i){if(i!==null){t.setPortSpots(i);for(var n=i.children,e=n.length,r=0;r<e;r++)wm(t,n[r])}}E.prototype.setPortSpots=function(t){var i=t.alignment;if(Cs(i)){var n=this.Of===Wr,e=nr(t),r;switch(e){case 0:r=Un;break;case 90:r=Ce;break;case 180:r=Ne;break;default:r=Se}var o=t.children,h=o.length;switch(i){case es:case br:for(i=0;i<h;i++){var l=o[i],l=(n?l.nc:l.lc).first();if(l!==null&&(l=l.link,l!==null)){var u=e===90||e===270?Ne:Se;if(h===1||i===h-1&&h%2===1)switch(e){case 0:u=Ne;break;case 90:u=Se;break;case 180:u=Un;break;default:u=Ce}else i%2===0&&(u=e===90||e===270?Un:Ce);n?(t.setsPortSpot&&(l.Mb=r),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=r))}}break;case rs:for(u=e===90||e===270?Un:Ce,e=n?t.lc:t.nc;e.next();)l=e.value.link,l!==null&&(n?(t.setsPortSpot&&(l.Mb=r),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=r)));break;case No:for(u=e===90||e===270?Ne:Se,e=n?t.lc:t.nc;e.next();)l=e.value.link,l!==null&&(n?(t.setsPortSpot&&(l.Mb=r),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=r)))}}else if(n=nr(t),this.Of===Wr){for(r=t.lc;r.next();)if(e=r.value.link,e!==null){if(t.setsPortSpot)if(t.portSpot.ge())switch(n){case 0:e.Mb=Un;break;case 90:e.Mb=Ce;break;case 180:e.Mb=Ne;break;default:e.Mb=Se}else e.Mb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.ge())switch(n){case 0:e.Nb=Ne;break;case 90:e.Nb=Se;break;case 180:e.Nb=Un;break;default:e.Nb=Ce}else e.Nb=t.childPortSpot}}else for(r=t.nc;r.next();)if(e=r.value.link,e!==null){if(t.setsPortSpot)if(t.portSpot.ge())switch(n){case 0:e.Nb=Un;break;case 90:e.Nb=Ce;break;case 180:e.Nb=Ne;break;default:e.Nb=Se}else e.Nb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.ge())switch(n){case 0:e.Mb=Ne;break;case 90:e.Mb=Se;break;case 180:e.Mb=Un;break;default:e.Mb=Ce}else e.Mb=t.childPortSpot}};function nr(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Tu(t){var i=nr(t),i=i===90||i===270,e=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var n=Math.min(1,t.layerSpacingParentOverlap),e=e-(i?t.height*n:t.width*n);return e<(i?-t.height:-t.width)&&(e=i?-t.height:-t.width),e}function ns(t){var i=nr(t),i=i===90||i===270,e=t.nodeIndent;if(0<t.nodeIndentPastParent)var n=Math.min(1,t.nodeIndentPastParent),e=e+(i?t.width*n:t.height*n);return e=Math.max(0,e)}s.defineProperty(E,{PL:"roots"},function(){return this.yd},function(t){this.yd!==t&&(s.G(t,R,E,"roots"),this.yd=t,this.J())}),s.defineProperty(E,{path:"path"},function(){return this.Ts},function(t){this.Ts!==t&&(s.ob(t,E,E,"path"),this.Ts=t,this.J())}),s.defineProperty(E,{ZJ:"treeStyle"},function(){return this.It},function(t){this.pd!==t&&(s.ob(t,E,E,"treeStyle"),t===Up||t===ev||t===nv||t===rv)&&(this.It=t,this.J())}),s.defineProperty(E,{aB:"layerStyle"},function(){return this.jw},function(t){this.pd!==t&&(s.ob(t,E,E,"layerStyle"),t===sv||t===hv||t===qp)&&(this.jw=t,this.J())}),s.defineProperty(E,{comments:"comments"},function(){return this.Nh},function(t){this.Nh!==t&&(s.j(t,"boolean",E,"comments"),this.Nh=t,this.J())}),s.defineProperty(E,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,E,E,"arrangement"),t===Jp||t===ov||t===Yp)&&(this.pd=t,this.J())}),s.defineProperty(E,{FE:"arrangementSpacing"},function(){return this.ng},function(t){s.G(t,lt,E,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),s.defineProperty(E,{OL:"rootDefaults"},function(){return this.va},function(t){this.va!==t&&(s.G(t,Wi,E,"rootDefaults"),this.va=t,this.J())}),s.defineProperty(E,{rK:"alternateDefaults"},function(){return this.wa},function(t){this.wa!==t&&(s.G(t,Wi,E,"alternateDefaults"),this.wa=t,this.J())}),s.defineProperty(E,{sorting:"sorting"},function(){return this.va.sorting},function(t){this.va.sorting!==t&&(s.ob(t,E,E,"sorting"),t===ku||t===Kf||t===Uf||Jf)&&(this.va.sorting=t,this.J())}),s.defineProperty(E,{comparer:"comparer"},function(){return this.va.comparer},function(t){this.va.comparer!==t&&(s.j(t,"function",E,"comparer"),this.va.comparer=t,this.J())}),s.defineProperty(E,{angle:"angle"},function(){return this.va.angle},function(t){this.va.angle!==t&&(s.j(t,"number",E,"angle"),t===0||t===90||t===180||t===270?(this.va.angle=t,this.J()):s.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),s.defineProperty(E,{alignment:"alignment"},function(){return this.va.alignment},function(t){this.va.alignment!==t&&(s.ob(t,E,E,"alignment"),this.va.alignment=t,this.J())}),s.defineProperty(E,{nodeIndent:"nodeIndent"},function(){return this.va.nodeIndent},function(t){this.va.nodeIndent!==t&&(s.j(t,"number",E,"nodeIndent"),0<=t&&(this.va.nodeIndent=t,this.J()))}),s.defineProperty(E,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.va.nodeIndentPastParent},function(t){this.va.nodeIndentPastParent!==t&&(s.j(t,"number",E,"nodeIndentPastParent"),0<=t&&1>=t&&(this.va.nodeIndentPastParent=t,this.J()))}),s.defineProperty(E,{nodeSpacing:"nodeSpacing"},function(){return this.va.nodeSpacing},function(t){this.va.nodeSpacing!==t&&(s.j(t,"number",E,"nodeSpacing"),this.va.nodeSpacing=t,this.J())}),s.defineProperty(E,{layerSpacing:"layerSpacing"},function(){return this.va.layerSpacing},function(t){this.va.layerSpacing!==t&&(s.j(t,"number",E,"layerSpacing"),this.va.layerSpacing=t,this.J())}),s.defineProperty(E,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.va.layerSpacingParentOverlap},function(t){this.va.layerSpacingParentOverlap!==t&&(s.j(t,"number",E,"layerSpacingParentOverlap"),0<=t&&1>=t&&(this.va.layerSpacingParentOverlap=t,this.J()))}),s.defineProperty(E,{compaction:"compaction"},function(){return this.va.compaction},function(t){this.va.compaction!==t&&(s.ob(t,E,E,"compaction"),t===Kp||t===Yf)&&(this.va.compaction=t,this.J())}),s.defineProperty(E,{breadthLimit:"breadthLimit"},function(){return this.va.breadthLimit},function(t){this.va.breadthLimit!==t&&(s.j(t,"number",E,"breadthLimit"),0<=t&&(this.va.breadthLimit=t,this.J()))}),s.defineProperty(E,{rowSpacing:"rowSpacing"},function(){return this.va.rowSpacing},function(t){this.va.rowSpacing!==t&&(s.j(t,"number",E,"rowSpacing"),this.va.rowSpacing=t,this.J())}),s.defineProperty(E,{rowIndent:"rowIndent"},function(){return this.va.rowIndent},function(t){this.va.rowIndent!==t&&(s.j(t,"number",E,"rowIndent"),0<=t&&(this.va.rowIndent=t,this.J()))}),s.defineProperty(E,{commentSpacing:"commentSpacing"},function(){return this.va.commentSpacing},function(t){this.va.commentSpacing!==t&&(s.j(t,"number",E,"commentSpacing"),this.va.commentSpacing=t,this.J())}),s.defineProperty(E,{commentMargin:"commentMargin"},function(){return this.va.commentMargin},function(t){this.va.commentMargin!==t&&(s.j(t,"number",E,"commentMargin"),this.va.commentMargin=t,this.J())}),s.defineProperty(E,{setsPortSpot:"setsPortSpot"},function(){return this.va.setsPortSpot},function(t){this.va.setsPortSpot!==t&&(s.j(t,"boolean",E,"setsPortSpot"),this.va.setsPortSpot=t,this.J())}),s.defineProperty(E,{portSpot:"portSpot"},function(){return this.va.portSpot},function(t){s.G(t,P,E,"portSpot"),this.va.portSpot.L(t)||(this.va.portSpot=t,this.J())}),s.defineProperty(E,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.va.setsChildPortSpot},function(t){this.va.setsChildPortSpot!==t&&(s.j(t,"boolean",E,"setsChildPortSpot"),this.va.setsChildPortSpot=t,this.J())}),s.defineProperty(E,{childPortSpot:"childPortSpot"},function(){return this.va.childPortSpot},function(t){s.G(t,P,E,"childPortSpot"),this.va.childPortSpot.L(t)||(this.va.childPortSpot=t,this.J())}),s.defineProperty(E,{CK:"alternateSorting"},function(){return this.wa.sorting},function(t){this.wa.sorting!==t&&(s.ob(t,E,E,"alternateSorting"),t===ku||t===Kf||t===Uf||Jf)&&(this.wa.sorting=t,this.J())}),s.defineProperty(E,{qK:"alternateComparer"},function(){return this.wa.comparer},function(t){this.wa.comparer!==t&&(s.j(t,"function",E,"alternateComparer"),this.wa.comparer=t,this.J())}),s.defineProperty(E,{kK:"alternateAngle"},function(){return this.wa.angle},function(t){this.wa.angle!==t&&(s.j(t,"number",E,"alternateAngle"),t===0||t===90||t===180||t===270)&&(this.wa.angle=t,this.J())}),s.defineProperty(E,{jK:"alternateAlignment"},function(){return this.wa.alignment},function(t){this.wa.alignment!==t&&(s.ob(t,E,E,"alternateAlignment"),this.wa.alignment=t,this.J())}),s.defineProperty(E,{uK:"alternateNodeIndent"},function(){return this.wa.nodeIndent},function(t){this.wa.nodeIndent!==t&&(s.j(t,"number",E,"alternateNodeIndent"),0<=t&&(this.wa.nodeIndent=t,this.J()))}),s.defineProperty(E,{vK:"alternateNodeIndentPastParent"},function(){return this.wa.nodeIndentPastParent},function(t){this.wa.nodeIndentPastParent!==t&&(s.j(t,"number",E,"alternateNodeIndentPastParent"),0<=t&&1>=t&&(this.wa.nodeIndentPastParent=t,this.J()))}),s.defineProperty(E,{wK:"alternateNodeSpacing"},function(){return this.wa.nodeSpacing},function(t){this.wa.nodeSpacing!==t&&(s.j(t,"number",E,"alternateNodeSpacing"),this.wa.nodeSpacing=t,this.J())}),s.defineProperty(E,{sK:"alternateLayerSpacing"},function(){return this.wa.layerSpacing},function(t){this.wa.layerSpacing!==t&&(s.j(t,"number",E,"alternateLayerSpacing"),this.wa.layerSpacing=t,this.J())}),s.defineProperty(E,{tK:"alternateLayerSpacingParentOverlap"},function(){return this.wa.layerSpacingParentOverlap},function(t){this.wa.layerSpacingParentOverlap!==t&&(s.j(t,"number",E,"alternateLayerSpacingParentOverlap"),0<=t&&1>=t&&(this.wa.layerSpacingParentOverlap=t,this.J()))}),s.defineProperty(E,{pK:"alternateCompaction"},function(){return this.wa.compaction},function(t){this.wa.compaction!==t&&(s.ob(t,E,E,"alternateCompaction"),t===Kp||t===Yf)&&(this.wa.compaction=t,this.J())}),s.defineProperty(E,{lK:"alternateBreadthLimit"},function(){return this.wa.breadthLimit},function(t){this.wa.breadthLimit!==t&&(s.j(t,"number",E,"alternateBreadthLimit"),0<=t&&(this.wa.breadthLimit=t,this.J()))}),s.defineProperty(E,{zK:"alternateRowSpacing"},function(){return this.wa.rowSpacing},function(t){this.wa.rowSpacing!==t&&(s.j(t,"number",E,"alternateRowSpacing"),this.wa.rowSpacing=t,this.J())}),s.defineProperty(E,{yK:"alternateRowIndent"},function(){return this.wa.rowIndent},function(t){this.wa.rowIndent!==t&&(s.j(t,"number",E,"alternateRowIndent"),0<=t&&(this.wa.rowIndent=t,this.J()))}),s.defineProperty(E,{oK:"alternateCommentSpacing"},function(){return this.wa.commentSpacing},function(t){this.wa.commentSpacing!==t&&(s.j(t,"number",E,"alternateCommentSpacing"),this.wa.commentSpacing=t,this.J())}),s.defineProperty(E,{nK:"alternateCommentMargin"},function(){return this.wa.commentMargin},function(t){this.wa.commentMargin!==t&&(s.j(t,"number",E,"alternateCommentMargin"),this.wa.commentMargin=t,this.J())}),s.defineProperty(E,{BK:"alternateSetsPortSpot"},function(){return this.wa.setsPortSpot},function(t){this.wa.setsPortSpot!==t&&(s.j(t,"boolean",E,"alternateSetsPortSpot"),this.wa.setsPortSpot=t,this.J())}),s.defineProperty(E,{xK:"alternatePortSpot"},function(){return this.wa.portSpot},function(t){s.G(t,P,E,"alternatePortSpot"),this.wa.portSpot.L(t)||(this.wa.portSpot=t,this.J())}),s.defineProperty(E,{AK:"alternateSetsChildPortSpot"},function(){return this.wa.setsChildPortSpot},function(t){this.wa.setsChildPortSpot!==t&&(s.j(t,"boolean",E,"alternateSetsChildPortSpot"),this.wa.setsChildPortSpot=t,this.J())}),s.defineProperty(E,{mK:"alternateChildPortSpot"},function(){return this.wa.childPortSpot},function(t){s.G(t,P,E,"alternateChildPortSpot"),this.wa.childPortSpot.L(t)||(this.wa.childPortSpot=t,this.J())});var Hp;E.PathDefault=Hp=s.p(E,"PathDefault",-1);var Wr;E.PathDestination=Wr=s.p(E,"PathDestination",0);var el;E.PathSource=el=s.p(E,"PathSource",1);var ku;E.SortingForwards=ku=s.p(E,"SortingForwards",10);var Kf;E.SortingReverse=Kf=s.p(E,"SortingReverse",11);var Uf;E.SortingAscending=Uf=s.p(E,"SortingAscending",12);var Jf;E.SortingDescending=Jf=s.p(E,"SortingDescending",13);var Su;E.AlignmentCenterSubtrees=Su=s.p(E,"AlignmentCenterSubtrees",20);var So;E.AlignmentCenterChildren=So=s.p(E,"AlignmentCenterChildren",21);var $r;E.AlignmentStart=$r=s.p(E,"AlignmentStart",22);var _r;E.AlignmentEnd=_r=s.p(E,"AlignmentEnd",23);var es;E.AlignmentBus=es=s.p(E,"AlignmentBus",24);var br;E.AlignmentBusBranching=br=s.p(E,"AlignmentBusBranching",25);var rs;E.AlignmentTopLeftBus=rs=s.p(E,"AlignmentTopLeftBus",26);var No;E.AlignmentBottomRightBus=No=s.p(E,"AlignmentBottomRightBus",27);var Kp;E.CompactionNone=Kp=s.p(E,"CompactionNone",30);var Yf;E.CompactionBlock=Yf=s.p(E,"CompactionBlock",31);var Up;E.StyleLayered=Up=s.p(E,"StyleLayered",40);var nv;E.StyleLastParents=nv=s.p(E,"StyleLastParents",41);var ev;E.StyleAlternating=ev=s.p(E,"StyleAlternating",42);var rv;E.StyleRootOnly=rv=s.p(E,"StyleRootOnly",43);var Jp;E.ArrangementVertical=Jp=s.p(E,"ArrangementVertical",50);var ov;E.ArrangementHorizontal=ov=s.p(E,"ArrangementHorizontal",51);var Yp;E.ArrangementFixedRoots=Yp=s.p(E,"ArrangementFixedRoots",52);var sv;E.LayerIndividual=sv=s.p(E,"LayerIndividual",60);var hv;E.LayerSiblings=hv=s.p(E,"LayerSiblings",61);var qp;E.LayerUniform=qp=s.p(E,"LayerUniform",62);function qf(){At.call(this)}s.La(qf,At),s.ga("TreeNetwork",qf),qf.prototype.createVertex=function(){return new Wi},qf.prototype.createEdge=function(){return new Zf};function Wi(){It.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.pa=new F(0,0),this.kb=new lt(0,0),this.Oa=new F(0,0),this.Cq=this.Bq=this.BJ=!1,this.Xu=this.Cu=null,this.sorting=ku,this.comparer=Fc,this.angle=0,this.alignment=So,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=Yf,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=cn,this.setsChildPortSpot=!0,this.childPortSpot=cn}s.La(Wi,It),s.ga("TreeVertex",Wi),Wi.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},s.u(Wi,{tn:"childrenCount"},function(){return this.children.length}),s.defineProperty(Wi,{NL:"relativePosition"},function(){return this.pa},function(t){this.pa.set(t)}),s.defineProperty(Wi,{ZL:"subtreeSize"},function(){return this.kb},function(t){this.kb.set(t)}),s.defineProperty(Wi,{YL:"subtreeOffset"},function(){return this.Oa},function(t){this.Oa.set(t)});function Zf(){Vi.call(this),this.$s=new F(0,0)}s.La(Zf,Vi),s.ga("TreeEdge",Zf),Zf.prototype.commit=function(){var t=this.link;if(t!==null&&!t.hm){var i=this.network.Ub,n=null,e=null;switch(i.Of){case Wr:n=this.fromVertex,e=this.toVertex;break;case el:n=this.toVertex,e=this.fromVertex;break;default:s.k("Unhandled path value "+i.Of.toString())}if(n!==null&&e!==null)if(i=this.$s,i.x!==0||i.y!==0||n.BJ){var e=n.eb,r=nr(n),o=Tu(n),h=n.rowSpacing;t.jo();var l=t.nf===De,u=t.ac,f=0,a,p;if(t.tm(),u||l){for(f=2;4<t.qa;)t.eG(2);a=t.l(1),p=t.l(2)}else{for(f=1;3<t.qa;)t.eG(1);a=t.l(0),p=t.l(t.qa-1)}var y=t.l(t.qa-1),c=0;r===0?(n.alignment===_r?(c=e.bottom+i.y,i.y===0&&a.y>y.y+n.rowIndent&&(c=Math.min(c,Math.max(a.y,c-ns(n))))):n.alignment===$r?(c=e.top+i.y,i.y===0&&a.y<y.y-n.rowIndent&&(c=Math.max(c,Math.min(a.y,c+ns(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.top-n.Oa.y+i.y:e.y+e.height/2+i.y,l?(t.w(f,a.x,c),f++,t.w(f,e.right+o,c),f++,t.w(f,e.right+o+(i.x-h)/3,c),f++,t.w(f,e.right+o+2*(i.x-h)/3,c),f++,t.w(f,e.right+o+(i.x-h),c),f++,t.w(f,p.x,c)):(u&&(t.w(f,e.right+o/2,a.y),f++),t.w(f,e.right+o/2,c),f++,t.w(f,e.right+o+i.x-(u?h/2:h),c),f++,u&&t.w(f,t.l(f-1).x,p.y))):r===90?(n.alignment===_r?(c=e.right+i.x,i.x===0&&a.x>y.x+n.rowIndent&&(c=Math.min(c,Math.max(a.x,c-ns(n))))):n.alignment===$r?(c=e.left+i.x,i.x===0&&a.x<y.x-n.rowIndent&&(c=Math.max(c,Math.min(a.x,c+ns(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.left-n.Oa.x+i.x:e.x+e.width/2+i.x,l?(t.w(f,c,a.y),f++,t.w(f,c,e.bottom+o),f++,t.w(f,c,e.bottom+o+(i.y-h)/3),f++,t.w(f,c,e.bottom+o+2*(i.y-h)/3),f++,t.w(f,c,e.bottom+o+(i.y-h)),f++,t.w(f,c,p.y)):(u&&(t.w(f,a.x,e.bottom+o/2),f++),t.w(f,c,e.bottom+o/2),f++,t.w(f,c,e.bottom+o+i.y-(u?h/2:h)),f++,u&&t.w(f,p.x,t.l(f-1).y))):r===180?(n.alignment===_r?(c=e.bottom+i.y,i.y===0&&a.y>y.y+n.rowIndent&&(c=Math.min(c,Math.max(a.y,c-ns(n))))):n.alignment===$r?(c=e.top+i.y,i.y===0&&a.y<y.y-n.rowIndent&&(c=Math.max(c,Math.min(a.y,c+ns(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.top-n.Oa.y+i.y:e.y+e.height/2+i.y,l?(t.w(f,a.x,c),f++,t.w(f,e.left-o,c),f++,t.w(f,e.left-o+(i.x+h)/3,c),f++,t.w(f,e.left-o+2*(i.x+h)/3,c),f++,t.w(f,e.left-o+(i.x+h),c),f++,t.w(f,p.x,c)):(u&&(t.w(f,e.left-o/2,a.y),f++),t.w(f,e.left-o/2,c),f++,t.w(f,e.left-o+i.x+(u?h/2:h),c),f++,u&&t.w(f,t.l(f-1).x,p.y))):r===270?(n.alignment===_r?(c=e.right+i.x,i.x===0&&a.x>y.x+n.rowIndent&&(c=Math.min(c,Math.max(a.x,c-ns(n))))):n.alignment===$r?(c=e.left+i.x,i.x===0&&a.x<y.x-n.rowIndent&&(c=Math.max(c,Math.min(a.x,c+ns(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.left-n.Oa.x+i.x:e.x+e.width/2+i.x,l?(t.w(f,c,a.y),f++,t.w(f,c,e.top-o),f++,t.w(f,c,e.top-o+(i.y+h)/3),f++,t.w(f,c,e.top-o+2*(i.y+h)/3),f++,t.w(f,c,e.top-o+(i.y+h)),f++,t.w(f,c,p.y)):(u&&(t.w(f,a.x,e.top-o/2),f++),t.w(f,c,e.top-o/2),f++,t.w(f,c,e.top-o+i.y+(u?h/2:h)),f++,u&&t.w(f,p.x,t.l(f-1).y))):s.k("Invalid angle "+r),t.qj()}else r=n,o=e,t=this.link,n=nr(r),n!==nr(o)&&(i=Tu(r),e=r.eb,r=o.eb,n===0&&r.left-e.right<i+1||n===90&&r.top-e.bottom<i+1||n===180&&e.left-r.right<i+1||n===270&&e.top-r.bottom<i+1||(t.jo(),r=t.nf===De,o=t.ac,h=Cs(this.fromVertex.alignment),t.tm(),n===0?(n=e.right+i/2,r?t.qa===4&&(i=t.l(3).y,t.ca(1,n-20,t.l(1).y),t.w(2,n-20,i),t.w(3,n,i),t.w(4,n+20,i),t.ca(5,t.l(5).x,i)):o?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,n,t.l(2).y),t.ca(3,n,t.l(3).y)):t.qa===4?t.w(2,n,t.l(2).y):t.qa===3?t.ca(1,n,t.l(2).y):t.qa===2&&t.w(1,n,t.l(1).y)):n===90?(i=e.bottom+i/2,r?t.qa===4&&(n=t.l(3).x,t.ca(1,t.l(1).x,i-20),t.w(2,n,i-20),t.w(3,n,i),t.w(4,n,i+20),t.ca(5,n,t.l(5).y)):o?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,t.l(2).x,i),t.ca(3,t.l(3).x,i)):t.qa===4?t.w(2,t.l(2).x,i):t.qa===3?t.ca(1,t.l(2).x,i):t.qa===2&&t.w(1,t.l(1).x,i)):n===180?(n=e.left-i/2,r?t.qa===4&&(i=t.l(3).y,t.ca(1,n+20,t.l(1).y),t.w(2,n+20,i),t.w(3,n,i),t.w(4,n-20,i),t.ca(5,t.l(5).x,i)):o?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,n,t.l(2).y),t.ca(3,n,t.l(3).y)):t.qa===4?t.w(2,n,t.l(2).y):t.qa===3?t.ca(1,n,t.l(2).y):t.qa===2&&t.w(1,n,t.l(1).y)):n===270&&(i=e.top-i/2,r?t.qa===4&&(n=t.l(3).x,t.ca(1,t.l(1).x,i+20),t.w(2,n,i+20),t.w(3,n,i),t.w(4,n,i-20),t.ca(5,n,t.l(5).y)):o?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,t.l(2).x,i),t.ca(3,t.l(3).x,i)):t.qa===4?t.w(2,t.l(2).x,i):t.qa===3?t.ca(1,t.l(2).x,i):t.qa===2&&t.w(1,t.l(1).x,i)),t.qj()))}},s.defineProperty(Zf,{ML:"relativePoint"},function(){return this.$s},function(t){this.$s.set(t)});function mh(){N.call(this),this.We=null}s.La(mh,N),mh.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.element=this.We.cloneNode(!0)},mh.prototype.toString=function(){return"HTMLHost("+this.We.toString()+")#"+s.Pd(this)},mh.prototype.Ik=function(t,i){var n=this.We;if(n!==null){var e=this.Ya(Tt);e.x-=this.U.width/2,e.y-=this.U.height/2,e.x-=this.U.x,e.y-=this.U.y;var e=i.Dy(e),r=i.tj;r===null||r.contains(n)||r.appendChild(n),r=this.transform,n.style.transform="matrix("+r.m11+","+r.m12+","+r.m21+","+r.m22+","+r.dx+","+r.dy+")",n.style.transformOrigin="0 0",r=e.y,n.style.left=e.x+"px",n.style.top=r+"px"}},mh.prototype.Rn=function(t,i,n,e){var r=this.Da;isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(i=r.height);var r=this.Hf,o=this.si;n=Math.max(n,o.width),e=Math.max(e,o.height),t=Math.min(r.width,t),i=Math.min(r.height,i),t=Math.max(n,t),i=Math.max(e,i),n=this.We,n!==null&&(i=n.getBoundingClientRect(),t=i.width,i=i.height),Ko(this.Nc,t,i),Qr(this,0,0,t,i)},mh.prototype.pj=function(t,i,n,e){Oa(this,t,i,n,e)},s.u(mh,{Ja:"naturalBounds"},function(){return this.Nc}),s.defineProperty(mh,{element:"element"},function(){return this.We},function(t){var i=this.We;i!==t&&(t instanceof HTMLElement||s.k("HTMLHost.element must be an instance of Element."),this.We=t,t.className="HTMLHost",this.h("element",i,t),this.oa())}),ke.version="1.8.38",q&&(q.go&&(s.trace("WARNING: a `go` object on the window is already defined."),q.go.version&&s.trace("Old GoJS go object loaded: "+q.go.version+". Replaced with version: "+ke.version)),q.module&&typeof q.module=="object"&&typeof q.module.exports=="object"?q.module.exports=ke:q.define&&typeof q.define=="function"&&q.define.amd?(q.go=ke,q.define(ke)):q.go=ke),Gn.exports=ke})(window)})(ux);var fi=ux.exports;function Lw(){const Gn=fi.GraphObject.make;let q=Gn(fi.Diagram,"myDiagramDiv",{"toolManager.hoverDelay":100,allowCopy:!1,layout:Gn(fi.TreeLayout,{angle:90,nodeSpacing:10,layerSpacing:40,layerStyle:fi.TreeLayout.LayerUniform})});var B="#90CAF9",ke="#F48FB1";q.add(Gn(fi.Part,"Table",{position:new fi.Point(300,10),selectable:!1},Gn(fi.TextBlock,"Key",{row:0,font:"700 14px Droid Serif, sans-serif"}),Gn(fi.Panel,"Horizontal",{row:1,alignment:fi.Spot.Left},Gn(fi.Shape,"Rectangle",{desiredSize:new fi.Size(30,30),fill:B,margin:5}),Gn(fi.TextBlock,"Males",{font:"700 13px Droid Serif, sans-serif"})),Gn(fi.Panel,"Horizontal",{row:2,alignment:fi.Spot.Left},Gn(fi.Shape,"Rectangle",{desiredSize:new fi.Size(30,30),fill:ke,margin:5}),Gn(fi.TextBlock,"Females",{font:"700 13px Droid Serif, sans-serif"}))));function s(Pi){var Zs="";return Zs+="Born: "+Pi.birthYear,Pi.deathYear!==void 0&&(Zs+=`
Died: `+Pi.deathYear),Pi.reign!==void 0&&(Zs+=`
Reign: `+Pi.reign),Zs}var Je=Gn("ToolTip",{"Border.fill":"whitesmoke","Border.stroke":"black"},Gn(fi.TextBlock,{font:"bold 8pt Helvetica, bold Arial, sans-serif",wrap:fi.TextBlock.WrapFit,margin:5},new fi.Binding("text","",s)));function fo(Pi){return Pi==="M"?B:Pi==="F"?ke:"orange"}q.nodeTemplate=Gn(fi.Node,"Auto",{deletable:!1,toolTip:Je},new fi.Binding("text","name"),Gn(fi.Shape,"Rectangle",{fill:"lightgray",stroke:null,strokeWidth:0,stretch:fi.GraphObject.Fill,alignment:fi.Spot.Center},new fi.Binding("fill","gender",fo)),Gn(fi.TextBlock,{font:"700 12px Droid Serif, sans-serif",textAlign:"center",margin:10,maxSize:new fi.Size(80,NaN)},new fi.Binding("text","name"))),q.linkTemplate=Gn(fi.Link,{routing:fi.Link.Orthogonal,corner:5,selectable:!1},Gn(fi.Shape,{strokeWidth:3,stroke:"#424242"}));var Ju=[{key:0,name:"George V",gender:"M",birthYear:"1865",deathYear:"1936",reign:"1910-1936"},{key:1,parent:0,name:"Edward VIII",gender:"M",birthYear:"1894",deathYear:"1972",reign:"1936"},{key:2,parent:0,name:"George VI",gender:"M",birthYear:"1895",deathYear:"1952",reign:"1936-1952"},{key:7,parent:2,name:"Elizabeth II",gender:"F",birthYear:"1926",reign:"1952-"},{key:16,parent:7,name:"Charles, Prince of Wales",gender:"M",birthYear:"1948"},{key:38,parent:16,name:"Prince William",gender:"M",birthYear:"1982"},{key:39,parent:16,name:"Prince Harry of Wales",gender:"M",birthYear:"1984"},{key:17,parent:7,name:"Anne, Princess Royal",gender:"F",birthYear:"1950"},{key:40,parent:17,name:"Peter Phillips",gender:"M",birthYear:"1977"},{key:82,parent:40,name:"Savannah Phillips",gender:"F",birthYear:"2010"},{key:41,parent:17,name:"Zara Phillips",gender:"F",birthYear:"1981"},{key:18,parent:7,name:"Prince Andrew",gender:"M",birthYear:"1960"},{key:42,parent:18,name:"Princess Beatrice of York",gender:"F",birthYear:"1988"},{key:43,parent:18,name:"Princess Eugenie of York",gender:"F",birthYear:"1990"},{key:19,parent:7,name:"Prince Edward",gender:"M",birthYear:"1964"},{key:44,parent:19,name:"Lady Louise Windsor",gender:"F",birthYear:"2003"},{key:45,parent:19,name:"James, Viscount Severn",gender:"M",birthYear:"2007"},{key:8,parent:2,name:"Princess Margaret",gender:"F",birthYear:"1930",deathYear:"2002"},{key:20,parent:8,name:"David Armstrong-Jones",gender:"M",birthYear:"1961"},{key:21,parent:8,name:"Lady Sarah Chatto",gender:"F",birthYear:"1964"},{key:46,parent:21,name:"Samuel Chatto",gender:"M",birthYear:"1996"},{key:47,parent:21,name:"Arthur Chatto",gender:"M",birthYear:"1999"},{key:3,parent:0,name:"Mary, Princess Royal",gender:"F",birthYear:"1897",deathYear:"1965"},{key:9,parent:3,name:"George Lascelles",gender:"M",birthYear:"1923",deathYear:"2011"},{key:22,parent:9,name:"David Lascelles",gender:"M",birthYear:"1950"},{key:48,parent:22,name:"Emily Shard",gender:"F",birthYear:"1975"},{key:49,parent:22,name:"Benjamin Lascelles",gender:"M",birthYear:"1978"},{key:50,parent:22,name:"Alexander Lascelles",gender:"M",birthYear:"1980"},{key:51,parent:22,name:"Edward Lascelles",gender:"M",birthYear:"1982"},{key:23,parent:9,name:"James Lascelles",gender:"M",birthYear:"1953"},{key:52,parent:23,name:"Sophie Lascelles",gender:"F",birthYear:"1973"},{key:53,parent:23,name:"Rowan Lascelles",gender:"M",birthYear:"1977"},{key:54,parent:23,name:"Tanit Lascelles",gender:"F",birthYear:"1981"},{key:55,parent:23,name:"Tewa Lascelles",gender:"M",birthYear:"1985"},{key:24,parent:9,name:"Jeremy Lascelles",gender:"M",birthYear:"1955"},{key:56,parent:24,name:"Thomas Lascelles",gender:"M",birthYear:"1982"},{key:57,parent:24,name:"Ellen Lascelles",gender:"F",birthYear:"1984"},{key:58,parent:24,name:"Amy Lascelles",gender:"F",birthYear:"1986"},{key:59,parent:24,name:"Tallulah Lascelles",gender:"F",birthYear:"2005"},{key:25,parent:9,name:"Mark Lascelles",gender:"M",birthYear:"1964"},{key:60,parent:25,name:"Charlotte Lascelles",gender:"F",birthYear:"1996"},{key:61,parent:25,name:"Imogen Lascelles",gender:"F",birthYear:"1998"},{key:62,parent:25,name:"Miranda Lascelles",gender:"F",birthYear:"2000"},{key:10,parent:3,name:"Gerald Lascelles",gender:"M",birthYear:"1924",deathYear:"1998"},{key:26,parent:10,name:"Henry Lascelles",gender:"M",birthYear:"1953"},{key:63,parent:26,name:"Maximilian Lascelles",gender:"M",birthYear:"1991"},{key:27,parent:10,name:"Martin David Lascelles",gender:"M",birthYear:"1962"},{key:64,parent:27,name:"Alexander Lascelles",gender:"M",birthYear:"2002"},{key:4,parent:0,name:"Prince Henry",gender:"M",birthYear:"1900",deathYear:"1974"},{key:11,parent:4,name:"Prince William of Gloucester",gender:"M",birthYear:"1941",deathYear:"1972"},{key:12,parent:4,name:"Prince Richard",gender:"M",birthYear:"1944"},{key:28,parent:12,name:"Alexander Windsor",gender:"M",birthYear:"1974"},{key:65,parent:28,name:"Xan Windsor",gender:"M",birthYear:"2007"},{key:66,parent:28,name:"Lady Cosima Windsor",gender:"F",birthYear:"2010"},{key:29,parent:12,name:"Lady Davina Lewis",gender:"F",birthYear:"1977"},{key:67,parent:29,name:"Senna Lewis",gender:"F",birthYear:"2010"},{key:30,parent:12,name:"Lady Rose Gilman",gender:"F",birthYear:"1980"},{key:68,parent:30,name:"Lyla Gilman",gender:"F",birthYear:"2010"},{key:5,parent:0,name:"Prince George",gender:"M",birthYear:"1902",deathYear:"1942"},{key:13,parent:5,name:"Prince Edward",gender:"M",birthYear:"1935"},{key:31,parent:13,name:"George Windsor",gender:"M",birthYear:"1962"},{key:69,parent:31,name:"Edward Windsor",gender:"M",birthYear:"1988"},{key:70,parent:31,name:"Lady Marina-Charlotte Windsor",gender:"F",birthYear:"1992"},{key:71,parent:31,name:"Lady Amelia Windsor",gender:"F",birthYear:"1995"},{key:32,parent:13,name:"Lady Helen Taylor",gender:"F",birthYear:"1964"},{key:72,parent:32,name:"Columbus Taylor",gender:"M",birthYear:"1994"},{key:73,parent:32,name:"Cassius Taylor",gender:"M",birthYear:"1996"},{key:74,parent:32,name:"Eloise Taylor",gender:"F",birthYear:"2003"},{key:75,parent:32,name:"Estella Taylor",gender:"F",birthYear:"2004"},{key:33,parent:13,name:"Lord Nicholas Windsor",gender:"M",birthYear:"1970"},{key:76,parent:33,name:"Albert Windsor",gender:"M",birthYear:"2007"},{key:77,parent:33,name:"Leopold Windsor",gender:"M",birthYear:"2009"},{key:14,parent:5,name:"Princess Alexandra",gender:"F",birthYear:"1936"},{key:34,parent:14,name:"James Ogilvy",gender:"M",birthYear:"1964"},{key:78,parent:34,name:"Flora Ogilvy",gender:"F",birthYear:"1994"},{key:79,parent:34,name:"Alexander Ogilvy",gender:"M",birthYear:"1996"},{key:35,parent:14,name:"Marina Ogilvy",gender:"F",birthYear:"1966"},{key:80,parent:35,name:"Zenouska Mowatt",gender:"F",birthYear:"1990"},{key:81,parent:35,name:"Christian Mowatt",gender:"M",birthYear:"1993"},{key:15,parent:5,name:"Prince Michael of Kent",gender:"M",birthYear:"1942"},{key:36,parent:15,name:"Lord Frederick Windsor",gender:"M",birthYear:"1979"},{key:37,parent:15,name:"Lady Gabriella Windsor",gender:"F",birthYear:"1981"},{key:6,parent:0,name:"Prince John",gender:"M",birthYear:"1905",deathYear:"1919"}];q.model=new fi.TreeModel(Ju)}window.addEventListener("DOMContentLoaded",Lw);
//# sourceMappingURL=index.js.map
